/*
 * jQuery JavaScript Library v1.7.2
 * http://jquery.com/
 *
 * Copyright 2011, John Resig
 * Released under the the MIT License.
 * http://jquery.org/license
 *
 * Includes Sizzle.js
 * http://sizzlejs.com/
 * Copyright 2011, The Dojo Foundation
 * Released under the MIT and BSD Licenses.
 *
 * Date: Mon Nov 21 21:11:03 2011 -0500
 */
(function(bp,bo){var A=bp.document,ad=bp.navigator,ac=bp.location;var Z=(function(){var bD=function(b1,b0){return new bD.fn.init(b1,b0,bM);},bv=bp.jQuery,e=bp.$,bM,bF=/^(?:[^#<]*(<[\w\W]+>)[^>]*$|#([\w\-]*)$)/,bL=/\S/,bX=/^\s+/,bY=/\s+$/,bO=/^<(\w+)\s*\/?>(?:<\/\1>)?$/,bQ=/^[\],:{}\s]*$/,bR=/\\(?:["\\\/bfnrt]|u[0-9a-fA-F]{4})/g,bS=/"[^"\\\n\r]*"|true|false|null|-?\d+(?:\.\d*)?(?:[eE][+\-]?\d+)?/g,bP=/(?:^|:|,)(?:\s*\[)+/g,bT=/(webkit)[ \/]([\w.]+)/,bN=/(opera)(?:.*version)?[ \/]([\w.]+)/,bJ=/(msie) ([\w.]+)/,bI=/(mozilla)(?:.*? rv:([\w.]+))?/,bG=/-([a-z]|[0-9])/ig,bK=/^-ms-/,bA=function(b0,b1){return(b1+"").toUpperCase();},bZ=ad.userAgent,bw,bH,by,bV=Object.prototype.toString,bB=Object.prototype.hasOwnProperty,bE=Array.prototype.push,bU=Array.prototype.slice,bW=String.prototype.trim,bC=Array.prototype.indexOf,bx={};bD.fn=bD.prototype={constructor:bD,init:function(b6,b0,b5){var b3,b2,b4,b1;if(!b6){return this;}if(b6.nodeType){this.context=this[0]=b6;this.length=1;return this;}if(b6==="body"&&!b0&&A.body){this.context=A;this[0]=A.body;this.selector=b6;this.length=1;return this;}if(typeof b6==="string"){if(b6.charAt(0)==="<"&&b6.charAt(b6.length-1)===">"&&b6.length>=3){b3=[null,b6,null];}else{b3=bF.exec(b6);}if(b3&&(b3[1]||!b0)){if(b3[1]){b0=b0 instanceof bD?b0[0]:b0;b1=(b0?b0.ownerDocument||b0:A);b4=bO.exec(b6);if(b4){if(bD.isPlainObject(b0)){b6=[A.createElement(b4[1])];bD.fn.attr.call(b6,b0,true);}else{b6=[b1.createElement(b4[1])];}}else{b4=bD.buildFragment([b3[1]],[b1]);b6=(b4.cacheable?bD.clone(b4.fragment):b4.fragment).childNodes;}return bD.merge(this,b6);}else{b2=A.getElementById(b3[2]);if(b2&&b2.parentNode){if(b2.id!==b3[2]){return b5.find(b6);}this.length=1;this[0]=b2;}this.context=A;this.selector=b6;return this;}}else{if(!b0||b0.jquery){return(b0||b5).find(b6);}else{return this.constructor(b0).find(b6);}}}else{if(bD.isFunction(b6)){return b5.ready(b6);}}if(b6.selector!==bo){this.selector=b6.selector;this.context=b6.context;}return bD.makeArray(b6,this);},selector:"",jquery:"1.7.2",length:0,size:function(){return this.length;},toArray:function(){return bU.call(this,0);},get:function(b0){return b0==null?this.toArray():(b0<0?this[this.length+b0]:this[b0]);},pushStack:function(b0,b1,b3){var b2=this.constructor();if(bD.isArray(b0)){bE.apply(b2,b0);}else{bD.merge(b2,b0);}b2.prevObject=this;b2.context=this.context;if(b1==="find"){b2.selector=this.selector+(this.selector?" ":"")+b3;}else{if(b1){b2.selector=this.selector+"."+b1+"("+b3+")";}}return b2;},each:function(b1,b0){return bD.each(this,b1,b0);},ready:function(b0){bD.bindReady();bH.add(b0);return this;},eq:function(b0){b0=+b0;return b0===-1?this.slice(b0):this.slice(b0,b0+1);},first:function(){return this.eq(0);},last:function(){return this.eq(-1);},slice:function(){return this.pushStack(bU.apply(this,arguments),"slice",bU.call(arguments).join(","));},map:function(b0){return this.pushStack(bD.map(this,function(b1,b2){return b0.call(b1,b2,b1);}));},end:function(){return this.prevObject||this.constructor(null);},push:bE,sort:[].sort,splice:[].splice};bD.fn.init.prototype=bD.fn;bD.extend=bD.fn.extend=function(){var b7,b6,b8,b1,b2,b0,b9=arguments[0]||{},b4=1,b5=arguments.length,b3=false;if(typeof b9==="boolean"){b3=b9;b9=arguments[1]||{};b4=2;}if(typeof b9!=="object"&&!bD.isFunction(b9)){b9={};}if(b5===b4){b9=this;--b4;}for(;b4<b5;b4++){if((b7=arguments[b4])!=null){for(b6 in b7){b8=b9[b6];b1=b7[b6];if(b9===b1){continue;}if(b3&&b1&&(bD.isPlainObject(b1)||(b2=bD.isArray(b1)))){if(b2){b2=false;b0=b8&&bD.isArray(b8)?b8:[];}else{b0=b8&&bD.isPlainObject(b8)?b8:{};}b9[b6]=bD.extend(b3,b0,b1);}else{if(b1!==bo){b9[b6]=b1;}}}}}return b9;};bD.extend({noConflict:function(b0){if(bp.$===bD){bp.$=e;}if(b0&&bp.jQuery===bD){bp.jQuery=bv;}return bD;},isReady:false,readyWait:1,holdReady:function(b0){if(b0){bD.readyWait++;}else{bD.ready(true);}},ready:function(b0){if((b0===true&&!--bD.readyWait)||(b0!==true&&!bD.isReady)){if(!A.body){return setTimeout(bD.ready,1);}bD.isReady=true;if(b0!==true&&--bD.readyWait>0){return;}bH.fireWith(A,[bD]);if(bD.fn.trigger){bD(A).trigger("ready").off("ready");}}},bindReady:function(){if(bH){return;}bH=bD.Callbacks("once memory");if(A.readyState==="complete"){return setTimeout(bD.ready,1);}if(A.addEventListener){A.addEventListener("DOMContentLoaded",by,false);bp.addEventListener("load",bD.ready,false);}else{if(A.attachEvent){A.attachEvent("onreadystatechange",by);bp.attachEvent("onload",bD.ready);var b1=false;try{b1=bp.frameElement==null;}catch(b0){}if(A.documentElement.doScroll&&b1){bz();}}}},isFunction:function(b0){return bD.type(b0)==="function";},isArray:Array.isArray||function(b0){return bD.type(b0)==="array";},isWindow:function(b0){return b0&&typeof b0==="object"&&"setInterval" in b0;},isNumeric:function(b0){return !isNaN(parseFloat(b0))&&isFinite(b0);},type:function(b0){return b0==null?String(b0):bx[bV.call(b0)]||"object";},isPlainObject:function(b2){if(!b2||bD.type(b2)!=="object"||b2.nodeType||bD.isWindow(b2)){return false;}try{if(b2.constructor&&!bB.call(b2,"constructor")&&!bB.call(b2.constructor.prototype,"isPrototypeOf")){return false;}}catch(b0){return false;}var b1;for(b1 in b2){}return b1===bo||bB.call(b2,b1);},isEmptyObject:function(b1){for(var b0 in b1){return false;}return true;},error:function(b0){throw new Error(b0);},parseJSON:function(b0){if(typeof b0!=="string"||!b0){return null;}b0=bD.trim(b0);if(bp.JSON&&bp.JSON.parse){return bp.JSON.parse(b0);}if(bQ.test(b0.replace(bR,"@").replace(bS,"]").replace(bP,""))){return(new Function("return "+b0))();}bD.error("Invalid JSON: "+b0);},parseXML:function(b0){var b3,b2;try{if(bp.DOMParser){b2=new DOMParser();b3=b2.parseFromString(b0,"text/xml");}else{b3=new ActiveXObject("Microsoft.XMLDOM");b3.async="false";b3.loadXML(b0);}}catch(b1){b3=bo;}if(!b3||!b3.documentElement||b3.getElementsByTagName("parsererror").length){bD.error("Invalid XML: "+b0);}return b3;},noop:function(){},globalEval:function(b0){if(b0&&bL.test(b0)){(bp.execScript||function(b1){bp["eval"].call(bp,b1);})(b0);}},camelCase:function(b0){return b0.replace(bK,"ms-").replace(bG,bA);},nodeName:function(b0,b1){return b0.nodeName&&b0.nodeName.toUpperCase()===b1.toUpperCase();},each:function(b6,b1,b0){var b5,b2=0,b4=b6.length,b3=b4===bo||bD.isFunction(b6);if(b0){if(b3){for(b5 in b6){if(b1.apply(b6[b5],b0)===false){break;}}}else{for(;b2<b4;){if(b1.apply(b6[b2++],b0)===false){break;}}}}else{if(b3){for(b5 in b6){if(b1.call(b6[b5],b5,b6[b5])===false){break;}}}else{for(;b2<b4;){if(b1.call(b6[b2],b2,b6[b2++])===false){break;}}}}return b6;},trim:bW?function(b0){return b0==null?"":bW.call(b0);}:function(b0){return b0==null?"":b0.toString().replace(bX,"").replace(bY,"");},makeArray:function(b0,b1){var b2=b1||[];if(b0!=null){var b3=bD.type(b0);if(b0.length==null||b3==="string"||b3==="function"||b3==="regexp"||bD.isWindow(b0)){bE.call(b2,b0);}else{bD.merge(b2,b0);}}return b2;},inArray:function(b1,b0,b2){var b3;if(b0){if(bC){return bC.call(b0,b1,b2);}b3=b0.length;b2=b2?b2<0?Math.max(0,b3+b2):b2:0;for(;b2<b3;b2++){if(b2 in b0&&b0[b2]===b1){return b2;}}}return -1;},merge:function(b0,b4){var b1=b0.length,b2=0;if(typeof b4.length==="number"){for(var b3=b4.length;b2<b3;b2++){b0[b1++]=b4[b2];}}else{while(b4[b2]!==bo){b0[b1++]=b4[b2++];}}b0.length=b1;return b0;},grep:function(b1,b0,b3){var b5=[],b6;b3=!!b3;for(var b2=0,b4=b1.length;b2<b4;b2++){b6=!!b0(b1[b2],b2);if(b3!==b6){b5.push(b1[b2]);}}return b5;},map:function(b2,b1,b0){var b8,b5,b7=[],b3=0,b6=b2.length,b4=b2 instanceof bD||b6!==bo&&typeof b6==="number"&&((b6>0&&b2[0]&&b2[b6-1])||b6===0||bD.isArray(b2));if(b4){for(;b3<b6;b3++){b8=b1(b2[b3],b3,b0);if(b8!=null){b7[b7.length]=b8;}}}else{for(b5 in b2){b8=b1(b2[b5],b5,b0);if(b8!=null){b7[b7.length]=b8;}}}return b7.concat.apply([],b7);},guid:1,proxy:function(b2,b1){if(typeof b1==="string"){var b4=b2[b1];b1=b2;b2=b4;}if(!bD.isFunction(b2)){return bo;}var b0=bU.call(arguments,2),b3=function(){return b2.apply(b1,b0.concat(bU.call(arguments)));};b3.guid=b2.guid=b2.guid||b3.guid||bD.guid++;return b3;},access:function(b0,b5,b8,b1,b2,b7){var b6=b0.length;if(typeof b5==="object"){for(var b4 in b5){bD.access(b0,b4,b5[b4],b1,b2,b8);}return b0;}if(b8!==bo){b1=!b7&&b1&&bD.isFunction(b8);for(var b3=0;b3<b6;b3++){b2(b0[b3],b5,b1?b8.call(b0[b3],b3,b2(b0[b3],b5)):b8,b7);}return b0;}return b6?b2(b0[0],b5):bo;},now:function(){return(new Date()).getTime();},uaMatch:function(b1){b1=b1.toLowerCase();var b0=bT.exec(b1)||bN.exec(b1)||bJ.exec(b1)||b1.indexOf("compatible")<0&&bI.exec(b1)||[];return{browser:b0[1]||"",version:b0[2]||"0"};},sub:function(){function b1(b4,b3){return new b1.fn.init(b4,b3);}bD.extend(true,b1,this);b1.superclass=this;b1.fn=b1.prototype=this();b1.fn.constructor=b1;b1.sub=this.sub;b1.fn.init=function b0(b4,b3){if(b3&&b3 instanceof bD&&!(b3 instanceof b1)){b3=b1(b3);}return bD.fn.init.call(this,b4,b3,b2);};b1.fn.init.prototype=b1.fn;var b2=b1(A);return b1;},browser:{}});bD.each("Boolean Number String Function Array Date RegExp Object".split(" "),function(b0,b1){bx["[object "+b1+"]"]=b1.toLowerCase();});bw=bD.uaMatch(bZ);if(bw.browser){bD.browser[bw.browser]=true;bD.browser.version=bw.version;}if(bD.browser.webkit){bD.browser.safari=true;}if(bL.test("\xA0")){bX=/^[\s\xA0]+/;bY=/[\s\xA0]+$/;}bM=bD(A);if(A.addEventListener){by=function(){A.removeEventListener("DOMContentLoaded",by,false);bD.ready();};}else{if(A.attachEvent){by=function(){if(A.readyState==="complete"){A.detachEvent("onreadystatechange",by);bD.ready();}};}}function bz(){if(bD.isReady){return;}try{A.documentElement.doScroll("left");}catch(b0){setTimeout(bz,1);return;}bD.ready();}return bD;})();var H={};function p(e){var bx=H[e]={},bv,bw;e=e.split(/\s+/);for(bv=0,bw=e.length;bv<bw;bv++){bx[e[bv]]=true;}return bx;}Z.Callbacks=function(bA){bA=bA?(H[bA]||p(bA)):{};var bB=[],bE=[],bC,bw,bz,by,bx,e=function(bG){var bI,bJ,bH,bK,bF;for(bI=0,bJ=bG.length;bI<bJ;bI++){bH=bG[bI];bK=Z.type(bH);if(bK==="array"){e(bH);}else{if(bK==="function"){if(!bA.unique||!bD.has(bH)){bB.push(bH);}}}}},bv=function(bG,bF){bF=bF||[];bC=!bA.memory||[bG,bF];bw=true;bx=bz||0;bz=0;by=bB.length;for(;bB&&bx<by;bx++){if(bB[bx].apply(bG,bF)===false&&bA.stopOnFalse){bC=true;break;}}bw=false;if(bB){if(!bA.once){if(bE&&bE.length){bC=bE.shift();bD.fireWith(bC[0],bC[1]);}}else{if(bC===true){bD.disable();}else{bB=[];}}}},bD={add:function(){if(bB){var bF=bB.length;e(arguments);if(bw){by=bB.length;}else{if(bC&&bC!==true){bz=bF;bv(bC[0],bC[1]);}}}return this;},remove:function(){if(bB){var bH=arguments,bF=0,bG=bH.length;for(;bF<bG;bF++){for(var bI=0;bI<bB.length;bI++){if(bH[bF]===bB[bI]){if(bw){if(bI<=by){by--;if(bI<=bx){bx--;}}}bB.splice(bI--,1);if(bA.unique){break;}}}}}return this;},has:function(bF){if(bB){var bG=0,bH=bB.length;for(;bG<bH;bG++){if(bF===bB[bG]){return true;}}}return false;},empty:function(){bB=[];return this;},disable:function(){bB=bE=bC=bo;return this;},disabled:function(){return !bB;},lock:function(){bE=bo;if(!bC||bC===true){bD.disable();}return this;},locked:function(){return !bE;},fireWith:function(bG,bF){if(bE){if(bw){if(!bA.once){bE.push([bG,bF]);}}else{if(!(bA.once&&bC)){bv(bG,bF);}}}return this;},fire:function(){bD.fireWith(this,arguments);return this;},fired:function(){return !!bC;}};return bD;};var bl=[].slice;Z.extend({Deferred:function(bx){var bv=Z.Callbacks("once memory"),bw=Z.Callbacks("once memory"),bA=Z.Callbacks("memory"),bC="pending",bz={resolve:bv,reject:bw,notify:bA},bB={done:bv.add,fail:bw.add,progress:bA.add,state:function(){return bC;},isResolved:bv.fired,isRejected:bw.fired,then:function(bD,bE,bF){e.done(bD).fail(bE).progress(bF);return this;},always:function(){e.done.apply(e,arguments).fail.apply(e,arguments);return this;},pipe:function(bD,bE,bF){return Z.Deferred(function(bG){Z.each({done:[bD,"resolve"],fail:[bE,"reject"],progress:[bF,"notify"]},function(bK,bI){var bJ=bI[0],bH=bI[1],bL;if(Z.isFunction(bJ)){e[bK](function(){bL=bJ.apply(this,arguments);if(bL&&Z.isFunction(bL.promise)){bL.promise().then(bG.resolve,bG.reject,bG.notify);}else{bG[bH+"With"](this===e?bG:this,[bL]);}});}else{e[bK](bG[bH]);}});}).promise();},promise:function(bE){if(bE==null){bE=bB;}else{for(var bD in bB){bE[bD]=bB[bD];}}return bE;}},e=bB.promise({}),by;for(by in bz){e[by]=bz[by].fire;e[by+"With"]=bz[by].fireWith;}e.done(function(){bC="resolved";},bw.disable,bA.lock).fail(function(){bC="rejected";},bv.disable,bA.lock);if(bx){bx.call(e,e);}return e;},when:function(bx){var e=bl.call(arguments,0),by=0,bz=e.length,bD=new Array(bz),bv=bz,bA=bz,bw=bz<=1&&bx&&Z.isFunction(bx.promise)?bx:Z.Deferred(),bC=bw.promise();function bE(bF){return function(bG){e[bF]=arguments.length>1?bl.call(arguments,0):bG;if(!(--bv)){bw.resolveWith(bw,e);}};}function bB(bF){return function(bG){bD[bF]=arguments.length>1?bl.call(arguments,0):bG;bw.notifyWith(bC,bD);};}if(bz>1){for(;by<bz;by++){if(e[by]&&e[by].promise&&Z.isFunction(e[by].promise)){e[by].promise().then(bE(by),bw.reject,bB(by));}else{--bv;}}if(!bv){bw.resolveWith(bw,e);}}else{if(bw!==bx){bw.resolveWith(bw,bz?[bx]:[]);}}return bC;}});Z.support=(function(){var bJ,bw,bv,bI,bH,bE,bG,bC,bK,bB,bA,bD,bF,bx=A.createElement("div"),by=A.documentElement;bx.setAttribute("className","t");bx.innerHTML="   <link/><table></table><a href='/a' style='top:1px;float:left;opacity:.55;'>a</a><input type='checkbox'/>";bw=bx.getElementsByTagName("*");bv=bx.getElementsByTagName("a")[0];if(!bw||!bw.length||!bv){return{};}bI=A.createElement("select");bH=bI.appendChild(A.createElement("option"));bE=bx.getElementsByTagName("input")[0];bJ={leadingWhitespace:(bx.firstChild.nodeType===3),tbody:!bx.getElementsByTagName("tbody").length,htmlSerialize:!!bx.getElementsByTagName("link").length,style:/top/.test(bv.getAttribute("style")),hrefNormalized:(bv.getAttribute("href")==="/a"),opacity:/^0.55/.test(bv.style.opacity),cssFloat:!!bv.style.cssFloat,checkOn:(bE.value==="on"),optSelected:bH.selected,getSetAttribute:bx.className!=="t",enctype:!!A.createElement("form").enctype,html5Clone:A.createElement("nav").cloneNode(true).outerHTML!=="<:nav></:nav>",submitBubbles:true,changeBubbles:true,focusinBubbles:false,deleteExpando:true,noCloneEvent:true,inlineBlockNeedsLayout:false,shrinkWrapBlocks:false,reliableMarginRight:true};bE.checked=true;bJ.noCloneChecked=bE.cloneNode(true).checked;bI.disabled=true;bJ.optDisabled=!bH.disabled;try{delete bx.test;}catch(bz){bJ.deleteExpando=false;}if(!bx.addEventListener&&bx.attachEvent&&bx.fireEvent){bx.attachEvent("onclick",function(){bJ.noCloneEvent=false;});bx.cloneNode(true).fireEvent("onclick");}bE=A.createElement("input");bE.value="t";bE.setAttribute("type","radio");bJ.radioValue=bE.value==="t";bE.setAttribute("checked","checked");bx.appendChild(bE);bC=A.createDocumentFragment();bC.appendChild(bx.lastChild);bJ.checkClone=bC.cloneNode(true).cloneNode(true).lastChild.checked;bJ.appendChecked=bE.checked;bC.removeChild(bE);bC.appendChild(bx);bx.innerHTML="";if(bp.getComputedStyle){bG=A.createElement("div");bG.style.width="0";bG.style.marginRight="0";bx.style.width="2px";bx.appendChild(bG);bJ.reliableMarginRight=(parseInt((bp.getComputedStyle(bG,null)||{marginRight:0}).marginRight,10)||0)===0;}if(bx.attachEvent){for(bD in {submit:1,change:1,focusin:1}){bA="on"+bD;bF=(bA in bx);if(!bF){bx.setAttribute(bA,"return;");bF=(typeof bx[bA]==="function");}bJ[bD+"Bubbles"]=bF;}}bC.removeChild(bx);bC=bI=bH=bG=bx=bE=null;Z(function(){var bM,bQ,bO,bT,bU,bP,bL,bR,bV,bS,bN,e=A.getElementsByTagName("body")[0];if(!e){return;}bL=1;bR="position:absolute;top:0;left:0;width:1px;height:1px;margin:0;";bV="visibility:hidden;border:0;";bS="style='"+bR+"border:5px solid #000;padding:0;'";bN="<div "+bS+"><div></div></div><table "+bS+" cellpadding='0' cellspacing='0'><tr><td></td></tr></table>";bM=A.createElement("div");bM.style.cssText=bV+"width:0;height:0;position:static;top:0;margin-top:"+bL+"px";e.insertBefore(bM,e.firstChild);bx=A.createElement("div");bM.appendChild(bx);bx.innerHTML="<table><tr><td style='padding:0;border:0;display:none'></td><td>t</td></tr></table>";bK=bx.getElementsByTagName("td");bF=(bK[0].offsetHeight===0);bK[0].style.display="";bK[1].style.display="none";bJ.reliableHiddenOffsets=bF&&(bK[0].offsetHeight===0);bx.innerHTML="";bx.style.width=bx.style.paddingLeft="1px";Z.boxModel=bJ.boxModel=bx.offsetWidth===2;if(typeof bx.style.zoom!=="undefined"){bx.style.display="inline";bx.style.zoom=1;bJ.inlineBlockNeedsLayout=(bx.offsetWidth===2);bx.style.display="";bx.innerHTML="<div style='width:4px;'></div>";bJ.shrinkWrapBlocks=(bx.offsetWidth!==2);}bx.style.cssText=bR+bV;bx.innerHTML=bN;bQ=bx.firstChild;bO=bQ.firstChild;bU=bQ.nextSibling.firstChild.firstChild;bP={doesNotAddBorder:(bO.offsetTop!==5),doesAddBorderForTableAndCells:(bU.offsetTop===5)};bO.style.position="fixed";bO.style.top="20px";bP.fixedPosition=(bO.offsetTop===20||bO.offsetTop===15);bO.style.position=bO.style.top="";bQ.style.overflow="hidden";bQ.style.position="relative";bP.subtractsBorderForOverflowNotVisible=(bO.offsetTop===-5);bP.doesNotIncludeMarginInBodyOffset=(e.offsetTop!==bL);e.removeChild(bM);bx=bM=null;Z.extend(bJ,bP);});return bJ;})();var an=/^(?:\{.*\}|\[.*\])$/,aM=/([A-Z])/g;Z.extend({cache:{},uuid:0,expando:"jQuery"+(Z.fn.jquery+Math.random()).replace(/\D/g,""),noData:{embed:true,object:"clsid:D27CDB6E-AE6D-11cf-96B8-444553540000",applet:true},hasData:function(e){e=e.nodeType?Z.cache[e[Z.expando]]:e[Z.expando];return !!e&&!X(e);},data:function(bw,bC,bv,bE){if(!Z.acceptData(bw)){return;}var bD,bG,bF,bz=Z.expando,bx=typeof bC==="string",bB=bw.nodeType,e=bB?Z.cache:bw,by=bB?bw[bz]:bw[bz]&&bz,bA=bC==="events";if((!by||!e[by]||(!bA&&!bE&&!e[by].data))&&bx&&bv===bo){return;}if(!by){if(bB){bw[bz]=by=++Z.uuid;}else{by=bz;}}if(!e[by]){e[by]={};if(!bB){e[by].toJSON=Z.noop;}}if(typeof bC==="object"||typeof bC==="function"){if(bE){e[by]=Z.extend(e[by],bC);}else{e[by].data=Z.extend(e[by].data,bC);}}bD=bG=e[by];if(!bE){if(!bG.data){bG.data={};}bG=bG.data;}if(bv!==bo){bG[Z.camelCase(bC)]=bv;}if(bA&&!bG[bC]){return bD.events;}if(bx){bF=bG[bC];if(bF==null){bF=bG[Z.camelCase(bC)];}}else{bF=bG;}return bF;},removeData:function(bv,bB,bC){if(!Z.acceptData(bv)){return;}var bD,bw,bA,by=Z.expando,bz=bv.nodeType,e=bz?Z.cache:bv,bx=bz?bv[by]:by;if(!e[bx]){return;}if(bB){bD=bC?e[bx]:e[bx].data;if(bD){if(!Z.isArray(bB)){if(bB in bD){bB=[bB];}else{bB=Z.camelCase(bB);if(bB in bD){bB=[bB];}else{bB=bB.split(" ");}}}for(bw=0,bA=bB.length;bw<bA;bw++){delete bD[bB[bw]];}if(!(bC?X:Z.isEmptyObject)(bD)){return;}}}if(!bC){delete e[bx].data;if(!X(e[bx])){return;}}if(Z.support.deleteExpando||!e.setInterval){delete e[bx];}else{e[bx]=null;}if(bz){if(Z.support.deleteExpando){delete bv[by];}else{if(bv.removeAttribute){bv.removeAttribute(by);}else{bv[by]=null;}}}},_data:function(bv,bw,e){return Z.data(bv,bw,e,true);},acceptData:function(e){if(e.nodeName){var bv=Z.noData[e.nodeName.toLowerCase()];if(bv){return !(bv===true||e.getAttribute("classid")!==bv);}}return true;}});Z.fn.extend({data:function(bx,bB){var bA,e,bz,bv=null;if(typeof bx==="undefined"){if(this.length){bv=Z.data(this[0]);if(this[0].nodeType===1&&!Z._data(this[0],"parsedAttrs")){e=this[0].attributes;for(var bw=0,by=e.length;bw<by;bw++){bz=e[bw].name;if(bz.indexOf("data-")===0){bz=Z.camelCase(bz.substring(5));y(this[0],bz,bv[bz]);}}Z._data(this[0],"parsedAttrs",true);}}return bv;}else{if(typeof bx==="object"){return this.each(function(){Z.data(this,bx);});}}bA=bx.split(".");bA[1]=bA[1]?"."+bA[1]:"";if(bB===bo){bv=this.triggerHandler("getData"+bA[1]+"!",[bA[0]]);if(bv===bo&&this.length){bv=Z.data(this[0],bx);bv=y(this[0],bx,bv);}return bv===bo&&bA[1]?this.data(bA[0]):bv;}else{return this.each(function(){var bD=Z(this),bC=[bA[0],bB];bD.triggerHandler("setData"+bA[1]+"!",bC);Z.data(this,bx,bB);bD.triggerHandler("changeData"+bA[1]+"!",bC);});}},removeData:function(e){return this.each(function(){Z.removeData(this,e);});}});function y(bx,by,bv){if(bv===bo&&bx.nodeType===1){var bz="data-"+by.replace(aM,"-$1").toLowerCase();bv=bx.getAttribute(bz);if(typeof bv==="string"){try{bv=bv==="true"?true:bv==="false"?false:bv==="null"?null:Z.isNumeric(bv)?parseFloat(bv):an.test(bv)?Z.parseJSON(bv):bv;}catch(bw){}Z.data(bx,by,bv);}else{bv=bo;}}return bv;}function X(bv){for(var e in bv){if(e==="data"&&Z.isEmptyObject(bv[e])){continue;}if(e!=="toJSON"){return false;}}return true;}function R(bw,bA,bz){var bv=bA+"defer",by=bA+"queue",bx=bA+"mark",e=Z._data(bw,bv);if(e&&(bz==="queue"||!Z._data(bw,by))&&(bz==="mark"||!Z._data(bw,bx))){setTimeout(function(){if(!Z._data(bw,by)&&!Z._data(bw,bx)){Z.removeData(bw,bv,true);e.fire();}},0);}}Z.extend({_mark:function(e,bv){if(e){bv=(bv||"fx")+"mark";Z._data(e,bv,(Z._data(e,bv)||0)+1);}},_unmark:function(bw,bv,by){if(bw!==true){by=bv;bv=bw;bw=false;}if(bv){by=by||"fx";var bx=by+"mark",e=bw?0:((Z._data(bv,bx)||1)-1);if(e){Z._data(bv,bx,e);}else{Z.removeData(bv,bx,true);R(bv,by,"mark");}}},queue:function(bv,bx,e){var bw;if(bv){bx=(bx||"fx")+"queue";bw=Z._data(bv,bx);if(e){if(!bw||Z.isArray(e)){bw=Z._data(bv,bx,Z.makeArray(e));}else{bw.push(e);}}return bw||[];}},dequeue:function(e,by){by=by||"fx";var bx=Z.queue(e,by),bv=bx.shift(),bw={};if(bv==="inprogress"){bv=bx.shift();}if(bv){if(by==="fx"){bx.unshift("inprogress");}Z._data(e,by+".run",bw);bv.call(e,function(){Z.dequeue(e,by);},bw);}if(!bx.length){Z.removeData(e,by+"queue "+by+".run",true);R(e,by,"queue");}}});Z.fn.extend({queue:function(bv,e){if(typeof bv!=="string"){e=bv;bv="fx";}if(e===bo){return Z.queue(this[0],bv);}return this.each(function(){var bw=Z.queue(this,bv,e);if(bv==="fx"&&bw[0]!=="inprogress"){Z.dequeue(this,bv);}});},dequeue:function(e){return this.each(function(){Z.dequeue(this,e);});},delay:function(e,bv){e=Z.fx?Z.fx.speeds[e]||e:e;bv=bv||"fx";return this.queue(bv,function(bx,bw){var by=setTimeout(bx,e);bw.stop=function(){clearTimeout(by);};});},clearQueue:function(e){return this.queue(e||"fx",[]);},promise:function(bE,bA){if(typeof bE!=="string"){bA=bE;bE=bo;}bE=bE||"fx";var bv=Z.Deferred(),bx=this,by=bx.length,e=1,bw=bE+"defer",bB=bE+"queue",bz=bE+"mark",bD;function bC(){if(!(--e)){bv.resolveWith(bx,[bx]);}}while(by--){if((bD=Z.data(bx[by],bw,bo,true)||(Z.data(bx[by],bB,bo,true)||Z.data(bx[by],bz,bo,true))&&Z.data(bx[by],bw,Z.Callbacks("once memory"),true))){e++;bD.add(bC);}}bC();return bv.promise();}});var aq=/[\n\t\r]/g,a6=/\s+/,a1=/\r/g,bc=/^(?:button|input)$/i,ax=/^(?:button|input|object|select|textarea)$/i,at=/^a(?:rea)?$/i,am=/^(?:autofocus|autoplay|async|checked|controls|defer|disabled|hidden|loop|multiple|open|readonly|required|scoped|selected)$/i,N=Z.support.getSetAttribute,ae,j,G;Z.fn.extend({attr:function(e,bv){return Z.access(this,e,bv,true,Z.attr);},removeAttr:function(e){return this.each(function(){Z.removeAttr(this,e);});},prop:function(e,bv){return Z.access(this,e,bv,true,Z.prop);},removeProp:function(e){e=Z.propFix[e]||e;return this.each(function(){try{this[e]=bo;delete this[e];}catch(bv){}});},addClass:function(bB){var bw,by,bz,bx,bA,e,bv;if(Z.isFunction(bB)){return this.each(function(bC){Z(this).addClass(bB.call(this,bC,this.className));});}if(bB&&typeof bB==="string"){bw=bB.split(a6);for(by=0,bz=this.length;by<bz;by++){bx=this[by];if(bx.nodeType===1){if(!bx.className&&bw.length===1){bx.className=bB;}else{bA=" "+bx.className+" ";for(e=0,bv=bw.length;e<bv;e++){if(!~bA.indexOf(" "+bw[e]+" ")){bA+=bw[e]+" ";}}bx.className=Z.trim(bA);}}}}return this;},removeClass:function(bB){var bx,bz,bA,by,bw,e,bv;if(Z.isFunction(bB)){return this.each(function(bC){Z(this).removeClass(bB.call(this,bC,this.className));});}if((bB&&typeof bB==="string")||bB===bo){bx=(bB||"").split(a6);for(bz=0,bA=this.length;bz<bA;bz++){by=this[bz];if(by.nodeType===1&&by.className){if(bB){bw=(" "+by.className+" ").replace(aq," ");for(e=0,bv=bx.length;e<bv;e++){bw=bw.replace(" "+bx[e]+" "," ");}by.className=Z.trim(bw);}else{by.className="";}}}}return this;},toggleClass:function(bx,bv){var bw=typeof bx,e=typeof bv==="boolean";if(Z.isFunction(bx)){return this.each(function(by){Z(this).toggleClass(bx.call(this,by,this.className,bv),bv);});}return this.each(function(){if(bw==="string"){var by,bA=0,bB=Z(this),bC=bv,bz=bx.split(a6);while((by=bz[bA++])){bC=e?bC:!bB.hasClass(by);bB[bC?"addClass":"removeClass"](by);}}else{if(bw==="undefined"||bw==="boolean"){if(this.className){Z._data(this,"__className__",this.className);}this.className=this.className||bx===false?"":Z._data(this,"__className__")||"";}}});},hasClass:function(bx){var e=" "+bx+" ",bv=0,bw=this.length;for(;bv<bw;bv++){if(this[bv].nodeType===1&&(" "+this[bv].className+" ").replace(aq," ").indexOf(e)>-1){return true;}}return false;},val:function(by){var bv,bx,bw,e=this[0];if(!arguments.length){if(e){bv=Z.valHooks[e.nodeName.toLowerCase()]||Z.valHooks[e.type];if(bv&&"get" in bv&&(bx=bv.get(e,"value"))!==bo){return bx;}bx=e.value;return typeof bx==="string"?bx.replace(a1,""):bx==null?"":bx;}return;}bw=Z.isFunction(by);return this.each(function(bz){var bA=Z(this),bB;if(this.nodeType!==1){return;}if(bw){bB=by.call(this,bz,bA.val());}else{bB=by;}if(bB==null){bB="";}else{if(typeof bB==="number"){bB+="";}else{if(Z.isArray(bB)){bB=Z.map(bB,function(bC){return bC==null?"":bC+"";});}}}bv=Z.valHooks[this.nodeName.toLowerCase()]||Z.valHooks[this.type];if(!bv||!("set" in bv)||bv.set(this,bB,"value")===bo){this.value=bB;}});}});Z.extend({valHooks:{option:{get:function(e){var bv=e.attributes.value;return !bv||bv.specified?e.value:e.text;}},select:{get:function(e){var bB,bv,bx,bz,bw=e.selectedIndex,bC=[],bA=e.options,by=e.type==="select-one";if(bw<0){return null;}bv=by?bw:0;bx=by?bw+1:bA.length;for(;bv<bx;bv++){bz=bA[bv];if(bz.selected&&(Z.support.optDisabled?!bz.disabled:bz.getAttribute("disabled")===null)&&(!bz.parentNode.disabled||!Z.nodeName(bz.parentNode,"optgroup"))){bB=Z(bz).val();if(by){return bB;}bC.push(bB);}}if(by&&!bC.length&&bA.length){return Z(bA[bw]).val();}return bC;},set:function(e,bv){var bw=Z.makeArray(bv);Z(e).find("option").each(function(){this.selected=Z.inArray(Z(this).val(),bw)>=0;});if(!bw.length){e.selectedIndex=-1;}return bw;}}},attrFn:{val:true,css:true,html:true,text:true,data:true,width:true,height:true,offset:true},attr:function(e,bw,bB,bz){var bA,bv,bx,by=e.nodeType;if(!e||by===3||by===8||by===2){return;}if(bz&&bw in Z.attrFn){return Z(e)[bw](bB);}if(typeof e.getAttribute==="undefined"){return Z.prop(e,bw,bB);}bx=by!==1||!Z.isXMLDoc(e);if(bx){bw=bw.toLowerCase();bv=Z.attrHooks[bw]||(am.test(bw)?j:ae);}if(bB!==bo){if(bB===null){Z.removeAttr(e,bw);return;}else{if(bv&&"set" in bv&&bx&&(bA=bv.set(e,bB,bw))!==bo){return bA;}else{e.setAttribute(bw,""+bB);return bB;}}}else{if(bv&&"get" in bv&&bx&&(bA=bv.get(e,bw))!==null){return bA;}else{bA=e.getAttribute(bw);return bA===null?bo:bA;}}},removeAttr:function(bv,bA){var bz,e,by,bx,bw=0;if(bA&&bv.nodeType===1){e=bA.toLowerCase().split(a6);bx=e.length;for(;bw<bx;bw++){by=e[bw];if(by){bz=Z.propFix[by]||by;Z.attr(bv,by,"");bv.removeAttribute(N?by:bz);if(am.test(by)&&bz in bv){bv[bz]=false;}}}}},attrHooks:{type:{set:function(e,bw){if(bc.test(e.nodeName)&&e.parentNode){Z.error("type property can't be changed");}else{if(!Z.support.radioValue&&bw==="radio"&&Z.nodeName(e,"input")){var bv=e.value;e.setAttribute("type",bw);if(bv){e.value=bv;}return bw;}}}},value:{get:function(e,bv){if(ae&&Z.nodeName(e,"button")){return ae.get(e,bv);}return bv in e?e.value:null;},set:function(e,bw,bv){if(ae&&Z.nodeName(e,"button")){return ae.set(e,bw,bv);}e.value=bw;}}},propFix:{tabindex:"tabIndex",readonly:"readOnly","for":"htmlFor","class":"className",maxlength:"maxLength",cellspacing:"cellSpacing",cellpadding:"cellPadding",rowspan:"rowSpan",colspan:"colSpan",usemap:"useMap",frameborder:"frameBorder",contenteditable:"contentEditable"},prop:function(e,bw,bA){var bz,bv,bx,by=e.nodeType;if(!e||by===3||by===8||by===2){return;}bx=by!==1||!Z.isXMLDoc(e);if(bx){bw=Z.propFix[bw]||bw;bv=Z.propHooks[bw];}if(bA!==bo){if(bv&&"set" in bv&&(bz=bv.set(e,bA,bw))!==bo){return bz;}else{return(e[bw]=bA);}}else{if(bv&&"get" in bv&&(bz=bv.get(e,bw))!==null){return bz;}else{return e[bw];}}},propHooks:{tabIndex:{get:function(bv){var e=bv.getAttributeNode("tabindex");return e&&e.specified?parseInt(e.value,10):ax.test(bv.nodeName)||at.test(bv.nodeName)&&bv.href?0:bo;}}}});Z.attrHooks.tabindex=Z.propHooks.tabIndex;j={get:function(bv,bw){var e,bx=Z.prop(bv,bw);return bx===true||typeof bx!=="boolean"&&(e=bv.getAttributeNode(bw))&&e.nodeValue!==false?bw.toLowerCase():bo;},set:function(e,bx,bv){var bw;if(bx===false){Z.removeAttr(e,bv);}else{bw=Z.propFix[bv]||bv;if(bw in e){e[bw]=true;}e.setAttribute(bv,bv.toLowerCase());}return bv;}};if(!N){G={name:true,id:true};ae=Z.valHooks.button={get:function(e,bv){var bw;bw=e.getAttributeNode(bv);return bw&&(G[bv]?bw.nodeValue!=="":bw.specified)?bw.nodeValue:bo;},set:function(e,bx,bv){var bw=e.getAttributeNode(bv);if(!bw){bw=A.createAttribute(bv);e.setAttributeNode(bw);}return(bw.nodeValue=bx+"");}};Z.attrHooks.tabindex.set=ae.set;Z.each(["width","height"],function(e,bv){Z.attrHooks[bv]=Z.extend(Z.attrHooks[bv],{set:function(bw,bx){if(bx===""){bw.setAttribute(bv,"auto");return bx;}}});});Z.attrHooks.contenteditable={get:ae.get,set:function(e,bw,bv){if(bw===""){bw="false";}ae.set(e,bw,bv);}};}if(!Z.support.hrefNormalized){Z.each(["href","src","width","height"],function(e,bv){Z.attrHooks[bv]=Z.extend(Z.attrHooks[bv],{get:function(bw){var bx=bw.getAttribute(bv,2);return bx===null?bo:bx;}});});}if(!Z.support.style){Z.attrHooks.style={get:function(e){return e.style.cssText.toLowerCase()||bo;},set:function(e,bv){return(e.style.cssText=""+bv);}};}if(!Z.support.optSelected){Z.propHooks.selected=Z.extend(Z.propHooks.selected,{get:function(e){var bv=e.parentNode;if(bv){bv.selectedIndex;if(bv.parentNode){bv.parentNode.selectedIndex;}}return null;}});}if(!Z.support.enctype){Z.propFix.enctype="encoding";}if(!Z.support.checkOn){Z.each(["radio","checkbox"],function(){Z.valHooks[this]={get:function(e){return e.getAttribute("value")===null?"on":e.value;}};});}Z.each(["radio","checkbox"],function(){Z.valHooks[this]=Z.extend(Z.valHooks[this],{set:function(e,bv){if(Z.isArray(bv)){return(e.checked=Z.inArray(Z(e).val(),bv)>=0);}}});});var az=/^(?:textarea|input|select)$/i,bd=/^([^\.]*)?(?:\.(.+))?$/,aE=/\bhover(\.\S+)?\b/,aI=/^key/,aL=/^(?:mouse|contextmenu)|click/,ay=/^(?:focusinfocus|focusoutblur)$/,aZ=/^(\w*)(?:#([\w\-]+))?(?:\.([\w\-]+))?$/,aj=function(bv){var e=aZ.exec(bv);if(e){e[1]=(e[1]||"").toLowerCase();e[3]=e[3]&&new RegExp("(?:^|\\s)"+e[3]+"(?:\\s|$)");}return e;},ai=function(bv,bw){var e=bv.attributes||{};return((!bw[1]||bv.nodeName.toLowerCase()===bw[1])&&(!bw[2]||(e.id||{}).value===bw[2])&&(!bw[3]||bw[3].test((e["class"]||{}).value)));},S=function(e){return Z.event.special.hover?e:e.replace(aE,"mouseenter$1 mouseleave$1");};Z.event={add:function(bv,bK,bB,e,bF){var bw,bx,by,bH,bI,bJ,bD,bz,bA,bE,bC,bG;if(bv.nodeType===3||bv.nodeType===8||!bK||!bB||!(bw=Z._data(bv))){return;}if(bB.handler){bA=bB;bB=bA.handler;}if(!bB.guid){bB.guid=Z.guid++;}by=bw.events;if(!by){bw.events=by={};}bx=bw.handle;if(!bx){bw.handle=bx=function(bL){return typeof Z!=="undefined"&&(!bL||Z.event.triggered!==bL.type)?Z.event.dispatch.apply(bx.elem,arguments):bo;};bx.elem=bv;}bK=Z.trim(S(bK)).split(" ");for(bH=0;bH<bK.length;bH++){bI=bd.exec(bK[bH])||[];bJ=bI[1];bD=(bI[2]||"").split(".").sort();bG=Z.event.special[bJ]||{};bJ=(bF?bG.delegateType:bG.bindType)||bJ;bG=Z.event.special[bJ]||{};bz=Z.extend({type:bJ,origType:bI[1],data:e,handler:bB,guid:bB.guid,selector:bF,quick:aj(bF),namespace:bD.join(".")},bA);bC=by[bJ];if(!bC){bC=by[bJ]=[];bC.delegateCount=0;if(!bG.setup||bG.setup.call(bv,e,bD,bx)===false){if(bv.addEventListener){bv.addEventListener(bJ,bx,false);}else{if(bv.attachEvent){bv.attachEvent("on"+bJ,bx);}}}}if(bG.add){bG.add.call(bv,bz);if(!bz.handler.guid){bz.handler.guid=bB.guid;}}if(bF){bC.splice(bC.delegateCount++,0,bz);}else{bC.push(bz);}Z.event.global[bJ]=true;}bv=null;},global:{},remove:function(e,bL,bA,bG,bC){var bv=Z.hasData(e)&&Z._data(e),bI,bJ,bK,bF,bD,bE,bB,bw,bH,by,bx,bz;if(!bv||!(bw=bv.events)){return;}bL=Z.trim(S(bL||"")).split(" ");for(bI=0;bI<bL.length;bI++){bJ=bd.exec(bL[bI])||[];bK=bF=bJ[1];bD=bJ[2];if(!bK){for(bK in bw){Z.event.remove(e,bK+bL[bI],bA,bG,true);}continue;}bH=Z.event.special[bK]||{};bK=(bG?bH.delegateType:bH.bindType)||bK;bx=bw[bK]||[];bE=bx.length;bD=bD?new RegExp("(^|\\.)"+bD.split(".").sort().join("\\.(?:.*\\.)?")+"(\\.|$)"):null;for(bB=0;bB<bx.length;bB++){bz=bx[bB];if((bC||bF===bz.origType)&&(!bA||bA.guid===bz.guid)&&(!bD||bD.test(bz.namespace))&&(!bG||bG===bz.selector||bG==="**"&&bz.selector)){bx.splice(bB--,1);if(bz.selector){bx.delegateCount--;}if(bH.remove){bH.remove.call(e,bz);}}}if(bx.length===0&&bE!==bx.length){if(!bH.teardown||bH.teardown.call(e,bD)===false){Z.removeEvent(e,bK,bv.handle);}delete bw[bK];}}if(Z.isEmptyObject(bw)){by=bv.handle;if(by){by.elem=null;}Z.removeData(e,["events","handle"],true);}},customEvent:{getData:true,setData:true,changeData:true},trigger:function(bz,bx,by,bG){if(by&&(by.nodeType===3||by.nodeType===8)){return;}var bJ=bz.type||bz,bE=[],bv,bB,bD,bw,bF,bH,bI,bC,bA,e;if(ay.test(bJ+Z.event.triggered)){return;}if(bJ.indexOf("!")>=0){bJ=bJ.slice(0,-1);bB=true;}if(bJ.indexOf(".")>=0){bE=bJ.split(".");bJ=bE.shift();bE.sort();}if((!by||Z.event.customEvent[bJ])&&!Z.event.global[bJ]){return;}bz=typeof bz==="object"?bz[Z.expando]?bz:new Z.Event(bJ,bz):new Z.Event(bJ);bz.type=bJ;bz.isTrigger=true;bz.exclusive=bB;bz.namespace=bE.join(".");bz.namespace_re=bz.namespace?new RegExp("(^|\\.)"+bE.join("\\.(?:.*\\.)?")+"(\\.|$)"):null;bH=bJ.indexOf(":")<0?"on"+bJ:"";if(!by){bv=Z.cache;for(bD in bv){if(bv[bD].events&&bv[bD].events[bJ]){Z.event.trigger(bz,bx,bv[bD].handle.elem,true);}}return;}bz.result=bo;if(!bz.target){bz.target=by;}bx=bx!=null?Z.makeArray(bx):[];bx.unshift(bz);bI=Z.event.special[bJ]||{};if(bI.trigger&&bI.trigger.apply(by,bx)===false){return;}bA=[[by,bI.bindType||bJ]];if(!bG&&!bI.noBubble&&!Z.isWindow(by)){e=bI.delegateType||bJ;bw=ay.test(e+bJ)?by:by.parentNode;bF=null;for(;bw;bw=bw.parentNode){bA.push([bw,e]);bF=bw;}if(bF&&bF===by.ownerDocument){bA.push([bF.defaultView||bF.parentWindow||bp,e]);}}for(bD=0;bD<bA.length&&!bz.isPropagationStopped();bD++){bw=bA[bD][0];bz.type=bA[bD][1];bC=(Z._data(bw,"events")||{})[bz.type]&&Z._data(bw,"handle");if(bC){bC.apply(bw,bx);}bC=bH&&bw[bH];if(bC&&Z.acceptData(bw)&&bC.apply(bw,bx)===false){bz.preventDefault();}}bz.type=bJ;if(!bG&&!bz.isDefaultPrevented()){if((!bI._default||bI._default.apply(by.ownerDocument,bx)===false)&&!(bJ==="click"&&Z.nodeName(by,"a"))&&Z.acceptData(by)){if(bH&&by[bJ]&&((bJ!=="focus"&&bJ!=="blur")||bz.target.offsetWidth!==0)&&!Z.isWindow(by)){bF=by[bH];if(bF){by[bH]=null;}Z.event.triggered=bJ;by[bJ]();Z.event.triggered=bo;if(bF){by[bH]=bF;}}}}return bz.result;},dispatch:function(bx){bx=Z.event.fix(bx||bp.event);var bA=((Z._data(this,"events")||{})[bx.type]||[]),bw=bA.delegateCount,e=[].slice.call(arguments,0),bI=!bx.exclusive&&!bx.namespace,bz=[],bB,bC,bv,bD,bH,bK,bE,bF,by,bJ,bG;e[0]=bx;bx.delegateTarget=this;if(bw&&!bx.target.disabled&&!(bx.button&&bx.type==="click")){bD=Z(this);bD.context=this.ownerDocument||this;for(bv=bx.target;bv!=this;bv=bv.parentNode||this){bK={};bF=[];bD[0]=bv;for(bB=0;bB<bw;bB++){by=bA[bB];bJ=by.selector;if(bK[bJ]===bo){bK[bJ]=(by.quick?ai(bv,by.quick):bD.is(bJ));}if(bK[bJ]){bF.push(by);}}if(bF.length){bz.push({elem:bv,matches:bF});}}}if(bA.length>bw){bz.push({elem:this,matches:bA.slice(bw)});}for(bB=0;bB<bz.length&&!bx.isPropagationStopped();bB++){bE=bz[bB];bx.currentTarget=bE.elem;for(bC=0;bC<bE.matches.length&&!bx.isImmediatePropagationStopped();bC++){by=bE.matches[bC];if(bI||(!bx.namespace&&!by.namespace)||bx.namespace_re&&bx.namespace_re.test(by.namespace)){bx.data=by.data;bx.handleObj=by;bH=((Z.event.special[by.origType]||{}).handle||by.handler).apply(bE.elem,e);if(bH!==bo){bx.result=bH;if(bH===false){bx.preventDefault();bx.stopPropagation();}}}}}return bx.result;},props:"attrChange attrName relatedNode srcElement altKey bubbles cancelable ctrlKey currentTarget eventPhase metaKey relatedTarget shiftKey target timeStamp view which".split(" "),fixHooks:{},keyHooks:{props:"char charCode key keyCode".split(" "),filter:function(e,bv){if(e.which==null){e.which=bv.charCode!=null?bv.charCode:bv.keyCode;}return e;}},mouseHooks:{props:"button buttons clientX clientY fromElement offsetX offsetY pageX pageY screenX screenY toElement".split(" "),filter:function(bx,bA){var by,bw,e,bv=bA.button,bz=bA.fromElement;if(bx.pageX==null&&bA.clientX!=null){by=bx.target.ownerDocument||A;bw=by.documentElement;e=by.body;bx.pageX=bA.clientX+(bw&&bw.scrollLeft||e&&e.scrollLeft||0)-(bw&&bw.clientLeft||e&&e.clientLeft||0);bx.pageY=bA.clientY+(bw&&bw.scrollTop||e&&e.scrollTop||0)-(bw&&bw.clientTop||e&&e.clientTop||0);}if(!bx.relatedTarget&&bz){bx.relatedTarget=bz===bx.target?bA.toElement:bz;}if(!bx.which&&bv!==bo){bx.which=(bv&1?1:(bv&2?3:(bv&4?2:0)));}return bx;}},fix:function(bv){if(bv[Z.expando]){return bv;}var bx,bz,by=bv,bw=Z.event.fixHooks[bv.type]||{},e=bw.props?this.props.concat(bw.props):this.props;bv=Z.Event(by);for(bx=e.length;bx;){bz=e[--bx];bv[bz]=by[bz];}if(!bv.target){bv.target=by.srcElement||A;}if(bv.target.nodeType===3){bv.target=bv.target.parentNode;}if(bv.metaKey===bo){bv.metaKey=bv.ctrlKey;}return bw.filter?bw.filter(bv,by):bv;},special:{ready:{setup:Z.bindReady},load:{noBubble:true},focus:{delegateType:"focusin"},blur:{delegateType:"focusout"},beforeunload:{setup:function(e,bw,bv){if(Z.isWindow(this)){this.onbeforeunload=bv;}},teardown:function(bv,e){if(this.onbeforeunload===e){this.onbeforeunload=null;}}}},simulate:function(bz,bx,by,bv){var bw=Z.extend(new Z.Event(),by,{type:bz,isSimulated:true,originalEvent:{}});if(bv){Z.event.trigger(bw,null,bx);}else{Z.event.dispatch.call(bx,bw);}if(bw.isDefaultPrevented()){by.preventDefault();}}};Z.event.handle=Z.event.dispatch;Z.removeEvent=A.removeEventListener?function(e,bw,bv){if(e.removeEventListener){e.removeEventListener(bw,bv,false);}}:function(e,bw,bv){if(e.detachEvent){e.detachEvent("on"+bw,bv);}};Z.Event=function(bv,e){if(!(this instanceof Z.Event)){return new Z.Event(bv,e);}if(bv&&bv.type){this.originalEvent=bv;this.type=bv.type;this.isDefaultPrevented=(bv.defaultPrevented||bv.returnValue===false||bv.getPreventDefault&&bv.getPreventDefault())?aw:av;}else{this.type=bv;}if(e){Z.extend(this,e);}this.timeStamp=bv&&bv.timeStamp||Z.now();this[Z.expando]=true;};function av(){return false;}function aw(){return true;}Z.Event.prototype={preventDefault:function(){this.isDefaultPrevented=aw;var bv=this.originalEvent;if(!bv){return;}if(bv.preventDefault){bv.preventDefault();}else{bv.returnValue=false;}},stopPropagation:function(){this.isPropagationStopped=aw;var bv=this.originalEvent;if(!bv){return;}if(bv.stopPropagation){bv.stopPropagation();}bv.cancelBubble=true;},stopImmediatePropagation:function(){this.isImmediatePropagationStopped=aw;this.stopPropagation();},isDefaultPrevented:av,isPropagationStopped:av,isImmediatePropagationStopped:av};Z.each({mouseenter:"mouseover",mouseleave:"mouseout"},function(bv,e){Z.event.special[bv]={delegateType:e,bindType:e,handle:function(bw){var bB=this,by=bw.relatedTarget,bx=bw.handleObj,bA=bx.selector,bz;if(!by||(by!==bB&&!Z.contains(bB,by))){bw.type=bx.origType;bz=bx.handler.apply(this,arguments);bw.type=e;}return bz;}};});if(!Z.support.submitBubbles){Z.event.special.submit={setup:function(){if(Z.nodeName(this,"form")){return false;}Z.event.add(this,"click._submit keypress._submit",function(bv){var bw=bv.target,bx=Z.nodeName(bw,"input")||Z.nodeName(bw,"button")?bw.form:bo;if(bx&&!bx._submit_attached){Z.event.add(bx,"submit._submit",function(e){if(this.parentNode&&!e.isTrigger){Z.event.simulate("submit",this.parentNode,e,true);}});bx._submit_attached=true;}});},teardown:function(){if(Z.nodeName(this,"form")){return false;}Z.event.remove(this,"._submit");}};}if(!Z.support.changeBubbles){Z.event.special.change={setup:function(){if(az.test(this.nodeName)){if(this.type==="checkbox"||this.type==="radio"){Z.event.add(this,"propertychange._change",function(e){if(e.originalEvent.propertyName==="checked"){this._just_changed=true;}});Z.event.add(this,"click._change",function(e){if(this._just_changed&&!e.isTrigger){this._just_changed=false;Z.event.simulate("change",this,e,true);}});}return false;}Z.event.add(this,"beforeactivate._change",function(bv){var bw=bv.target;if(az.test(bw.nodeName)&&!bw._change_attached){Z.event.add(bw,"change._change",function(e){if(this.parentNode&&!e.isSimulated&&!e.isTrigger){Z.event.simulate("change",this.parentNode,e,true);}});bw._change_attached=true;}});},handle:function(bv){var e=bv.target;if(this!==e||bv.isSimulated||bv.isTrigger||(e.type!=="radio"&&e.type!=="checkbox")){return bv.handleObj.handler.apply(this,arguments);}},teardown:function(){Z.event.remove(this,"._change");return az.test(this.nodeName);}};}if(!Z.support.focusinBubbles){Z.each({focus:"focusin",blur:"focusout"},function(bx,bv){var e=0,bw=function(by){Z.event.simulate(bv,by.target,Z.event.fix(by),true);};Z.event.special[bv]={setup:function(){if(e++===0){A.addEventListener(bx,bw,true);}},teardown:function(){if(--e===0){A.removeEventListener(bx,bw,true);}}};});}Z.fn.extend({on:function(bA,by,e,bv,bw){var bx,bz;if(typeof bA==="object"){if(typeof by!=="string"){e=by;by=bo;}for(bz in bA){this.on(bz,by,e,bA[bz],bw);}return this;}if(e==null&&bv==null){bv=by;e=by=bo;}else{if(bv==null){if(typeof by==="string"){bv=e;e=bo;}else{bv=e;e=by;by=bo;}}}if(bv===false){bv=av;}else{if(!bv){return this;}}if(bw===1){bx=bv;bv=function(bB){Z().off(bB);return bx.apply(this,arguments);};bv.guid=bx.guid||(bx.guid=Z.guid++);}return this.each(function(){Z.event.add(this,bA,bv,e,by);});},one:function(bx,bw,e,bv){return this.on.call(this,bx,bw,e,bv,1);},off:function(by,bw,e){if(by&&by.preventDefault&&by.handleObj){var bv=by.handleObj;Z(by.delegateTarget).off(bv.namespace?bv.type+"."+bv.namespace:bv.type,bv.selector,bv.handler);return this;}if(typeof by==="object"){for(var bx in by){this.off(bx,bw,by[bx]);}return this;}if(bw===false||typeof bw==="function"){e=bw;bw=bo;}if(e===false){e=av;}return this.each(function(){Z.event.remove(this,by,e,bw);});},bind:function(bw,e,bv){return this.on(bw,null,e,bv);},unbind:function(bv,e){return this.off(bv,null,e);},live:function(bw,e,bv){Z(this.context).on(bw,this.selector,e,bv);return this;},die:function(bv,e){Z(this.context).off(bv,this.selector||"**",e);return this;},delegate:function(bw,bx,e,bv){return this.on(bx,bw,e,bv);},undelegate:function(bv,bw,e){return arguments.length==1?this.off(bv,"**"):this.off(bw,bv,e);},trigger:function(bv,e){return this.each(function(){Z.event.trigger(bv,e,this);});},triggerHandler:function(bv,e){if(this[0]){return Z.event.trigger(bv,e,this[0],true);}},toggle:function(bv){var e=arguments,bw=bv.guid||Z.guid++,bx=0,by=function(bz){var bA=(Z._data(this,"lastToggle"+bv.guid)||0)%bx;Z._data(this,"lastToggle"+bv.guid,bA+1);bz.preventDefault();return e[bA].apply(this,arguments)||false;};by.guid=bw;while(bx<e.length){e[bx++].guid=bw;}return this.click(by);},hover:function(bv,e){return this.mouseenter(bv).mouseleave(e||bv);}});Z.each(("blur focus focusin focusout load resize scroll unload click dblclick mousedown mouseup mousemove mouseover mouseout mouseenter mouseleave change select submit keydown keypress keyup error contextmenu").split(" "),function(e,bv){Z.fn[bv]=function(bw,bx){if(bx==null){bx=bw;bw=null;}return arguments.length>0?this.on(bv,null,bw,bx):this.trigger(bv);};if(Z.attrFn){Z.attrFn[bv]=true;}if(aI.test(bv)){Z.event.fixHooks[bv]=Z.event.keyHooks;}if(aL.test(bv)){Z.event.fixHooks[bv]=Z.event.mouseHooks;}});
/*
 * Sizzle CSS Selector Engine
 *  Copyright 2011, The Dojo Foundation
 *  Released under the MIT, BSD, and GPL Licenses.
 *  More information: http://sizzlejs.com/
 */
(function(){var bw=/((?:\((?:\([^()]+\)|[^()]+)+\)|\[(?:\[[^\[\]]*\]|['"][^'"]*['"]|[^\[\]'"]+)+\]|\\.|[^ >+~,(\[\\]+)+|[>+~])(\s*,\s*)?((?:.|\r|\n)*)/g,bB="sizcache"+(Math.random()+"").replace(".",""),bz=0,bP=Object.prototype.toString,bF=false,bv=true,bJ=/\\/g,bL=/\r\n/g,bK=/\W/;[0,0].sort(function(){bv=false;return 0;});var bN=function(b4,bR,b1,b3){b1=b1||[];bR=bR||A;var bX=bR;if(bR.nodeType!==1&&bR.nodeType!==9){return[];}if(!b4||typeof b4!=="string"){return b1;}var bW,b5,e,bU,b2,bT,bZ,bV,b0=true,bS=bN.isXML(bR),bY=[],b6=b4;do{bw.exec("");bW=bw.exec(b6);if(bW){b6=bW[3];bY.push(bW[1]);if(bW[2]){bU=bW[3];break;}}}while(bW);if(bY.length>1&&bH.exec(b4)){if(bY.length===2&&bC.relative[bY[0]]){b5=bI(bY[0]+bY[1],bR,b3);}else{b5=bC.relative[bY[0]]?[bR]:bN(bY.shift(),bR);while(bY.length){b4=bY.shift();if(bC.relative[b4]){b4+=bY.shift();}b5=bI(b4,b5,b3);}}}else{if(!b3&&bY.length>1&&bR.nodeType===9&&!bS&&bC.match.ID.test(bY[0])&&!bC.match.ID.test(bY[bY.length-1])){b2=bN.find(bY.shift(),bR,bS);bR=b2.expr?bN.filter(b2.expr,b2.set)[0]:b2.set[0];}if(bR){b2=b3?{expr:bY.pop(),set:bG(b3)}:bN.find(bY.pop(),bY.length===1&&(bY[0]==="~"||bY[0]==="+")&&bR.parentNode?bR.parentNode:bR,bS);b5=b2.expr?bN.filter(b2.expr,b2.set):b2.set;if(bY.length>0){e=bG(b5);}else{b0=false;}while(bY.length){bT=bY.pop();bZ=bT;if(!bC.relative[bT]){bT="";}else{bZ=bY.pop();}if(bZ==null){bZ=bR;}bC.relative[bT](e,bZ,bS);}}else{e=bY=[];}}if(!e){e=b5;}if(!e){bN.error(bT||b4);}if(bP.call(e)==="[object Array]"){if(!b0){b1.push.apply(b1,e);}else{if(bR&&bR.nodeType===1){for(bV=0;e[bV]!=null;bV++){if(e[bV]&&(e[bV]===true||e[bV].nodeType===1&&bN.contains(bR,e[bV]))){b1.push(b5[bV]);}}}else{for(bV=0;e[bV]!=null;bV++){if(e[bV]&&e[bV].nodeType===1){b1.push(b5[bV]);}}}}}else{bG(e,b1);}if(bU){bN(bU,bX,b1,b3);bN.uniqueSort(b1);}return b1;};bN.uniqueSort=function(bR){if(bO){bF=bv;bR.sort(bO);if(bF){for(var e=1;e<bR.length;e++){if(bR[e]===bR[e-1]){bR.splice(e--,1);}}}}return bR;};bN.matches=function(e,bR){return bN(e,null,null,bR);};bN.matchesSelector=function(bR,e){return bN(e,null,null,[bR]).length>0;};bN.find=function(bR,e,bT){var bX,bS,bV,bW,bY,bU;if(!bR){return[];}for(bS=0,bV=bC.order.length;bS<bV;bS++){bY=bC.order[bS];if((bW=bC.leftMatch[bY].exec(bR))){bU=bW[1];bW.splice(1,1);if(bU.substr(bU.length-1)!=="\\"){bW[1]=(bW[1]||"").replace(bJ,"");bX=bC.find[bY](bW,e,bT);if(bX!=null){bR=bR.replace(bC.match[bY],"");break;}}}}if(!bX){bX=typeof e.getElementsByTagName!=="undefined"?e.getElementsByTagName("*"):[];}return{set:bX,expr:bR};};bN.filter=function(bS,b5,bW,b1){var b0,e,b6,bU,bY,bT,bZ,bV,b3,b2=bS,b4=[],bR=b5,bX=b5&&b5[0]&&bN.isXML(b5[0]);while(bS&&b5.length){for(b6 in bC.filter){if((b0=bC.leftMatch[b6].exec(bS))!=null&&b0[2]){bT=bC.filter[b6];bZ=b0[1];e=false;b0.splice(1,1);if(bZ.substr(bZ.length-1)==="\\"){continue;}if(bR===b4){b4=[];}if(bC.preFilter[b6]){b0=bC.preFilter[b6](b0,bR,bW,b4,b1,bX);if(!b0){e=bU=true;}else{if(b0===true){continue;}}}if(b0){for(bV=0;(bY=bR[bV])!=null;bV++){if(bY){bU=bT(bY,b0,bV,bR);b3=b1^bU;if(bW&&bU!=null){if(b3){e=true;}else{bR[bV]=false;}}else{if(b3){b4.push(bY);e=true;}}}}}if(bU!==bo){if(!bW){bR=b4;}bS=bS.replace(bC.match[b6],"");if(!e){return[];}break;}}}if(bS===b2){if(e==null){bN.error(bS);}else{break;}}b2=bS;}return bR;};bN.error=function(e){throw new Error("Syntax error, unrecognized expression: "+e);};var bE=bN.getText=function(e){var bR,bS,bT=e.nodeType,bU="";if(bT){if(bT===1||bT===9){if(typeof e.textContent==="string"){return e.textContent;}else{if(typeof e.innerText==="string"){return e.innerText.replace(bL,"");}else{for(e=e.firstChild;e;e=e.nextSibling){bU+=bE(e);}}}}else{if(bT===3||bT===4){return e.nodeValue;}}}else{for(bR=0;(bS=e[bR]);bR++){if(bS.nodeType!==8){bU+=bE(bS);}}}return bU;};var bC=bN.selectors={order:["ID","NAME","TAG"],match:{ID:/#((?:[\w\u00c0-\uFFFF\-]|\\.)+)/,CLASS:/\.((?:[\w\u00c0-\uFFFF\-]|\\.)+)/,NAME:/\[name=['"]*((?:[\w\u00c0-\uFFFF\-]|\\.)+)['"]*\]/,ATTR:/\[\s*((?:[\w\u00c0-\uFFFF\-]|\\.)+)\s*(?:(\S?=)\s*(?:(['"])(.*?)\3|(#?(?:[\w\u00c0-\uFFFF\-]|\\.)*)|)|)\s*\]/,TAG:/^((?:[\w\u00c0-\uFFFF\*\-]|\\.)+)/,CHILD:/:(only|nth|last|first)-child(?:\(\s*(even|odd|(?:[+\-]?\d+|(?:[+\-]?\d*)?n\s*(?:[+\-]\s*\d+)?))\s*\))?/,POS:/:(nth|eq|gt|lt|first|last|even|odd)(?:\((\d*)\))?(?=[^\-]|$)/,PSEUDO:/:((?:[\w\u00c0-\uFFFF\-]|\\.)+)(?:\((['"]?)((?:\([^\)]+\)|[^\(\)]*)+)\2\))?/},leftMatch:{},attrMap:{"class":"className","for":"htmlFor"},attrHandle:{href:function(e){return e.getAttribute("href");},type:function(e){return e.getAttribute("type");}},relative:{"+":function(e,bX){var bT=typeof bX==="string",bV=bT&&!bK.test(bX),bU=bT&&!bV;if(bV){bX=bX.toLowerCase();}for(var bS=0,bW=e.length,bR;bS<bW;bS++){if((bR=e[bS])){while((bR=bR.previousSibling)&&bR.nodeType!==1){}e[bS]=bU||bR&&bR.nodeName.toLowerCase()===bX?bR||false:bR===bX;}}if(bU){bN.filter(bX,e,true);}},">":function(e,bW){var bR,bT=typeof bW==="string",bS=0,bU=e.length;if(bT&&!bK.test(bW)){bW=bW.toLowerCase();for(;bS<bU;bS++){bR=e[bS];if(bR){var bV=bR.parentNode;e[bS]=bV.nodeName.toLowerCase()===bW?bV:false;}}}else{for(;bS<bU;bS++){bR=e[bS];if(bR){e[bS]=bT?bR.parentNode:bR.parentNode===bW;}}if(bT){bN.filter(bW,e,true);}}},"":function(bR,bV,bT){var bU,bS=bz++,e=bx;if(typeof bV==="string"&&!bK.test(bV)){bV=bV.toLowerCase();bU=bV;e=by;}e("parentNode",bV,bS,bR,bU,bT);},"~":function(bR,bV,bT){var bU,bS=bz++,e=bx;if(typeof bV==="string"&&!bK.test(bV)){bV=bV.toLowerCase();bU=bV;e=by;}e("previousSibling",bV,bS,bR,bU,bT);}},find:{ID:function(bT,e,bR){if(typeof e.getElementById!=="undefined"&&!bR){var bS=e.getElementById(bT[1]);return bS&&bS.parentNode?[bS]:[];}},NAME:function(bT,e){if(typeof e.getElementsByName!=="undefined"){var bV=[],bU=e.getElementsByName(bT[1]);for(var bR=0,bS=bU.length;bR<bS;bR++){if(bU[bR].getAttribute("name")===bT[1]){bV.push(bU[bR]);}}return bV.length===0?null:bV;}},TAG:function(bR,e){if(typeof e.getElementsByTagName!=="undefined"){return e.getElementsByTagName(bR[1]);}}},preFilter:{CLASS:function(bV,e,bT,bX,bW,bU){bV=" "+bV[1].replace(bJ,"")+" ";if(bU){return bV;}for(var bS=0,bR;(bR=e[bS])!=null;bS++){if(bR){if(bW^(bR.className&&(" "+bR.className+" ").replace(/[\t\n\r]/g," ").indexOf(bV)>=0)){if(!bT){bX.push(bR);}}else{if(bT){e[bS]=false;}}}}return false;},ID:function(e){return e[1].replace(bJ,"");},TAG:function(bR,e){return bR[1].replace(bJ,"").toLowerCase();},CHILD:function(e){if(e[1]==="nth"){if(!e[2]){bN.error(e[0]);}e[2]=e[2].replace(/^\+|\s*/g,"");var bR=/(-?)(\d*)(?:n([+\-]?\d*))?/.exec(e[2]==="even"&&"2n"||e[2]==="odd"&&"2n+1"||!/\D/.test(e[2])&&"0n+"+e[2]||e[2]);e[2]=(bR[1]+(bR[2]||1))-0;e[3]=bR[3]-0;}else{if(e[2]){bN.error(e[0]);}}e[0]=bz++;return e;},ATTR:function(bT,e,bR,bW,bV,bS){var bU=bT[1]=bT[1].replace(bJ,"");if(!bS&&bC.attrMap[bU]){bT[1]=bC.attrMap[bU];}bT[4]=(bT[4]||bT[5]||"").replace(bJ,"");if(bT[2]==="~="){bT[4]=" "+bT[4]+" ";}return bT;},PSEUDO:function(bS,e,bR,bU,bT){if(bS[1]==="not"){if((bw.exec(bS[3])||"").length>1||/^\w/.test(bS[3])){bS[3]=bN(bS[3],null,null,e);}else{var bV=bN.filter(bS[3],e,bR,true^bT);if(!bR){bU.push.apply(bU,bV);}return false;}}else{if(bC.match.POS.test(bS[0])||bC.match.CHILD.test(bS[0])){return true;}}return bS;},POS:function(e){e.unshift(true);return e;}},filters:{enabled:function(e){return e.disabled===false&&e.type!=="hidden";},disabled:function(e){return e.disabled===true;},checked:function(e){return e.checked===true;},selected:function(e){if(e.parentNode){e.parentNode.selectedIndex;}return e.selected===true;},parent:function(e){return !!e.firstChild;},empty:function(e){return !e.firstChild;},has:function(e,bR,bS){return !!bN(bS[3],e).length;},header:function(e){return(/h\d/i).test(e.nodeName);},text:function(bR){var e=bR.getAttribute("type"),bS=bR.type;return bR.nodeName.toLowerCase()==="input"&&"text"===bS&&(e===bS||e===null);},radio:function(e){return e.nodeName.toLowerCase()==="input"&&"radio"===e.type;},checkbox:function(e){return e.nodeName.toLowerCase()==="input"&&"checkbox"===e.type;},file:function(e){return e.nodeName.toLowerCase()==="input"&&"file"===e.type;},password:function(e){return e.nodeName.toLowerCase()==="input"&&"password"===e.type;},submit:function(e){var bR=e.nodeName.toLowerCase();return(bR==="input"||bR==="button")&&"submit"===e.type;},image:function(e){return e.nodeName.toLowerCase()==="input"&&"image"===e.type;},reset:function(e){var bR=e.nodeName.toLowerCase();return(bR==="input"||bR==="button")&&"reset"===e.type;},button:function(e){var bR=e.nodeName.toLowerCase();return bR==="input"&&"button"===e.type||bR==="button";},input:function(e){return(/input|select|textarea|button/i).test(e.nodeName);},focus:function(e){return e===e.ownerDocument.activeElement;}},setFilters:{first:function(e,bR){return bR===0;},last:function(bR,bS,bT,e){return bS===e.length-1;},even:function(e,bR){return bR%2===0;},odd:function(e,bR){return bR%2===1;},lt:function(e,bR,bS){return bR<bS[3]-0;},gt:function(e,bR,bS){return bR>bS[3]-0;},nth:function(e,bR,bS){return bS[3]-0===bR;},eq:function(e,bR,bS){return bS[3]-0===bR;}},filter:{PSEUDO:function(bR,bW,bT,e){var bX=bW[1],bS=bC.filters[bX];if(bS){return bS(bR,bT,bW,e);}else{if(bX==="contains"){return(bR.textContent||bR.innerText||bE([bR])||"").indexOf(bW[3])>=0;}else{if(bX==="not"){var bY=bW[3];for(var bU=0,bV=bY.length;bU<bV;bU++){if(bY[bU]===bR){return false;}}return true;}else{bN.error(bX);}}}},CHILD:function(bU,bX){var bV,bW,bT,bZ,e,bR,bS,b0=bX[1],bY=bU;switch(b0){case"only":case"first":while((bY=bY.previousSibling)){if(bY.nodeType===1){return false;}}if(b0==="first"){return true;}bY=bU;case"last":while((bY=bY.nextSibling)){if(bY.nodeType===1){return false;}}return true;case"nth":bV=bX[2];bW=bX[3];if(bV===1&&bW===0){return true;}bT=bX[0];bZ=bU.parentNode;if(bZ&&(bZ[bB]!==bT||!bU.nodeIndex)){bR=0;for(bY=bZ.firstChild;bY;bY=bY.nextSibling){if(bY.nodeType===1){bY.nodeIndex=++bR;}}bZ[bB]=bT;}bS=bU.nodeIndex-bW;if(bV===0){return bS===0;}else{return(bS%bV===0&&bS/bV>=0);}}},ID:function(e,bR){return e.nodeType===1&&e.getAttribute("id")===bR;},TAG:function(e,bR){return(bR==="*"&&e.nodeType===1)||!!e.nodeName&&e.nodeName.toLowerCase()===bR;},CLASS:function(e,bR){return(" "+(e.className||e.getAttribute("class"))+" ").indexOf(bR)>-1;},ATTR:function(bR,bS){var bT=bS[1],bU=bN.attr?bN.attr(bR,bT):bC.attrHandle[bT]?bC.attrHandle[bT](bR):bR[bT]!=null?bR[bT]:bR.getAttribute(bT),bW=bU+"",bV=bS[2],e=bS[4];return bU==null?bV==="!=":!bV&&bN.attr?bU!=null:bV==="="?bW===e:bV==="*="?bW.indexOf(e)>=0:bV==="~="?(" "+bW+" ").indexOf(e)>=0:!e?bW&&bU!==false:bV==="!="?bW!==e:bV==="^="?bW.indexOf(e)===0:bV==="$="?bW.substr(bW.length-e.length)===e:bV==="|="?bW===e||bW.substr(0,e.length+1)===e+"-":false;},POS:function(bR,bU,bT,e){var bV=bU[2],bS=bC.setFilters[bV];if(bS){return bS(bR,bT,bU,e);}}}};var bH=bC.match.POS,bD=function(e,bR){return"\\"+(bR-0+1);};for(var bQ in bC.match){bC.match[bQ]=new RegExp(bC.match[bQ].source+(/(?![^\[]*\])(?![^\(]*\))/.source));bC.leftMatch[bQ]=new RegExp(/(^(?:.|\r|\n)*?)/.source+bC.match[bQ].source.replace(/\\(\d+)/g,bD));}var bG=function(e,bR){e=Array.prototype.slice.call(e,0);if(bR){bR.push.apply(bR,e);return bR;}return e;};try{Array.prototype.slice.call(A.documentElement.childNodes,0)[0].nodeType;}catch(bA){bG=function(e,bT){var bR=0,bU=bT||[];if(bP.call(e)==="[object Array]"){Array.prototype.push.apply(bU,e);}else{if(typeof e.length==="number"){for(var bS=e.length;bR<bS;bR++){bU.push(e[bR]);}}else{for(;e[bR];bR++){bU.push(e[bR]);}}}return bU;};}var bO,bM;if(A.documentElement.compareDocumentPosition){bO=function(e,bR){if(e===bR){bF=true;return 0;}if(!e.compareDocumentPosition||!bR.compareDocumentPosition){return e.compareDocumentPosition?-1:1;}return e.compareDocumentPosition(bR)&4?-1:1;};}else{bO=function(e,bU){if(e===bU){bF=true;return 0;}else{if(e.sourceIndex&&bU.sourceIndex){return e.sourceIndex-bU.sourceIndex;}}var bR,bV,bS=[],bW=[],bT=e.parentNode,bX=bU.parentNode,bY=bT;if(bT===bX){return bM(e,bU);}else{if(!bT){return -1;}else{if(!bX){return 1;}}}while(bY){bS.unshift(bY);bY=bY.parentNode;}bY=bX;while(bY){bW.unshift(bY);bY=bY.parentNode;}bR=bS.length;bV=bW.length;for(var bZ=0;bZ<bR&&bZ<bV;bZ++){if(bS[bZ]!==bW[bZ]){return bM(bS[bZ],bW[bZ]);}}return bZ===bR?bM(e,bW[bZ],-1):bM(bS[bZ],bU,1);};bM=function(e,bR,bT){if(e===bR){return bT;}var bS=e.nextSibling;while(bS){if(bS===bR){return -1;}bS=bS.nextSibling;}return 1;};}(function(){var e=A.createElement("div"),bR="script"+(new Date()).getTime(),bS=A.documentElement;e.innerHTML="<a name='"+bR+"'/>";bS.insertBefore(e,bS.firstChild);if(A.getElementById(bR)){bC.find.ID=function(bW,bT,bU){if(typeof bT.getElementById!=="undefined"&&!bU){var bV=bT.getElementById(bW[1]);return bV?bV.id===bW[1]||typeof bV.getAttributeNode!=="undefined"&&bV.getAttributeNode("id").nodeValue===bW[1]?[bV]:bo:[];}};bC.filter.ID=function(bT,bU){var bV=typeof bT.getAttributeNode!=="undefined"&&bT.getAttributeNode("id");return bT.nodeType===1&&bV&&bV.nodeValue===bU;};}bS.removeChild(e);bS=e=null;})();(function(){var e=A.createElement("div");e.appendChild(A.createComment(""));if(e.getElementsByTagName("*").length>0){bC.find.TAG=function(bT,bR){var bU=bR.getElementsByTagName(bT[1]);if(bT[1]==="*"){var bV=[];for(var bS=0;bU[bS];bS++){if(bU[bS].nodeType===1){bV.push(bU[bS]);}}bU=bV;}return bU;};}e.innerHTML="<a href='#'></a>";if(e.firstChild&&typeof e.firstChild.getAttribute!=="undefined"&&e.firstChild.getAttribute("href")!=="#"){bC.attrHandle.href=function(bR){return bR.getAttribute("href",2);};}e=null;})();if(A.querySelectorAll){(function(){var bS=bN,e=A.createElement("div"),bR="__sizzle__";e.innerHTML="<p class='TEST'></p>";if(e.querySelectorAll&&e.querySelectorAll(".TEST").length===0){return;}bN=function(b4,bU,bW,b6){bU=bU||A;if(!b6&&!bN.isXML(bU)){var bY=/^(\w+$)|^\.([\w\-]+$)|^#([\w\-]+$)/.exec(b4);if(bY&&(bU.nodeType===1||bU.nodeType===9)){if(bY[1]){return bG(bU.getElementsByTagName(b4),bW);}else{if(bY[2]&&bC.find.CLASS&&bU.getElementsByClassName){return bG(bU.getElementsByClassName(bY[2]),bW);}}}if(bU.nodeType===9){if(b4==="body"&&bU.body){return bG([bU.body],bW);}else{if(bY&&bY[3]){var bV=bU.getElementById(bY[3]);if(bV&&bV.parentNode){if(bV.id===bY[3]){return bG([bV],bW);}}else{return bG([],bW);}}}try{return bG(bU.querySelectorAll(b4),bW);}catch(b3){}}else{if(bU.nodeType===1&&bU.nodeName.toLowerCase()!=="object"){var b1=bU,b0=bU.getAttribute("id"),bZ=b0||bR,bX=bU.parentNode,b5=/^\s*[+~]/.test(b4);if(!b0){bU.setAttribute("id",bZ);}else{bZ=bZ.replace(/'/g,"\\$&");}if(b5&&bX){bU=bU.parentNode;}try{if(!b5||bX){return bG(bU.querySelectorAll("[id='"+bZ+"'] "+b4),bW);}}catch(b2){}finally{if(!b0){b1.removeAttribute("id");}}}}}return bS(b4,bU,bW,b6);};for(var bT in bS){bN[bT]=bS[bT];}e=null;})();}(function(){var bR=A.documentElement,bS=bR.matchesSelector||bR.mozMatchesSelector||bR.webkitMatchesSelector||bR.msMatchesSelector;if(bS){var e=!bS.call(A.createElement("div"),"div"),bU=false;try{bS.call(A.documentElement,"[test!='']:sizzle");}catch(bT){bU=true;}bN.matchesSelector=function(bX,bW){bW=bW.replace(/\=\s*([^'"\]]*)\s*\]/g,"='$1']");if(!bN.isXML(bX)){try{if(bU||!bC.match.PSEUDO.test(bW)&&!/!=/.test(bW)){var bY=bS.call(bX,bW);if(bY||!e||bX.document&&bX.document.nodeType!==11){return bY;}}}catch(bV){}}return bN(bW,null,null,[bX]).length>0;};}})();(function(){var e=A.createElement("div");e.innerHTML="<div class='test e'></div><div class='test'></div>";if(!e.getElementsByClassName||e.getElementsByClassName("e").length===0){return;}e.lastChild.className="e";if(e.getElementsByClassName("e").length===1){return;}bC.order.splice(1,0,"CLASS");bC.find.CLASS=function(bT,bR,bS){if(typeof bR.getElementsByClassName!=="undefined"&&!bS){return bR.getElementsByClassName(bT[1]);}};e=null;})();function by(bS,bR,bT,e,bZ,bW){for(var bV=0,bX=e.length;bV<bX;bV++){var bU=e[bV];if(bU){var bY=false;bU=bU[bS];while(bU){if(bU[bB]===bT){bY=e[bU.sizset];break;}if(bU.nodeType===1&&!bW){bU[bB]=bT;bU.sizset=bV;}if(bU.nodeName.toLowerCase()===bR){bY=bU;break;}bU=bU[bS];}e[bV]=bY;}}}function bx(bS,bR,bT,e,bZ,bW){for(var bV=0,bX=e.length;bV<bX;bV++){var bU=e[bV];if(bU){var bY=false;bU=bU[bS];while(bU){if(bU[bB]===bT){bY=e[bU.sizset];break;}if(bU.nodeType===1){if(!bW){bU[bB]=bT;bU.sizset=bV;}if(typeof bR!=="string"){if(bU===bR){bY=true;break;}}else{if(bN.filter(bR,[bU]).length>0){bY=bU;break;}}}bU=bU[bS];}e[bV]=bY;}}}if(A.documentElement.contains){bN.contains=function(e,bR){return e!==bR&&(e.contains?e.contains(bR):true);};}else{if(A.documentElement.compareDocumentPosition){bN.contains=function(e,bR){return !!(e.compareDocumentPosition(bR)&16);};}else{bN.contains=function(){return false;};}}bN.isXML=function(bR){var e=(bR?bR.ownerDocument||bR:0).documentElement;return e?e.nodeName!=="HTML":false;};var bI=function(bX,e,bW){var bU,bY=[],bT="",bV=e.nodeType?[e]:e;while((bU=bC.match.PSEUDO.exec(bX))){bT+=bU[0];bX=bX.replace(bC.match.PSEUDO,"");}bX=bC.relative[bX]?bX+"*":bX;for(var bR=0,bS=bV.length;bR<bS;bR++){bN(bX,bV[bR],bY,bW);}return bN.filter(bT,bY);};bN.attr=Z.attr;bN.selectors.attrMap={};Z.find=bN;Z.expr=bN.selectors;Z.expr[":"]=Z.expr.filters;Z.unique=bN.uniqueSort;Z.text=bN.getText;Z.isXMLDoc=bN.isXML;Z.contains=bN.contains;})();var be=/Until$/,aW=/^(?:parents|prevUntil|prevAll)/,aN=/,/,Y=/^.[^:#\[\.,]*$/,bk=Array.prototype.slice,ag=Z.expr.match.POS,Q={children:true,contents:true,next:true,prev:true};Z.fn.extend({find:function(bA){var bB=this,e,bv;if(typeof bA!=="string"){return Z(bA).filter(function(){for(e=0,bv=bB.length;e<bv;e++){if(Z.contains(bB[e],this)){return true;}}});}var bz=this.pushStack("","find",bA),bw,bx,by;for(e=0,bv=this.length;e<bv;e++){bw=bz.length;Z.find(bA,this[e],bz);if(e>0){for(bx=bw;bx<bz.length;bx++){for(by=0;by<bw;by++){if(bz[by]===bz[bx]){bz.splice(bx--,1);break;}}}}}return bz;},has:function(e){var bv=Z(e);return this.filter(function(){for(var bw=0,bx=bv.length;bw<bx;bw++){if(Z.contains(this,bv[bw])){return true;}}});},not:function(e){return this.pushStack(bq(this,e,false),"not",e);},filter:function(e){return this.pushStack(bq(this,e,true),"filter",e);},is:function(e){return !!e&&(typeof e==="string"?ag.test(e)?Z(e,this.context).index(this[0])>=0:Z.filter(e,this).length>0:this.filter(e).length>0);},closest:function(bB,e){var bA=[],bw,bx,bv=this[0];if(Z.isArray(bB)){var by=1;while(bv&&bv.ownerDocument&&bv!==e){for(bw=0;bw<bB.length;bw++){if(Z(bv).is(bB[bw])){bA.push({selector:bB[bw],elem:bv,level:by});}}bv=bv.parentNode;by++;}return bA;}var bz=ag.test(bB)||typeof bB!=="string"?Z(bB,e||this.context):0;for(bw=0,bx=this.length;bw<bx;bw++){bv=this[bw];while(bv){if(bz?bz.index(bv)>-1:Z.find.matchesSelector(bv,bB)){bA.push(bv);break;}else{bv=bv.parentNode;if(!bv||!bv.ownerDocument||bv===e||bv.nodeType===11){break;}}}}bA=bA.length>1?Z.unique(bA):bA;return this.pushStack(bA,"closest",bB);},index:function(e){if(!e){return(this[0]&&this[0].parentNode)?this.prevAll().length:-1;}if(typeof e==="string"){return Z.inArray(this[0],Z(e));}return Z.inArray(e.jquery?e[0]:e,this);},add:function(bw,bv){var bx=typeof bw==="string"?Z(bw,bv):Z.makeArray(bw&&bw.nodeType?[bw]:bw),e=Z.merge(this.get(),bx);return this.pushStack(W(bx[0])||W(e[0])?e:Z.unique(e));},andSelf:function(){return this.add(this.prevObject);}});function W(e){return !e||!e.parentNode||e.parentNode.nodeType===11;}Z.each({parent:function(e){var bv=e.parentNode;return bv&&bv.nodeType!==11?bv:null;},parents:function(e){return Z.dir(e,"parentNode");},parentsUntil:function(e,bv,bw){return Z.dir(e,"parentNode",bw);},next:function(e){return Z.nth(e,2,"nextSibling");},prev:function(e){return Z.nth(e,2,"previousSibling");},nextAll:function(e){return Z.dir(e,"nextSibling");},prevAll:function(e){return Z.dir(e,"previousSibling");},nextUntil:function(e,bv,bw){return Z.dir(e,"nextSibling",bw);},prevUntil:function(e,bv,bw){return Z.dir(e,"previousSibling",bw);},siblings:function(e){return Z.sibling(e.parentNode.firstChild,e);},children:function(e){return Z.sibling(e.firstChild);},contents:function(e){return Z.nodeName(e,"iframe")?e.contentDocument||e.contentWindow.document:Z.makeArray(e.childNodes);}},function(bv,e){Z.fn[bv]=function(by,bx){var bw=Z.map(this,e,by);if(!be.test(bv)){bx=by;}if(bx&&typeof bx==="string"){bw=Z.filter(bx,bw);}bw=this.length>1&&!Q[bv]?Z.unique(bw):bw;if((this.length>1||aN.test(bx))&&aW.test(bv)){bw=bw.reverse();}return this.pushStack(bw,bv,bk.call(arguments).join(","));};});Z.extend({filter:function(bv,e,bw){if(bw){bv=":not("+bv+")";}return e.length===1?Z.find.matchesSelector(e[0],bv)?[e[0]]:[]:Z.find.matches(bv,e);},dir:function(bw,bv,by){var bx=[],e=bw[bv];while(e&&e.nodeType!==9&&(by===bo||e.nodeType!==1||!Z(e).is(by))){if(e.nodeType===1){bx.push(e);}e=e[bv];}return bx;},nth:function(e,by,bv,bw){by=by||1;var bx=0;for(;e;e=e[bv]){if(e.nodeType===1&&++bx===by){break;}}return e;},sibling:function(bv,e){var bw=[];for(;bv;bv=bv.nextSibling){if(bv.nodeType===1&&bv!==e){bw.push(bv);}}return bw;}});function bq(e,bx,bw){bx=bx||0;if(Z.isFunction(bx)){return Z.grep(e,function(by,bz){var bA=!!bx.call(by,bz,by);return bA===bw;});}else{if(bx.nodeType){return Z.grep(e,function(by,bz){return(by===bx)===bw;});}else{if(typeof bx==="string"){var bv=Z.grep(e,function(by){return by.nodeType===1;});if(Y.test(bx)){return Z.filter(bx,bv,!bw);}else{bx=Z.filter(bx,bv);}}}}return Z.grep(e,function(by,bz){return(Z.inArray(by,bx)>=0)===bw;});}function r(e){var bv=af.split("|"),bw=e.createDocumentFragment();if(bw.createElement){while(bv.length){bw.createElement(bv.pop());}}return bw;}var af="abbr|article|aside|audio|canvas|datalist|details|figcaption|figure|footer|header|hgroup|mark|meter|nav|output|progress|section|summary|time|video",aG=/ jQuery\d+="(?:\d+|null)"/g,aJ=/^\s+/,bh=/<(?!area|br|col|embed|hr|img|input|link|meta|param)(([\w:]+)[^>]*)\/>/ig,a9=/<([\w:]+)/,ba=/<tbody/i,aF=/<|&#?\w+;/,aQ=/<(?:script|style)/i,aO=/<(?:script|object|embed|option|style)/i,aR=new RegExp("<(?:"+af+")","i"),ap=/checked\s*(?:[^=]|=\s*.checked.)/i,a4=/\/(java|ecma)script/i,ar=/^\s*<!(?:\[CDATA\[|\-\-)/,br={option:[1,"<select multiple='multiple'>","</select>"],legend:[1,"<fieldset>","</fieldset>"],thead:[1,"<table>","</table>"],tr:[2,"<table><tbody>","</tbody></table>"],td:[3,"<table><tbody><tr>","</tr></tbody></table>"],col:[2,"<table><tbody></tbody><colgroup>","</colgroup></table>"],area:[1,"<map>","</map>"],_default:[0,"",""]},bi=r(A);br.optgroup=br.option;br.tbody=br.tfoot=br.colgroup=br.caption=br.thead;br.th=br.td;if(!Z.support.htmlSerialize){br._default=[1,"div<div>","</div>"];}Z.fn.extend({text:function(e){if(Z.isFunction(e)){return this.each(function(bv){var bw=Z(this);bw.text(e.call(this,bv,bw.text()));});}if(typeof e!=="object"&&e!==bo){return this.empty().append((this[0]&&this[0].ownerDocument||A).createTextNode(e));}return Z.text(this);},wrapAll:function(e){if(Z.isFunction(e)){return this.each(function(bw){Z(this).wrapAll(e.call(this,bw));});}if(this[0]){var bv=Z(e,this[0].ownerDocument).eq(0).clone(true);if(this[0].parentNode){bv.insertBefore(this[0]);}bv.map(function(){var bw=this;while(bw.firstChild&&bw.firstChild.nodeType===1){bw=bw.firstChild;}return bw;}).append(this);}return this;},wrapInner:function(e){if(Z.isFunction(e)){return this.each(function(bv){Z(this).wrapInner(e.call(this,bv));});}return this.each(function(){var bw=Z(this),bv=bw.contents();if(bv.length){bv.wrapAll(e);}else{bw.append(e);}});},wrap:function(e){var bv=Z.isFunction(e);return this.each(function(bw){Z(this).wrapAll(bv?e.call(this,bw):e);});},unwrap:function(){return this.parent().each(function(){if(!Z.nodeName(this,"body")){Z(this).replaceWith(this.childNodes);}}).end();},append:function(){return this.domManip(arguments,true,function(e){if(this.nodeType===1){this.appendChild(e);}});},prepend:function(){return this.domManip(arguments,true,function(e){if(this.nodeType===1){this.insertBefore(e,this.firstChild);}});},before:function(){if(this[0]&&this[0].parentNode){return this.domManip(arguments,false,function(bv){this.parentNode.insertBefore(bv,this);});}else{if(arguments.length){var e=Z.clean(arguments);e.push.apply(e,this.toArray());return this.pushStack(e,"before",arguments);}}},after:function(){if(this[0]&&this[0].parentNode){return this.domManip(arguments,false,function(bv){this.parentNode.insertBefore(bv,this.nextSibling);});}else{if(arguments.length){var e=this.pushStack(this,"after",arguments);e.push.apply(e,Z.clean(arguments));return e;}}},remove:function(bx,bw){for(var bv=0,e;(e=this[bv])!=null;bv++){if(!bx||Z.filter(bx,[e]).length){if(!bw&&e.nodeType===1){Z.cleanData(e.getElementsByTagName("*"));Z.cleanData([e]);}if(e.parentNode){e.parentNode.removeChild(e);}}}return this;},empty:function(){for(var bv=0,e;(e=this[bv])!=null;bv++){if(e.nodeType===1){Z.cleanData(e.getElementsByTagName("*"));}while(e.firstChild){e.removeChild(e.firstChild);}}return this;},clone:function(e,bv){e=e==null?false:e;bv=bv==null?e:bv;return this.map(function(){return Z.clone(this,e,bv);});},html:function(by){if(by===bo){return this[0]&&this[0].nodeType===1?this[0].innerHTML.replace(aG,""):null;}else{if(typeof by==="string"&&!aQ.test(by)&&(Z.support.leadingWhitespace||!aJ.test(by))&&!br[(a9.exec(by)||["",""])[1].toLowerCase()]){by=by.replace(bh,"<$1></$2>");try{for(var bw=0,bx=this.length;bw<bx;bw++){if(this[bw].nodeType===1){Z.cleanData(this[bw].getElementsByTagName("*"));this[bw].innerHTML=by;}}}catch(bv){this.empty().append(by);}}else{if(Z.isFunction(by)){this.each(function(e){var bz=Z(this);bz.html(by.call(this,e,bz.html()));});}else{this.empty().append(by);}}}return this;},replaceWith:function(e){if(this[0]&&this[0].parentNode){if(Z.isFunction(e)){return this.each(function(bv){var bx=Z(this),bw=bx.html();bx.replaceWith(e.call(this,bv,bw));});}if(typeof e!=="string"){e=Z(e).detach();}return this.each(function(){var bv=this.nextSibling,bw=this.parentNode;Z(this).remove();if(bv){Z(bv).before(e);}else{Z(bw).append(e);}});}else{return this.length?this.pushStack(Z(Z.isFunction(e)?e():e),"replaceWith",e):this;}},detach:function(e){return this.remove(e,true);},domManip:function(e,bE,bv){var bC,bw,bx,bB,bF=e[0],bD=[];if(!Z.support.checkClone&&arguments.length===3&&typeof bF==="string"&&ap.test(bF)){return this.each(function(){Z(this).domManip(e,bE,bv,true);});}if(Z.isFunction(bF)){return this.each(function(bG){var bH=Z(this);e[0]=bF.call(this,bG,bE?bH.html():bo);bH.domManip(e,bE,bv);});}if(this[0]){bB=bF&&bF.parentNode;if(Z.support.parentNode&&bB&&bB.nodeType===11&&bB.childNodes.length===this.length){bC={fragment:bB};}else{bC=Z.buildFragment(e,this,bD);}bx=bC.fragment;if(bx.childNodes.length===1){bw=bx=bx.firstChild;}else{bw=bx.firstChild;}if(bw){bE=bE&&Z.nodeName(bw,"tr");for(var by=0,bz=this.length,bA=bz-1;by<bz;by++){bv.call(bE?aU(this[by],bw):this[by],bC.cacheable||(bz>1&&by<bA)?Z.clone(bx,true,true):bx);}}if(bD.length){Z.each(bD,D);}}return this;}});function aU(bv,e){return Z.nodeName(bv,"table")?(bv.getElementsByTagName("tbody")[0]||bv.appendChild(bv.ownerDocument.createElement("tbody"))):bv;}function m(bA,bv){if(bv.nodeType!==1||!Z.hasData(bA)){return;}var bB,bx,by,bz=Z._data(bA),e=Z._data(bv,bz),bw=bz.events;if(bw){delete e.handle;e.events={};for(bB in bw){for(bx=0,by=bw[bB].length;bx<by;bx++){Z.event.add(bv,bB+(bw[bB][bx].namespace?".":"")+bw[bB][bx].namespace,bw[bB][bx],bw[bB][bx].data);}}}if(e.data){e.data=Z.extend({},e.data);}}function n(bw,e){var bv;if(e.nodeType!==1){return;}if(e.clearAttributes){e.clearAttributes();}if(e.mergeAttributes){e.mergeAttributes(bw);}bv=e.nodeName.toLowerCase();if(bv==="object"){e.outerHTML=bw.outerHTML;}else{if(bv==="input"&&(bw.type==="checkbox"||bw.type==="radio")){if(bw.checked){e.defaultChecked=e.checked=bw.checked;}if(e.value!==bw.value){e.value=bw.value;}}else{if(bv==="option"){e.selected=bw.defaultSelected;}else{if(bv==="input"||bv==="textarea"){e.defaultValue=bw.defaultValue;}}}}e.removeAttribute(Z.expando);}Z.buildFragment=function(e,bA,bB){var bz,bv,bw,bx,by=e[0];if(bA&&bA[0]){bx=bA[0].ownerDocument||bA[0];}if(!bx.createDocumentFragment){bx=A;}if(e.length===1&&typeof by==="string"&&by.length<512&&bx===A&&by.charAt(0)==="<"&&!aO.test(by)&&(Z.support.checkClone||!ap.test(by))&&(Z.support.html5Clone||!aR.test(by))){bv=true;bw=Z.fragments[by];if(bw&&bw!==1){bz=bw;}}if(!bz){bz=bx.createDocumentFragment();Z.clean(e,bx,bz,bB);}if(bv){Z.fragments[by]=bw?bz:1;}return{fragment:bz,cacheable:bv};};Z.fragments={};Z.each({appendTo:"append",prependTo:"prepend",insertBefore:"before",insertAfter:"after",replaceAll:"replaceWith"},function(e,bv){Z.fn[e]=function(bC){var bB=[],by=Z(bC),bA=this.length===1&&this[0].parentNode;if(bA&&bA.nodeType===11&&bA.childNodes.length===1&&by.length===1){by[bv](this[0]);return this;}else{for(var bx=0,bz=by.length;bx<bz;bx++){var bw=(bx>0?this.clone(true):this).get();Z(by[bx])[bv](bw);bB=bB.concat(bw);}return this.pushStack(bB,e,by.selector);}};});function L(e){if(typeof e.getElementsByTagName!=="undefined"){return e.getElementsByTagName("*");}else{if(typeof e.querySelectorAll!=="undefined"){return e.querySelectorAll("*");}else{return[];}}}function F(e){if(e.type==="checkbox"||e.type==="radio"){e.defaultChecked=e.checked;}}function E(e){var bv=(e.nodeName||"").toLowerCase();if(bv==="input"){F(e);}else{if(bv!=="script"&&typeof e.getElementsByTagName!=="undefined"){Z.grep(e.getElementsByTagName("input"),F);}}}function bj(bv){var e=A.createElement("div");bi.appendChild(e);e.innerHTML=bv.outerHTML;return e.firstChild;}Z.extend({clone:function(by,bv,bw){var bA,bx,bz,e=Z.support.html5Clone||!aR.test("<"+by.nodeName)?by.cloneNode(true):bj(by);if((!Z.support.noCloneEvent||!Z.support.noCloneChecked)&&(by.nodeType===1||by.nodeType===11)&&!Z.isXMLDoc(by)){n(by,e);bA=L(by);bx=L(e);for(bz=0;bA[bz];++bz){if(bx[bz]){n(bA[bz],bx[bz]);}}}if(bv){m(by,e);if(bw){bA=L(by);bx=L(e);for(bz=0;bA[bz];++bz){m(bA[bz],bx[bz]);}}}bA=bx=null;return e;},clean:function(bz,bv,bA,bH){var e;bv=bv||A;if(typeof bv.createElement==="undefined"){bv=bv.ownerDocument||bv[0]&&bv[0].ownerDocument||A;}var bG=[],bD;for(var bC=0,by;(by=bz[bC])!=null;bC++){if(typeof by==="number"){by+="";}if(!by){continue;}if(typeof by==="string"){if(!aF.test(by)){by=bv.createTextNode(by);}else{by=by.replace(bh,"<$1></$2>");var bI=(a9.exec(by)||["",""])[1].toLowerCase(),bK=br[bI]||br._default,bw=bK[0],bx=bv.createElement("div");if(bv===A){bi.appendChild(bx);}else{r(bv).appendChild(bx);}bx.innerHTML=bK[1]+by+bK[2];while(bw--){bx=bx.lastChild;}if(!Z.support.tbody){var bB=ba.test(by),bJ=bI==="table"&&!bB?bx.firstChild&&bx.firstChild.childNodes:bK[1]==="<table>"&&!bB?bx.childNodes:[];for(bD=bJ.length-1;bD>=0;--bD){if(Z.nodeName(bJ[bD],"tbody")&&!bJ[bD].childNodes.length){bJ[bD].parentNode.removeChild(bJ[bD]);}}}if(!Z.support.leadingWhitespace&&aJ.test(by)){bx.insertBefore(bv.createTextNode(aJ.exec(by)[0]),bx.firstChild);}by=bx.childNodes;}}var bF;if(!Z.support.appendChecked){if(by[0]&&typeof(bF=by.length)==="number"){for(bD=0;bD<bF;bD++){E(by[bD]);}}else{E(by);}}if(by.nodeType){bG.push(by);}else{bG=Z.merge(bG,by);}}if(bA){e=function(bL){return !bL.type||a4.test(bL.type);};for(bC=0;bG[bC];bC++){if(bH&&Z.nodeName(bG[bC],"script")&&(!bG[bC].type||bG[bC].type.toLowerCase()==="text/javascript")){bH.push(bG[bC].parentNode?bG[bC].parentNode.removeChild(bG[bC]):bG[bC]);}else{if(bG[bC].nodeType===1){var bE=Z.grep(bG[bC].getElementsByTagName("script"),e);bG.splice.apply(bG,[bC+1,0].concat(bE));}bA.appendChild(bG[bC]);}}}return bG;},cleanData:function(by){var bv,bA,e=Z.cache,bB=Z.event.special,bw=Z.support.deleteExpando;for(var bz=0,bx;(bx=by[bz])!=null;bz++){if(bx.nodeName&&Z.noData[bx.nodeName.toLowerCase()]){continue;}bA=bx[Z.expando];if(bA){bv=e[bA];if(bv&&bv.events){for(var bC in bv.events){if(bB[bC]){Z.event.remove(bx,bC);}else{Z.removeEvent(bx,bC,bv.handle);}}if(bv.handle){bv.handle.elem=null;}}if(bw){delete bx[Z.expando];}else{if(bx.removeAttribute){bx.removeAttribute(Z.expando);}}delete e[bA];}}}});function D(bv,e){if(e.src){Z.ajax({url:e.src,async:false,dataType:"script"});}else{Z.globalEval((e.text||e.textContent||e.innerHTML||"").replace(ar,"/*$0*/"));}if(e.parentNode){e.parentNode.removeChild(e);}}var al=/alpha\([^)]*\)/i,aV=/opacity=([^)]*)/,bf=/([A-Z]|^ms)/g,aT=/^-?\d+(?:px)?$/i,aS=/^-?\d/,a0=/^([\-+])=([\-+.\de]+)/,u={position:"absolute",visibility:"hidden",display:"block"},v=["Left","Right"],t=["Top","Bottom"],w,M,x;Z.fn.css=function(e,bv){if(arguments.length===2&&bv===bo){return this;}return Z.access(this,e,bv,true,function(bw,bx,by){return by!==bo?Z.style(bw,bx,by):Z.css(bw,bx);});};Z.extend({cssHooks:{opacity:{get:function(bv,e){if(e){var bw=w(bv,"opacity","opacity");return bw===""?"1":bw;}else{return bv.style.opacity;}}}},cssNumber:{fillOpacity:true,fontWeight:true,lineHeight:true,opacity:true,orphans:true,widows:true,zIndex:true,zoom:true},cssProps:{"float":Z.support.cssFloat?"cssFloat":"styleFloat"},style:function(bw,bz,bE,bx){if(!bw||bw.nodeType===3||bw.nodeType===8||!bw.style){return;}var bB,bD,bA=Z.camelCase(bz),bC=bw.style,by=Z.cssHooks[bA];bz=Z.cssProps[bA]||bA;if(bE!==bo){bD=typeof bE;if(bD==="string"&&(bB=a0.exec(bE))){bE=(+(bB[1]+1)*+bB[2])+parseFloat(Z.css(bw,bz));bD="number";}if(bE==null||bD==="number"&&isNaN(bE)){return;}if(bD==="number"&&!Z.cssNumber[bA]){bE+="px";}if(!by||!("set" in by)||(bE=by.set(bw,bE))!==bo){try{bC[bz]=bE;}catch(bv){}}}else{if(by&&"get" in by&&(bB=by.get(bw,false,bx))!==bo){return bB;}return bC[bz];}},css:function(e,bx,bv){var by,bw;bx=Z.camelCase(bx);bw=Z.cssHooks[bx];bx=Z.cssProps[bx]||bx;if(bx==="cssFloat"){bx="float";}if(bw&&"get" in bw&&(by=bw.get(e,true,bv))!==bo){return by;}else{if(w){return w(e,bx);}}},swap:function(bv,by,e){var bx={};for(var bw in by){bx[bw]=bv.style[bw];bv.style[bw]=by[bw];}e.call(bv);for(bw in by){bv.style[bw]=bx[bw];}}});Z.curCSS=Z.css;Z.each(["height","width"],function(e,bv){Z.cssHooks[bv]={get:function(bx,bw,by){var bz;if(bw){if(bx.offsetWidth!==0){return O(bx,bv,by);}else{Z.swap(bx,u,function(){bz=O(bx,bv,by);});}return bz;}},set:function(bw,bx){if(aT.test(bx)){bx=parseFloat(bx);if(bx>=0){return bx+"px";}}else{return bx;}}};});if(!Z.support.opacity){Z.cssHooks.opacity={get:function(bv,e){return aV.test((e&&bv.currentStyle?bv.currentStyle.filter:bv.style.filter)||"")?(parseFloat(RegExp.$1)/100)+"":e?"1":"";},set:function(bv,bz){var by=bv.style,e=bv.currentStyle,bx=Z.isNumeric(bz)?"alpha(opacity="+bz*100+")":"",bw=e&&e.filter||by.filter||"";by.zoom=1;if(bz>=1&&Z.trim(bw.replace(al,""))===""){by.removeAttribute("filter");if(e&&!e.filter){return;}}by.filter=al.test(bw)?bw.replace(al,bx):bw+" "+bx;}};}Z(function(){if(!Z.support.reliableMarginRight){Z.cssHooks.marginRight={get:function(bv,e){var bw;Z.swap(bv,{display:"inline-block"},function(){if(e){bw=w(bv,"margin-right","marginRight");}else{bw=bv.style.marginRight;}});return bw;}};}});if(A.defaultView&&A.defaultView.getComputedStyle){M=function(bw,bx){var by,bv,e;bx=bx.replace(bf,"-$1").toLowerCase();if((bv=bw.ownerDocument.defaultView)&&(e=bv.getComputedStyle(bw,null))){by=e.getPropertyValue(bx);if(by===""&&!Z.contains(bw.ownerDocument.documentElement,bw)){by=Z.style(bw,bx);}}return by;};}if(A.documentElement.currentStyle){x=function(e,bw){var bv,by,bA,bx=e.currentStyle&&e.currentStyle[bw],bz=e.style;if(bx===null&&bz&&(bA=bz[bw])){bx=bA;}if(!aT.test(bx)&&aS.test(bx)){bv=bz.left;by=e.runtimeStyle&&e.runtimeStyle.left;if(by){e.runtimeStyle.left=e.currentStyle.left;}bz.left=bw==="fontSize"?"1em":(bx||0);bx=bz.pixelLeft+"px";bz.left=bv;if(by){e.runtimeStyle.left=by;}}return bx===""?"auto":bx;};}w=M||x;function O(e,by,bv){var bz=by==="width"?e.offsetWidth:e.offsetHeight,bA=by==="width"?v:t,bw=0,bx=bA.length;if(bz>0){if(bv!=="border"){for(;bw<bx;bw++){if(!bv){bz-=parseFloat(Z.css(e,"padding"+bA[bw]))||0;}if(bv==="margin"){bz+=parseFloat(Z.css(e,bv+bA[bw]))||0;}else{bz-=parseFloat(Z.css(e,"border"+bA[bw]+"Width"))||0;}}}return bz+"px";}bz=w(e,by,by);if(bz<0||bz==null){bz=e.style[by]||0;}bz=parseFloat(bz)||0;if(bv){for(;bw<bx;bw++){bz+=parseFloat(Z.css(e,"padding"+bA[bw]))||0;if(bv!=="padding"){bz+=parseFloat(Z.css(e,"border"+bA[bw]+"Width"))||0;}if(bv==="margin"){bz+=parseFloat(Z.css(e,bv+bA[bw]))||0;}}}return bz+"px";}if(Z.expr&&Z.expr.filters){Z.expr.filters.hidden=function(e){var bw=e.offsetWidth,bv=e.offsetHeight;return(bw===0&&bv===0)||(!Z.support.reliableHiddenOffsets&&((e.style&&e.style.display)||Z.css(e,"display"))==="none");};Z.expr.filters.visible=function(e){return !Z.expr.filters.hidden(e);};}var ak=/%20/g,ao=/\[\]$/,au=/\r?\n/g,aC=/#.*$/,aD=/^(.*?):[ \t]*([^\r\n]*)\r?$/mg,aH=/^(?:color|date|datetime|datetime-local|email|hidden|month|number|password|range|search|tel|text|time|url|week)$/i,aK=/^(?:about|app|app\-storage|.+\-extension|file|res|widget):$/,aP=/^(?:GET|HEAD)$/,aX=/^\/\//,aY=/\?/,a3=/<script\b[^<]*(?:(?!<\/script>)<[^<]*)*<\/script>/gi,a5=/^(?:select|textarea)/i,a7=/\s+/,bb=/([?&])_=[^&]*/,bg=/^([\w\+\.\-]+:)(?:\/\/([^\/?#:]*)(?::(\d+))?)?/,a=Z.fn.load,ah={},bn={},g,h,i=["*/"]+["*"];try{g=ac.href;}catch(B){g=A.createElement("a");g.href="";g=g.href;}h=bg.exec(g.toLowerCase())||[];function b(e){return function(bw,by){if(typeof bw!=="string"){by=bw;bw="*";}if(Z.isFunction(by)){var bx=bw.toLowerCase().split(a7),bz=0,bA=bx.length,bv,bB,bC;for(;bz<bA;bz++){bv=bx[bz];bC=/^\+/.test(bv);if(bC){bv=bv.substr(1)||"*";}bB=e[bv]=e[bv]||[];bB[bC?"unshift":"push"](by);}}};}function V(bE,bB,bC,by,e,bx){e=e||bB.dataTypes[0];bx=bx||{};bx[e]=true;var bA=bE[e],bw=0,bz=bA?bA.length:0,bv=(bE===ah),bD;for(;bw<bz&&(bv||!bD);bw++){bD=bA[bw](bB,bC,by);if(typeof bD==="string"){if(!bv||bx[bD]){bD=bo;}else{bB.dataTypes.unshift(bD);bD=V(bE,bB,bC,by,bD,bx);}}}if((bv||!bD)&&!bx["*"]){bD=V(bE,bB,bC,by,"*",bx);}return bD;}function d(by,bx){var bw,e,bv=Z.ajaxSettings.flatOptions||{};for(bw in bx){if(bx[bw]!==bo){(bv[bw]?by:(e||(e={})))[bw]=bx[bw];}}if(e){Z.extend(true,by,e);}}Z.fn.extend({load:function(bA,bw,e){if(typeof bA!=="string"&&a){return a.apply(this,arguments);}else{if(!this.length){return this;}}var bv=bA.indexOf(" ");if(bv>=0){var bx=bA.slice(bv,bA.length);bA=bA.slice(0,bv);}var bz="GET";if(bw){if(Z.isFunction(bw)){e=bw;bw=bo;}else{if(typeof bw==="object"){bw=Z.param(bw,Z.ajaxSettings.traditional);bz="POST";}}}var by=this;Z.ajax({url:bA,type:bz,dataType:"html",data:bw,complete:function(bB,bD,bC){bC=bB.responseText;if(bB.isResolved()){bB.done(function(bE){bC=bE;});by.html(bx?Z("<div>").append(bC.replace(a3,"")).find(bx):bC);}if(e){by.each(e,[bC,bD,bB]);}}});return this;},serialize:function(){return Z.param(this.serializeArray());},serializeArray:function(){return this.map(function(){return this.elements?Z.makeArray(this.elements):this;}).filter(function(){return this.name&&!this.disabled&&(this.checked||a5.test(this.nodeName)||aH.test(this.type));}).map(function(bv,e){var bw=Z(this).val();return bw==null?null:Z.isArray(bw)?Z.map(bw,function(by,bx){return{name:e.name,value:by.replace(au,"\r\n")};}):{name:e.name,value:bw.replace(au,"\r\n")};}).get();}});Z.each("ajaxStart ajaxStop ajaxComplete ajaxError ajaxSuccess ajaxSend".split(" "),function(e,bv){Z.fn[bv]=function(bw){return this.on(bv,bw);};});Z.each(["get","post"],function(e,bv){Z[bv]=function(bz,bx,bw,by){if(Z.isFunction(bx)){by=by||bw;bw=bx;bx=bo;}return Z.ajax({type:bv,url:bz,data:bx,success:bw,dataType:by});};});Z.extend({getScript:function(bv,e){return Z.get(bv,bo,e,"script");},getJSON:function(bw,bv,e){return Z.get(bw,bv,e,"json");},ajaxSetup:function(bv,e){if(e){d(bv,Z.ajaxSettings);}else{e=bv;bv=Z.ajaxSettings;}d(bv,e);return bv;},ajaxSettings:{url:g,isLocal:aK.test(h[1]),global:true,type:"GET",contentType:"application/x-www-form-urlencoded",processData:true,async:true,accepts:{xml:"application/xml, text/xml",html:"text/html",text:"text/plain",json:"application/json, text/javascript","*":i},contents:{xml:/xml/,html:/html/,json:/json/},responseFields:{xml:"responseXML",text:"responseText"},converters:{"* text":bp.String,"text html":true,"text json":Z.parseJSON,"text xml":Z.parseXML},flatOptions:{context:true,url:true}},ajaxPrefilter:b(ah),ajaxTransport:b(bn),ajax:function(bS,bF){if(typeof bS==="object"){bF=bS;bS=bo;}bF=bF||{};var bM=Z.ajaxSetup({},bF),bv=bM.context||bM,bB=bv!==bM&&(bv.nodeType||bv instanceof Z)?Z(bv):Z.event,bx=Z.Deferred(),bw=Z.Callbacks("once memory"),bO=bM.statusCode||{},bD,bH={},bI={},bK,bJ,bQ,bP,bG,bN=0,bA,bC,bE={readyState:0,setRequestHeader:function(bT,bU){if(!bN){var e=bT.toLowerCase();bT=bI[e]=bI[e]||bT;bH[bT]=bU;}return this;},getAllResponseHeaders:function(){return bN===2?bK:null;},getResponseHeader:function(e){var bT;if(bN===2){if(!bJ){bJ={};while((bT=aD.exec(bK))){bJ[bT[1].toLowerCase()]=bT[2];}}bT=bJ[e.toLowerCase()];}return bT===bo?null:bT;},overrideMimeType:function(e){if(!bN){bM.mimeType=e;}return this;},abort:function(e){e=e||"abort";if(bQ){bQ.abort(e);}by(0,e);return this;}};function by(b2,bZ,b1,bW){if(bN===2){return;}bN=2;if(bP){clearTimeout(bP);}bQ=bo;bK=bW||"";bE.readyState=b2>0?4:0;var bX,b4,bU,b3=bZ,b0=b1?f(bM,bE,b1):bo,bY,bV;if(b2>=200&&b2<300||b2===304){if(bM.ifModified){if((bY=bE.getResponseHeader("Last-Modified"))){Z.lastModified[bD]=bY;}if((bV=bE.getResponseHeader("Etag"))){Z.etag[bD]=bV;}}if(b2===304){b3="notmodified";bX=true;}else{try{b4=c(bM,b0);b3="success";bX=true;}catch(bT){b3="parsererror";bU=bT;}}}else{bU=b3;if(!b3||b2){b3="error";if(b2<0){b2=0;}}}bE.status=b2;bE.statusText=""+(bZ||b3);if(bX){bx.resolveWith(bv,[b4,b3,bE]);}else{bx.rejectWith(bv,[bE,b3,bU]);}bE.statusCode(bO);bO=bo;if(bA){bB.trigger("ajax"+(bX?"Success":"Error"),[bE,bM,bX?b4:bU]);}bw.fireWith(bv,[bE,b3]);if(bA){bB.trigger("ajaxComplete",[bE,bM]);if(!(--Z.active)){Z.event.trigger("ajaxStop");}}}bx.promise(bE);bE.success=bE.done;bE.error=bE.fail;bE.complete=bw.add;bE.statusCode=function(e){if(e){var bT;if(bN<2){for(bT in e){bO[bT]=[bO[bT],e[bT]];}}else{bT=e[bE.status];bE.then(bT,bT);}}return this;};bM.url=((bS||bM.url)+"").replace(aC,"").replace(aX,h[1]+"//");bM.dataTypes=Z.trim(bM.dataType||"*").toLowerCase().split(a7);if(bM.crossDomain==null){bG=bg.exec(bM.url.toLowerCase());bM.crossDomain=!!(bG&&(bG[1]!=h[1]||bG[2]!=h[2]||(bG[3]||(bG[1]==="http:"?80:443))!=(h[3]||(h[1]==="http:"?80:443))));}if(bM.data&&bM.processData&&typeof bM.data!=="string"){bM.data=Z.param(bM.data,bM.traditional);}V(ah,bM,bF,bE);if(bN===2){return false;}bA=bM.global;bM.type=bM.type.toUpperCase();bM.hasContent=!aP.test(bM.type);if(bA&&Z.active++===0){Z.event.trigger("ajaxStart");}if(!bM.hasContent){if(bM.data){bM.url+=(aY.test(bM.url)?"&":"?")+bM.data;delete bM.data;}bD=bM.url;if(bM.cache===false){var bR=Z.now(),bL=bM.url.replace(bb,"$1_="+bR);bM.url=bL+((bL===bM.url)?(aY.test(bM.url)?"&":"?")+"_="+bR:"");}}if(bM.data&&bM.hasContent&&bM.contentType!==false||bF.contentType){bE.setRequestHeader("Content-Type",bM.contentType);}if(bM.ifModified){bD=bD||bM.url;if(Z.lastModified[bD]){bE.setRequestHeader("If-Modified-Since",Z.lastModified[bD]);}if(Z.etag[bD]){bE.setRequestHeader("If-None-Match",Z.etag[bD]);}}bE.setRequestHeader("Accept",bM.dataTypes[0]&&bM.accepts[bM.dataTypes[0]]?bM.accepts[bM.dataTypes[0]]+(bM.dataTypes[0]!=="*"?", "+i+"; q=0.01":""):bM.accepts["*"]);for(bC in bM.headers){bE.setRequestHeader(bC,bM.headers[bC]);}if(bM.beforeSend&&(bM.beforeSend.call(bv,bE,bM)===false||bN===2)){bE.abort();return false;}for(bC in {success:1,error:1,complete:1}){bE[bC](bM[bC]);}bQ=V(bn,bM,bF,bE);if(!bQ){by(-1,"No Transport");}else{bE.readyState=1;if(bA){bB.trigger("ajaxSend",[bE,bM]);}if(bM.async&&bM.timeout>0){bP=setTimeout(function(){bE.abort("timeout");},bM.timeout);}try{bN=1;bQ.send(bH,by);}catch(bz){if(bN<2){by(-1,bz);}else{throw bz;}}}return bE;},param:function(e,by){var bx=[],bv=function(bz,bA){bA=Z.isFunction(bA)?bA():bA;bx[bx.length]=encodeURIComponent(bz)+"="+encodeURIComponent(bA);};if(by===bo){by=Z.ajaxSettings.traditional;}if(Z.isArray(e)||(e.jquery&&!Z.isPlainObject(e))){Z.each(e,function(){bv(this.name,this.value);});}else{for(var bw in e){k(bw,e[bw],by,bv);}}return bx.join("&").replace(ak,"+");}});function k(bx,bw,by,e){if(Z.isArray(bw)){Z.each(bw,function(bz,bA){if(by||ao.test(bx)){e(bx,bA);}else{k(bx+"["+(typeof bA==="object"||Z.isArray(bA)?bz:"")+"]",bA,by,e);}});}else{if(!by&&bw!=null&&typeof bw==="object"){for(var bv in bw){k(bx+"["+bv+"]",bw[bv],by,e);}}else{e(bx,bw);}}}Z.extend({active:0,lastModified:{},etag:{}});function f(bC,bz,bB){var e=bC.contents,bw=bC.dataTypes,bA=bC.responseFields,bv,bD,bx,by;for(bD in bA){if(bD in bB){bz[bA[bD]]=bB[bD];}}while(bw[0]==="*"){bw.shift();if(bv===bo){bv=bC.mimeType||bz.getResponseHeader("content-type");}}if(bv){for(bD in e){if(e[bD]&&e[bD].test(bv)){bw.unshift(bD);break;}}}if(bw[0] in bB){bx=bw[0];}else{for(bD in bB){if(!bw[0]||bC.converters[bD+" "+bw[0]]){bx=bD;break;}if(!by){by=bD;}}bx=bx||by;}if(bx){if(bx!==bw[0]){bw.unshift(bx);}return bB[bx];}}function c(bG,bF){if(bG.dataFilter){bF=bG.dataFilter(bF,bG.dataType);}var bA=bG.dataTypes,by={},bB,bC,bD=bA.length,bH,bz=bA[0],bE,bx,e,bv,bw;for(bB=1;bB<bD;bB++){if(bB===1){for(bC in bG.converters){if(typeof bC==="string"){by[bC.toLowerCase()]=bG.converters[bC];}}}bE=bz;bz=bA[bB];if(bz==="*"){bz=bE;}else{if(bE!=="*"&&bE!==bz){bx=bE+" "+bz;e=by[bx]||by["* "+bz];if(!e){bw=bo;for(bv in by){bH=bv.split(" ");if(bH[0]===bE||bH[0]==="*"){bw=by[bH[1]+" "+bz];if(bw){bv=by[bv];if(bv===true){e=bw;}else{if(bw===true){e=bv;}}break;}}}}if(!(e||bw)){Z.error("No conversion from "+bx.replace(" "," to "));}if(e!==true){bF=e?e(bF):bw(bv(bF));}}}}return bF;}var aa=Z.now(),ab=/(\=)\?(&|$)|\?\?/i;Z.ajaxSetup({jsonp:"callback",jsonpCallback:function(){return Z.expando+"_"+(aa++);}});Z.ajaxPrefilter("json jsonp",function(bC,by,bw){var bv=bC.contentType==="application/x-www-form-urlencoded"&&(typeof bC.data==="string");if(bC.dataTypes[0]==="jsonp"||bC.jsonp!==false&&(ab.test(bC.url)||bv&&ab.test(bC.data))){var bB,bx=bC.jsonpCallback=Z.isFunction(bC.jsonpCallback)?bC.jsonpCallback():bC.jsonpCallback,bz=bp[bx],bD=bC.url,e=bC.data,bA="$1"+bx+"$2";if(bC.jsonp!==false){bD=bD.replace(ab,bA);if(bC.url===bD){if(bv){e=e.replace(ab,bA);}if(bC.data===e){bD+=(/\?/.test(bD)?"&":"?")+bC.jsonp+"="+bx;}}}bC.url=bD;bC.data=e;bp[bx]=function(bE){bB=[bE];};bw.always(function(){bp[bx]=bz;if(bB&&Z.isFunction(bz)){bp[bx](bB[0]);}});bC.converters["script json"]=function(){if(!bB){Z.error(bx+" was not called");}return bB[0];};bC.dataTypes[0]="json";return"script";}});Z.ajaxSetup({accepts:{script:"text/javascript, application/javascript, application/ecmascript, application/x-ecmascript"},contents:{script:/javascript|ecmascript/},converters:{"text script":function(e){Z.globalEval(e);return e;}}});Z.ajaxPrefilter("script",function(e){if(e.cache===bo){e.cache=false;}if(e.crossDomain){e.type="GET";e.global=false;}});Z.ajaxTransport("script",function(bv){if(bv.crossDomain){var bw,e=A.head||A.getElementsByTagName("head")[0]||A.documentElement;return{send:function(bx,by){bw=A.createElement("script");bw.async="async";if(bv.scriptCharset){bw.charset=bv.scriptCharset;}bw.src=bv.url;bw.onload=bw.onreadystatechange=function(bz,bA){if(bA||!bw.readyState||/loaded|complete/.test(bw.readyState)){bw.onload=bw.onreadystatechange=null;if(e&&bw.parentNode){e.removeChild(bw);}bw=bo;if(!bA){by(200,"success");}}};e.insertBefore(bw,e.firstChild);},abort:function(){if(bw){bw.onload(0,1);}}};}});var bu=bp.ActiveXObject?function(){for(var e in bs){bs[e](0,1);}}:false,bt=0,bs;function s(){try{return new bp.XMLHttpRequest();}catch(bv){}}function o(){try{return new bp.ActiveXObject("Microsoft.XMLHTTP");}catch(bv){}}Z.ajaxSettings.xhr=bp.ActiveXObject?function(){return !this.isLocal&&s()||o();}:s;(function(e){Z.extend(Z.support,{ajax:!!e,cors:!!e&&("withCredentials" in e)});})(Z.ajaxSettings.xhr());if(Z.support.ajax){Z.ajaxTransport(function(bv){if(!bv.crossDomain||Z.support.cors){var e;return{send:function(bz,bx){var bB=bv.xhr(),by,bA;if(bv.username){bB.open(bv.type,bv.url,bv.async,bv.username,bv.password);}else{bB.open(bv.type,bv.url,bv.async);}if(bv.xhrFields){for(bA in bv.xhrFields){bB[bA]=bv.xhrFields[bA];}}if(bv.mimeType&&bB.overrideMimeType){bB.overrideMimeType(bv.mimeType);}if(!bv.crossDomain&&!bz["X-Requested-With"]){bz["X-Requested-With"]="XMLHttpRequest";}try{for(bA in bz){bB.setRequestHeader(bA,bz[bA]);}}catch(bw){}bB.send((bv.hasContent&&bv.data)||null);e=function(bC,bF){var bI,bJ,bG,bH,bK;try{if(e&&(bF||bB.readyState===4)){e=bo;if(by){bB.onreadystatechange=Z.noop;if(bu){delete bs[by];}}if(bF){if(bB.readyState!==4){bB.abort();}}else{bI=bB.status;bG=bB.getAllResponseHeaders();bH={};bK=bB.responseXML;if(bK&&bK.documentElement){bH.xml=bK;}bH.text=bB.responseText;try{bJ=bB.statusText;}catch(bD){bJ="";}if(!bI&&bv.isLocal&&!bv.crossDomain){bI=bH.text?200:404;}else{if(bI===1223){bI=204;}}}}}catch(bE){if(!bF){bx(-1,bE);}}if(bH){bx(bI,bJ,bH,bG);}};if(!bv.async||bB.readyState===4){e();}else{by=++bt;if(bu){if(!bs){bs={};Z(bp).unload(bu);}bs[by]=e;}bB.onreadystatechange=e;}},abort:function(){if(e){e(0,1);}}};}});}var C={},T,U,aB=/^(?:toggle|show|hide)$/,aA=/^([+\-]=)?([\d+.\-]+)([a-z%]*)$/i,bm,I=[["height","marginTop","marginBottom","paddingTop","paddingBottom"],["width","marginLeft","marginRight","paddingLeft","paddingRight"],["opacity"]],J;Z.fn.extend({show:function(bA,bw,e){var bx,bv;if(bA||bA===0){return this.animate(K("show",3),bA,bw,e);}else{for(var by=0,bz=this.length;by<bz;by++){bx=this[by];if(bx.style){bv=bx.style.display;if(!Z._data(bx,"olddisplay")&&bv==="none"){bv=bx.style.display="";}if(bv===""&&Z.css(bx,"display")==="none"){Z._data(bx,"olddisplay",z(bx.nodeName));}}}for(by=0;by<bz;by++){bx=this[by];if(bx.style){bv=bx.style.display;if(bv===""||bv==="none"){bx.style.display=Z._data(bx,"olddisplay")||"";}}}return this;}},hide:function(bA,bw,e){if(bA||bA===0){return this.animate(K("hide",3),bA,bw,e);}else{var bx,bv,by=0,bz=this.length;for(;by<bz;by++){bx=this[by];if(bx.style){bv=Z.css(bx,"display");if(bv!=="none"&&!Z._data(bx,"olddisplay")){Z._data(bx,"olddisplay",bv);}}}for(by=0;by<bz;by++){if(this[by].style){this[by].style.display="none";}}return this;}},_toggle:Z.fn.toggle,toggle:function(bw,bx,bv){var e=typeof bw==="boolean";if(Z.isFunction(bw)&&Z.isFunction(bx)){this._toggle.apply(this,arguments);}else{if(bw==null||e){this.each(function(){var by=e?bw:Z(this).is(":hidden");Z(this)[by?"show":"hide"]();});}else{this.animate(K("toggle",3),bw,bx,bv);}}return this;},fadeTo:function(bw,bx,bv,e){return this.filter(":hidden").css("opacity",0).show().end().animate({opacity:bx},bw,bv,e);},animate:function(by,bz,bw,e){var bx=Z.speed(bz,bw,e);if(Z.isEmptyObject(by)){return this.each(bx.complete,[false]);}by=Z.extend({},by);function bv(){if(bx.queue===false){Z._mark(this);}var bG=Z.extend({},bx),bD=this.nodeType===1,bC=bD&&Z(this).is(":hidden"),bF,bL,bH,bA,bI,bJ,bB,bK,bE;bG.animatedProperties={};for(bH in by){bF=Z.camelCase(bH);if(bH!==bF){by[bF]=by[bH];delete by[bH];}bL=by[bF];if(Z.isArray(bL)){bG.animatedProperties[bF]=bL[1];bL=by[bF]=bL[0];}else{bG.animatedProperties[bF]=bG.specialEasing&&bG.specialEasing[bF]||bG.easing||"swing";}if(bL==="hide"&&bC||bL==="show"&&!bC){return bG.complete.call(this);}if(bD&&(bF==="height"||bF==="width")){bG.overflow=[this.style.overflow,this.style.overflowX,this.style.overflowY];if(Z.css(this,"display")==="inline"&&Z.css(this,"float")==="none"){if(!Z.support.inlineBlockNeedsLayout||z(this.nodeName)==="inline"){this.style.display="inline-block";}else{this.style.zoom=1;}}}}if(bG.overflow!=null){this.style.overflow="hidden";}for(bH in by){bA=new Z.fx(this,bG,bH);bL=by[bH];if(aB.test(bL)){bE=Z._data(this,"toggle"+bH)||(bL==="toggle"?bC?"show":"hide":0);if(bE){Z._data(this,"toggle"+bH,bE==="show"?"hide":"show");bA[bE]();}else{bA[bL]();}}else{bI=aA.exec(bL);bJ=bA.cur();if(bI){bB=parseFloat(bI[2]);bK=bI[3]||(Z.cssNumber[bH]?"":"px");if(bK!=="px"){Z.style(this,bH,(bB||1)+bK);bJ=((bB||1)/bA.cur())*bJ;Z.style(this,bH,bJ+bK);}if(bI[1]){bB=((bI[1]==="-="?-1:1)*bB)+bJ;}bA.custom(bJ,bB,bK);}else{bA.custom(bJ,bL,"");}}}return true;}return bx.queue===false?this.each(bv):this.queue(bx.queue,bv);},stop:function(bw,e,bv){if(typeof bw!=="string"){bv=e;e=bw;bw=bo;}if(e&&bw!==false){this.queue(bw||"fx",[]);}return this.each(function(){var bz,by=false,bB=Z.timers,bx=Z._data(this);if(!bv){Z._unmark(true,this);}function bA(bD,bC,bF){var bE=bC[bF];Z.removeData(bD,bF,true);bE.stop(bv);}if(bw==null){for(bz in bx){if(bx[bz]&&bx[bz].stop&&bz.indexOf(".run")===bz.length-4){bA(this,bx,bz);}}}else{if(bx[bz=bw+".run"]&&bx[bz].stop){bA(this,bx,bz);}}for(bz=bB.length;bz--;){if(bB[bz].elem===this&&(bw==null||bB[bz].queue===bw)){if(bv){bB[bz](true);}else{bB[bz].saveState();}by=true;bB.splice(bz,1);}}if(!(bv&&by)){Z.dequeue(this,bw);}});}});function q(){setTimeout(l,0);return(J=Z.now());}function l(){J=bo;}function K(bw,e){var bv={};Z.each(I.concat.apply([],I.slice(0,e)),function(){bv[this]=bw;});return bv;}Z.each({slideDown:K("show",1),slideUp:K("hide",1),slideToggle:K("toggle",1),fadeIn:{opacity:"show"},fadeOut:{opacity:"hide"},fadeToggle:{opacity:"toggle"}},function(e,bv){Z.fn[e]=function(by,bx,bw){return this.animate(bv,by,bx,bw);};});Z.extend({speed:function(bx,e,bv){var bw=bx&&typeof bx==="object"?Z.extend({},bx):{complete:bv||!bv&&e||Z.isFunction(bx)&&bx,duration:bx,easing:bv&&e||e&&!Z.isFunction(e)&&e};bw.duration=Z.fx.off?0:typeof bw.duration==="number"?bw.duration:bw.duration in Z.fx.speeds?Z.fx.speeds[bw.duration]:Z.fx.speeds._default;if(bw.queue==null||bw.queue===true){bw.queue="fx";}bw.old=bw.complete;bw.complete=function(by){if(Z.isFunction(bw.old)){bw.old.call(this);}if(bw.queue){Z.dequeue(this,bw.queue);}else{if(by!==false){Z._unmark(this);}}};return bw;},easing:{linear:function(bx,bw,bv,e){return bv+e*bx;},swing:function(bx,bw,bv,e){return((-Math.cos(bx*Math.PI)/2)+0.5)*e+bv;}},timers:[],fx:function(e,bv,bw){this.options=bv;this.elem=e;this.prop=bw;bv.orig=bv.orig||{};}});Z.fx.prototype={update:function(){if(this.options.step){this.options.step.call(this.elem,this.now,this);}(Z.fx.step[this.prop]||Z.fx.step._default)(this);},cur:function(){if(this.elem[this.prop]!=null&&(!this.elem.style||this.elem.style[this.prop]==null)){return this.elem[this.prop];}var e,bv=Z.css(this.elem,this.prop);return isNaN(e=parseFloat(bv))?!bv||bv==="auto"?0:bv:e;},custom:function(e,by,bz){var bw=this,bv=Z.fx;this.startTime=J||q();this.end=by;this.now=this.start=e;this.pos=this.state=0;this.unit=bz||this.unit||(Z.cssNumber[this.prop]?"":"px");function bx(bA){return bw.step(bA);}bx.queue=this.options.queue;bx.elem=this.elem;bx.saveState=function(){if(bw.options.hide&&Z._data(bw.elem,"fxshow"+bw.prop)===bo){Z._data(bw.elem,"fxshow"+bw.prop,bw.start);}};if(bx()&&Z.timers.push(bx)&&!bm){bm=setInterval(bv.tick,bv.interval);}},show:function(){var e=Z._data(this.elem,"fxshow"+this.prop);this.options.orig[this.prop]=e||Z.style(this.elem,this.prop);this.options.show=true;if(e!==bo){this.custom(this.cur(),e);}else{this.custom(this.prop==="width"||this.prop==="height"?1:0,this.cur());}Z(this.elem).show();},hide:function(){this.options.orig[this.prop]=Z._data(this.elem,"fxshow"+this.prop)||Z.style(this.elem,this.prop);this.options.hide=true;this.custom(this.cur(),0);},step:function(bx){var bA,by,e,bB=J||q(),bv=true,bw=this.elem,bz=this.options;if(bx||bB>=bz.duration+this.startTime){this.now=this.end;this.pos=this.state=1;this.update();bz.animatedProperties[this.prop]=true;for(bA in bz.animatedProperties){if(bz.animatedProperties[bA]!==true){bv=false;}}if(bv){if(bz.overflow!=null&&!Z.support.shrinkWrapBlocks){Z.each(["","X","Y"],function(bC,bD){bw.style["overflow"+bD]=bz.overflow[bC];});}if(bz.hide){Z(bw).hide();}if(bz.hide||bz.show){for(bA in bz.animatedProperties){Z.style(bw,bA,bz.orig[bA]);Z.removeData(bw,"fxshow"+bA,true);Z.removeData(bw,"toggle"+bA,true);}}e=bz.complete;if(e){bz.complete=false;e.call(bw);}}return false;}else{if(bz.duration==Infinity){this.now=bB;}else{by=bB-this.startTime;this.state=by/bz.duration;this.pos=Z.easing[bz.animatedProperties[this.prop]](this.state,by,0,1,bz.duration);this.now=this.start+((this.end-this.start)*this.pos);}this.update();}return true;}};Z.extend(Z.fx,{tick:function(){var bv,bw=Z.timers,e=0;for(;e<bw.length;e++){bv=bw[e];if(!bv()&&bw[e]===bv){bw.splice(e--,1);}}if(!bw.length){Z.fx.stop();}},interval:13,stop:function(){clearInterval(bm);bm=null;},speeds:{slow:600,fast:200,_default:400},step:{opacity:function(e){Z.style(e.elem,"opacity",e.now);},_default:function(e){if(e.elem.style&&e.elem.style[e.prop]!=null){e.elem.style[e.prop]=e.now+e.unit;}else{e.elem[e.prop]=e.now;}}}});Z.each(["width","height"],function(e,bv){Z.fx.step[bv]=function(bw){Z.style(bw.elem,bv,Math.max(0,bw.now)+bw.unit);};});if(Z.expr&&Z.expr.filters){Z.expr.filters.animated=function(e){return Z.grep(Z.timers,function(bv){return e===bv.elem;}).length;};}function z(bx){if(!C[bx]){var e=A.body,bw=Z("<"+bx+">").appendTo(e),bv=bw.css("display");bw.remove();if(bv==="none"||bv===""){if(!T){T=A.createElement("iframe");T.frameBorder=T.width=T.height=0;}e.appendChild(T);if(!U||!T.createElement){U=(T.contentWindow||T.contentDocument).document;U.write((A.compatMode==="CSS1Compat"?"<!doctype html>":"")+"<html><body>");U.close();}bw=U.createElement(bx);U.body.appendChild(bw);bv=Z.css(bw,"display");e.removeChild(T);}C[bx]=bv;}return C[bx];}var a8=/^t(?:able|d|h)$/i,a2=/^(?:body|html)$/i;if("getBoundingClientRect" in A.documentElement){Z.fn.offset=function(bE){var bC=this[0],bw;if(bE){return this.each(function(e){Z.offset.setOffset(this,bE,e);});}if(!bC||!bC.ownerDocument){return null;}if(bC===bC.ownerDocument.body){return Z.offset.bodyOffset(bC);}try{bw=bC.getBoundingClientRect();}catch(bB){}var bz=bC.ownerDocument,bA=bz.documentElement;if(!bw||!Z.contains(bA,bC)){return bw?{top:bw.top,left:bw.left}:{top:0,left:0};}var bv=bz.body,bI=P(bz),by=bA.clientTop||bv.clientTop||0,bx=bA.clientLeft||bv.clientLeft||0,bG=bI.pageYOffset||Z.support.boxModel&&bA.scrollTop||bv.scrollTop,bF=bI.pageXOffset||Z.support.boxModel&&bA.scrollLeft||bv.scrollLeft,bH=bw.top+bG-by,bD=bw.left+bF-bx;return{top:bH,left:bD};};}else{Z.fn.offset=function(bC){var bz=this[0];if(bC){return this.each(function(bG){Z.offset.setOffset(this,bC,bG);});}if(!bz||!bz.ownerDocument){return null;}if(bz===bz.ownerDocument.body){return Z.offset.bodyOffset(bz);}var bv,bB=bz.offsetParent,bE=bz,bx=bz.ownerDocument,by=bx.documentElement,e=bx.body,bw=bx.defaultView,bD=bw?bw.getComputedStyle(bz,null):bz.currentStyle,bF=bz.offsetTop,bA=bz.offsetLeft;while((bz=bz.parentNode)&&bz!==e&&bz!==by){if(Z.support.fixedPosition&&bD.position==="fixed"){break;}bv=bw?bw.getComputedStyle(bz,null):bz.currentStyle;bF-=bz.scrollTop;bA-=bz.scrollLeft;if(bz===bB){bF+=bz.offsetTop;bA+=bz.offsetLeft;if(Z.support.doesNotAddBorder&&!(Z.support.doesAddBorderForTableAndCells&&a8.test(bz.nodeName))){bF+=parseFloat(bv.borderTopWidth)||0;bA+=parseFloat(bv.borderLeftWidth)||0;}bE=bB;bB=bz.offsetParent;}if(Z.support.subtractsBorderForOverflowNotVisible&&bv.overflow!=="visible"){bF+=parseFloat(bv.borderTopWidth)||0;bA+=parseFloat(bv.borderLeftWidth)||0;}bD=bv;}if(bD.position==="relative"||bD.position==="static"){bF+=e.offsetTop;bA+=e.offsetLeft;}if(Z.support.fixedPosition&&bD.position==="fixed"){bF+=Math.max(by.scrollTop,e.scrollTop);bA+=Math.max(by.scrollLeft,e.scrollLeft);}return{top:bF,left:bA};};}Z.offset={bodyOffset:function(e){var bw=e.offsetTop,bv=e.offsetLeft;if(Z.support.doesNotIncludeMarginInBodyOffset){bw+=parseFloat(Z.css(e,"marginTop"))||0;bv+=parseFloat(Z.css(e,"marginLeft"))||0;}return{top:bw,left:bv};},setOffset:function(bC,bE,bD){var bF=Z.css(bC,"position");if(bF==="static"){bC.style.position="relative";}var bx=Z(bC),bz=bx.offset(),bw=Z.css(bC,"top"),bv=Z.css(bC,"left"),e=(bF==="absolute"||bF==="fixed")&&Z.inArray("auto",[bw,bv])>-1,bG={},bA={},bB,by;if(e){bA=bx.position();bB=bA.top;by=bA.left;}else{bB=parseFloat(bw)||0;by=parseFloat(bv)||0;}if(Z.isFunction(bE)){bE=bE.call(bC,bD,bz);}if(bE.top!=null){bG.top=(bE.top-bz.top)+bB;}if(bE.left!=null){bG.left=(bE.left-bz.left)+by;}if("using" in bE){bE.using.call(bC,bG);}else{bx.css(bG);}}};Z.fn.extend({position:function(){if(!this[0]){return null;}var e=this[0],bw=this.offsetParent(),bv=this.offset(),bx=a2.test(bw[0].nodeName)?{top:0,left:0}:bw.offset();bv.top-=parseFloat(Z.css(e,"marginTop"))||0;bv.left-=parseFloat(Z.css(e,"marginLeft"))||0;bx.top+=parseFloat(Z.css(bw[0],"borderTopWidth"))||0;bx.left+=parseFloat(Z.css(bw[0],"borderLeftWidth"))||0;return{top:bv.top-bx.top,left:bv.left-bx.left};},offsetParent:function(){return this.map(function(){var e=this.offsetParent||A.body;while(e&&(!a2.test(e.nodeName)&&Z.css(e,"position")==="static")){e=e.offsetParent;}return e;});}});Z.each(["Left","Top"],function(e,bw){var bv="scroll"+bw;Z.fn[bv]=function(by){var bx,bz;if(by===bo){bx=this[0];if(!bx){return null;}bz=P(bx);return bz?("pageXOffset" in bz)?bz[e?"pageYOffset":"pageXOffset"]:Z.support.boxModel&&bz.document.documentElement[bv]||bz.document.body[bv]:bx[bv];}return this.each(function(){bz=P(this);if(bz){bz.scrollTo(!e?by:Z(bz).scrollLeft(),e?by:Z(bz).scrollTop());}else{this[bv]=by;}});};});function P(e){return Z.isWindow(e)?e:e.nodeType===9?e.defaultView||e.parentWindow:false;}Z.each(["Height","Width"],function(e,bv){var bw=bv.toLowerCase();Z.fn["inner"+bv]=function(){var bx=this[0];return bx?bx.style?parseFloat(Z.css(bx,bw,"padding")):this[bw]():null;};Z.fn["outer"+bv]=function(by){var bx=this[0];return bx?bx.style?parseFloat(Z.css(bx,bw,by?"margin":"border")):this[bw]():null;};Z.fn[bw]=function(bC){var bz=this[0];if(!bz){return bC==null?null:this;}if(Z.isFunction(bC)){return this.each(function(bD){var bE=Z(this);bE[bw](bC.call(this,bD,bE[bw]()));});}if(Z.isWindow(bz)){var by=bz.document.documentElement["client"+bv],bx=bz.document.body;return bz.document.compatMode==="CSS1Compat"&&by||bx&&bx["client"+bv]||by;}else{if(bz.nodeType===9){return Math.max(bz.documentElement["client"+bv],bz.body["scroll"+bv],bz.documentElement["scroll"+bv],bz.body["offset"+bv],bz.documentElement["offset"+bv]);}else{if(bC===bo){var bA=Z.css(bz,bw),bB=parseFloat(bA);return Z.isNumeric(bB)?bB:bA;}else{return this.css(bw,typeof bC==="string"?bC:bC+"px");}}}};});bettercms.define("bcms.jquery",[],function(){return Z.noConflict(true);});})(window);bettercms.define("bcms.jqueryui",["bcms.jquery"],function(jquery){
/* jQuery UI - v1.9.0 - 2012-10-05
* http://jqueryui.com
* Includes: jquery.ui.core.js, jquery.ui.widget.js, jquery.ui.mouse.js, jquery.ui.draggable.js, jquery.ui.droppable.js, jquery.ui.resizable.js, jquery.ui.selectable.js, jquery.ui.sortable.js, jquery.ui.effect.js, jquery.ui.accordion.js, jquery.ui.autocomplete.js, jquery.ui.button.js, jquery.ui.datepicker.js, jquery.ui.dialog.js, jquery.ui.effect-blind.js, jquery.ui.effect-bounce.js, jquery.ui.effect-clip.js, jquery.ui.effect-drop.js, jquery.ui.effect-explode.js, jquery.ui.effect-fade.js, jquery.ui.effect-fold.js, jquery.ui.effect-highlight.js, jquery.ui.effect-pulsate.js, jquery.ui.effect-scale.js, jquery.ui.effect-shake.js, jquery.ui.effect-slide.js, jquery.ui.effect-transfer.js, jquery.ui.menu.js, jquery.ui.position.js, jquery.ui.progressbar.js, jquery.ui.slider.js, jquery.ui.spinner.js, jquery.ui.tabs.js, jquery.ui.tooltip.js
* Copyright 2012 jQuery Foundation and other contributors; Licensed MIT */
(function($,undefined){var uuid=0,runiqueId=/^ui-id-\d+$/;$.ui=$.ui||{};if($.ui.version){return;}$.extend($.ui,{version:"1.9.0",keyCode:{BACKSPACE:8,COMMA:188,DELETE:46,DOWN:40,END:35,ENTER:13,ESCAPE:27,HOME:36,LEFT:37,NUMPAD_ADD:107,NUMPAD_DECIMAL:110,NUMPAD_DIVIDE:111,NUMPAD_ENTER:108,NUMPAD_MULTIPLY:106,NUMPAD_SUBTRACT:109,PAGE_DOWN:34,PAGE_UP:33,PERIOD:190,RIGHT:39,SPACE:32,TAB:9,UP:38}});$.fn.extend({_focus:$.fn.focus,focus:function(delay,fn){return typeof delay==="number"?this.each(function(){var elem=this;setTimeout(function(){$(elem).focus();if(fn){fn.call(elem);}},delay);}):this._focus.apply(this,arguments);},scrollParent:function(){var scrollParent;if(($.browser.msie&&(/(static|relative)/).test(this.css("position")))||(/absolute/).test(this.css("position"))){scrollParent=this.parents().filter(function(){return(/(relative|absolute|fixed)/).test($.css(this,"position"))&&(/(auto|scroll)/).test($.css(this,"overflow")+$.css(this,"overflow-y")+$.css(this,"overflow-x"));}).eq(0);}else{scrollParent=this.parents().filter(function(){return(/(auto|scroll)/).test($.css(this,"overflow")+$.css(this,"overflow-y")+$.css(this,"overflow-x"));}).eq(0);}return(/fixed/).test(this.css("position"))||!scrollParent.length?$(document):scrollParent;},zIndex:function(zIndex){if(zIndex!==undefined){return this.css("zIndex",zIndex);}if(this.length){var elem=$(this[0]),position,value;while(elem.length&&elem[0]!==document){position=elem.css("position");if(position==="absolute"||position==="relative"||position==="fixed"){value=parseInt(elem.css("zIndex"),10);if(!isNaN(value)&&value!==0){return value;}}elem=elem.parent();}}return 0;},uniqueId:function(){return this.each(function(){if(!this.id){this.id="ui-id-"+(++uuid);}});},removeUniqueId:function(){return this.each(function(){if(runiqueId.test(this.id)){$(this).removeAttr("id");}});}});if(!$("<a>").outerWidth(1).jquery){$.each(["Width","Height"],function(i,name){var side=name==="Width"?["Left","Right"]:["Top","Bottom"],type=name.toLowerCase(),orig={innerWidth:$.fn.innerWidth,innerHeight:$.fn.innerHeight,outerWidth:$.fn.outerWidth,outerHeight:$.fn.outerHeight};function reduce(elem,size,border,margin){$.each(side,function(){size-=parseFloat($.css(elem,"padding"+this))||0;if(border){size-=parseFloat($.css(elem,"border"+this+"Width"))||0;}if(margin){size-=parseFloat($.css(elem,"margin"+this))||0;}});return size;}$.fn["inner"+name]=function(size){if(size===undefined){return orig["inner"+name].call(this);}return this.each(function(){$(this).css(type,reduce(this,size)+"px");});};$.fn["outer"+name]=function(size,margin){if(typeof size!=="number"){return orig["outer"+name].call(this,size);}return this.each(function(){$(this).css(type,reduce(this,size,true,margin)+"px");});};});}function focusable(element,isTabIndexNotNaN){var map,mapName,img,nodeName=element.nodeName.toLowerCase();if("area"===nodeName){map=element.parentNode;mapName=map.name;if(!element.href||!mapName||map.nodeName.toLowerCase()!=="map"){return false;}img=$("img[usemap=#"+mapName+"]")[0];return !!img&&visible(img);}return(/input|select|textarea|button|object/.test(nodeName)?!element.disabled:"a"===nodeName?element.href||isTabIndexNotNaN:isTabIndexNotNaN)&&visible(element);}function visible(element){return !$(element).parents().andSelf().filter(function(){return $.css(this,"visibility")==="hidden"||$.expr.filters.hidden(this);}).length;}$.extend($.expr[":"],{data:$.expr.createPseudo?$.expr.createPseudo(function(dataName){return function(elem){return !!$.data(elem,dataName);};}):function(elem,i,match){return !!$.data(elem,match[3]);},focusable:function(element){return focusable(element,!isNaN($.attr(element,"tabindex")));},tabbable:function(element){var tabIndex=$.attr(element,"tabindex"),isTabIndexNaN=isNaN(tabIndex);return(isTabIndexNaN||tabIndex>=0)&&focusable(element,!isTabIndexNaN);}});$(function(){var body=document.body,div=body.appendChild(div=document.createElement("div"));div.offsetHeight;$.extend(div.style,{minHeight:"100px",height:"auto",padding:0,borderWidth:0});$.support.minHeight=div.offsetHeight===100;$.support.selectstart="onselectstart" in div;body.removeChild(div).style.display="none";});$.fn.extend({disableSelection:function(){return this.bind(($.support.selectstart?"selectstart":"mousedown")+".ui-disableSelection",function(event){event.preventDefault();});},enableSelection:function(){return this.unbind(".ui-disableSelection");}});$.extend($.ui,{plugin:{add:function(module,option,set){var i,proto=$.ui[module].prototype;for(i in set){proto.plugins[i]=proto.plugins[i]||[];proto.plugins[i].push([option,set[i]]);}},call:function(instance,name,args){var i,set=instance.plugins[name];if(!set||!instance.element[0].parentNode||instance.element[0].parentNode.nodeType===11){return;}for(i=0;i<set.length;i++){if(instance.options[set[i][0]]){set[i][1].apply(instance.element,args);}}}},contains:$.contains,hasScroll:function(el,a){if($(el).css("overflow")==="hidden"){return false;}var scroll=(a&&a==="left")?"scrollLeft":"scrollTop",has=false;if(el[scroll]>0){return true;}el[scroll]=1;has=(el[scroll]>0);el[scroll]=0;return has;},isOverAxis:function(x,reference,size){return(x>reference)&&(x<(reference+size));},isOver:function(y,x,top,left,height,width){return $.ui.isOverAxis(y,top,height)&&$.ui.isOverAxis(x,left,width);}});})(jquery);(function($,undefined){var uuid=0,slice=Array.prototype.slice,_cleanData=$.cleanData;$.cleanData=function(elems){for(var i=0,elem;(elem=elems[i])!=null;i++){try{$(elem).triggerHandler("remove");}catch(e){}}_cleanData(elems);};$.widget=function(name,base,prototype){var fullName,existingConstructor,constructor,basePrototype,namespace=name.split(".")[0];name=name.split(".")[1];fullName=namespace+"-"+name;if(!prototype){prototype=base;base=$.Widget;}$.expr[":"][fullName.toLowerCase()]=function(elem){return !!$.data(elem,fullName);};$[namespace]=$[namespace]||{};existingConstructor=$[namespace][name];constructor=$[namespace][name]=function(options,element){if(!this._createWidget){return new constructor(options,element);}if(arguments.length){this._createWidget(options,element);}};$.extend(constructor,existingConstructor,{version:prototype.version,_proto:$.extend({},prototype),_childConstructors:[]});basePrototype=new base();basePrototype.options=$.widget.extend({},basePrototype.options);$.each(prototype,function(prop,value){if($.isFunction(value)){prototype[prop]=(function(){var _super=function(){return base.prototype[prop].apply(this,arguments);},_superApply=function(args){return base.prototype[prop].apply(this,args);};return function(){var __super=this._super,__superApply=this._superApply,returnValue;this._super=_super;this._superApply=_superApply;returnValue=value.apply(this,arguments);this._super=__super;this._superApply=__superApply;return returnValue;};})();}});constructor.prototype=$.widget.extend(basePrototype,{widgetEventPrefix:name},prototype,{constructor:constructor,namespace:namespace,widgetName:name,widgetBaseClass:fullName,widgetFullName:fullName});if(existingConstructor){$.each(existingConstructor._childConstructors,function(i,child){var childPrototype=child.prototype;$.widget(childPrototype.namespace+"."+childPrototype.widgetName,constructor,child._proto);});delete existingConstructor._childConstructors;}else{base._childConstructors.push(constructor);}$.widget.bridge(name,constructor);};$.widget.extend=function(target){var input=slice.call(arguments,1),inputIndex=0,inputLength=input.length,key,value;for(;inputIndex<inputLength;inputIndex++){for(key in input[inputIndex]){value=input[inputIndex][key];if(input[inputIndex].hasOwnProperty(key)&&value!==undefined){target[key]=$.isPlainObject(value)?$.widget.extend({},target[key],value):value;}}}return target;};$.widget.bridge=function(name,object){var fullName=object.prototype.widgetFullName;$.fn[name]=function(options){var isMethodCall=typeof options==="string",args=slice.call(arguments,1),returnValue=this;options=!isMethodCall&&args.length?$.widget.extend.apply(null,[options].concat(args)):options;if(isMethodCall){this.each(function(){var methodValue,instance=$.data(this,fullName);if(!instance){return $.error("cannot call methods on "+name+" prior to initialization; attempted to call method '"+options+"'");}if(!$.isFunction(instance[options])||options.charAt(0)==="_"){return $.error("no such method '"+options+"' for "+name+" widget instance");}methodValue=instance[options].apply(instance,args);if(methodValue!==instance&&methodValue!==undefined){returnValue=methodValue&&methodValue.jquery?returnValue.pushStack(methodValue.get()):methodValue;return false;}});}else{this.each(function(){var instance=$.data(this,fullName);if(instance){instance.option(options||{})._init();}else{new object(options,this);}});}return returnValue;};};$.Widget=function(options,element){};$.Widget._childConstructors=[];$.Widget.prototype={widgetName:"widget",widgetEventPrefix:"",defaultElement:"<div>",options:{disabled:false,create:null},_createWidget:function(options,element){element=$(element||this.defaultElement||this)[0];this.element=$(element);this.uuid=uuid++;this.eventNamespace="."+this.widgetName+this.uuid;this.options=$.widget.extend({},this.options,this._getCreateOptions(),options);this.bindings=$();this.hoverable=$();this.focusable=$();if(element!==this){$.data(element,this.widgetName,this);$.data(element,this.widgetFullName,this);this._on({remove:"destroy"});this.document=$(element.style?element.ownerDocument:element.document||element);this.window=$(this.document[0].defaultView||this.document[0].parentWindow);}this._create();this._trigger("create",null,this._getCreateEventData());this._init();},_getCreateOptions:$.noop,_getCreateEventData:$.noop,_create:$.noop,_init:$.noop,destroy:function(){this._destroy();this.element.unbind(this.eventNamespace).removeData(this.widgetName).removeData(this.widgetFullName).removeData($.camelCase(this.widgetFullName));this.widget().unbind(this.eventNamespace).removeAttr("aria-disabled").removeClass(this.widgetFullName+"-disabled ui-state-disabled");this.bindings.unbind(this.eventNamespace);this.hoverable.removeClass("ui-state-hover");this.focusable.removeClass("ui-state-focus");},_destroy:$.noop,widget:function(){return this.element;},option:function(key,value){var options=key,parts,curOption,i;if(arguments.length===0){return $.widget.extend({},this.options);}if(typeof key==="string"){options={};parts=key.split(".");key=parts.shift();if(parts.length){curOption=options[key]=$.widget.extend({},this.options[key]);for(i=0;i<parts.length-1;i++){curOption[parts[i]]=curOption[parts[i]]||{};curOption=curOption[parts[i]];}key=parts.pop();if(value===undefined){return curOption[key]===undefined?null:curOption[key];}curOption[key]=value;}else{if(value===undefined){return this.options[key]===undefined?null:this.options[key];}options[key]=value;}}this._setOptions(options);return this;},_setOptions:function(options){var key;for(key in options){this._setOption(key,options[key]);}return this;},_setOption:function(key,value){this.options[key]=value;if(key==="disabled"){this.widget().toggleClass(this.widgetFullName+"-disabled ui-state-disabled",!!value).attr("aria-disabled",value);this.hoverable.removeClass("ui-state-hover");this.focusable.removeClass("ui-state-focus");}return this;},enable:function(){return this._setOption("disabled",false);},disable:function(){return this._setOption("disabled",true);},_on:function(element,handlers){if(!handlers){handlers=element;element=this.element;}else{element=$(element);this.bindings=this.bindings.add(element);}var instance=this;$.each(handlers,function(event,handler){function handlerProxy(){if(instance.options.disabled===true||$(this).hasClass("ui-state-disabled")){return;}return(typeof handler==="string"?instance[handler]:handler).apply(instance,arguments);}if(typeof handler!=="string"){handlerProxy.guid=handler.guid=handler.guid||handlerProxy.guid||$.guid++;}var match=event.match(/^(\w+)\s*(.*)$/),eventName=match[1]+instance.eventNamespace,selector=match[2];if(selector){instance.widget().delegate(selector,eventName,handlerProxy);}else{element.bind(eventName,handlerProxy);}});},_off:function(element,eventName){eventName=(eventName||"").split(" ").join(this.eventNamespace+" ")+this.eventNamespace;element.unbind(eventName).undelegate(eventName);},_delay:function(handler,delay){function handlerProxy(){return(typeof handler==="string"?instance[handler]:handler).apply(instance,arguments);}var instance=this;return setTimeout(handlerProxy,delay||0);},_hoverable:function(element){this.hoverable=this.hoverable.add(element);this._on(element,{mouseenter:function(event){$(event.currentTarget).addClass("ui-state-hover");},mouseleave:function(event){$(event.currentTarget).removeClass("ui-state-hover");}});},_focusable:function(element){this.focusable=this.focusable.add(element);this._on(element,{focusin:function(event){$(event.currentTarget).addClass("ui-state-focus");},focusout:function(event){$(event.currentTarget).removeClass("ui-state-focus");}});},_trigger:function(type,event,data){var prop,orig,callback=this.options[type];data=data||{};event=$.Event(event);event.type=(type===this.widgetEventPrefix?type:this.widgetEventPrefix+type).toLowerCase();event.target=this.element[0];orig=event.originalEvent;if(orig){for(prop in orig){if(!(prop in event)){event[prop]=orig[prop];}}}this.element.trigger(event,data);return !($.isFunction(callback)&&callback.apply(this.element[0],[event].concat(data))===false||event.isDefaultPrevented());}};$.each({show:"fadeIn",hide:"fadeOut"},function(method,defaultEffect){$.Widget.prototype["_"+method]=function(element,options,callback){if(typeof options==="string"){options={effect:options};}var hasOptions,effectName=!options?method:options===true||typeof options==="number"?defaultEffect:options.effect||defaultEffect;options=options||{};if(typeof options==="number"){options={duration:options};}hasOptions=!$.isEmptyObject(options);options.complete=callback;if(options.delay){element.delay(options.delay);}if(hasOptions&&$.effects&&($.effects.effect[effectName]||$.uiBackCompat!==false&&$.effects[effectName])){element[method](options);}else{if(effectName!==method&&element[effectName]){element[effectName](options.duration,options.easing,callback);}else{element.queue(function(next){$(this)[method]();if(callback){callback.call(element[0]);}next();});}}};});if($.uiBackCompat!==false){$.Widget.prototype._getCreateOptions=function(){return $.metadata&&$.metadata.get(this.element[0])[this.widgetName];};}})(jquery);(function($,undefined){var mouseHandled=false;$(document).mouseup(function(e){mouseHandled=false;});$.widget("ui.mouse",{version:"1.9.0",options:{cancel:"input,textarea,button,select,option",distance:1,delay:0},_mouseInit:function(){var that=this;this.element.bind("mousedown."+this.widgetName,function(event){return that._mouseDown(event);}).bind("click."+this.widgetName,function(event){if(true===$.data(event.target,that.widgetName+".preventClickEvent")){$.removeData(event.target,that.widgetName+".preventClickEvent");event.stopImmediatePropagation();return false;}});this.started=false;},_mouseDestroy:function(){this.element.unbind("."+this.widgetName);if(this._mouseMoveDelegate){$(document).unbind("mousemove."+this.widgetName,this._mouseMoveDelegate).unbind("mouseup."+this.widgetName,this._mouseUpDelegate);}},_mouseDown:function(event){if(mouseHandled){return;}(this._mouseStarted&&this._mouseUp(event));this._mouseDownEvent=event;var that=this,btnIsLeft=(event.which===1),elIsCancel=(typeof this.options.cancel==="string"&&event.target.nodeName?$(event.target).closest(this.options.cancel).length:false);if(!btnIsLeft||elIsCancel||!this._mouseCapture(event)){return true;}this.mouseDelayMet=!this.options.delay;if(!this.mouseDelayMet){this._mouseDelayTimer=setTimeout(function(){that.mouseDelayMet=true;},this.options.delay);}if(this._mouseDistanceMet(event)&&this._mouseDelayMet(event)){this._mouseStarted=(this._mouseStart(event)!==false);if(!this._mouseStarted){event.preventDefault();return true;}}if(true===$.data(event.target,this.widgetName+".preventClickEvent")){$.removeData(event.target,this.widgetName+".preventClickEvent");}this._mouseMoveDelegate=function(event){return that._mouseMove(event);};this._mouseUpDelegate=function(event){return that._mouseUp(event);};$(document).bind("mousemove."+this.widgetName,this._mouseMoveDelegate).bind("mouseup."+this.widgetName,this._mouseUpDelegate);event.preventDefault();mouseHandled=true;return true;},_mouseMove:function(event){if($.browser.msie&&!(document.documentMode>=9)&&!event.button){return this._mouseUp(event);}if(this._mouseStarted){this._mouseDrag(event);return event.preventDefault();}if(this._mouseDistanceMet(event)&&this._mouseDelayMet(event)){this._mouseStarted=(this._mouseStart(this._mouseDownEvent,event)!==false);(this._mouseStarted?this._mouseDrag(event):this._mouseUp(event));}return !this._mouseStarted;},_mouseUp:function(event){$(document).unbind("mousemove."+this.widgetName,this._mouseMoveDelegate).unbind("mouseup."+this.widgetName,this._mouseUpDelegate);if(this._mouseStarted){this._mouseStarted=false;if(event.target===this._mouseDownEvent.target){$.data(event.target,this.widgetName+".preventClickEvent",true);}this._mouseStop(event);}return false;},_mouseDistanceMet:function(event){return(Math.max(Math.abs(this._mouseDownEvent.pageX-event.pageX),Math.abs(this._mouseDownEvent.pageY-event.pageY))>=this.options.distance);},_mouseDelayMet:function(event){return this.mouseDelayMet;},_mouseStart:function(event){},_mouseDrag:function(event){},_mouseStop:function(event){},_mouseCapture:function(event){return true;}});})(jquery);(function($,undefined){$.widget("ui.draggable",$.ui.mouse,{version:"1.9.0",widgetEventPrefix:"drag",options:{addClasses:true,appendTo:"parent",axis:false,connectToSortable:false,containment:false,cursor:"auto",cursorAt:false,grid:false,handle:false,helper:"original",iframeFix:false,opacity:false,refreshPositions:false,revert:false,revertDuration:500,scope:"default",scroll:true,scrollSensitivity:20,scrollSpeed:20,snap:false,snapMode:"both",snapTolerance:20,stack:false,zIndex:false},_create:function(){if(this.options.helper=="original"&&!(/^(?:r|a|f)/).test(this.element.css("position"))){this.element[0].style.position="relative";}(this.options.addClasses&&this.element.addClass("ui-draggable"));(this.options.disabled&&this.element.addClass("ui-draggable-disabled"));this._mouseInit();},_destroy:function(){this.element.removeClass("ui-draggable ui-draggable-dragging ui-draggable-disabled");this._mouseDestroy();},_mouseCapture:function(event){var o=this.options;if(this.helper||o.disabled||$(event.target).is(".ui-resizable-handle")){return false;}this.handle=this._getHandle(event);if(!this.handle){return false;}$(o.iframeFix===true?"iframe":o.iframeFix).each(function(){$('<div class="ui-draggable-iframeFix" style="background: #fff;"></div>').css({width:this.offsetWidth+"px",height:this.offsetHeight+"px",position:"absolute",opacity:"0.001",zIndex:1000}).css($(this).offset()).appendTo("body");});return true;},_mouseStart:function(event){var o=this.options;this.helper=this._createHelper(event);this.helper.addClass("ui-draggable-dragging");this._cacheHelperProportions();if($.ui.ddmanager){$.ui.ddmanager.current=this;}this._cacheMargins();this.cssPosition=this.helper.css("position");this.scrollParent=this.helper.scrollParent();this.offset=this.positionAbs=this.element.offset();this.offset={top:this.offset.top-this.margins.top,left:this.offset.left-this.margins.left};$.extend(this.offset,{click:{left:event.pageX-this.offset.left,top:event.pageY-this.offset.top},parent:this._getParentOffset(),relative:this._getRelativeOffset()});this.originalPosition=this.position=this._generatePosition(event);this.originalPageX=event.pageX;this.originalPageY=event.pageY;(o.cursorAt&&this._adjustOffsetFromHelper(o.cursorAt));if(o.containment){this._setContainment();}if(this._trigger("start",event)===false){this._clear();return false;}this._cacheHelperProportions();if($.ui.ddmanager&&!o.dropBehaviour){$.ui.ddmanager.prepareOffsets(this,event);}this._mouseDrag(event,true);if($.ui.ddmanager){$.ui.ddmanager.dragStart(this,event);}return true;},_mouseDrag:function(event,noPropagation){this.position=this._generatePosition(event);this.positionAbs=this._convertPositionTo("absolute");if(!noPropagation){var ui=this._uiHash();if(this._trigger("drag",event,ui)===false){this._mouseUp({});return false;}this.position=ui.position;}if(!this.options.axis||this.options.axis!="y"){this.helper[0].style.left=this.position.left+"px";}if(!this.options.axis||this.options.axis!="x"){this.helper[0].style.top=this.position.top+"px";}if($.ui.ddmanager){$.ui.ddmanager.drag(this,event);}return false;},_mouseStop:function(event){var dropped=false;if($.ui.ddmanager&&!this.options.dropBehaviour){dropped=$.ui.ddmanager.drop(this,event);}if(this.dropped){dropped=this.dropped;this.dropped=false;}var element=this.element[0],elementInDom=false;while(element&&(element=element.parentNode)){if(element==document){elementInDom=true;}}if(!elementInDom&&this.options.helper==="original"){return false;}if((this.options.revert=="invalid"&&!dropped)||(this.options.revert=="valid"&&dropped)||this.options.revert===true||($.isFunction(this.options.revert)&&this.options.revert.call(this.element,dropped))){var that=this;$(this.helper).animate(this.originalPosition,parseInt(this.options.revertDuration,10),function(){if(that._trigger("stop",event)!==false){that._clear();}});}else{if(this._trigger("stop",event)!==false){this._clear();}}return false;},_mouseUp:function(event){$("div.ui-draggable-iframeFix").each(function(){this.parentNode.removeChild(this);});if($.ui.ddmanager){$.ui.ddmanager.dragStop(this,event);}return $.ui.mouse.prototype._mouseUp.call(this,event);},cancel:function(){if(this.helper.is(".ui-draggable-dragging")){this._mouseUp({});}else{this._clear();}return this;},_getHandle:function(event){var handle=!this.options.handle||!$(this.options.handle,this.element).length?true:false;$(this.options.handle,this.element).find("*").andSelf().each(function(){if(this==event.target){handle=true;}});return handle;},_createHelper:function(event){var o=this.options;var helper=$.isFunction(o.helper)?$(o.helper.apply(this.element[0],[event])):(o.helper=="clone"?this.element.clone().removeAttr("id"):this.element);if(!helper.parents("body").length){helper.appendTo((o.appendTo=="parent"?this.element[0].parentNode:o.appendTo));}if(helper[0]!=this.element[0]&&!(/(fixed|absolute)/).test(helper.css("position"))){helper.css("position","absolute");}return helper;},_adjustOffsetFromHelper:function(obj){if(typeof obj=="string"){obj=obj.split(" ");}if($.isArray(obj)){obj={left:+obj[0],top:+obj[1]||0};}if("left" in obj){this.offset.click.left=obj.left+this.margins.left;}if("right" in obj){this.offset.click.left=this.helperProportions.width-obj.right+this.margins.left;}if("top" in obj){this.offset.click.top=obj.top+this.margins.top;}if("bottom" in obj){this.offset.click.top=this.helperProportions.height-obj.bottom+this.margins.top;}},_getParentOffset:function(){this.offsetParent=this.helper.offsetParent();var po=this.offsetParent.offset();if(this.cssPosition=="absolute"&&this.scrollParent[0]!=document&&$.contains(this.scrollParent[0],this.offsetParent[0])){po.left+=this.scrollParent.scrollLeft();po.top+=this.scrollParent.scrollTop();}if((this.offsetParent[0]==document.body)||(this.offsetParent[0].tagName&&this.offsetParent[0].tagName.toLowerCase()=="html"&&$.browser.msie)){po={top:0,left:0};}return{top:po.top+(parseInt(this.offsetParent.css("borderTopWidth"),10)||0),left:po.left+(parseInt(this.offsetParent.css("borderLeftWidth"),10)||0)};},_getRelativeOffset:function(){if(this.cssPosition=="relative"){var p=this.element.position();return{top:p.top-(parseInt(this.helper.css("top"),10)||0)+this.scrollParent.scrollTop(),left:p.left-(parseInt(this.helper.css("left"),10)||0)+this.scrollParent.scrollLeft()};}else{return{top:0,left:0};}},_cacheMargins:function(){this.margins={left:(parseInt(this.element.css("marginLeft"),10)||0),top:(parseInt(this.element.css("marginTop"),10)||0),right:(parseInt(this.element.css("marginRight"),10)||0),bottom:(parseInt(this.element.css("marginBottom"),10)||0)};},_cacheHelperProportions:function(){this.helperProportions={width:this.helper.outerWidth(),height:this.helper.outerHeight()};},_setContainment:function(){var o=this.options;if(o.containment=="parent"){o.containment=this.helper[0].parentNode;}if(o.containment=="document"||o.containment=="window"){this.containment=[o.containment=="document"?0:$(window).scrollLeft()-this.offset.relative.left-this.offset.parent.left,o.containment=="document"?0:$(window).scrollTop()-this.offset.relative.top-this.offset.parent.top,(o.containment=="document"?0:$(window).scrollLeft())+$(o.containment=="document"?document:window).width()-this.helperProportions.width-this.margins.left,(o.containment=="document"?0:$(window).scrollTop())+($(o.containment=="document"?document:window).height()||document.body.parentNode.scrollHeight)-this.helperProportions.height-this.margins.top];}if(!(/^(document|window|parent)$/).test(o.containment)&&o.containment.constructor!=Array){var c=$(o.containment);var ce=c[0];if(!ce){return;}var co=c.offset();var over=($(ce).css("overflow")!="hidden");this.containment=[(parseInt($(ce).css("borderLeftWidth"),10)||0)+(parseInt($(ce).css("paddingLeft"),10)||0),(parseInt($(ce).css("borderTopWidth"),10)||0)+(parseInt($(ce).css("paddingTop"),10)||0),(over?Math.max(ce.scrollWidth,ce.offsetWidth):ce.offsetWidth)-(parseInt($(ce).css("borderLeftWidth"),10)||0)-(parseInt($(ce).css("paddingRight"),10)||0)-this.helperProportions.width-this.margins.left-this.margins.right,(over?Math.max(ce.scrollHeight,ce.offsetHeight):ce.offsetHeight)-(parseInt($(ce).css("borderTopWidth"),10)||0)-(parseInt($(ce).css("paddingBottom"),10)||0)-this.helperProportions.height-this.margins.top-this.margins.bottom];this.relative_container=c;}else{if(o.containment.constructor==Array){this.containment=o.containment;}}},_convertPositionTo:function(d,pos){if(!pos){pos=this.position;}var mod=d=="absolute"?1:-1;var o=this.options,scroll=this.cssPosition=="absolute"&&!(this.scrollParent[0]!=document&&$.contains(this.scrollParent[0],this.offsetParent[0]))?this.offsetParent:this.scrollParent,scrollIsRootNode=(/(html|body)/i).test(scroll[0].tagName);return{top:(pos.top+this.offset.relative.top*mod+this.offset.parent.top*mod-((this.cssPosition=="fixed"?-this.scrollParent.scrollTop():(scrollIsRootNode?0:scroll.scrollTop()))*mod)),left:(pos.left+this.offset.relative.left*mod+this.offset.parent.left*mod-((this.cssPosition=="fixed"?-this.scrollParent.scrollLeft():scrollIsRootNode?0:scroll.scrollLeft())*mod))};},_generatePosition:function(event){var o=this.options,scroll=this.cssPosition=="absolute"&&!(this.scrollParent[0]!=document&&$.contains(this.scrollParent[0],this.offsetParent[0]))?this.offsetParent:this.scrollParent,scrollIsRootNode=(/(html|body)/i).test(scroll[0].tagName);var pageX=event.pageX;var pageY=event.pageY;if(this.originalPosition){var containment;if(this.containment){if(this.relative_container){var co=this.relative_container.offset();containment=[this.containment[0]+co.left,this.containment[1]+co.top,this.containment[2]+co.left,this.containment[3]+co.top];}else{containment=this.containment;}if(event.pageX-this.offset.click.left<containment[0]){pageX=containment[0]+this.offset.click.left;}if(event.pageY-this.offset.click.top<containment[1]){pageY=containment[1]+this.offset.click.top;}if(event.pageX-this.offset.click.left>containment[2]){pageX=containment[2]+this.offset.click.left;}if(event.pageY-this.offset.click.top>containment[3]){pageY=containment[3]+this.offset.click.top;}}if(o.grid){var top=o.grid[1]?this.originalPageY+Math.round((pageY-this.originalPageY)/o.grid[1])*o.grid[1]:this.originalPageY;pageY=containment?(!(top-this.offset.click.top<containment[1]||top-this.offset.click.top>containment[3])?top:(!(top-this.offset.click.top<containment[1])?top-o.grid[1]:top+o.grid[1])):top;var left=o.grid[0]?this.originalPageX+Math.round((pageX-this.originalPageX)/o.grid[0])*o.grid[0]:this.originalPageX;pageX=containment?(!(left-this.offset.click.left<containment[0]||left-this.offset.click.left>containment[2])?left:(!(left-this.offset.click.left<containment[0])?left-o.grid[0]:left+o.grid[0])):left;}}return{top:(pageY-this.offset.click.top-this.offset.relative.top-this.offset.parent.top+((this.cssPosition=="fixed"?-this.scrollParent.scrollTop():(scrollIsRootNode?0:scroll.scrollTop())))),left:(pageX-this.offset.click.left-this.offset.relative.left-this.offset.parent.left+((this.cssPosition=="fixed"?-this.scrollParent.scrollLeft():scrollIsRootNode?0:scroll.scrollLeft())))};},_clear:function(){this.helper.removeClass("ui-draggable-dragging");if(this.helper[0]!=this.element[0]&&!this.cancelHelperRemoval){this.helper.remove();}this.helper=null;this.cancelHelperRemoval=false;},_trigger:function(type,event,ui){ui=ui||this._uiHash();$.ui.plugin.call(this,type,[event,ui]);if(type=="drag"){this.positionAbs=this._convertPositionTo("absolute");}return $.Widget.prototype._trigger.call(this,type,event,ui);},plugins:{},_uiHash:function(event){return{helper:this.helper,position:this.position,originalPosition:this.originalPosition,offset:this.positionAbs};}});$.ui.plugin.add("draggable","connectToSortable",{start:function(event,ui){var inst=$(this).data("draggable"),o=inst.options,uiSortable=$.extend({},ui,{item:inst.element});inst.sortables=[];$(o.connectToSortable).each(function(){var sortable=$.data(this,"sortable");if(sortable&&!sortable.options.disabled){inst.sortables.push({instance:sortable,shouldRevert:sortable.options.revert});sortable.refreshPositions();sortable._trigger("activate",event,uiSortable);}});},stop:function(event,ui){var inst=$(this).data("draggable"),uiSortable=$.extend({},ui,{item:inst.element});$.each(inst.sortables,function(){if(this.instance.isOver){this.instance.isOver=0;inst.cancelHelperRemoval=true;this.instance.cancelHelperRemoval=false;if(this.shouldRevert){this.instance.options.revert=true;}this.instance._mouseStop(event);this.instance.options.helper=this.instance.options._helper;if(inst.options.helper=="original"){this.instance.currentItem.css({top:"auto",left:"auto"});}}else{this.instance.cancelHelperRemoval=false;this.instance._trigger("deactivate",event,uiSortable);}});},drag:function(event,ui){var inst=$(this).data("draggable"),that=this;var checkPos=function(o){var dyClick=this.offset.click.top,dxClick=this.offset.click.left;var helperTop=this.positionAbs.top,helperLeft=this.positionAbs.left;var itemHeight=o.height,itemWidth=o.width;var itemTop=o.top,itemLeft=o.left;return $.ui.isOver(helperTop+dyClick,helperLeft+dxClick,itemTop,itemLeft,itemHeight,itemWidth);};$.each(inst.sortables,function(i){this.instance.positionAbs=inst.positionAbs;this.instance.helperProportions=inst.helperProportions;this.instance.offset.click=inst.offset.click;if(this.instance._intersectsWith(this.instance.containerCache)){if(!this.instance.isOver){this.instance.isOver=1;this.instance.currentItem=$(that).clone().removeAttr("id").appendTo(this.instance.element).data("sortable-item",true);this.instance.options._helper=this.instance.options.helper;this.instance.options.helper=function(){return ui.helper[0];};event.target=this.instance.currentItem[0];this.instance._mouseCapture(event,true);this.instance._mouseStart(event,true,true);this.instance.offset.click.top=inst.offset.click.top;this.instance.offset.click.left=inst.offset.click.left;this.instance.offset.parent.left-=inst.offset.parent.left-this.instance.offset.parent.left;this.instance.offset.parent.top-=inst.offset.parent.top-this.instance.offset.parent.top;inst._trigger("toSortable",event);inst.dropped=this.instance.element;inst.currentItem=inst.element;this.instance.fromOutside=inst;}if(this.instance.currentItem){this.instance._mouseDrag(event);}}else{if(this.instance.isOver){this.instance.isOver=0;this.instance.cancelHelperRemoval=true;this.instance.options.revert=false;this.instance._trigger("out",event,this.instance._uiHash(this.instance));this.instance._mouseStop(event,true);this.instance.options.helper=this.instance.options._helper;this.instance.currentItem.remove();if(this.instance.placeholder){this.instance.placeholder.remove();}inst._trigger("fromSortable",event);inst.dropped=false;}}});}});$.ui.plugin.add("draggable","cursor",{start:function(event,ui){var t=$("body"),o=$(this).data("draggable").options;if(t.css("cursor")){o._cursor=t.css("cursor");}t.css("cursor",o.cursor);},stop:function(event,ui){var o=$(this).data("draggable").options;if(o._cursor){$("body").css("cursor",o._cursor);}}});$.ui.plugin.add("draggable","opacity",{start:function(event,ui){var t=$(ui.helper),o=$(this).data("draggable").options;if(t.css("opacity")){o._opacity=t.css("opacity");}t.css("opacity",o.opacity);},stop:function(event,ui){var o=$(this).data("draggable").options;if(o._opacity){$(ui.helper).css("opacity",o._opacity);}}});$.ui.plugin.add("draggable","scroll",{start:function(event,ui){var i=$(this).data("draggable");if(i.scrollParent[0]!=document&&i.scrollParent[0].tagName!="HTML"){i.overflowOffset=i.scrollParent.offset();}},drag:function(event,ui){var i=$(this).data("draggable"),o=i.options,scrolled=false;if(i.scrollParent[0]!=document&&i.scrollParent[0].tagName!="HTML"){if(!o.axis||o.axis!="x"){if((i.overflowOffset.top+i.scrollParent[0].offsetHeight)-event.pageY<o.scrollSensitivity){i.scrollParent[0].scrollTop=scrolled=i.scrollParent[0].scrollTop+o.scrollSpeed;}else{if(event.pageY-i.overflowOffset.top<o.scrollSensitivity){i.scrollParent[0].scrollTop=scrolled=i.scrollParent[0].scrollTop-o.scrollSpeed;}}}if(!o.axis||o.axis!="y"){if((i.overflowOffset.left+i.scrollParent[0].offsetWidth)-event.pageX<o.scrollSensitivity){i.scrollParent[0].scrollLeft=scrolled=i.scrollParent[0].scrollLeft+o.scrollSpeed;}else{if(event.pageX-i.overflowOffset.left<o.scrollSensitivity){i.scrollParent[0].scrollLeft=scrolled=i.scrollParent[0].scrollLeft-o.scrollSpeed;}}}}else{if(!o.axis||o.axis!="x"){if(event.pageY-$(document).scrollTop()<o.scrollSensitivity){scrolled=$(document).scrollTop($(document).scrollTop()-o.scrollSpeed);}else{if($(window).height()-(event.pageY-$(document).scrollTop())<o.scrollSensitivity){scrolled=$(document).scrollTop($(document).scrollTop()+o.scrollSpeed);}}}if(!o.axis||o.axis!="y"){if(event.pageX-$(document).scrollLeft()<o.scrollSensitivity){scrolled=$(document).scrollLeft($(document).scrollLeft()-o.scrollSpeed);}else{if($(window).width()-(event.pageX-$(document).scrollLeft())<o.scrollSensitivity){scrolled=$(document).scrollLeft($(document).scrollLeft()+o.scrollSpeed);}}}}if(scrolled!==false&&$.ui.ddmanager&&!o.dropBehaviour){$.ui.ddmanager.prepareOffsets(i,event);}}});$.ui.plugin.add("draggable","snap",{start:function(event,ui){var i=$(this).data("draggable"),o=i.options;i.snapElements=[];$(o.snap.constructor!=String?(o.snap.items||":data(draggable)"):o.snap).each(function(){var $t=$(this);var $o=$t.offset();if(this!=i.element[0]){i.snapElements.push({item:this,width:$t.outerWidth(),height:$t.outerHeight(),top:$o.top,left:$o.left});}});},drag:function(event,ui){var inst=$(this).data("draggable"),o=inst.options;var d=o.snapTolerance;var x1=ui.offset.left,x2=x1+inst.helperProportions.width,y1=ui.offset.top,y2=y1+inst.helperProportions.height;for(var i=inst.snapElements.length-1;i>=0;i--){var l=inst.snapElements[i].left,r=l+inst.snapElements[i].width,t=inst.snapElements[i].top,b=t+inst.snapElements[i].height;if(!((l-d<x1&&x1<r+d&&t-d<y1&&y1<b+d)||(l-d<x1&&x1<r+d&&t-d<y2&&y2<b+d)||(l-d<x2&&x2<r+d&&t-d<y1&&y1<b+d)||(l-d<x2&&x2<r+d&&t-d<y2&&y2<b+d))){if(inst.snapElements[i].snapping){(inst.options.snap.release&&inst.options.snap.release.call(inst.element,event,$.extend(inst._uiHash(),{snapItem:inst.snapElements[i].item})));}inst.snapElements[i].snapping=false;continue;}if(o.snapMode!="inner"){var ts=Math.abs(t-y2)<=d;var bs=Math.abs(b-y1)<=d;var ls=Math.abs(l-x2)<=d;var rs=Math.abs(r-x1)<=d;if(ts){ui.position.top=inst._convertPositionTo("relative",{top:t-inst.helperProportions.height,left:0}).top-inst.margins.top;}if(bs){ui.position.top=inst._convertPositionTo("relative",{top:b,left:0}).top-inst.margins.top;}if(ls){ui.position.left=inst._convertPositionTo("relative",{top:0,left:l-inst.helperProportions.width}).left-inst.margins.left;}if(rs){ui.position.left=inst._convertPositionTo("relative",{top:0,left:r}).left-inst.margins.left;}}var first=(ts||bs||ls||rs);if(o.snapMode!="outer"){var ts=Math.abs(t-y1)<=d;var bs=Math.abs(b-y2)<=d;var ls=Math.abs(l-x1)<=d;var rs=Math.abs(r-x2)<=d;if(ts){ui.position.top=inst._convertPositionTo("relative",{top:t,left:0}).top-inst.margins.top;}if(bs){ui.position.top=inst._convertPositionTo("relative",{top:b-inst.helperProportions.height,left:0}).top-inst.margins.top;}if(ls){ui.position.left=inst._convertPositionTo("relative",{top:0,left:l}).left-inst.margins.left;}if(rs){ui.position.left=inst._convertPositionTo("relative",{top:0,left:r-inst.helperProportions.width}).left-inst.margins.left;}}if(!inst.snapElements[i].snapping&&(ts||bs||ls||rs||first)){(inst.options.snap.snap&&inst.options.snap.snap.call(inst.element,event,$.extend(inst._uiHash(),{snapItem:inst.snapElements[i].item})));}inst.snapElements[i].snapping=(ts||bs||ls||rs||first);}}});$.ui.plugin.add("draggable","stack",{start:function(event,ui){var o=$(this).data("draggable").options;var group=$.makeArray($(o.stack)).sort(function(a,b){return(parseInt($(a).css("zIndex"),10)||0)-(parseInt($(b).css("zIndex"),10)||0);});if(!group.length){return;}var min=parseInt(group[0].style.zIndex)||0;$(group).each(function(i){this.style.zIndex=min+i;});this[0].style.zIndex=min+group.length;}});$.ui.plugin.add("draggable","zIndex",{start:function(event,ui){var t=$(ui.helper),o=$(this).data("draggable").options;if(t.css("zIndex")){o._zIndex=t.css("zIndex");}t.css("zIndex",o.zIndex);},stop:function(event,ui){var o=$(this).data("draggable").options;if(o._zIndex){$(ui.helper).css("zIndex",o._zIndex);}}});})(jquery);(function($,undefined){$.widget("ui.droppable",{version:"1.9.0",widgetEventPrefix:"drop",options:{accept:"*",activeClass:false,addClasses:true,greedy:false,hoverClass:false,scope:"default",tolerance:"intersect"},_create:function(){var o=this.options,accept=o.accept;this.isover=0;this.isout=1;this.accept=$.isFunction(accept)?accept:function(d){return d.is(accept);};this.proportions={width:this.element[0].offsetWidth,height:this.element[0].offsetHeight};$.ui.ddmanager.droppables[o.scope]=$.ui.ddmanager.droppables[o.scope]||[];$.ui.ddmanager.droppables[o.scope].push(this);(o.addClasses&&this.element.addClass("ui-droppable"));},_destroy:function(){var drop=$.ui.ddmanager.droppables[this.options.scope];for(var i=0;i<drop.length;i++){if(drop[i]==this){drop.splice(i,1);}}this.element.removeClass("ui-droppable ui-droppable-disabled");},_setOption:function(key,value){if(key=="accept"){this.accept=$.isFunction(value)?value:function(d){return d.is(value);};}$.Widget.prototype._setOption.apply(this,arguments);},_activate:function(event){var draggable=$.ui.ddmanager.current;if(this.options.activeClass){this.element.addClass(this.options.activeClass);}(draggable&&this._trigger("activate",event,this.ui(draggable)));},_deactivate:function(event){var draggable=$.ui.ddmanager.current;if(this.options.activeClass){this.element.removeClass(this.options.activeClass);}(draggable&&this._trigger("deactivate",event,this.ui(draggable)));},_over:function(event){var draggable=$.ui.ddmanager.current;if(!draggable||(draggable.currentItem||draggable.element)[0]==this.element[0]){return;}if(this.accept.call(this.element[0],(draggable.currentItem||draggable.element))){if(this.options.hoverClass){this.element.addClass(this.options.hoverClass);}this._trigger("over",event,this.ui(draggable));}},_out:function(event){var draggable=$.ui.ddmanager.current;if(!draggable||(draggable.currentItem||draggable.element)[0]==this.element[0]){return;}if(this.accept.call(this.element[0],(draggable.currentItem||draggable.element))){if(this.options.hoverClass){this.element.removeClass(this.options.hoverClass);}this._trigger("out",event,this.ui(draggable));}},_drop:function(event,custom){var draggable=custom||$.ui.ddmanager.current;if(!draggable||(draggable.currentItem||draggable.element)[0]==this.element[0]){return false;}var childrenIntersection=false;this.element.find(":data(droppable)").not(".ui-draggable-dragging").each(function(){var inst=$.data(this,"droppable");if(inst.options.greedy&&!inst.options.disabled&&inst.options.scope==draggable.options.scope&&inst.accept.call(inst.element[0],(draggable.currentItem||draggable.element))&&$.ui.intersect(draggable,$.extend(inst,{offset:inst.element.offset()}),inst.options.tolerance)){childrenIntersection=true;return false;}});if(childrenIntersection){return false;}if(this.accept.call(this.element[0],(draggable.currentItem||draggable.element))){if(this.options.activeClass){this.element.removeClass(this.options.activeClass);}if(this.options.hoverClass){this.element.removeClass(this.options.hoverClass);}this._trigger("drop",event,this.ui(draggable));return this.element;}return false;},ui:function(c){return{draggable:(c.currentItem||c.element),helper:c.helper,position:c.position,offset:c.positionAbs};}});$.ui.intersect=function(draggable,droppable,toleranceMode){if(!droppable.offset){return false;}var x1=(draggable.positionAbs||draggable.position.absolute).left,x2=x1+draggable.helperProportions.width,y1=(draggable.positionAbs||draggable.position.absolute).top,y2=y1+draggable.helperProportions.height;var l=droppable.offset.left,r=l+droppable.proportions.width,t=droppable.offset.top,b=t+droppable.proportions.height;switch(toleranceMode){case"fit":return(l<=x1&&x2<=r&&t<=y1&&y2<=b);break;case"intersect":return(l<x1+(draggable.helperProportions.width/2)&&x2-(draggable.helperProportions.width/2)<r&&t<y1+(draggable.helperProportions.height/2)&&y2-(draggable.helperProportions.height/2)<b);break;case"pointer":var draggableLeft=((draggable.positionAbs||draggable.position.absolute).left+(draggable.clickOffset||draggable.offset.click).left),draggableTop=((draggable.positionAbs||draggable.position.absolute).top+(draggable.clickOffset||draggable.offset.click).top),isOver=$.ui.isOver(draggableTop,draggableLeft,t,l,droppable.proportions.height,droppable.proportions.width);return isOver;break;case"touch":return((y1>=t&&y1<=b)||(y2>=t&&y2<=b)||(y1<t&&y2>b))&&((x1>=l&&x1<=r)||(x2>=l&&x2<=r)||(x1<l&&x2>r));break;default:return false;break;}};$.ui.ddmanager={current:null,droppables:{"default":[]},prepareOffsets:function(t,event){var m=$.ui.ddmanager.droppables[t.options.scope]||[];var type=event?event.type:null;var list=(t.currentItem||t.element).find(":data(droppable)").andSelf();droppablesLoop:for(var i=0;i<m.length;i++){if(m[i].options.disabled||(t&&!m[i].accept.call(m[i].element[0],(t.currentItem||t.element)))){continue;}for(var j=0;j<list.length;j++){if(list[j]==m[i].element[0]){m[i].proportions.height=0;continue droppablesLoop;}}m[i].visible=m[i].element.css("display")!="none";if(!m[i].visible){continue;}if(type=="mousedown"){m[i]._activate.call(m[i],event);}m[i].offset=m[i].element.offset();m[i].proportions={width:m[i].element[0].offsetWidth,height:m[i].element[0].offsetHeight};}},drop:function(draggable,event){var dropped=false;$.each($.ui.ddmanager.droppables[draggable.options.scope]||[],function(){if(!this.options){return;}if(!this.options.disabled&&this.visible&&$.ui.intersect(draggable,this,this.options.tolerance)){dropped=this._drop.call(this,event)||dropped;}if(!this.options.disabled&&this.visible&&this.accept.call(this.element[0],(draggable.currentItem||draggable.element))){this.isout=1;this.isover=0;this._deactivate.call(this,event);}});return dropped;},dragStart:function(draggable,event){draggable.element.parentsUntil("body").bind("scroll.droppable",function(){if(!draggable.options.refreshPositions){$.ui.ddmanager.prepareOffsets(draggable,event);}});},drag:function(draggable,event){if(draggable.options.refreshPositions){$.ui.ddmanager.prepareOffsets(draggable,event);}$.each($.ui.ddmanager.droppables[draggable.options.scope]||[],function(){if(this.options.disabled||this.greedyChild||!this.visible){return;}var intersects=$.ui.intersect(draggable,this,this.options.tolerance);var c=!intersects&&this.isover==1?"isout":(intersects&&this.isover==0?"isover":null);if(!c){return;}var parentInstance;if(this.options.greedy){var scope=this.options.scope;var parent=this.element.parents(":data(droppable)").filter(function(){return $.data(this,"droppable").options.scope===scope;});if(parent.length){parentInstance=$.data(parent[0],"droppable");parentInstance.greedyChild=(c=="isover"?1:0);}}if(parentInstance&&c=="isover"){parentInstance.isover=0;parentInstance.isout=1;parentInstance._out.call(parentInstance,event);}this[c]=1;this[c=="isout"?"isover":"isout"]=0;this[c=="isover"?"_over":"_out"].call(this,event);if(parentInstance&&c=="isout"){parentInstance.isout=0;parentInstance.isover=1;parentInstance._over.call(parentInstance,event);}});},dragStop:function(draggable,event){draggable.element.parentsUntil("body").unbind("scroll.droppable");if(!draggable.options.refreshPositions){$.ui.ddmanager.prepareOffsets(draggable,event);}}};})(jquery);(function($,undefined){$.widget("ui.resizable",$.ui.mouse,{version:"1.9.0",widgetEventPrefix:"resize",options:{alsoResize:false,animate:false,animateDuration:"slow",animateEasing:"swing",aspectRatio:false,autoHide:false,containment:false,ghost:false,grid:false,handles:"e,s,se",helper:false,maxHeight:null,maxWidth:null,minHeight:10,minWidth:10,zIndex:1000},_create:function(){var that=this,o=this.options;this.element.addClass("ui-resizable");$.extend(this,{_aspectRatio:!!(o.aspectRatio),aspectRatio:o.aspectRatio,originalElement:this.element,_proportionallyResizeElements:[],_helper:o.helper||o.ghost||o.animate?o.helper||"ui-resizable-helper":null});if(this.element[0].nodeName.match(/canvas|textarea|input|select|button|img/i)){this.element.wrap($('<div class="ui-wrapper" style="overflow: hidden;"></div>').css({position:this.element.css("position"),width:this.element.outerWidth(),height:this.element.outerHeight(),top:this.element.css("top"),left:this.element.css("left")}));this.element=this.element.parent().data("resizable",this.element.data("resizable"));this.elementIsWrapper=true;this.element.css({marginLeft:this.originalElement.css("marginLeft"),marginTop:this.originalElement.css("marginTop"),marginRight:this.originalElement.css("marginRight"),marginBottom:this.originalElement.css("marginBottom")});this.originalElement.css({marginLeft:0,marginTop:0,marginRight:0,marginBottom:0});this.originalResizeStyle=this.originalElement.css("resize");this.originalElement.css("resize","none");this._proportionallyResizeElements.push(this.originalElement.css({position:"static",zoom:1,display:"block"}));this.originalElement.css({margin:this.originalElement.css("margin")});this._proportionallyResize();}this.handles=o.handles||(!$(".ui-resizable-handle",this.element).length?"e,s,se":{n:".ui-resizable-n",e:".ui-resizable-e",s:".ui-resizable-s",w:".ui-resizable-w",se:".ui-resizable-se",sw:".ui-resizable-sw",ne:".ui-resizable-ne",nw:".ui-resizable-nw"});if(this.handles.constructor==String){if(this.handles=="all"){this.handles="n,e,s,w,se,sw,ne,nw";}var n=this.handles.split(",");this.handles={};for(var i=0;i<n.length;i++){var handle=$.trim(n[i]),hname="ui-resizable-"+handle;var axis=$('<div class="ui-resizable-handle '+hname+'"></div>');axis.css({zIndex:o.zIndex});if("se"==handle){axis.addClass("ui-icon ui-icon-gripsmall-diagonal-se");}this.handles[handle]=".ui-resizable-"+handle;this.element.append(axis);}}this._renderAxis=function(target){target=target||this.element;for(var i in this.handles){if(this.handles[i].constructor==String){this.handles[i]=$(this.handles[i],this.element).show();}if(this.elementIsWrapper&&this.originalElement[0].nodeName.match(/textarea|input|select|button/i)){var axis=$(this.handles[i],this.element),padWrapper=0;padWrapper=/sw|ne|nw|se|n|s/.test(i)?axis.outerHeight():axis.outerWidth();var padPos=["padding",/ne|nw|n/.test(i)?"Top":/se|sw|s/.test(i)?"Bottom":/^e$/.test(i)?"Right":"Left"].join("");target.css(padPos,padWrapper);this._proportionallyResize();}if(!$(this.handles[i]).length){continue;}}};this._renderAxis(this.element);this._handles=$(".ui-resizable-handle",this.element).disableSelection();this._handles.mouseover(function(){if(!that.resizing){if(this.className){var axis=this.className.match(/ui-resizable-(se|sw|ne|nw|n|e|s|w)/i);}that.axis=axis&&axis[1]?axis[1]:"se";}});if(o.autoHide){this._handles.hide();$(this.element).addClass("ui-resizable-autohide").mouseenter(function(){if(o.disabled){return;}$(this).removeClass("ui-resizable-autohide");that._handles.show();}).mouseleave(function(){if(o.disabled){return;}if(!that.resizing){$(this).addClass("ui-resizable-autohide");that._handles.hide();}});}this._mouseInit();},_destroy:function(){this._mouseDestroy();var _destroy=function(exp){$(exp).removeClass("ui-resizable ui-resizable-disabled ui-resizable-resizing").removeData("resizable").removeData("ui-resizable").unbind(".resizable").find(".ui-resizable-handle").remove();};if(this.elementIsWrapper){_destroy(this.element);var wrapper=this.element;wrapper.after(this.originalElement.css({position:wrapper.css("position"),width:wrapper.outerWidth(),height:wrapper.outerHeight(),top:wrapper.css("top"),left:wrapper.css("left")})).remove();}this.originalElement.css("resize",this.originalResizeStyle);_destroy(this.originalElement);return this;},_mouseCapture:function(event){var handle=false;for(var i in this.handles){if($(this.handles[i])[0]==event.target){handle=true;}}return !this.options.disabled&&handle;},_mouseStart:function(event){var o=this.options,iniPos=this.element.position(),el=this.element;this.resizing=true;this.documentScroll={top:$(document).scrollTop(),left:$(document).scrollLeft()};if(el.is(".ui-draggable")||(/absolute/).test(el.css("position"))){el.css({position:"absolute",top:iniPos.top,left:iniPos.left});}this._renderProxy();var curleft=num(this.helper.css("left")),curtop=num(this.helper.css("top"));if(o.containment){curleft+=$(o.containment).scrollLeft()||0;curtop+=$(o.containment).scrollTop()||0;}this.offset=this.helper.offset();this.position={left:curleft,top:curtop};this.size=this._helper?{width:el.outerWidth(),height:el.outerHeight()}:{width:el.width(),height:el.height()};this.originalSize=this._helper?{width:el.outerWidth(),height:el.outerHeight()}:{width:el.width(),height:el.height()};this.originalPosition={left:curleft,top:curtop};this.sizeDiff={width:el.outerWidth()-el.width(),height:el.outerHeight()-el.height()};this.originalMousePosition={left:event.pageX,top:event.pageY};this.aspectRatio=(typeof o.aspectRatio=="number")?o.aspectRatio:((this.originalSize.width/this.originalSize.height)||1);var cursor=$(".ui-resizable-"+this.axis).css("cursor");$("body").css("cursor",cursor=="auto"?this.axis+"-resize":cursor);el.addClass("ui-resizable-resizing");this._propagate("start",event);return true;},_mouseDrag:function(event){var el=this.helper,o=this.options,props={},that=this,smp=this.originalMousePosition,a=this.axis;var dx=(event.pageX-smp.left)||0,dy=(event.pageY-smp.top)||0;var trigger=this._change[a];if(!trigger){return false;}var data=trigger.apply(this,[event,dx,dy]);this._updateVirtualBoundaries(event.shiftKey);if(this._aspectRatio||event.shiftKey){data=this._updateRatio(data,event);}data=this._respectSize(data,event);this._propagate("resize",event);el.css({top:this.position.top+"px",left:this.position.left+"px",width:this.size.width+"px",height:this.size.height+"px"});if(!this._helper&&this._proportionallyResizeElements.length){this._proportionallyResize();}this._updateCache(data);this._trigger("resize",event,this.ui());return false;},_mouseStop:function(event){this.resizing=false;var o=this.options,that=this;if(this._helper){var pr=this._proportionallyResizeElements,ista=pr.length&&(/textarea/i).test(pr[0].nodeName),soffseth=ista&&$.ui.hasScroll(pr[0],"left")?0:that.sizeDiff.height,soffsetw=ista?0:that.sizeDiff.width;var s={width:(that.helper.width()-soffsetw),height:(that.helper.height()-soffseth)},left=(parseInt(that.element.css("left"),10)+(that.position.left-that.originalPosition.left))||null,top=(parseInt(that.element.css("top"),10)+(that.position.top-that.originalPosition.top))||null;if(!o.animate){this.element.css($.extend(s,{top:top,left:left}));}that.helper.height(that.size.height);that.helper.width(that.size.width);if(this._helper&&!o.animate){this._proportionallyResize();}}$("body").css("cursor","auto");this.element.removeClass("ui-resizable-resizing");this._propagate("stop",event);if(this._helper){this.helper.remove();}return false;},_updateVirtualBoundaries:function(forceAspectRatio){var o=this.options,pMinWidth,pMaxWidth,pMinHeight,pMaxHeight,b;b={minWidth:isNumber(o.minWidth)?o.minWidth:0,maxWidth:isNumber(o.maxWidth)?o.maxWidth:Infinity,minHeight:isNumber(o.minHeight)?o.minHeight:0,maxHeight:isNumber(o.maxHeight)?o.maxHeight:Infinity};if(this._aspectRatio||forceAspectRatio){pMinWidth=b.minHeight*this.aspectRatio;pMinHeight=b.minWidth/this.aspectRatio;pMaxWidth=b.maxHeight*this.aspectRatio;pMaxHeight=b.maxWidth/this.aspectRatio;if(pMinWidth>b.minWidth){b.minWidth=pMinWidth;}if(pMinHeight>b.minHeight){b.minHeight=pMinHeight;}if(pMaxWidth<b.maxWidth){b.maxWidth=pMaxWidth;}if(pMaxHeight<b.maxHeight){b.maxHeight=pMaxHeight;}}this._vBoundaries=b;},_updateCache:function(data){var o=this.options;this.offset=this.helper.offset();if(isNumber(data.left)){this.position.left=data.left;}if(isNumber(data.top)){this.position.top=data.top;}if(isNumber(data.height)){this.size.height=data.height;}if(isNumber(data.width)){this.size.width=data.width;}},_updateRatio:function(data,event){var o=this.options,cpos=this.position,csize=this.size,a=this.axis;if(isNumber(data.height)){data.width=(data.height*this.aspectRatio);}else{if(isNumber(data.width)){data.height=(data.width/this.aspectRatio);}}if(a=="sw"){data.left=cpos.left+(csize.width-data.width);data.top=null;}if(a=="nw"){data.top=cpos.top+(csize.height-data.height);data.left=cpos.left+(csize.width-data.width);}return data;},_respectSize:function(data,event){var el=this.helper,o=this._vBoundaries,pRatio=this._aspectRatio||event.shiftKey,a=this.axis,ismaxw=isNumber(data.width)&&o.maxWidth&&(o.maxWidth<data.width),ismaxh=isNumber(data.height)&&o.maxHeight&&(o.maxHeight<data.height),isminw=isNumber(data.width)&&o.minWidth&&(o.minWidth>data.width),isminh=isNumber(data.height)&&o.minHeight&&(o.minHeight>data.height);if(isminw){data.width=o.minWidth;}if(isminh){data.height=o.minHeight;}if(ismaxw){data.width=o.maxWidth;}if(ismaxh){data.height=o.maxHeight;}var dw=this.originalPosition.left+this.originalSize.width,dh=this.position.top+this.size.height;var cw=/sw|nw|w/.test(a),ch=/nw|ne|n/.test(a);if(isminw&&cw){data.left=dw-o.minWidth;}if(ismaxw&&cw){data.left=dw-o.maxWidth;}if(isminh&&ch){data.top=dh-o.minHeight;}if(ismaxh&&ch){data.top=dh-o.maxHeight;}var isNotwh=!data.width&&!data.height;if(isNotwh&&!data.left&&data.top){data.top=null;}else{if(isNotwh&&!data.top&&data.left){data.left=null;}}return data;},_proportionallyResize:function(){var o=this.options;if(!this._proportionallyResizeElements.length){return;}var element=this.helper||this.element;for(var i=0;i<this._proportionallyResizeElements.length;i++){var prel=this._proportionallyResizeElements[i];if(!this.borderDif){var b=[prel.css("borderTopWidth"),prel.css("borderRightWidth"),prel.css("borderBottomWidth"),prel.css("borderLeftWidth")],p=[prel.css("paddingTop"),prel.css("paddingRight"),prel.css("paddingBottom"),prel.css("paddingLeft")];this.borderDif=$.map(b,function(v,i){var border=parseInt(v,10)||0,padding=parseInt(p[i],10)||0;return border+padding;});}prel.css({height:(element.height()-this.borderDif[0]-this.borderDif[2])||0,width:(element.width()-this.borderDif[1]-this.borderDif[3])||0});}},_renderProxy:function(){var el=this.element,o=this.options;this.elementOffset=el.offset();if(this._helper){this.helper=this.helper||$('<div style="overflow:hidden;"></div>');var ie6=$.browser.msie&&$.browser.version<7,ie6offset=(ie6?1:0),pxyoffset=(ie6?2:-1);this.helper.addClass(this._helper).css({width:this.element.outerWidth()+pxyoffset,height:this.element.outerHeight()+pxyoffset,position:"absolute",left:this.elementOffset.left-ie6offset+"px",top:this.elementOffset.top-ie6offset+"px",zIndex:++o.zIndex});this.helper.appendTo("body").disableSelection();}else{this.helper=this.element;}},_change:{e:function(event,dx,dy){return{width:this.originalSize.width+dx};},w:function(event,dx,dy){var o=this.options,cs=this.originalSize,sp=this.originalPosition;return{left:sp.left+dx,width:cs.width-dx};},n:function(event,dx,dy){var o=this.options,cs=this.originalSize,sp=this.originalPosition;return{top:sp.top+dy,height:cs.height-dy};},s:function(event,dx,dy){return{height:this.originalSize.height+dy};},se:function(event,dx,dy){return $.extend(this._change.s.apply(this,arguments),this._change.e.apply(this,[event,dx,dy]));},sw:function(event,dx,dy){return $.extend(this._change.s.apply(this,arguments),this._change.w.apply(this,[event,dx,dy]));},ne:function(event,dx,dy){return $.extend(this._change.n.apply(this,arguments),this._change.e.apply(this,[event,dx,dy]));},nw:function(event,dx,dy){return $.extend(this._change.n.apply(this,arguments),this._change.w.apply(this,[event,dx,dy]));}},_propagate:function(n,event){$.ui.plugin.call(this,n,[event,this.ui()]);(n!="resize"&&this._trigger(n,event,this.ui()));},plugins:{},ui:function(){return{originalElement:this.originalElement,element:this.element,helper:this.helper,position:this.position,size:this.size,originalSize:this.originalSize,originalPosition:this.originalPosition};}});$.ui.plugin.add("resizable","alsoResize",{start:function(event,ui){var that=$(this).data("resizable"),o=that.options;var _store=function(exp){$(exp).each(function(){var el=$(this);el.data("resizable-alsoresize",{width:parseInt(el.width(),10),height:parseInt(el.height(),10),left:parseInt(el.css("left"),10),top:parseInt(el.css("top"),10)});});};if(typeof(o.alsoResize)=="object"&&!o.alsoResize.parentNode){if(o.alsoResize.length){o.alsoResize=o.alsoResize[0];_store(o.alsoResize);}else{$.each(o.alsoResize,function(exp){_store(exp);});}}else{_store(o.alsoResize);}},resize:function(event,ui){var that=$(this).data("resizable"),o=that.options,os=that.originalSize,op=that.originalPosition;var delta={height:(that.size.height-os.height)||0,width:(that.size.width-os.width)||0,top:(that.position.top-op.top)||0,left:(that.position.left-op.left)||0},_alsoResize=function(exp,c){$(exp).each(function(){var el=$(this),start=$(this).data("resizable-alsoresize"),style={},css=c&&c.length?c:el.parents(ui.originalElement[0]).length?["width","height"]:["width","height","top","left"];$.each(css,function(i,prop){var sum=(start[prop]||0)+(delta[prop]||0);if(sum&&sum>=0){style[prop]=sum||null;}});el.css(style);});};if(typeof(o.alsoResize)=="object"&&!o.alsoResize.nodeType){$.each(o.alsoResize,function(exp,c){_alsoResize(exp,c);});}else{_alsoResize(o.alsoResize);}},stop:function(event,ui){$(this).removeData("resizable-alsoresize");}});$.ui.plugin.add("resizable","animate",{stop:function(event,ui){var that=$(this).data("resizable"),o=that.options;var pr=that._proportionallyResizeElements,ista=pr.length&&(/textarea/i).test(pr[0].nodeName),soffseth=ista&&$.ui.hasScroll(pr[0],"left")?0:that.sizeDiff.height,soffsetw=ista?0:that.sizeDiff.width;var style={width:(that.size.width-soffsetw),height:(that.size.height-soffseth)},left=(parseInt(that.element.css("left"),10)+(that.position.left-that.originalPosition.left))||null,top=(parseInt(that.element.css("top"),10)+(that.position.top-that.originalPosition.top))||null;that.element.animate($.extend(style,top&&left?{top:top,left:left}:{}),{duration:o.animateDuration,easing:o.animateEasing,step:function(){var data={width:parseInt(that.element.css("width"),10),height:parseInt(that.element.css("height"),10),top:parseInt(that.element.css("top"),10),left:parseInt(that.element.css("left"),10)};if(pr&&pr.length){$(pr[0]).css({width:data.width,height:data.height});}that._updateCache(data);that._propagate("resize",event);}});}});$.ui.plugin.add("resizable","containment",{start:function(event,ui){var that=$(this).data("resizable"),o=that.options,el=that.element;var oc=o.containment,ce=(oc instanceof $)?oc.get(0):(/parent/.test(oc))?el.parent().get(0):oc;if(!ce){return;}that.containerElement=$(ce);if(/document/.test(oc)||oc==document){that.containerOffset={left:0,top:0};that.containerPosition={left:0,top:0};that.parentData={element:$(document),left:0,top:0,width:$(document).width(),height:$(document).height()||document.body.parentNode.scrollHeight};}else{var element=$(ce),p=[];$(["Top","Right","Left","Bottom"]).each(function(i,name){p[i]=num(element.css("padding"+name));});that.containerOffset=element.offset();that.containerPosition=element.position();that.containerSize={height:(element.innerHeight()-p[3]),width:(element.innerWidth()-p[1])};var co=that.containerOffset,ch=that.containerSize.height,cw=that.containerSize.width,width=($.ui.hasScroll(ce,"left")?ce.scrollWidth:cw),height=($.ui.hasScroll(ce)?ce.scrollHeight:ch);that.parentData={element:ce,left:co.left,top:co.top,width:width,height:height};}},resize:function(event,ui){var that=$(this).data("resizable"),o=that.options,ps=that.containerSize,co=that.containerOffset,cs=that.size,cp=that.position,pRatio=that._aspectRatio||event.shiftKey,cop={top:0,left:0},ce=that.containerElement;if(ce[0]!=document&&(/static/).test(ce.css("position"))){cop=co;}if(cp.left<(that._helper?co.left:0)){that.size.width=that.size.width+(that._helper?(that.position.left-co.left):(that.position.left-cop.left));if(pRatio){that.size.height=that.size.width/that.aspectRatio;}that.position.left=o.helper?co.left:0;}if(cp.top<(that._helper?co.top:0)){that.size.height=that.size.height+(that._helper?(that.position.top-co.top):that.position.top);if(pRatio){that.size.width=that.size.height*that.aspectRatio;}that.position.top=that._helper?co.top:0;}that.offset.left=that.parentData.left+that.position.left;that.offset.top=that.parentData.top+that.position.top;var woset=Math.abs((that._helper?that.offset.left-cop.left:(that.offset.left-cop.left))+that.sizeDiff.width),hoset=Math.abs((that._helper?that.offset.top-cop.top:(that.offset.top-co.top))+that.sizeDiff.height);var isParent=that.containerElement.get(0)==that.element.parent().get(0),isOffsetRelative=/relative|absolute/.test(that.containerElement.css("position"));if(isParent&&isOffsetRelative){woset-=that.parentData.left;}if(woset+that.size.width>=that.parentData.width){that.size.width=that.parentData.width-woset;if(pRatio){that.size.height=that.size.width/that.aspectRatio;}}if(hoset+that.size.height>=that.parentData.height){that.size.height=that.parentData.height-hoset;if(pRatio){that.size.width=that.size.height*that.aspectRatio;}}},stop:function(event,ui){var that=$(this).data("resizable"),o=that.options,cp=that.position,co=that.containerOffset,cop=that.containerPosition,ce=that.containerElement;var helper=$(that.helper),ho=helper.offset(),w=helper.outerWidth()-that.sizeDiff.width,h=helper.outerHeight()-that.sizeDiff.height;if(that._helper&&!o.animate&&(/relative/).test(ce.css("position"))){$(this).css({left:ho.left-cop.left-co.left,width:w,height:h});}if(that._helper&&!o.animate&&(/static/).test(ce.css("position"))){$(this).css({left:ho.left-cop.left-co.left,width:w,height:h});}}});$.ui.plugin.add("resizable","ghost",{start:function(event,ui){var that=$(this).data("resizable"),o=that.options,cs=that.size;that.ghost=that.originalElement.clone();that.ghost.css({opacity:0.25,display:"block",position:"relative",height:cs.height,width:cs.width,margin:0,left:0,top:0}).addClass("ui-resizable-ghost").addClass(typeof o.ghost=="string"?o.ghost:"");that.ghost.appendTo(that.helper);},resize:function(event,ui){var that=$(this).data("resizable"),o=that.options;if(that.ghost){that.ghost.css({position:"relative",height:that.size.height,width:that.size.width});}},stop:function(event,ui){var that=$(this).data("resizable"),o=that.options;if(that.ghost&&that.helper){that.helper.get(0).removeChild(that.ghost.get(0));}}});$.ui.plugin.add("resizable","grid",{resize:function(event,ui){var that=$(this).data("resizable"),o=that.options,cs=that.size,os=that.originalSize,op=that.originalPosition,a=that.axis,ratio=o._aspectRatio||event.shiftKey;o.grid=typeof o.grid=="number"?[o.grid,o.grid]:o.grid;var ox=Math.round((cs.width-os.width)/(o.grid[0]||1))*(o.grid[0]||1),oy=Math.round((cs.height-os.height)/(o.grid[1]||1))*(o.grid[1]||1);if(/^(se|s|e)$/.test(a)){that.size.width=os.width+ox;that.size.height=os.height+oy;}else{if(/^(ne)$/.test(a)){that.size.width=os.width+ox;that.size.height=os.height+oy;that.position.top=op.top-oy;}else{if(/^(sw)$/.test(a)){that.size.width=os.width+ox;that.size.height=os.height+oy;that.position.left=op.left-ox;}else{that.size.width=os.width+ox;that.size.height=os.height+oy;that.position.top=op.top-oy;that.position.left=op.left-ox;}}}}});var num=function(v){return parseInt(v,10)||0;};var isNumber=function(value){return !isNaN(parseInt(value,10));};})(jquery);(function($,undefined){$.widget("ui.selectable",$.ui.mouse,{version:"1.9.0",options:{appendTo:"body",autoRefresh:true,distance:0,filter:"*",tolerance:"touch"},_create:function(){var that=this;this.element.addClass("ui-selectable");this.dragged=false;var selectees;this.refresh=function(){selectees=$(that.options.filter,that.element[0]);selectees.addClass("ui-selectee");selectees.each(function(){var $this=$(this);var pos=$this.offset();$.data(this,"selectable-item",{element:this,$element:$this,left:pos.left,top:pos.top,right:pos.left+$this.outerWidth(),bottom:pos.top+$this.outerHeight(),startselected:false,selected:$this.hasClass("ui-selected"),selecting:$this.hasClass("ui-selecting"),unselecting:$this.hasClass("ui-unselecting")});});};this.refresh();this.selectees=selectees.addClass("ui-selectee");this._mouseInit();this.helper=$("<div class='ui-selectable-helper'></div>");},_destroy:function(){this.selectees.removeClass("ui-selectee").removeData("selectable-item");this.element.removeClass("ui-selectable ui-selectable-disabled");this._mouseDestroy();},_mouseStart:function(event){var that=this;this.opos=[event.pageX,event.pageY];if(this.options.disabled){return;}var options=this.options;this.selectees=$(options.filter,this.element[0]);this._trigger("start",event);$(options.appendTo).append(this.helper);this.helper.css({left:event.clientX,top:event.clientY,width:0,height:0});if(options.autoRefresh){this.refresh();}this.selectees.filter(".ui-selected").each(function(){var selectee=$.data(this,"selectable-item");selectee.startselected=true;if(!event.metaKey&&!event.ctrlKey){selectee.$element.removeClass("ui-selected");selectee.selected=false;selectee.$element.addClass("ui-unselecting");selectee.unselecting=true;that._trigger("unselecting",event,{unselecting:selectee.element});}});$(event.target).parents().andSelf().each(function(){var selectee=$.data(this,"selectable-item");if(selectee){var doSelect=(!event.metaKey&&!event.ctrlKey)||!selectee.$element.hasClass("ui-selected");selectee.$element.removeClass(doSelect?"ui-unselecting":"ui-selected").addClass(doSelect?"ui-selecting":"ui-unselecting");selectee.unselecting=!doSelect;selectee.selecting=doSelect;selectee.selected=doSelect;if(doSelect){that._trigger("selecting",event,{selecting:selectee.element});}else{that._trigger("unselecting",event,{unselecting:selectee.element});}return false;}});},_mouseDrag:function(event){var that=this;this.dragged=true;if(this.options.disabled){return;}var options=this.options;var x1=this.opos[0],y1=this.opos[1],x2=event.pageX,y2=event.pageY;if(x1>x2){var tmp=x2;x2=x1;x1=tmp;}if(y1>y2){var tmp=y2;y2=y1;y1=tmp;}this.helper.css({left:x1,top:y1,width:x2-x1,height:y2-y1});this.selectees.each(function(){var selectee=$.data(this,"selectable-item");if(!selectee||selectee.element==that.element[0]){return;}var hit=false;if(options.tolerance=="touch"){hit=(!(selectee.left>x2||selectee.right<x1||selectee.top>y2||selectee.bottom<y1));}else{if(options.tolerance=="fit"){hit=(selectee.left>x1&&selectee.right<x2&&selectee.top>y1&&selectee.bottom<y2);}}if(hit){if(selectee.selected){selectee.$element.removeClass("ui-selected");selectee.selected=false;}if(selectee.unselecting){selectee.$element.removeClass("ui-unselecting");selectee.unselecting=false;}if(!selectee.selecting){selectee.$element.addClass("ui-selecting");selectee.selecting=true;that._trigger("selecting",event,{selecting:selectee.element});}}else{if(selectee.selecting){if((event.metaKey||event.ctrlKey)&&selectee.startselected){selectee.$element.removeClass("ui-selecting");selectee.selecting=false;selectee.$element.addClass("ui-selected");selectee.selected=true;}else{selectee.$element.removeClass("ui-selecting");selectee.selecting=false;if(selectee.startselected){selectee.$element.addClass("ui-unselecting");selectee.unselecting=true;}that._trigger("unselecting",event,{unselecting:selectee.element});}}if(selectee.selected){if(!event.metaKey&&!event.ctrlKey&&!selectee.startselected){selectee.$element.removeClass("ui-selected");selectee.selected=false;selectee.$element.addClass("ui-unselecting");selectee.unselecting=true;that._trigger("unselecting",event,{unselecting:selectee.element});}}}});return false;},_mouseStop:function(event){var that=this;this.dragged=false;var options=this.options;$(".ui-unselecting",this.element[0]).each(function(){var selectee=$.data(this,"selectable-item");selectee.$element.removeClass("ui-unselecting");selectee.unselecting=false;selectee.startselected=false;that._trigger("unselected",event,{unselected:selectee.element});});$(".ui-selecting",this.element[0]).each(function(){var selectee=$.data(this,"selectable-item");selectee.$element.removeClass("ui-selecting").addClass("ui-selected");selectee.selecting=false;selectee.selected=true;selectee.startselected=true;that._trigger("selected",event,{selected:selectee.element});});this._trigger("stop",event);this.helper.remove();return false;}});})(jquery);(function($,undefined){$.widget("ui.sortable",$.ui.mouse,{version:"1.9.0",widgetEventPrefix:"sort",ready:false,options:{appendTo:"parent",axis:false,connectWith:false,containment:false,cursor:"auto",cursorAt:false,dropOnEmpty:true,forcePlaceholderSize:false,forceHelperSize:false,grid:false,handle:false,helper:"original",items:"> *",opacity:false,placeholder:false,revert:false,scroll:true,scrollSensitivity:20,scrollSpeed:20,scope:"default",tolerance:"intersect",zIndex:1000},_create:function(){var o=this.options;this.containerCache={};this.element.addClass("ui-sortable");this.refresh();this.floating=this.items.length?o.axis==="x"||(/left|right/).test(this.items[0].item.css("float"))||(/inline|table-cell/).test(this.items[0].item.css("display")):false;this.offset=this.element.offset();this._mouseInit();this.ready=true;},_destroy:function(){this.element.removeClass("ui-sortable ui-sortable-disabled");this._mouseDestroy();for(var i=this.items.length-1;i>=0;i--){this.items[i].item.removeData(this.widgetName+"-item");}return this;},_setOption:function(key,value){if(key==="disabled"){this.options[key]=value;this.widget().toggleClass("ui-sortable-disabled",!!value);}else{$.Widget.prototype._setOption.apply(this,arguments);}},_mouseCapture:function(event,overrideHandle){var that=this;if(this.reverting){return false;}if(this.options.disabled||this.options.type=="static"){return false;}this._refreshItems(event);var currentItem=null,nodes=$(event.target).parents().each(function(){if($.data(this,that.widgetName+"-item")==that){currentItem=$(this);return false;}});if($.data(event.target,that.widgetName+"-item")==that){currentItem=$(event.target);}if(!currentItem){return false;}if(this.options.handle&&!overrideHandle){var validHandle=false;$(this.options.handle,currentItem).find("*").andSelf().each(function(){if(this==event.target){validHandle=true;}});if(!validHandle){return false;}}this.currentItem=currentItem;this._removeCurrentsFromItems();return true;},_mouseStart:function(event,overrideHandle,noActivation){var o=this.options;this.currentContainer=this;this.refreshPositions();this.helper=this._createHelper(event);this._cacheHelperProportions();this._cacheMargins();this.scrollParent=this.helper.scrollParent();this.offset=this.currentItem.offset();this.offset={top:this.offset.top-this.margins.top,left:this.offset.left-this.margins.left};$.extend(this.offset,{click:{left:event.pageX-this.offset.left,top:event.pageY-this.offset.top},parent:this._getParentOffset(),relative:this._getRelativeOffset()});this.helper.css("position","absolute");this.cssPosition=this.helper.css("position");this.originalPosition=this._generatePosition(event);this.originalPageX=event.pageX;this.originalPageY=event.pageY;(o.cursorAt&&this._adjustOffsetFromHelper(o.cursorAt));this.domPosition={prev:this.currentItem.prev()[0],parent:this.currentItem.parent()[0]};if(this.helper[0]!=this.currentItem[0]){this.currentItem.hide();}this._createPlaceholder();if(o.containment){this._setContainment();}if(o.cursor){if($("body").css("cursor")){this._storedCursor=$("body").css("cursor");}$("body").css("cursor",o.cursor);}if(o.opacity){if(this.helper.css("opacity")){this._storedOpacity=this.helper.css("opacity");}this.helper.css("opacity",o.opacity);}if(o.zIndex){if(this.helper.css("zIndex")){this._storedZIndex=this.helper.css("zIndex");}this.helper.css("zIndex",o.zIndex);}if(this.scrollParent[0]!=document&&this.scrollParent[0].tagName!="HTML"){this.overflowOffset=this.scrollParent.offset();}this._trigger("start",event,this._uiHash());if(!this._preserveHelperProportions){this._cacheHelperProportions();}if(!noActivation){for(var i=this.containers.length-1;i>=0;i--){this.containers[i]._trigger("activate",event,this._uiHash(this));}}if($.ui.ddmanager){$.ui.ddmanager.current=this;}if($.ui.ddmanager&&!o.dropBehaviour){$.ui.ddmanager.prepareOffsets(this,event);}this.dragging=true;this.helper.addClass("ui-sortable-helper");this._mouseDrag(event);return true;},_mouseDrag:function(event){this.position=this._generatePosition(event);this.positionAbs=this._convertPositionTo("absolute");if(!this.lastPositionAbs){this.lastPositionAbs=this.positionAbs;}if(this.options.scroll){var o=this.options,scrolled=false;if(this.scrollParent[0]!=document&&this.scrollParent[0].tagName!="HTML"){if((this.overflowOffset.top+this.scrollParent[0].offsetHeight)-event.pageY<o.scrollSensitivity){this.scrollParent[0].scrollTop=scrolled=this.scrollParent[0].scrollTop+o.scrollSpeed;}else{if(event.pageY-this.overflowOffset.top<o.scrollSensitivity){this.scrollParent[0].scrollTop=scrolled=this.scrollParent[0].scrollTop-o.scrollSpeed;}}if((this.overflowOffset.left+this.scrollParent[0].offsetWidth)-event.pageX<o.scrollSensitivity){this.scrollParent[0].scrollLeft=scrolled=this.scrollParent[0].scrollLeft+o.scrollSpeed;}else{if(event.pageX-this.overflowOffset.left<o.scrollSensitivity){this.scrollParent[0].scrollLeft=scrolled=this.scrollParent[0].scrollLeft-o.scrollSpeed;}}}else{if(event.pageY-$(document).scrollTop()<o.scrollSensitivity){scrolled=$(document).scrollTop($(document).scrollTop()-o.scrollSpeed);}else{if($(window).height()-(event.pageY-$(document).scrollTop())<o.scrollSensitivity){scrolled=$(document).scrollTop($(document).scrollTop()+o.scrollSpeed);}}if(event.pageX-$(document).scrollLeft()<o.scrollSensitivity){scrolled=$(document).scrollLeft($(document).scrollLeft()-o.scrollSpeed);}else{if($(window).width()-(event.pageX-$(document).scrollLeft())<o.scrollSensitivity){scrolled=$(document).scrollLeft($(document).scrollLeft()+o.scrollSpeed);}}}if(scrolled!==false&&$.ui.ddmanager&&!o.dropBehaviour){$.ui.ddmanager.prepareOffsets(this,event);}}this.positionAbs=this._convertPositionTo("absolute");if(!this.options.axis||this.options.axis!="y"){this.helper[0].style.left=this.position.left+"px";}if(!this.options.axis||this.options.axis!="x"){this.helper[0].style.top=this.position.top+"px";}for(var i=this.items.length-1;i>=0;i--){var item=this.items[i],itemElement=item.item[0],intersection=this._intersectsWithPointer(item);if(!intersection){continue;}if(item.instance!==this.currentContainer){continue;}if(itemElement!=this.currentItem[0]&&this.placeholder[intersection==1?"next":"prev"]()[0]!=itemElement&&!$.contains(this.placeholder[0],itemElement)&&(this.options.type=="semi-dynamic"?!$.contains(this.element[0],itemElement):true)){this.direction=intersection==1?"down":"up";if(this.options.tolerance=="pointer"||this._intersectsWithSides(item)){this._rearrange(event,item);}else{break;}this._trigger("change",event,this._uiHash());break;}}this._contactContainers(event);if($.ui.ddmanager){$.ui.ddmanager.drag(this,event);}this._trigger("sort",event,this._uiHash());this.lastPositionAbs=this.positionAbs;return false;},_mouseStop:function(event,noPropagation){if(!event){return;}if($.ui.ddmanager&&!this.options.dropBehaviour){$.ui.ddmanager.drop(this,event);}if(this.options.revert){var that=this;var cur=this.placeholder.offset();this.reverting=true;$(this.helper).animate({left:cur.left-this.offset.parent.left-this.margins.left+(this.offsetParent[0]==document.body?0:this.offsetParent[0].scrollLeft),top:cur.top-this.offset.parent.top-this.margins.top+(this.offsetParent[0]==document.body?0:this.offsetParent[0].scrollTop)},parseInt(this.options.revert,10)||500,function(){that._clear(event);});}else{this._clear(event,noPropagation);}return false;},cancel:function(){if(this.dragging){this._mouseUp({target:null});if(this.options.helper=="original"){this.currentItem.css(this._storedCSS).removeClass("ui-sortable-helper");}else{this.currentItem.show();}for(var i=this.containers.length-1;i>=0;i--){this.containers[i]._trigger("deactivate",null,this._uiHash(this));if(this.containers[i].containerCache.over){this.containers[i]._trigger("out",null,this._uiHash(this));this.containers[i].containerCache.over=0;}}}if(this.placeholder){if(this.placeholder[0].parentNode){this.placeholder[0].parentNode.removeChild(this.placeholder[0]);}if(this.options.helper!="original"&&this.helper&&this.helper[0].parentNode){this.helper.remove();}$.extend(this,{helper:null,dragging:false,reverting:false,_noFinalSort:null});if(this.domPosition.prev){$(this.domPosition.prev).after(this.currentItem);}else{$(this.domPosition.parent).prepend(this.currentItem);}}return this;},serialize:function(o){var items=this._getItemsAsjQuery(o&&o.connected);var str=[];o=o||{};$(items).each(function(){var res=($(o.item||this).attr(o.attribute||"id")||"").match(o.expression||(/(.+)[-=_](.+)/));if(res){str.push((o.key||res[1]+"[]")+"="+(o.key&&o.expression?res[1]:res[2]));}});if(!str.length&&o.key){str.push(o.key+"=");}return str.join("&");},toArray:function(o){var items=this._getItemsAsjQuery(o&&o.connected);var ret=[];o=o||{};items.each(function(){ret.push($(o.item||this).attr(o.attribute||"id")||"");});return ret;},_intersectsWith:function(item){var x1=this.positionAbs.left,x2=x1+this.helperProportions.width,y1=this.positionAbs.top,y2=y1+this.helperProportions.height;var l=item.left,r=l+item.width,t=item.top,b=t+item.height;var dyClick=this.offset.click.top,dxClick=this.offset.click.left;var isOverElement=(y1+dyClick)>t&&(y1+dyClick)<b&&(x1+dxClick)>l&&(x1+dxClick)<r;if(this.options.tolerance=="pointer"||this.options.forcePointerForContainers||(this.options.tolerance!="pointer"&&this.helperProportions[this.floating?"width":"height"]>item[this.floating?"width":"height"])){return isOverElement;}else{return(l<x1+(this.helperProportions.width/2)&&x2-(this.helperProportions.width/2)<r&&t<y1+(this.helperProportions.height/2)&&y2-(this.helperProportions.height/2)<b);}},_intersectsWithPointer:function(item){var isOverElementHeight=(this.options.axis==="x")||$.ui.isOverAxis(this.positionAbs.top+this.offset.click.top,item.top,item.height),isOverElementWidth=(this.options.axis==="y")||$.ui.isOverAxis(this.positionAbs.left+this.offset.click.left,item.left,item.width),isOverElement=isOverElementHeight&&isOverElementWidth,verticalDirection=this._getDragVerticalDirection(),horizontalDirection=this._getDragHorizontalDirection();if(!isOverElement){return false;}return this.floating?(((horizontalDirection&&horizontalDirection=="right")||verticalDirection=="down")?2:1):(verticalDirection&&(verticalDirection=="down"?2:1));},_intersectsWithSides:function(item){var isOverBottomHalf=$.ui.isOverAxis(this.positionAbs.top+this.offset.click.top,item.top+(item.height/2),item.height),isOverRightHalf=$.ui.isOverAxis(this.positionAbs.left+this.offset.click.left,item.left+(item.width/2),item.width),verticalDirection=this._getDragVerticalDirection(),horizontalDirection=this._getDragHorizontalDirection();if(this.floating&&horizontalDirection){return((horizontalDirection=="right"&&isOverRightHalf)||(horizontalDirection=="left"&&!isOverRightHalf));}else{return verticalDirection&&((verticalDirection=="down"&&isOverBottomHalf)||(verticalDirection=="up"&&!isOverBottomHalf));}},_getDragVerticalDirection:function(){var delta=this.positionAbs.top-this.lastPositionAbs.top;return delta!=0&&(delta>0?"down":"up");},_getDragHorizontalDirection:function(){var delta=this.positionAbs.left-this.lastPositionAbs.left;return delta!=0&&(delta>0?"right":"left");},refresh:function(event){this._refreshItems(event);this.refreshPositions();return this;},_connectWith:function(){var options=this.options;return options.connectWith.constructor==String?[options.connectWith]:options.connectWith;},_getItemsAsjQuery:function(connected){var items=[];var queries=[];var connectWith=this._connectWith();if(connectWith&&connected){for(var i=connectWith.length-1;i>=0;i--){var cur=$(connectWith[i]);for(var j=cur.length-1;j>=0;j--){var inst=$.data(cur[j],this.widgetName);if(inst&&inst!=this&&!inst.options.disabled){queries.push([$.isFunction(inst.options.items)?inst.options.items.call(inst.element):$(inst.options.items,inst.element).not(".ui-sortable-helper").not(".ui-sortable-placeholder"),inst]);}}}}queries.push([$.isFunction(this.options.items)?this.options.items.call(this.element,null,{options:this.options,item:this.currentItem}):$(this.options.items,this.element).not(".ui-sortable-helper").not(".ui-sortable-placeholder"),this]);for(var i=queries.length-1;i>=0;i--){queries[i][0].each(function(){items.push(this);});}return $(items);},_removeCurrentsFromItems:function(){var list=this.currentItem.find(":data("+this.widgetName+"-item)");for(var i=0;i<this.items.length;i++){for(var j=0;j<list.length;j++){if(list[j]==this.items[i].item[0]){this.items.splice(i,1);}}}},_refreshItems:function(event){this.items=[];this.containers=[this];var items=this.items;var queries=[[$.isFunction(this.options.items)?this.options.items.call(this.element[0],event,{item:this.currentItem}):$(this.options.items,this.element),this]];var connectWith=this._connectWith();if(connectWith&&this.ready){for(var i=connectWith.length-1;i>=0;i--){var cur=$(connectWith[i]);for(var j=cur.length-1;j>=0;j--){var inst=$.data(cur[j],this.widgetName);if(inst&&inst!=this&&!inst.options.disabled){queries.push([$.isFunction(inst.options.items)?inst.options.items.call(inst.element[0],event,{item:this.currentItem}):$(inst.options.items,inst.element),inst]);this.containers.push(inst);}}}}for(var i=queries.length-1;i>=0;i--){var targetData=queries[i][1];var _queries=queries[i][0];for(var j=0,queriesLength=_queries.length;j<queriesLength;j++){var item=$(_queries[j]);item.data(this.widgetName+"-item",targetData);items.push({item:item,instance:targetData,width:0,height:0,left:0,top:0});}}},refreshPositions:function(fast){if(this.offsetParent&&this.helper){this.offset.parent=this._getParentOffset();}for(var i=this.items.length-1;i>=0;i--){var item=this.items[i];if(item.instance!=this.currentContainer&&this.currentContainer&&item.item[0]!=this.currentItem[0]){continue;}var t=this.options.toleranceElement?$(this.options.toleranceElement,item.item):item.item;if(!fast){item.width=t.outerWidth();item.height=t.outerHeight();}var p=t.offset();item.left=p.left;item.top=p.top;}if(this.options.custom&&this.options.custom.refreshContainers){this.options.custom.refreshContainers.call(this);}else{for(var i=this.containers.length-1;i>=0;i--){var p=this.containers[i].element.offset();this.containers[i].containerCache.left=p.left;this.containers[i].containerCache.top=p.top;this.containers[i].containerCache.width=this.containers[i].element.outerWidth();this.containers[i].containerCache.height=this.containers[i].element.outerHeight();}}return this;},_createPlaceholder:function(that){that=that||this;var o=that.options;if(!o.placeholder||o.placeholder.constructor==String){var className=o.placeholder;o.placeholder={element:function(){var el=$(document.createElement(that.currentItem[0].nodeName)).addClass(className||that.currentItem[0].className+" ui-sortable-placeholder").removeClass("ui-sortable-helper")[0];if(!className){el.style.visibility="hidden";}return el;},update:function(container,p){if(className&&!o.forcePlaceholderSize){return;}if(!p.height()){p.height(that.currentItem.innerHeight()-parseInt(that.currentItem.css("paddingTop")||0,10)-parseInt(that.currentItem.css("paddingBottom")||0,10));}if(!p.width()){p.width(that.currentItem.innerWidth()-parseInt(that.currentItem.css("paddingLeft")||0,10)-parseInt(that.currentItem.css("paddingRight")||0,10));}}};}that.placeholder=$(o.placeholder.element.call(that.element,that.currentItem));that.currentItem.after(that.placeholder);o.placeholder.update(that,that.placeholder);},_contactContainers:function(event){var innermostContainer=null,innermostIndex=null;for(var i=this.containers.length-1;i>=0;i--){if($.contains(this.currentItem[0],this.containers[i].element[0])){continue;}if(this._intersectsWith(this.containers[i].containerCache)){if(innermostContainer&&$.contains(this.containers[i].element[0],innermostContainer.element[0])){continue;}innermostContainer=this.containers[i];innermostIndex=i;}else{if(this.containers[i].containerCache.over){this.containers[i]._trigger("out",event,this._uiHash(this));this.containers[i].containerCache.over=0;}}}if(!innermostContainer){return;}if(this.containers.length===1){this.containers[innermostIndex]._trigger("over",event,this._uiHash(this));this.containers[innermostIndex].containerCache.over=1;}else{if(this.currentContainer!=this.containers[innermostIndex]){var dist=10000;var itemWithLeastDistance=null;var base=this.positionAbs[this.containers[innermostIndex].floating?"left":"top"];for(var j=this.items.length-1;j>=0;j--){if(!$.contains(this.containers[innermostIndex].element[0],this.items[j].item[0])){continue;}var cur=this.containers[innermostIndex].floating?this.items[j].item.offset().left:this.items[j].item.offset().top;if(Math.abs(cur-base)<dist){dist=Math.abs(cur-base);itemWithLeastDistance=this.items[j];this.direction=(cur-base>0)?"down":"up";}}if(!itemWithLeastDistance&&!this.options.dropOnEmpty){return;}this.currentContainer=this.containers[innermostIndex];itemWithLeastDistance?this._rearrange(event,itemWithLeastDistance,null,true):this._rearrange(event,null,this.containers[innermostIndex].element,true);this._trigger("change",event,this._uiHash());this.containers[innermostIndex]._trigger("change",event,this._uiHash(this));this.options.placeholder.update(this.currentContainer,this.placeholder);this.containers[innermostIndex]._trigger("over",event,this._uiHash(this));this.containers[innermostIndex].containerCache.over=1;}}},_createHelper:function(event){var o=this.options;var helper=$.isFunction(o.helper)?$(o.helper.apply(this.element[0],[event,this.currentItem])):(o.helper=="clone"?this.currentItem.clone():this.currentItem);if(!helper.parents("body").length){$(o.appendTo!="parent"?o.appendTo:this.currentItem[0].parentNode)[0].appendChild(helper[0]);}if(helper[0]==this.currentItem[0]){this._storedCSS={width:this.currentItem[0].style.width,height:this.currentItem[0].style.height,position:this.currentItem.css("position"),top:this.currentItem.css("top"),left:this.currentItem.css("left")};}if(helper[0].style.width==""||o.forceHelperSize){helper.width(this.currentItem.width());}if(helper[0].style.height==""||o.forceHelperSize){helper.height(this.currentItem.height());}return helper;},_adjustOffsetFromHelper:function(obj){if(typeof obj=="string"){obj=obj.split(" ");}if($.isArray(obj)){obj={left:+obj[0],top:+obj[1]||0};}if("left" in obj){this.offset.click.left=obj.left+this.margins.left;}if("right" in obj){this.offset.click.left=this.helperProportions.width-obj.right+this.margins.left;}if("top" in obj){this.offset.click.top=obj.top+this.margins.top;}if("bottom" in obj){this.offset.click.top=this.helperProportions.height-obj.bottom+this.margins.top;}},_getParentOffset:function(){this.offsetParent=this.helper.offsetParent();var po=this.offsetParent.offset();if(this.cssPosition=="absolute"&&this.scrollParent[0]!=document&&$.contains(this.scrollParent[0],this.offsetParent[0])){po.left+=this.scrollParent.scrollLeft();po.top+=this.scrollParent.scrollTop();}if((this.offsetParent[0]==document.body)||(this.offsetParent[0].tagName&&this.offsetParent[0].tagName.toLowerCase()=="html"&&$.browser.msie)){po={top:0,left:0};}return{top:po.top+(parseInt(this.offsetParent.css("borderTopWidth"),10)||0),left:po.left+(parseInt(this.offsetParent.css("borderLeftWidth"),10)||0)};},_getRelativeOffset:function(){if(this.cssPosition=="relative"){var p=this.currentItem.position();return{top:p.top-(parseInt(this.helper.css("top"),10)||0)+this.scrollParent.scrollTop(),left:p.left-(parseInt(this.helper.css("left"),10)||0)+this.scrollParent.scrollLeft()};}else{return{top:0,left:0};}},_cacheMargins:function(){this.margins={left:(parseInt(this.currentItem.css("marginLeft"),10)||0),top:(parseInt(this.currentItem.css("marginTop"),10)||0)};},_cacheHelperProportions:function(){this.helperProportions={width:this.helper.outerWidth(),height:this.helper.outerHeight()};},_setContainment:function(){var o=this.options;if(o.containment=="parent"){o.containment=this.helper[0].parentNode;}if(o.containment=="document"||o.containment=="window"){this.containment=[0-this.offset.relative.left-this.offset.parent.left,0-this.offset.relative.top-this.offset.parent.top,$(o.containment=="document"?document:window).width()-this.helperProportions.width-this.margins.left,($(o.containment=="document"?document:window).height()||document.body.parentNode.scrollHeight)-this.helperProportions.height-this.margins.top];}if(!(/^(document|window|parent)$/).test(o.containment)){var ce=$(o.containment)[0];var co=$(o.containment).offset();var over=($(ce).css("overflow")!="hidden");this.containment=[co.left+(parseInt($(ce).css("borderLeftWidth"),10)||0)+(parseInt($(ce).css("paddingLeft"),10)||0)-this.margins.left,co.top+(parseInt($(ce).css("borderTopWidth"),10)||0)+(parseInt($(ce).css("paddingTop"),10)||0)-this.margins.top,co.left+(over?Math.max(ce.scrollWidth,ce.offsetWidth):ce.offsetWidth)-(parseInt($(ce).css("borderLeftWidth"),10)||0)-(parseInt($(ce).css("paddingRight"),10)||0)-this.helperProportions.width-this.margins.left,co.top+(over?Math.max(ce.scrollHeight,ce.offsetHeight):ce.offsetHeight)-(parseInt($(ce).css("borderTopWidth"),10)||0)-(parseInt($(ce).css("paddingBottom"),10)||0)-this.helperProportions.height-this.margins.top];}},_convertPositionTo:function(d,pos){if(!pos){pos=this.position;}var mod=d=="absolute"?1:-1;var o=this.options,scroll=this.cssPosition=="absolute"&&!(this.scrollParent[0]!=document&&$.contains(this.scrollParent[0],this.offsetParent[0]))?this.offsetParent:this.scrollParent,scrollIsRootNode=(/(html|body)/i).test(scroll[0].tagName);return{top:(pos.top+this.offset.relative.top*mod+this.offset.parent.top*mod-((this.cssPosition=="fixed"?-this.scrollParent.scrollTop():(scrollIsRootNode?0:scroll.scrollTop()))*mod)),left:(pos.left+this.offset.relative.left*mod+this.offset.parent.left*mod-((this.cssPosition=="fixed"?-this.scrollParent.scrollLeft():scrollIsRootNode?0:scroll.scrollLeft())*mod))};},_generatePosition:function(event){var o=this.options,scroll=this.cssPosition=="absolute"&&!(this.scrollParent[0]!=document&&$.contains(this.scrollParent[0],this.offsetParent[0]))?this.offsetParent:this.scrollParent,scrollIsRootNode=(/(html|body)/i).test(scroll[0].tagName);if(this.cssPosition=="relative"&&!(this.scrollParent[0]!=document&&this.scrollParent[0]!=this.offsetParent[0])){this.offset.relative=this._getRelativeOffset();}var pageX=event.pageX;var pageY=event.pageY;if(this.originalPosition){if(this.containment){if(event.pageX-this.offset.click.left<this.containment[0]){pageX=this.containment[0]+this.offset.click.left;}if(event.pageY-this.offset.click.top<this.containment[1]){pageY=this.containment[1]+this.offset.click.top;}if(event.pageX-this.offset.click.left>this.containment[2]){pageX=this.containment[2]+this.offset.click.left;}if(event.pageY-this.offset.click.top>this.containment[3]){pageY=this.containment[3]+this.offset.click.top;}}if(o.grid){var top=this.originalPageY+Math.round((pageY-this.originalPageY)/o.grid[1])*o.grid[1];pageY=this.containment?(!(top-this.offset.click.top<this.containment[1]||top-this.offset.click.top>this.containment[3])?top:(!(top-this.offset.click.top<this.containment[1])?top-o.grid[1]:top+o.grid[1])):top;var left=this.originalPageX+Math.round((pageX-this.originalPageX)/o.grid[0])*o.grid[0];pageX=this.containment?(!(left-this.offset.click.left<this.containment[0]||left-this.offset.click.left>this.containment[2])?left:(!(left-this.offset.click.left<this.containment[0])?left-o.grid[0]:left+o.grid[0])):left;}}return{top:(pageY-this.offset.click.top-this.offset.relative.top-this.offset.parent.top+((this.cssPosition=="fixed"?-this.scrollParent.scrollTop():(scrollIsRootNode?0:scroll.scrollTop())))),left:(pageX-this.offset.click.left-this.offset.relative.left-this.offset.parent.left+((this.cssPosition=="fixed"?-this.scrollParent.scrollLeft():scrollIsRootNode?0:scroll.scrollLeft())))};},_rearrange:function(event,i,a,hardRefresh){a?a[0].appendChild(this.placeholder[0]):i.item[0].parentNode.insertBefore(this.placeholder[0],(this.direction=="down"?i.item[0]:i.item[0].nextSibling));this.counter=this.counter?++this.counter:1;var counter=this.counter;this._delay(function(){if(counter==this.counter){this.refreshPositions(!hardRefresh);}});},_clear:function(event,noPropagation){this.reverting=false;var delayedTriggers=[];if(!this._noFinalSort&&this.currentItem.parent().length){this.placeholder.before(this.currentItem);}this._noFinalSort=null;if(this.helper[0]==this.currentItem[0]){for(var i in this._storedCSS){if(this._storedCSS[i]=="auto"||this._storedCSS[i]=="static"){this._storedCSS[i]="";}}this.currentItem.css(this._storedCSS).removeClass("ui-sortable-helper");}else{this.currentItem.show();}if(this.fromOutside&&!noPropagation){delayedTriggers.push(function(event){this._trigger("receive",event,this._uiHash(this.fromOutside));});}if((this.fromOutside||this.domPosition.prev!=this.currentItem.prev().not(".ui-sortable-helper")[0]||this.domPosition.parent!=this.currentItem.parent()[0])&&!noPropagation){delayedTriggers.push(function(event){this._trigger("update",event,this._uiHash());});}if(this!==this.currentContainer){if(!noPropagation){delayedTriggers.push(function(event){this._trigger("remove",event,this._uiHash());});delayedTriggers.push((function(c){return function(event){c._trigger("receive",event,this._uiHash(this));};}).call(this,this.currentContainer));delayedTriggers.push((function(c){return function(event){c._trigger("update",event,this._uiHash(this));};}).call(this,this.currentContainer));}}for(var i=this.containers.length-1;i>=0;i--){if(!noPropagation){delayedTriggers.push((function(c){return function(event){c._trigger("deactivate",event,this._uiHash(this));};}).call(this,this.containers[i]));}if(this.containers[i].containerCache.over){delayedTriggers.push((function(c){return function(event){c._trigger("out",event,this._uiHash(this));};}).call(this,this.containers[i]));this.containers[i].containerCache.over=0;}}if(this._storedCursor){$("body").css("cursor",this._storedCursor);}if(this._storedOpacity){this.helper.css("opacity",this._storedOpacity);}if(this._storedZIndex){this.helper.css("zIndex",this._storedZIndex=="auto"?"":this._storedZIndex);}this.dragging=false;if(this.cancelHelperRemoval){if(!noPropagation){this._trigger("beforeStop",event,this._uiHash());for(var i=0;i<delayedTriggers.length;i++){delayedTriggers[i].call(this,event);}this._trigger("stop",event,this._uiHash());}this.fromOutside=false;return false;}if(!noPropagation){this._trigger("beforeStop",event,this._uiHash());}this.placeholder[0].parentNode.removeChild(this.placeholder[0]);if(this.helper[0]!=this.currentItem[0]){this.helper.remove();}this.helper=null;if(!noPropagation){for(var i=0;i<delayedTriggers.length;i++){delayedTriggers[i].call(this,event);}this._trigger("stop",event,this._uiHash());}this.fromOutside=false;return true;},_trigger:function(){if($.Widget.prototype._trigger.apply(this,arguments)===false){this.cancel();}},_uiHash:function(_inst){var inst=_inst||this;return{helper:inst.helper,placeholder:inst.placeholder||$([]),position:inst.position,originalPosition:inst.originalPosition,offset:inst.positionAbs,item:inst.currentItem,sender:_inst?_inst.element:null};}});})(jquery);(jquery.effects||(function($,undefined){var backCompat=$.uiBackCompat!==false,dataSpace="ui-effects-";$.effects={effect:{}};
/*
 * jQuery Color Animations v2.0.0
 * http://jquery.com/
 *
 * Copyright 2012 jQuery Foundation and other contributors
 * Released under the MIT license.
 * http://jquery.org/license
 *
 * Date: Mon Aug 13 13:41:02 2012 -0500
 */
(function(jQuery,undefined){var stepHooks="backgroundColor borderBottomColor borderLeftColor borderRightColor borderTopColor color columnRuleColor outlineColor textDecorationColor textEmphasisColor".split(" "),rplusequals=/^([\-+])=\s*(\d+\.?\d*)/,stringParsers=[{re:/rgba?\(\s*(\d{1,3})\s*,\s*(\d{1,3})\s*,\s*(\d{1,3})\s*(?:,\s*(\d+(?:\.\d+)?)\s*)?\)/,parse:function(execResult){return[execResult[1],execResult[2],execResult[3],execResult[4]];}},{re:/rgba?\(\s*(\d+(?:\.\d+)?)\%\s*,\s*(\d+(?:\.\d+)?)\%\s*,\s*(\d+(?:\.\d+)?)\%\s*(?:,\s*(\d+(?:\.\d+)?)\s*)?\)/,parse:function(execResult){return[execResult[1]*2.55,execResult[2]*2.55,execResult[3]*2.55,execResult[4]];}},{re:/#([a-f0-9]{2})([a-f0-9]{2})([a-f0-9]{2})/,parse:function(execResult){return[parseInt(execResult[1],16),parseInt(execResult[2],16),parseInt(execResult[3],16)];}},{re:/#([a-f0-9])([a-f0-9])([a-f0-9])/,parse:function(execResult){return[parseInt(execResult[1]+execResult[1],16),parseInt(execResult[2]+execResult[2],16),parseInt(execResult[3]+execResult[3],16)];}},{re:/hsla?\(\s*(\d+(?:\.\d+)?)\s*,\s*(\d+(?:\.\d+)?)\%\s*,\s*(\d+(?:\.\d+)?)\%\s*(?:,\s*(\d+(?:\.\d+)?)\s*)?\)/,space:"hsla",parse:function(execResult){return[execResult[1],execResult[2]/100,execResult[3]/100,execResult[4]];}}],color=jQuery.Color=function(color,green,blue,alpha){return new jQuery.Color.fn.parse(color,green,blue,alpha);},spaces={rgba:{props:{red:{idx:0,type:"byte"},green:{idx:1,type:"byte"},blue:{idx:2,type:"byte"}}},hsla:{props:{hue:{idx:0,type:"degrees"},saturation:{idx:1,type:"percent"},lightness:{idx:2,type:"percent"}}}},propTypes={"byte":{floor:true,max:255},percent:{max:1},degrees:{mod:360,floor:true}},support=color.support={},supportElem=jQuery("<p>")[0],colors,each=jQuery.each;supportElem.style.cssText="background-color:rgba(1,1,1,.5)";support.rgba=supportElem.style.backgroundColor.indexOf("rgba")>-1;each(spaces,function(spaceName,space){space.cache="_"+spaceName;space.props.alpha={idx:3,type:"percent",def:1};});function clamp(value,prop,allowEmpty){var type=propTypes[prop.type]||{};if(value==null){return(allowEmpty||!prop.def)?null:prop.def;}value=type.floor?~~value:parseFloat(value);if(isNaN(value)){return prop.def;}if(type.mod){return(value+type.mod)%type.mod;}return 0>value?0:type.max<value?type.max:value;}function stringParse(string){var inst=color(),rgba=inst._rgba=[];string=string.toLowerCase();each(stringParsers,function(i,parser){var parsed,match=parser.re.exec(string),values=match&&parser.parse(match),spaceName=parser.space||"rgba";if(values){parsed=inst[spaceName](values);inst[spaces[spaceName].cache]=parsed[spaces[spaceName].cache];rgba=inst._rgba=parsed._rgba;return false;}});if(rgba.length){if(rgba.join()==="0,0,0,0"){jQuery.extend(rgba,colors.transparent);}return inst;}return colors[string];}color.fn=jQuery.extend(color.prototype,{parse:function(red,green,blue,alpha){if(red===undefined){this._rgba=[null,null,null,null];return this;}if(red.jquery||red.nodeType){red=jQuery(red).css(green);green=undefined;}var inst=this,type=jQuery.type(red),rgba=this._rgba=[],source;if(green!==undefined){red=[red,green,blue,alpha];type="array";}if(type==="string"){return this.parse(stringParse(red)||colors._default);}if(type==="array"){each(spaces.rgba.props,function(key,prop){rgba[prop.idx]=clamp(red[prop.idx],prop);});return this;}if(type==="object"){if(red instanceof color){each(spaces,function(spaceName,space){if(red[space.cache]){inst[space.cache]=red[space.cache].slice();}});}else{each(spaces,function(spaceName,space){var cache=space.cache;each(space.props,function(key,prop){if(!inst[cache]&&space.to){if(key==="alpha"||red[key]==null){return;}inst[cache]=space.to(inst._rgba);}inst[cache][prop.idx]=clamp(red[key],prop,true);});if(inst[cache]&&$.inArray(null,inst[cache].slice(0,3))<0){inst[cache][3]=1;if(space.from){inst._rgba=space.from(inst[cache]);}}});}return this;}},is:function(compare){var is=color(compare),same=true,inst=this;each(spaces,function(_,space){var localCache,isCache=is[space.cache];if(isCache){localCache=inst[space.cache]||space.to&&space.to(inst._rgba)||[];each(space.props,function(_,prop){if(isCache[prop.idx]!=null){same=(isCache[prop.idx]===localCache[prop.idx]);return same;}});}return same;});return same;},_space:function(){var used=[],inst=this;each(spaces,function(spaceName,space){if(inst[space.cache]){used.push(spaceName);}});return used.pop();},transition:function(other,distance){var end=color(other),spaceName=end._space(),space=spaces[spaceName],startColor=this.alpha()===0?color("transparent"):this,start=startColor[space.cache]||space.to(startColor._rgba),result=start.slice();end=end[space.cache];each(space.props,function(key,prop){var index=prop.idx,startValue=start[index],endValue=end[index],type=propTypes[prop.type]||{};if(endValue===null){return;}if(startValue===null){result[index]=endValue;}else{if(type.mod){if(endValue-startValue>type.mod/2){startValue+=type.mod;}else{if(startValue-endValue>type.mod/2){startValue-=type.mod;}}}result[index]=clamp((endValue-startValue)*distance+startValue,prop);}});return this[spaceName](result);},blend:function(opaque){if(this._rgba[3]===1){return this;}var rgb=this._rgba.slice(),a=rgb.pop(),blend=color(opaque)._rgba;return color(jQuery.map(rgb,function(v,i){return(1-a)*blend[i]+a*v;}));},toRgbaString:function(){var prefix="rgba(",rgba=jQuery.map(this._rgba,function(v,i){return v==null?(i>2?1:0):v;});if(rgba[3]===1){rgba.pop();prefix="rgb(";}return prefix+rgba.join()+")";},toHslaString:function(){var prefix="hsla(",hsla=jQuery.map(this.hsla(),function(v,i){if(v==null){v=i>2?1:0;}if(i&&i<3){v=Math.round(v*100)+"%";}return v;});if(hsla[3]===1){hsla.pop();prefix="hsl(";}return prefix+hsla.join()+")";},toHexString:function(includeAlpha){var rgba=this._rgba.slice(),alpha=rgba.pop();if(includeAlpha){rgba.push(~~(alpha*255));}return"#"+jQuery.map(rgba,function(v,i){v=(v||0).toString(16);return v.length===1?"0"+v:v;}).join("");},toString:function(){return this._rgba[3]===0?"transparent":this.toRgbaString();}});color.fn.parse.prototype=color.fn;function hue2rgb(p,q,h){h=(h+1)%1;if(h*6<1){return p+(q-p)*h*6;}if(h*2<1){return q;}if(h*3<2){return p+(q-p)*((2/3)-h)*6;}return p;}spaces.hsla.to=function(rgba){if(rgba[0]==null||rgba[1]==null||rgba[2]==null){return[null,null,null,rgba[3]];}var r=rgba[0]/255,g=rgba[1]/255,b=rgba[2]/255,a=rgba[3],max=Math.max(r,g,b),min=Math.min(r,g,b),diff=max-min,add=max+min,l=add*0.5,h,s;if(min===max){h=0;}else{if(r===max){h=(60*(g-b)/diff)+360;}else{if(g===max){h=(60*(b-r)/diff)+120;}else{h=(60*(r-g)/diff)+240;}}}if(l===0||l===1){s=l;}else{if(l<=0.5){s=diff/add;}else{s=diff/(2-add);}}return[Math.round(h)%360,s,l,a==null?1:a];};spaces.hsla.from=function(hsla){if(hsla[0]==null||hsla[1]==null||hsla[2]==null){return[null,null,null,hsla[3]];}var h=hsla[0]/360,s=hsla[1],l=hsla[2],a=hsla[3],q=l<=0.5?l*(1+s):l+s-l*s,p=2*l-q,r,g,b;return[Math.round(hue2rgb(p,q,h+(1/3))*255),Math.round(hue2rgb(p,q,h)*255),Math.round(hue2rgb(p,q,h-(1/3))*255),a];};each(spaces,function(spaceName,space){var props=space.props,cache=space.cache,to=space.to,from=space.from;color.fn[spaceName]=function(value){if(to&&!this[cache]){this[cache]=to(this._rgba);}if(value===undefined){return this[cache].slice();}var ret,type=jQuery.type(value),arr=(type==="array"||type==="object")?value:arguments,local=this[cache].slice();each(props,function(key,prop){var val=arr[type==="object"?key:prop.idx];if(val==null){val=local[prop.idx];}local[prop.idx]=clamp(val,prop);});if(from){ret=color(from(local));ret[cache]=local;return ret;}else{return color(local);}};each(props,function(key,prop){if(color.fn[key]){return;}color.fn[key]=function(value){var vtype=jQuery.type(value),fn=(key==="alpha"?(this._hsla?"hsla":"rgba"):spaceName),local=this[fn](),cur=local[prop.idx],match;if(vtype==="undefined"){return cur;}if(vtype==="function"){value=value.call(this,cur);vtype=jQuery.type(value);}if(value==null&&prop.empty){return this;}if(vtype==="string"){match=rplusequals.exec(value);if(match){value=cur+parseFloat(match[2])*(match[1]==="+"?1:-1);}}local[prop.idx]=value;return this[fn](local);};});});each(stepHooks,function(i,hook){jQuery.cssHooks[hook]={set:function(elem,value){var parsed,curElem,backgroundColor="";if(jQuery.type(value)!=="string"||(parsed=stringParse(value))){value=color(parsed||value);if(!support.rgba&&value._rgba[3]!==1){curElem=hook==="backgroundColor"?elem.parentNode:elem;while((backgroundColor===""||backgroundColor==="transparent")&&curElem&&curElem.style){try{backgroundColor=jQuery.css(curElem,"backgroundColor");curElem=curElem.parentNode;}catch(e){}}value=value.blend(backgroundColor&&backgroundColor!=="transparent"?backgroundColor:"_default");}value=value.toRgbaString();}try{elem.style[hook]=value;}catch(value){}}};jQuery.fx.step[hook]=function(fx){if(!fx.colorInit){fx.start=color(fx.elem,hook);fx.end=color(fx.end);fx.colorInit=true;}jQuery.cssHooks[hook].set(fx.elem,fx.start.transition(fx.end,fx.pos));};});jQuery.cssHooks.borderColor={expand:function(value){var expanded={};each(["Top","Right","Bottom","Left"],function(i,part){expanded["border"+part+"Color"]=value;});return expanded;}};colors=jQuery.Color.names={aqua:"#00ffff",black:"#000000",blue:"#0000ff",fuchsia:"#ff00ff",gray:"#808080",green:"#008000",lime:"#00ff00",maroon:"#800000",navy:"#000080",olive:"#808000",purple:"#800080",red:"#ff0000",silver:"#c0c0c0",teal:"#008080",white:"#ffffff",yellow:"#ffff00",transparent:[null,null,null,0],_default:"#ffffff"};})(jquery);(function(){var classAnimationActions=["add","remove","toggle"],shorthandStyles={border:1,borderBottom:1,borderColor:1,borderLeft:1,borderRight:1,borderTop:1,borderWidth:1,margin:1,padding:1};$.each(["borderLeftStyle","borderRightStyle","borderBottomStyle","borderTopStyle"],function(_,prop){$.fx.step[prop]=function(fx){if(fx.end!=="none"&&!fx.setAttr||fx.pos===1&&!fx.setAttr){jquery.style(fx.elem,prop,fx.end);fx.setAttr=true;}};});function getElementStyles(){var style=this.ownerDocument.defaultView?this.ownerDocument.defaultView.getComputedStyle(this,null):this.currentStyle,newStyle={},key,camelCase,len;if(style&&style.length&&style[0]&&style[style[0]]){len=style.length;while(len--){key=style[len];if(typeof style[key]==="string"){newStyle[$.camelCase(key)]=style[key];}}}else{for(key in style){if(typeof style[key]==="string"){newStyle[key]=style[key];}}}return newStyle;}function styleDifference(oldStyle,newStyle){var diff={},name,value;for(name in newStyle){value=newStyle[name];if(oldStyle[name]!==value){if(!shorthandStyles[name]){if($.fx.step[name]||!isNaN(parseFloat(value))){diff[name]=value;}}}}return diff;}$.effects.animateClass=function(value,duration,easing,callback){var o=$.speed(duration,easing,callback);return this.queue(function(){var animated=$(this),baseClass=animated.attr("class")||"",applyClassChange,allAnimations=o.children?animated.find("*").andSelf():animated;allAnimations=allAnimations.map(function(){var el=$(this);return{el:el,start:getElementStyles.call(this)};});applyClassChange=function(){$.each(classAnimationActions,function(i,action){if(value[action]){animated[action+"Class"](value[action]);}});};applyClassChange();allAnimations=allAnimations.map(function(){this.end=getElementStyles.call(this.el[0]);this.diff=styleDifference(this.start,this.end);return this;});animated.attr("class",baseClass);allAnimations=allAnimations.map(function(){var styleInfo=this,dfd=$.Deferred(),opts=jquery.extend({},o,{queue:false,complete:function(){dfd.resolve(styleInfo);}});this.el.animate(this.diff,opts);return dfd.promise();});$.when.apply($,allAnimations.get()).done(function(){applyClassChange();$.each(arguments,function(){var el=this.el;$.each(this.diff,function(key){el.css(key,"");});});o.complete.call(animated[0]);});});};$.fn.extend({_addClass:$.fn.addClass,addClass:function(classNames,speed,easing,callback){return speed?$.effects.animateClass.call(this,{add:classNames},speed,easing,callback):this._addClass(classNames);},_removeClass:$.fn.removeClass,removeClass:function(classNames,speed,easing,callback){return speed?$.effects.animateClass.call(this,{remove:classNames},speed,easing,callback):this._removeClass(classNames);},_toggleClass:$.fn.toggleClass,toggleClass:function(classNames,force,speed,easing,callback){if(typeof force==="boolean"||force===undefined){if(!speed){return this._toggleClass(classNames,force);}else{return $.effects.animateClass.call(this,(force?{add:classNames}:{remove:classNames}),speed,easing,callback);}}else{return $.effects.animateClass.call(this,{toggle:classNames},force,speed,easing);}},switchClass:function(remove,add,speed,easing,callback){return $.effects.animateClass.call(this,{add:add,remove:remove},speed,easing,callback);}});})();(function(){$.extend($.effects,{version:"1.9.0",save:function(element,set){for(var i=0;i<set.length;i++){if(set[i]!==null){element.data(dataSpace+set[i],element[0].style[set[i]]);}}},restore:function(element,set){var val,i;for(i=0;i<set.length;i++){if(set[i]!==null){val=element.data(dataSpace+set[i]);if(val===undefined){val="";}element.css(set[i],val);}}},setMode:function(el,mode){if(mode==="toggle"){mode=el.is(":hidden")?"show":"hide";}return mode;},getBaseline:function(origin,original){var y,x;switch(origin[0]){case"top":y=0;break;case"middle":y=0.5;break;case"bottom":y=1;break;default:y=origin[0]/original.height;}switch(origin[1]){case"left":x=0;break;case"center":x=0.5;break;case"right":x=1;break;default:x=origin[1]/original.width;}return{x:x,y:y};},createWrapper:function(element){if(element.parent().is(".ui-effects-wrapper")){return element.parent();}var props={width:element.outerWidth(true),height:element.outerHeight(true),"float":element.css("float")},wrapper=$("<div></div>").addClass("ui-effects-wrapper").css({fontSize:"100%",background:"transparent",border:"none",margin:0,padding:0}),size={width:element.width(),height:element.height()},active=document.activeElement;try{active.id;}catch(e){active=document.body;}element.wrap(wrapper);if(element[0]===active||$.contains(element[0],active)){$(active).focus();}wrapper=element.parent();if(element.css("position")==="static"){wrapper.css({position:"relative"});element.css({position:"relative"});}else{$.extend(props,{position:element.css("position"),zIndex:element.css("z-index")});$.each(["top","left","bottom","right"],function(i,pos){props[pos]=element.css(pos);if(isNaN(parseInt(props[pos],10))){props[pos]="auto";}});element.css({position:"relative",top:0,left:0,right:"auto",bottom:"auto"});}element.css(size);return wrapper.css(props).show();},removeWrapper:function(element){var active=document.activeElement;if(element.parent().is(".ui-effects-wrapper")){element.parent().replaceWith(element);if(element[0]===active||$.contains(element[0],active)){$(active).focus();}}return element;},setTransition:function(element,list,factor,value){value=value||{};$.each(list,function(i,x){var unit=element.cssUnit(x);if(unit[0]>0){value[x]=unit[0]*factor+unit[1];}});return value;}});function _normalizeArguments(effect,options,speed,callback){if($.isPlainObject(effect)){options=effect;effect=effect.effect;}effect={effect:effect};if(options===undefined){options={};}if($.isFunction(options)){callback=options;speed=null;options={};}if(typeof options==="number"||$.fx.speeds[options]){callback=speed;speed=options;options={};}if($.isFunction(speed)){callback=speed;speed=null;}if(options){$.extend(effect,options);}speed=speed||options.duration;effect.duration=$.fx.off?0:typeof speed==="number"?speed:speed in $.fx.speeds?$.fx.speeds[speed]:$.fx.speeds._default;effect.complete=callback||options.complete;return effect;}function standardSpeed(speed){if(!speed||typeof speed==="number"||$.fx.speeds[speed]){return true;}if(typeof speed==="string"&&!$.effects.effect[speed]){if(backCompat&&$.effects[speed]){return false;}return true;}return false;}$.fn.extend({effect:function(effect,options,speed,callback){var args=_normalizeArguments.apply(this,arguments),mode=args.mode,queue=args.queue,effectMethod=$.effects.effect[args.effect],oldEffectMethod=!effectMethod&&backCompat&&$.effects[args.effect];if($.fx.off||!(effectMethod||oldEffectMethod)){if(mode){return this[mode](args.duration,args.complete);}else{return this.each(function(){if(args.complete){args.complete.call(this);}});}}function run(next){var elem=$(this),complete=args.complete,mode=args.mode;function done(){if($.isFunction(complete)){complete.call(elem[0]);}if($.isFunction(next)){next();}}if(elem.is(":hidden")?mode==="hide":mode==="show"){done();}else{effectMethod.call(elem[0],args,done);}}if(effectMethod){return queue===false?this.each(run):this.queue(queue||"fx",run);}else{return oldEffectMethod.call(this,{options:args,duration:args.duration,callback:args.complete,mode:args.mode});}},_show:$.fn.show,show:function(speed){if(standardSpeed(speed)){return this._show.apply(this,arguments);}else{var args=_normalizeArguments.apply(this,arguments);args.mode="show";return this.effect.call(this,args);}},_hide:$.fn.hide,hide:function(speed){if(standardSpeed(speed)){return this._hide.apply(this,arguments);}else{var args=_normalizeArguments.apply(this,arguments);args.mode="hide";return this.effect.call(this,args);}},__toggle:$.fn.toggle,toggle:function(speed){if(standardSpeed(speed)||typeof speed==="boolean"||$.isFunction(speed)){return this.__toggle.apply(this,arguments);}else{var args=_normalizeArguments.apply(this,arguments);args.mode="toggle";return this.effect.call(this,args);}},cssUnit:function(key){var style=this.css(key),val=[];$.each(["em","px","%","pt"],function(i,unit){if(style.indexOf(unit)>0){val=[parseFloat(style),unit];}});return val;}});})();(function(){var baseEasings={};$.each(["Quad","Cubic","Quart","Quint","Expo"],function(i,name){baseEasings[name]=function(p){return Math.pow(p,i+2);};});$.extend(baseEasings,{Sine:function(p){return 1-Math.cos(p*Math.PI/2);},Circ:function(p){return 1-Math.sqrt(1-p*p);},Elastic:function(p){return p===0||p===1?p:-Math.pow(2,8*(p-1))*Math.sin(((p-1)*80-7.5)*Math.PI/15);},Back:function(p){return p*p*(3*p-2);},Bounce:function(p){var pow2,bounce=4;while(p<((pow2=Math.pow(2,--bounce))-1)/11){}return 1/Math.pow(4,3-bounce)-7.5625*Math.pow((pow2*3-2)/22-p,2);}});$.each(baseEasings,function(name,easeIn){$.easing["easeIn"+name]=easeIn;$.easing["easeOut"+name]=function(p){return 1-easeIn(1-p);};$.easing["easeInOut"+name]=function(p){return p<0.5?easeIn(p*2)/2:1-easeIn(p*-2+2)/2;};});})();})(jquery));(function($,undefined){var uid=0,hideProps={},showProps={};hideProps.height=hideProps.paddingTop=hideProps.paddingBottom=hideProps.borderTopWidth=hideProps.borderBottomWidth="hide";showProps.height=showProps.paddingTop=showProps.paddingBottom=showProps.borderTopWidth=showProps.borderBottomWidth="show";$.widget("ui.accordion",{version:"1.9.0",options:{active:0,animate:{},collapsible:false,event:"click",header:"> li > :first-child,> :not(li):even",heightStyle:"auto",icons:{activeHeader:"ui-icon-triangle-1-s",header:"ui-icon-triangle-1-e"},activate:null,beforeActivate:null},_create:function(){var accordionId=this.accordionId="ui-accordion-"+(this.element.attr("id")||++uid),options=this.options;this.prevShow=this.prevHide=$();this.element.addClass("ui-accordion ui-widget ui-helper-reset");this.headers=this.element.find(options.header).addClass("ui-accordion-header ui-helper-reset ui-state-default ui-corner-all");this._hoverable(this.headers);this._focusable(this.headers);this.headers.next().addClass("ui-accordion-content ui-helper-reset ui-widget-content ui-corner-bottom").hide();if(!options.collapsible&&options.active===false){options.active=0;}if(options.active<0){options.active+=this.headers.length;}this.active=this._findActive(options.active).addClass("ui-accordion-header-active ui-state-active").toggleClass("ui-corner-all ui-corner-top");this.active.next().addClass("ui-accordion-content-active").show();this._createIcons();this.originalHeight=this.element[0].style.height;this.refresh();this.element.attr("role","tablist");this.headers.attr("role","tab").each(function(i){var header=$(this),headerId=header.attr("id"),panel=header.next(),panelId=panel.attr("id");if(!headerId){headerId=accordionId+"-header-"+i;header.attr("id",headerId);}if(!panelId){panelId=accordionId+"-panel-"+i;panel.attr("id",panelId);}header.attr("aria-controls",panelId);panel.attr("aria-labelledby",headerId);}).next().attr("role","tabpanel");this.headers.not(this.active).attr({"aria-selected":"false",tabIndex:-1}).next().attr({"aria-expanded":"false","aria-hidden":"true"}).hide();if(!this.active.length){this.headers.eq(0).attr("tabIndex",0);}else{this.active.attr({"aria-selected":"true",tabIndex:0}).next().attr({"aria-expanded":"true","aria-hidden":"false"});}this._on(this.headers,{keydown:"_keydown"});this._on(this.headers.next(),{keydown:"_panelKeyDown"});this._setupEvents(options.event);},_getCreateEventData:function(){return{header:this.active,content:!this.active.length?$():this.active.next()};},_createIcons:function(){var icons=this.options.icons;if(icons){$("<span>").addClass("ui-accordion-header-icon ui-icon "+icons.header).prependTo(this.headers);this.active.children(".ui-accordion-header-icon").removeClass(icons.header).addClass(icons.activeHeader);this.headers.addClass("ui-accordion-icons");}},_destroyIcons:function(){this.headers.removeClass("ui-accordion-icons").children(".ui-accordion-header-icon").remove();},_destroy:function(){var contents;this.element.removeClass("ui-accordion ui-widget ui-helper-reset").removeAttr("role");this.headers.removeClass("ui-accordion-header ui-accordion-header-active ui-helper-reset ui-state-default ui-corner-all ui-state-active ui-state-disabled ui-corner-top").removeAttr("role").removeAttr("aria-selected").removeAttr("aria-controls").removeAttr("tabIndex").each(function(){if(/^ui-accordion/.test(this.id)){this.removeAttribute("id");}});this._destroyIcons();contents=this.headers.next().css("display","").removeAttr("role").removeAttr("aria-expanded").removeAttr("aria-hidden").removeAttr("aria-labelledby").removeClass("ui-helper-reset ui-widget-content ui-corner-bottom ui-accordion-content ui-accordion-content-active ui-state-disabled").each(function(){if(/^ui-accordion/.test(this.id)){this.removeAttribute("id");}});if(this.options.heightStyle!=="content"){this.element.css("height",this.originalHeight);contents.css("height","");}},_setOption:function(key,value){if(key==="active"){this._activate(value);return;}if(key==="event"){if(this.options.event){this._off(this.headers,this.options.event);}this._setupEvents(value);}this._super(key,value);if(key==="collapsible"&&!value&&this.options.active===false){this._activate(0);}if(key==="icons"){this._destroyIcons();if(value){this._createIcons();}}if(key==="disabled"){this.headers.add(this.headers.next()).toggleClass("ui-state-disabled",!!value);}},_keydown:function(event){if(event.altKey||event.ctrlKey){return;}var keyCode=$.ui.keyCode,length=this.headers.length,currentIndex=this.headers.index(event.target),toFocus=false;switch(event.keyCode){case keyCode.RIGHT:case keyCode.DOWN:toFocus=this.headers[(currentIndex+1)%length];break;case keyCode.LEFT:case keyCode.UP:toFocus=this.headers[(currentIndex-1+length)%length];break;case keyCode.SPACE:case keyCode.ENTER:this._eventHandler(event);break;case keyCode.HOME:toFocus=this.headers[0];break;case keyCode.END:toFocus=this.headers[length-1];break;}if(toFocus){$(event.target).attr("tabIndex",-1);$(toFocus).attr("tabIndex",0);toFocus.focus();event.preventDefault();}},_panelKeyDown:function(event){if(event.keyCode===$.ui.keyCode.UP&&event.ctrlKey){$(event.currentTarget).prev().focus();}},refresh:function(){var maxHeight,overflow,heightStyle=this.options.heightStyle,parent=this.element.parent();this.element.css("height",this.originalHeight);if(heightStyle==="fill"){if(!$.support.minHeight){overflow=parent.css("overflow");parent.css("overflow","hidden");}maxHeight=parent.height();this.element.siblings(":visible").each(function(){var elem=$(this),position=elem.css("position");if(position==="absolute"||position==="fixed"){return;}maxHeight-=elem.outerHeight(true);});if(overflow){parent.css("overflow",overflow);}this.headers.each(function(){maxHeight-=$(this).outerHeight(true);});this.headers.next().each(function(){$(this).height(Math.max(0,maxHeight-$(this).innerHeight()+$(this).height()));}).css("overflow","auto");}else{if(heightStyle==="auto"){maxHeight=0;this.headers.next().each(function(){maxHeight=Math.max(maxHeight,$(this).height("").height());}).height(maxHeight);}}if(heightStyle!=="content"){this.element.height(this.element.height());}},_activate:function(index){var active=this._findActive(index)[0];if(active===this.active[0]){return;}active=active||this.active[0];this._eventHandler({target:active,currentTarget:active,preventDefault:$.noop});},_findActive:function(selector){return typeof selector==="number"?this.headers.eq(selector):$();},_setupEvents:function(event){var events={};if(!event){return;}$.each(event.split(" "),function(index,eventName){events[eventName]="_eventHandler";});this._on(this.headers,events);},_eventHandler:function(event){var options=this.options,active=this.active,clicked=$(event.currentTarget),clickedIsActive=clicked[0]===active[0],collapsing=clickedIsActive&&options.collapsible,toShow=collapsing?$():clicked.next(),toHide=active.next(),eventData={oldHeader:active,oldPanel:toHide,newHeader:collapsing?$():clicked,newPanel:toShow};event.preventDefault();if((clickedIsActive&&!options.collapsible)||(this._trigger("beforeActivate",event,eventData)===false)){return;}options.active=collapsing?false:this.headers.index(clicked);this.active=clickedIsActive?$():clicked;this._toggle(eventData);active.removeClass("ui-accordion-header-active ui-state-active");if(options.icons){active.children(".ui-accordion-header-icon").removeClass(options.icons.activeHeader).addClass(options.icons.header);}if(!clickedIsActive){clicked.removeClass("ui-corner-all").addClass("ui-accordion-header-active ui-state-active ui-corner-top");if(options.icons){clicked.children(".ui-accordion-header-icon").removeClass(options.icons.header).addClass(options.icons.activeHeader);}clicked.next().addClass("ui-accordion-content-active");}},_toggle:function(data){var toShow=data.newPanel,toHide=this.prevShow.length?this.prevShow:data.oldPanel;this.prevShow.add(this.prevHide).stop(true,true);this.prevShow=toShow;this.prevHide=toHide;if(this.options.animate){this._animate(toShow,toHide,data);}else{toHide.hide();toShow.show();this._toggleComplete(data);}toHide.attr({"aria-expanded":"false","aria-hidden":"true"});toHide.prev().attr("aria-selected","false");if(toShow.length&&toHide.length){toHide.prev().attr("tabIndex",-1);}else{if(toShow.length){this.headers.filter(function(){return $(this).attr("tabIndex")===0;}).attr("tabIndex",-1);}}toShow.attr({"aria-expanded":"true","aria-hidden":"false"}).prev().attr({"aria-selected":"true",tabIndex:0});},_animate:function(toShow,toHide,data){var total,easing,duration,that=this,adjust=0,down=toShow.length&&(!toHide.length||(toShow.index()<toHide.index())),animate=this.options.animate||{},options=down&&animate.down||animate,complete=function(){that._toggleComplete(data);};if(typeof options==="number"){duration=options;}if(typeof options==="string"){easing=options;}easing=easing||options.easing||animate.easing;duration=duration||options.duration||animate.duration;if(!toHide.length){return toShow.animate(showProps,duration,easing,complete);}if(!toShow.length){return toHide.animate(hideProps,duration,easing,complete);}total=toShow.show().outerHeight();toHide.animate(hideProps,{duration:duration,easing:easing,step:function(now,fx){fx.now=Math.round(now);}});toShow.hide().animate(showProps,{duration:duration,easing:easing,complete:complete,step:function(now,fx){fx.now=Math.round(now);if(fx.prop!=="height"){adjust+=fx.now;}else{if(that.options.heightStyle!=="content"){fx.now=Math.round(total-toHide.outerHeight()-adjust);adjust=0;}}}});},_toggleComplete:function(data){var toHide=data.oldPanel;toHide.removeClass("ui-accordion-content-active").prev().removeClass("ui-corner-top").addClass("ui-corner-all");if(toHide.length){toHide.parent()[0].className=toHide.parent()[0].className;}this._trigger("activate",null,data);}});if($.uiBackCompat!==false){(function($,prototype){$.extend(prototype.options,{navigation:false,navigationFilter:function(){return this.href.toLowerCase()===location.href.toLowerCase();}});var _create=prototype._create;prototype._create=function(){if(this.options.navigation){var that=this,headers=this.element.find(this.options.header),content=headers.next(),current=headers.add(content).find("a").filter(this.options.navigationFilter)[0];if(current){headers.add(content).each(function(index){if($.contains(this,current)){that.options.active=Math.floor(index/2);return false;}});}}_create.call(this);};}(jquery,jquery.ui.accordion.prototype));(function($,prototype){$.extend(prototype.options,{heightStyle:null,autoHeight:true,clearStyle:false,fillSpace:false});var _create=prototype._create,_setOption=prototype._setOption;$.extend(prototype,{_create:function(){this.options.heightStyle=this.options.heightStyle||this._mergeHeightStyle();_create.call(this);},_setOption:function(key,value){if(key==="autoHeight"||key==="clearStyle"||key==="fillSpace"){this.options.heightStyle=this._mergeHeightStyle();}_setOption.apply(this,arguments);},_mergeHeightStyle:function(){var options=this.options;if(options.fillSpace){return"fill";}if(options.clearStyle){return"content";}if(options.autoHeight){return"auto";}}});}(jquery,jquery.ui.accordion.prototype));(function($,prototype){$.extend(prototype.options.icons,{activeHeader:null,headerSelected:"ui-icon-triangle-1-s"});var _createIcons=prototype._createIcons;prototype._createIcons=function(){if(this.options.icons){this.options.icons.activeHeader=this.options.icons.activeHeader||this.options.icons.headerSelected;}_createIcons.call(this);};}(jquery,jquery.ui.accordion.prototype));(function($,prototype){prototype.activate=prototype._activate;var _findActive=prototype._findActive;prototype._findActive=function(index){if(index===-1){index=false;}if(index&&typeof index!=="number"){index=this.headers.index(this.headers.filter(index));if(index===-1){index=false;}}return _findActive.call(this,index);};}(jquery,jquery.ui.accordion.prototype));jquery.ui.accordion.prototype.resize=jquery.ui.accordion.prototype.refresh;(function($,prototype){$.extend(prototype.options,{change:null,changestart:null});var _trigger=prototype._trigger;prototype._trigger=function(type,event,data){var ret=_trigger.apply(this,arguments);if(!ret){return false;}if(type==="beforeActivate"){ret=_trigger.call(this,"changestart",event,{oldHeader:data.oldHeader,oldContent:data.oldPanel,newHeader:data.newHeader,newContent:data.newPanel});}else{if(type==="activate"){ret=_trigger.call(this,"change",event,{oldHeader:data.oldHeader,oldContent:data.oldPanel,newHeader:data.newHeader,newContent:data.newPanel});}}return ret;};}(jquery,jquery.ui.accordion.prototype));(function($,prototype){$.extend(prototype.options,{animate:null,animated:"slide"});var _create=prototype._create;prototype._create=function(){var options=this.options;if(options.animate===null){if(!options.animated){options.animate=false;}else{if(options.animated==="slide"){options.animate=300;}else{if(options.animated==="bounceslide"){options.animate={duration:200,down:{easing:"easeOutBounce",duration:1000}};}else{options.animate=options.animated;}}}}_create.call(this);};}(jquery,jquery.ui.accordion.prototype));}})(jquery);(function($,undefined){var requestIndex=0;$.widget("ui.autocomplete",{version:"1.9.0",defaultElement:"<input>",options:{appendTo:"body",autoFocus:false,delay:300,minLength:1,position:{my:"left top",at:"left bottom",collision:"none"},source:null,change:null,close:null,focus:null,open:null,response:null,search:null,select:null},pending:0,_create:function(){var suppressKeyPress,suppressKeyPressRepeat,suppressInput;this.isMultiLine=this._isMultiLine();this.valueMethod=this.element[this.element.is("input,textarea")?"val":"text"];this.isNewMenu=true;this.element.addClass("ui-autocomplete-input").attr("autocomplete","off");this._on({keydown:function(event){if(this.element.prop("readOnly")){suppressKeyPress=true;suppressInput=true;suppressKeyPressRepeat=true;return;}suppressKeyPress=false;suppressInput=false;suppressKeyPressRepeat=false;var keyCode=$.ui.keyCode;switch(event.keyCode){case keyCode.PAGE_UP:suppressKeyPress=true;this._move("previousPage",event);break;case keyCode.PAGE_DOWN:suppressKeyPress=true;this._move("nextPage",event);break;case keyCode.UP:suppressKeyPress=true;this._keyEvent("previous",event);break;case keyCode.DOWN:suppressKeyPress=true;this._keyEvent("next",event);break;case keyCode.ENTER:case keyCode.NUMPAD_ENTER:if(this.menu.active){suppressKeyPress=true;event.preventDefault();this.menu.select(event);}break;case keyCode.TAB:if(this.menu.active){this.menu.select(event);}break;case keyCode.ESCAPE:if(this.menu.element.is(":visible")){this._value(this.term);this.close(event);event.preventDefault();}break;default:suppressKeyPressRepeat=true;this._searchTimeout(event);break;}},keypress:function(event){if(suppressKeyPress){suppressKeyPress=false;event.preventDefault();return;}if(suppressKeyPressRepeat){return;}var keyCode=$.ui.keyCode;switch(event.keyCode){case keyCode.PAGE_UP:this._move("previousPage",event);break;case keyCode.PAGE_DOWN:this._move("nextPage",event);break;case keyCode.UP:this._keyEvent("previous",event);break;case keyCode.DOWN:this._keyEvent("next",event);break;}},input:function(event){if(suppressInput){suppressInput=false;event.preventDefault();return;}this._searchTimeout(event);},focus:function(){this.selectedItem=null;this.previous=this._value();},blur:function(event){if(this.cancelBlur){delete this.cancelBlur;return;}clearTimeout(this.searching);this.close(event);this._change(event);}});this._initSource();this.menu=$("<ul>").addClass("ui-autocomplete").appendTo(this.document.find(this.options.appendTo||"body")[0]).menu({input:$(),role:null}).zIndex(this.element.zIndex()+1).hide().data("menu");this._on(this.menu.element,{mousedown:function(event){event.preventDefault();this.cancelBlur=true;this._delay(function(){delete this.cancelBlur;});var menuElement=this.menu.element[0];if(!$(event.target).closest(".ui-menu-item").length){this._delay(function(){var that=this;this.document.one("mousedown",function(event){if(event.target!==that.element[0]&&event.target!==menuElement&&!$.contains(menuElement,event.target)){that.close();}});});}},menufocus:function(event,ui){if(this.isNewMenu){this.isNewMenu=false;if(event.originalEvent&&/^mouse/.test(event.originalEvent.type)){this.menu.blur();this.document.one("mousemove",function(){$(event.target).trigger(event.originalEvent);});return;}}var item=ui.item.data("ui-autocomplete-item")||ui.item.data("item.autocomplete");if(false!==this._trigger("focus",event,{item:item})){if(event.originalEvent&&/^key/.test(event.originalEvent.type)){this._value(item.value);}}else{this.liveRegion.text(item.value);}},menuselect:function(event,ui){var item=ui.item.data("ui-autocomplete-item")||ui.item.data("item.autocomplete"),previous=this.previous;if(this.element[0]!==this.document[0].activeElement){this.element.focus();this.previous=previous;this._delay(function(){this.previous=previous;this.selectedItem=item;});}if(false!==this._trigger("select",event,{item:item})){this._value(item.value);}this.term=this._value();this.close(event);this.selectedItem=item;}});this.liveRegion=$("<span>",{role:"status","aria-live":"polite"}).addClass("ui-helper-hidden-accessible").insertAfter(this.element);if($.fn.bgiframe){this.menu.element.bgiframe();}this._on(this.window,{beforeunload:function(){this.element.removeAttr("autocomplete");}});},_destroy:function(){clearTimeout(this.searching);this.element.removeClass("ui-autocomplete-input").removeAttr("autocomplete");this.menu.element.remove();this.liveRegion.remove();},_setOption:function(key,value){this._super(key,value);if(key==="source"){this._initSource();}if(key==="appendTo"){this.menu.element.appendTo(this.document.find(value||"body")[0]);}if(key==="disabled"&&value&&this.xhr){this.xhr.abort();}},_isMultiLine:function(){if(this.element.is("textarea")){return true;}if(this.element.is("input")){return false;}return this.element.prop("isContentEditable");},_initSource:function(){var array,url,that=this;if($.isArray(this.options.source)){array=this.options.source;this.source=function(request,response){response($.ui.autocomplete.filter(array,request.term));};}else{if(typeof this.options.source==="string"){url=this.options.source;this.source=function(request,response){if(that.xhr){that.xhr.abort();}that.xhr=$.ajax({url:url,data:request,dataType:"json",success:function(data,status){response(data);},error:function(){response([]);}});};}else{this.source=this.options.source;}}},_searchTimeout:function(event){clearTimeout(this.searching);this.searching=this._delay(function(){if(this.term!==this._value()){this.selectedItem=null;this.search(null,event);}},this.options.delay);},search:function(value,event){value=value!=null?value:this._value();this.term=this._value();if(value.length<this.options.minLength){return this.close(event);}if(this._trigger("search",event)===false){return;}return this._search(value);},_search:function(value){this.pending++;this.element.addClass("ui-autocomplete-loading");this.cancelSearch=false;this.source({term:value},this._response());},_response:function(){var that=this,index=++requestIndex;return function(content){if(index===requestIndex){that.__response(content);}that.pending--;if(!that.pending){that.element.removeClass("ui-autocomplete-loading");}};},__response:function(content){if(content){content=this._normalize(content);}this._trigger("response",null,{content:content});if(!this.options.disabled&&content&&content.length&&!this.cancelSearch){this._suggest(content);this._trigger("open");}else{this._close();}},close:function(event){this.cancelSearch=true;this._close(event);},_close:function(event){if(this.menu.element.is(":visible")){this.menu.element.hide();this.menu.blur();this.isNewMenu=true;this._trigger("close",event);}},_change:function(event){if(this.previous!==this._value()){this._trigger("change",event,{item:this.selectedItem});}},_normalize:function(items){if(items.length&&items[0].label&&items[0].value){return items;}return $.map(items,function(item){if(typeof item==="string"){return{label:item,value:item};}return $.extend({label:item.label||item.value,value:item.value||item.label},item);});},_suggest:function(items){var ul=this.menu.element.empty().zIndex(this.element.zIndex()+1);this._renderMenu(ul,items);this.menu.refresh();ul.show();this._resizeMenu();ul.position($.extend({of:this.element},this.options.position));if(this.options.autoFocus){this.menu.next();}},_resizeMenu:function(){var ul=this.menu.element;ul.outerWidth(Math.max(ul.width("").outerWidth()+1,this.element.outerWidth()));},_renderMenu:function(ul,items){var that=this;$.each(items,function(index,item){that._renderItemData(ul,item);});},_renderItemData:function(ul,item){return this._renderItem(ul,item).data("ui-autocomplete-item",item);},_renderItem:function(ul,item){return $("<li>").append($("<a>").text(item.label)).appendTo(ul);},_move:function(direction,event){if(!this.menu.element.is(":visible")){this.search(null,event);return;}if(this.menu.isFirstItem()&&/^previous/.test(direction)||this.menu.isLastItem()&&/^next/.test(direction)){this._value(this.term);this.menu.blur();return;}this.menu[direction](event);},widget:function(){return this.menu.element;},_value:function(value){return this.valueMethod.apply(this.element,arguments);},_keyEvent:function(keyEvent,event){if(!this.isMultiLine||this.menu.element.is(":visible")){this._move(keyEvent,event);event.preventDefault();}}});$.extend($.ui.autocomplete,{escapeRegex:function(value){return value.replace(/[\-\[\]{}()*+?.,\\\^$|#\s]/g,"\\$&");},filter:function(array,term){var matcher=new RegExp($.ui.autocomplete.escapeRegex(term),"i");return $.grep(array,function(value){return matcher.test(value.label||value.value||value);});}});$.widget("ui.autocomplete",$.ui.autocomplete,{options:{messages:{noResults:"No search results.",results:function(amount){return amount+(amount>1?" results are":" result is")+" available, use up and down arrow keys to navigate.";}}},__response:function(content){var message;this._superApply(arguments);if(this.options.disabled||this.cancelSearch){return;}if(content&&content.length){message=this.options.messages.results(content.length);}else{message=this.options.messages.noResults;}this.liveRegion.text(message);}});}(jquery));(function($,undefined){var lastActive,startXPos,startYPos,clickDragged,baseClasses="ui-button ui-widget ui-state-default ui-corner-all",stateClasses="ui-state-hover ui-state-active ",typeClasses="ui-button-icons-only ui-button-icon-only ui-button-text-icons ui-button-text-icon-primary ui-button-text-icon-secondary ui-button-text-only",formResetHandler=function(){var buttons=$(this).find(":ui-button");setTimeout(function(){buttons.button("refresh");},1);},radioGroup=function(radio){var name=radio.name,form=radio.form,radios=$([]);if(name){if(form){radios=$(form).find("[name='"+name+"']");}else{radios=$("[name='"+name+"']",radio.ownerDocument).filter(function(){return !this.form;});}}return radios;};$.widget("ui.button",{version:"1.9.0",defaultElement:"<button>",options:{disabled:null,text:true,label:null,icons:{primary:null,secondary:null}},_create:function(){this.element.closest("form").unbind("reset"+this.eventNamespace).bind("reset"+this.eventNamespace,formResetHandler);if(typeof this.options.disabled!=="boolean"){this.options.disabled=!!this.element.prop("disabled");}else{this.element.prop("disabled",this.options.disabled);}this._determineButtonType();this.hasTitle=!!this.buttonElement.attr("title");var that=this,options=this.options,toggleButton=this.type==="checkbox"||this.type==="radio",hoverClass="ui-state-hover"+(!toggleButton?" ui-state-active":""),focusClass="ui-state-focus";if(options.label===null){options.label=(this.type==="input"?this.buttonElement.val():this.buttonElement.html());}this.buttonElement.addClass(baseClasses).attr("role","button").bind("mouseenter"+this.eventNamespace,function(){if(options.disabled){return;}$(this).addClass("ui-state-hover");if(this===lastActive){$(this).addClass("ui-state-active");}}).bind("mouseleave"+this.eventNamespace,function(){if(options.disabled){return;}$(this).removeClass(hoverClass);}).bind("click"+this.eventNamespace,function(event){if(options.disabled){event.preventDefault();event.stopImmediatePropagation();}});this.element.bind("focus"+this.eventNamespace,function(){that.buttonElement.addClass(focusClass);}).bind("blur"+this.eventNamespace,function(){that.buttonElement.removeClass(focusClass);});if(toggleButton){this.element.bind("change"+this.eventNamespace,function(){if(clickDragged){return;}that.refresh();});this.buttonElement.bind("mousedown"+this.eventNamespace,function(event){if(options.disabled){return;}clickDragged=false;startXPos=event.pageX;startYPos=event.pageY;}).bind("mouseup"+this.eventNamespace,function(event){if(options.disabled){return;}if(startXPos!==event.pageX||startYPos!==event.pageY){clickDragged=true;}});}if(this.type==="checkbox"){this.buttonElement.bind("click"+this.eventNamespace,function(){if(options.disabled||clickDragged){return false;}$(this).toggleClass("ui-state-active");that.buttonElement.attr("aria-pressed",that.element[0].checked);});}else{if(this.type==="radio"){this.buttonElement.bind("click"+this.eventNamespace,function(){if(options.disabled||clickDragged){return false;}$(this).addClass("ui-state-active");that.buttonElement.attr("aria-pressed","true");var radio=that.element[0];radioGroup(radio).not(radio).map(function(){return $(this).button("widget")[0];}).removeClass("ui-state-active").attr("aria-pressed","false");});}else{this.buttonElement.bind("mousedown"+this.eventNamespace,function(){if(options.disabled){return false;}$(this).addClass("ui-state-active");lastActive=this;that.document.one("mouseup",function(){lastActive=null;});}).bind("mouseup"+this.eventNamespace,function(){if(options.disabled){return false;}$(this).removeClass("ui-state-active");}).bind("keydown"+this.eventNamespace,function(event){if(options.disabled){return false;}if(event.keyCode===$.ui.keyCode.SPACE||event.keyCode===$.ui.keyCode.ENTER){$(this).addClass("ui-state-active");}}).bind("keyup"+this.eventNamespace,function(){$(this).removeClass("ui-state-active");});if(this.buttonElement.is("a")){this.buttonElement.keyup(function(event){if(event.keyCode===$.ui.keyCode.SPACE){$(this).click();}});}}}this._setOption("disabled",options.disabled);this._resetButton();},_determineButtonType:function(){var ancestor,labelSelector,checked;if(this.element.is("[type=checkbox]")){this.type="checkbox";}else{if(this.element.is("[type=radio]")){this.type="radio";}else{if(this.element.is("input")){this.type="input";}else{this.type="button";}}}if(this.type==="checkbox"||this.type==="radio"){ancestor=this.element.parents().last();labelSelector="label[for='"+this.element.attr("id")+"']";this.buttonElement=ancestor.find(labelSelector);if(!this.buttonElement.length){ancestor=ancestor.length?ancestor.siblings():this.element.siblings();this.buttonElement=ancestor.filter(labelSelector);if(!this.buttonElement.length){this.buttonElement=ancestor.find(labelSelector);}}this.element.addClass("ui-helper-hidden-accessible");checked=this.element.is(":checked");if(checked){this.buttonElement.addClass("ui-state-active");}this.buttonElement.prop("aria-pressed",checked);}else{this.buttonElement=this.element;}},widget:function(){return this.buttonElement;},_destroy:function(){this.element.removeClass("ui-helper-hidden-accessible");this.buttonElement.removeClass(baseClasses+" "+stateClasses+" "+typeClasses).removeAttr("role").removeAttr("aria-pressed").html(this.buttonElement.find(".ui-button-text").html());if(!this.hasTitle){this.buttonElement.removeAttr("title");}},_setOption:function(key,value){this._super(key,value);if(key==="disabled"){if(value){this.element.prop("disabled",true);}else{this.element.prop("disabled",false);}return;}this._resetButton();},refresh:function(){var isDisabled=this.element.is(":disabled");if(isDisabled!==this.options.disabled){this._setOption("disabled",isDisabled);}if(this.type==="radio"){radioGroup(this.element[0]).each(function(){if($(this).is(":checked")){$(this).button("widget").addClass("ui-state-active").attr("aria-pressed","true");}else{$(this).button("widget").removeClass("ui-state-active").attr("aria-pressed","false");}});}else{if(this.type==="checkbox"){if(this.element.is(":checked")){this.buttonElement.addClass("ui-state-active").attr("aria-pressed","true");}else{this.buttonElement.removeClass("ui-state-active").attr("aria-pressed","false");}}}},_resetButton:function(){if(this.type==="input"){if(this.options.label){this.element.val(this.options.label);}return;}var buttonElement=this.buttonElement.removeClass(typeClasses),buttonText=$("<span></span>",this.document[0]).addClass("ui-button-text").html(this.options.label).appendTo(buttonElement.empty()).text(),icons=this.options.icons,multipleIcons=icons.primary&&icons.secondary,buttonClasses=[];if(icons.primary||icons.secondary){if(this.options.text){buttonClasses.push("ui-button-text-icon"+(multipleIcons?"s":(icons.primary?"-primary":"-secondary")));}if(icons.primary){buttonElement.prepend("<span class='ui-button-icon-primary ui-icon "+icons.primary+"'></span>");}if(icons.secondary){buttonElement.append("<span class='ui-button-icon-secondary ui-icon "+icons.secondary+"'></span>");}if(!this.options.text){buttonClasses.push(multipleIcons?"ui-button-icons-only":"ui-button-icon-only");if(!this.hasTitle){buttonElement.attr("title",$.trim(buttonText));}}}else{buttonClasses.push("ui-button-text-only");}buttonElement.addClass(buttonClasses.join(" "));}});$.widget("ui.buttonset",{version:"1.9.0",options:{items:"button, input[type=button], input[type=submit], input[type=reset], input[type=checkbox], input[type=radio], a, :data(button)"},_create:function(){this.element.addClass("ui-buttonset");},_init:function(){this.refresh();},_setOption:function(key,value){if(key==="disabled"){this.buttons.button("option",key,value);}this._super(key,value);},refresh:function(){var rtl=this.element.css("direction")==="rtl";this.buttons=this.element.find(this.options.items).filter(":ui-button").button("refresh").end().not(":ui-button").button().end().map(function(){return $(this).button("widget")[0];}).removeClass("ui-corner-all ui-corner-left ui-corner-right").filter(":first").addClass(rtl?"ui-corner-right":"ui-corner-left").end().filter(":last").addClass(rtl?"ui-corner-left":"ui-corner-right").end().end();},_destroy:function(){this.element.removeClass("ui-buttonset");this.buttons.map(function(){return $(this).button("widget")[0];}).removeClass("ui-corner-left ui-corner-right").end().button("destroy");}});}(jquery));(function($,undefined){$.extend($.ui,{datepicker:{version:"1.9.0"}});var PROP_NAME="datepicker";var dpuuid=new Date().getTime();var instActive;function Datepicker(){this.debug=false;this._curInst=null;this._keyEvent=false;this._disabledInputs=[];this._datepickerShowing=false;this._inDialog=false;this._mainDivId="ui-datepicker-div";this._inlineClass="ui-datepicker-inline";this._appendClass="ui-datepicker-append";this._triggerClass="ui-datepicker-trigger";this._dialogClass="ui-datepicker-dialog";this._disableClass="ui-datepicker-disabled";this._unselectableClass="ui-datepicker-unselectable";this._currentClass="ui-datepicker-current-day";this._dayOverClass="ui-datepicker-days-cell-over";this.regional=[];this.regional[""]={closeText:"Done",prevText:"Prev",nextText:"Next",currentText:"Today",monthNames:["January","February","March","April","May","June","July","August","September","October","November","December"],monthNamesShort:["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"],dayNames:["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"],dayNamesShort:["Sun","Mon","Tue","Wed","Thu","Fri","Sat"],dayNamesMin:["Su","Mo","Tu","We","Th","Fr","Sa"],weekHeader:"Wk",dateFormat:"mm/dd/yy",firstDay:0,isRTL:false,showMonthAfterYear:false,yearSuffix:""};this._defaults={showOn:"focus",showAnim:"fadeIn",showOptions:{},defaultDate:null,appendText:"",buttonText:"...",buttonImage:"",buttonImageOnly:false,hideIfNoPrevNext:false,navigationAsDateFormat:false,gotoCurrent:false,changeMonth:false,changeYear:false,yearRange:"c-10:c+10",showOtherMonths:false,selectOtherMonths:false,showWeek:false,calculateWeek:this.iso8601Week,shortYearCutoff:"+10",minDate:null,maxDate:null,duration:"fast",beforeShowDay:null,beforeShow:null,onSelect:null,onChangeMonthYear:null,onClose:null,numberOfMonths:1,showCurrentAtPos:0,stepMonths:1,stepBigMonths:12,altField:"",altFormat:"",constrainInput:true,showButtonPanel:false,autoSize:false,disabled:false};$.extend(this._defaults,this.regional[""]);this.dpDiv=bindHover($('<div id="'+this._mainDivId+'" class="ui-datepicker ui-widget ui-widget-content ui-helper-clearfix ui-corner-all"></div>'));}$.extend(Datepicker.prototype,{markerClassName:"hasDatepicker",maxRows:4,log:function(){if(this.debug){console.log.apply("",arguments);}},_widgetDatepicker:function(){return this.dpDiv;},setDefaults:function(settings){extendRemove(this._defaults,settings||{});return this;},_attachDatepicker:function(target,settings){var inlineSettings=null;for(var attrName in this._defaults){var attrValue=target.getAttribute("date:"+attrName);if(attrValue){inlineSettings=inlineSettings||{};try{inlineSettings[attrName]=eval(attrValue);}catch(err){inlineSettings[attrName]=attrValue;}}}var nodeName=target.nodeName.toLowerCase();var inline=(nodeName=="div"||nodeName=="span");if(!target.id){this.uuid+=1;target.id="dp"+this.uuid;}var inst=this._newInst($(target),inline);inst.settings=$.extend({},settings||{},inlineSettings||{});if(nodeName=="input"){this._connectDatepicker(target,inst);}else{if(inline){this._inlineDatepicker(target,inst);}}},_newInst:function(target,inline){var id=target[0].id.replace(/([^A-Za-z0-9_-])/g,"\\\\$1");return{id:id,input:target,selectedDay:0,selectedMonth:0,selectedYear:0,drawMonth:0,drawYear:0,inline:inline,dpDiv:(!inline?this.dpDiv:bindHover($('<div class="'+this._inlineClass+' ui-datepicker ui-widget ui-widget-content ui-helper-clearfix ui-corner-all"></div>')))};},_connectDatepicker:function(target,inst){var input=$(target);inst.append=$([]);inst.trigger=$([]);if(input.hasClass(this.markerClassName)){return;}this._attachments(input,inst);input.addClass(this.markerClassName).keydown(this._doKeyDown).keypress(this._doKeyPress).keyup(this._doKeyUp).bind("setData.datepicker",function(event,key,value){inst.settings[key]=value;}).bind("getData.datepicker",function(event,key){return this._get(inst,key);});this._autoSize(inst);$.data(target,PROP_NAME,inst);if(inst.settings.disabled){this._disableDatepicker(target);}},_attachments:function(input,inst){var appendText=this._get(inst,"appendText");var isRTL=this._get(inst,"isRTL");if(inst.append){inst.append.remove();}if(appendText){inst.append=$('<span class="'+this._appendClass+'">'+appendText+"</span>");input[isRTL?"before":"after"](inst.append);}input.unbind("focus",this._showDatepicker);if(inst.trigger){inst.trigger.remove();}var showOn=this._get(inst,"showOn");if(showOn=="focus"||showOn=="both"){input.focus(this._showDatepicker);}if(showOn=="button"||showOn=="both"){var buttonText=this._get(inst,"buttonText");var buttonImage=this._get(inst,"buttonImage");inst.trigger=$(this._get(inst,"buttonImageOnly")?$("<img/>").addClass(this._triggerClass).attr({src:buttonImage,alt:buttonText,title:buttonText}):$('<button type="button"></button>').addClass(this._triggerClass).html(buttonImage==""?buttonText:$("<img/>").attr({src:buttonImage,alt:buttonText,title:buttonText})));input[isRTL?"before":"after"](inst.trigger);inst.trigger.click(function(){if($.datepicker._datepickerShowing&&$.datepicker._lastInput==input[0]){$.datepicker._hideDatepicker();}else{if($.datepicker._datepickerShowing&&$.datepicker._lastInput!=input[0]){$.datepicker._hideDatepicker();$.datepicker._showDatepicker(input[0]);}else{$.datepicker._showDatepicker(input[0]);}}return false;});}},_autoSize:function(inst){if(this._get(inst,"autoSize")&&!inst.inline){var date=new Date(2009,12-1,20);var dateFormat=this._get(inst,"dateFormat");if(dateFormat.match(/[DM]/)){var findMax=function(names){var max=0;var maxI=0;for(var i=0;i<names.length;i++){if(names[i].length>max){max=names[i].length;maxI=i;}}return maxI;};date.setMonth(findMax(this._get(inst,(dateFormat.match(/MM/)?"monthNames":"monthNamesShort"))));date.setDate(findMax(this._get(inst,(dateFormat.match(/DD/)?"dayNames":"dayNamesShort")))+20-date.getDay());}inst.input.attr("size",this._formatDate(inst,date).length);}},_inlineDatepicker:function(target,inst){var divSpan=$(target);if(divSpan.hasClass(this.markerClassName)){return;}divSpan.addClass(this.markerClassName).append(inst.dpDiv).bind("setData.datepicker",function(event,key,value){inst.settings[key]=value;}).bind("getData.datepicker",function(event,key){return this._get(inst,key);});$.data(target,PROP_NAME,inst);this._setDate(inst,this._getDefaultDate(inst),true);this._updateDatepicker(inst);this._updateAlternate(inst);if(inst.settings.disabled){this._disableDatepicker(target);}inst.dpDiv.css("display","block");},_dialogDatepicker:function(input,date,onSelect,settings,pos){var inst=this._dialogInst;if(!inst){this.uuid+=1;var id="dp"+this.uuid;this._dialogInput=$('<input type="text" id="'+id+'" style="position: absolute; top: -100px; width: 0px;"/>');this._dialogInput.keydown(this._doKeyDown);$("body").append(this._dialogInput);inst=this._dialogInst=this._newInst(this._dialogInput,false);inst.settings={};$.data(this._dialogInput[0],PROP_NAME,inst);}extendRemove(inst.settings,settings||{});date=(date&&date.constructor==Date?this._formatDate(inst,date):date);this._dialogInput.val(date);this._pos=(pos?(pos.length?pos:[pos.pageX,pos.pageY]):null);if(!this._pos){var browserWidth=document.documentElement.clientWidth;var browserHeight=document.documentElement.clientHeight;var scrollX=document.documentElement.scrollLeft||document.body.scrollLeft;var scrollY=document.documentElement.scrollTop||document.body.scrollTop;this._pos=[(browserWidth/2)-100+scrollX,(browserHeight/2)-150+scrollY];}this._dialogInput.css("left",(this._pos[0]+20)+"px").css("top",this._pos[1]+"px");inst.settings.onSelect=onSelect;this._inDialog=true;this.dpDiv.addClass(this._dialogClass);this._showDatepicker(this._dialogInput[0]);if($.blockUI){$.blockUI(this.dpDiv);}$.data(this._dialogInput[0],PROP_NAME,inst);return this;},_destroyDatepicker:function(target){var $target=$(target);var inst=$.data(target,PROP_NAME);if(!$target.hasClass(this.markerClassName)){return;}var nodeName=target.nodeName.toLowerCase();$.removeData(target,PROP_NAME);if(nodeName=="input"){inst.append.remove();inst.trigger.remove();$target.removeClass(this.markerClassName).unbind("focus",this._showDatepicker).unbind("keydown",this._doKeyDown).unbind("keypress",this._doKeyPress).unbind("keyup",this._doKeyUp);}else{if(nodeName=="div"||nodeName=="span"){$target.removeClass(this.markerClassName).empty();}}},_enableDatepicker:function(target){var $target=$(target);var inst=$.data(target,PROP_NAME);if(!$target.hasClass(this.markerClassName)){return;}var nodeName=target.nodeName.toLowerCase();if(nodeName=="input"){target.disabled=false;inst.trigger.filter("button").each(function(){this.disabled=false;}).end().filter("img").css({opacity:"1.0",cursor:""});}else{if(nodeName=="div"||nodeName=="span"){var inline=$target.children("."+this._inlineClass);inline.children().removeClass("ui-state-disabled");inline.find("select.ui-datepicker-month, select.ui-datepicker-year").prop("disabled",false);}}this._disabledInputs=$.map(this._disabledInputs,function(value){return(value==target?null:value);});},_disableDatepicker:function(target){var $target=$(target);var inst=$.data(target,PROP_NAME);if(!$target.hasClass(this.markerClassName)){return;}var nodeName=target.nodeName.toLowerCase();if(nodeName=="input"){target.disabled=true;inst.trigger.filter("button").each(function(){this.disabled=true;}).end().filter("img").css({opacity:"0.5",cursor:"default"});}else{if(nodeName=="div"||nodeName=="span"){var inline=$target.children("."+this._inlineClass);inline.children().addClass("ui-state-disabled");inline.find("select.ui-datepicker-month, select.ui-datepicker-year").prop("disabled",true);}}this._disabledInputs=$.map(this._disabledInputs,function(value){return(value==target?null:value);});this._disabledInputs[this._disabledInputs.length]=target;},_isDisabledDatepicker:function(target){if(!target){return false;}for(var i=0;i<this._disabledInputs.length;i++){if(this._disabledInputs[i]==target){return true;}}return false;},_getInst:function(target){try{return $.data(target,PROP_NAME);}catch(err){throw"Missing instance data for this datepicker";}},_optionDatepicker:function(target,name,value){var inst=this._getInst(target);if(arguments.length==2&&typeof name=="string"){return(name=="defaults"?$.extend({},$.datepicker._defaults):(inst?(name=="all"?$.extend({},inst.settings):this._get(inst,name)):null));}var settings=name||{};if(typeof name=="string"){settings={};settings[name]=value;}if(inst){if(this._curInst==inst){this._hideDatepicker();}var date=this._getDateDatepicker(target,true);var minDate=this._getMinMaxDate(inst,"min");var maxDate=this._getMinMaxDate(inst,"max");extendRemove(inst.settings,settings);if(minDate!==null&&settings.dateFormat!==undefined&&settings.minDate===undefined){inst.settings.minDate=this._formatDate(inst,minDate);}if(maxDate!==null&&settings.dateFormat!==undefined&&settings.maxDate===undefined){inst.settings.maxDate=this._formatDate(inst,maxDate);}this._attachments($(target),inst);this._autoSize(inst);this._setDate(inst,date);this._updateAlternate(inst);this._updateDatepicker(inst);}},_changeDatepicker:function(target,name,value){this._optionDatepicker(target,name,value);},_refreshDatepicker:function(target){var inst=this._getInst(target);if(inst){this._updateDatepicker(inst);}},_setDateDatepicker:function(target,date){var inst=this._getInst(target);if(inst){this._setDate(inst,date);this._updateDatepicker(inst);this._updateAlternate(inst);}},_getDateDatepicker:function(target,noDefault){var inst=this._getInst(target);if(inst&&!inst.inline){this._setDateFromField(inst,noDefault);}return(inst?this._getDate(inst):null);},_doKeyDown:function(event){var inst=$.datepicker._getInst(event.target);var handled=true;var isRTL=inst.dpDiv.is(".ui-datepicker-rtl");inst._keyEvent=true;if($.datepicker._datepickerShowing){switch(event.keyCode){case 9:$.datepicker._hideDatepicker();handled=false;break;case 13:var sel=$("td."+$.datepicker._dayOverClass+":not(."+$.datepicker._currentClass+")",inst.dpDiv);if(sel[0]){$.datepicker._selectDay(event.target,inst.selectedMonth,inst.selectedYear,sel[0]);}var onSelect=$.datepicker._get(inst,"onSelect");if(onSelect){var dateStr=$.datepicker._formatDate(inst);onSelect.apply((inst.input?inst.input[0]:null),[dateStr,inst]);}else{$.datepicker._hideDatepicker();}return false;break;case 27:$.datepicker._hideDatepicker();break;case 33:$.datepicker._adjustDate(event.target,(event.ctrlKey?-$.datepicker._get(inst,"stepBigMonths"):-$.datepicker._get(inst,"stepMonths")),"M");break;case 34:$.datepicker._adjustDate(event.target,(event.ctrlKey?+$.datepicker._get(inst,"stepBigMonths"):+$.datepicker._get(inst,"stepMonths")),"M");break;case 35:if(event.ctrlKey||event.metaKey){$.datepicker._clearDate(event.target);}handled=event.ctrlKey||event.metaKey;break;case 36:if(event.ctrlKey||event.metaKey){$.datepicker._gotoToday(event.target);}handled=event.ctrlKey||event.metaKey;break;case 37:if(event.ctrlKey||event.metaKey){$.datepicker._adjustDate(event.target,(isRTL?+1:-1),"D");}handled=event.ctrlKey||event.metaKey;if(event.originalEvent.altKey){$.datepicker._adjustDate(event.target,(event.ctrlKey?-$.datepicker._get(inst,"stepBigMonths"):-$.datepicker._get(inst,"stepMonths")),"M");}break;case 38:if(event.ctrlKey||event.metaKey){$.datepicker._adjustDate(event.target,-7,"D");}handled=event.ctrlKey||event.metaKey;break;case 39:if(event.ctrlKey||event.metaKey){$.datepicker._adjustDate(event.target,(isRTL?-1:+1),"D");}handled=event.ctrlKey||event.metaKey;if(event.originalEvent.altKey){$.datepicker._adjustDate(event.target,(event.ctrlKey?+$.datepicker._get(inst,"stepBigMonths"):+$.datepicker._get(inst,"stepMonths")),"M");}break;case 40:if(event.ctrlKey||event.metaKey){$.datepicker._adjustDate(event.target,+7,"D");}handled=event.ctrlKey||event.metaKey;break;default:handled=false;}}else{if(event.keyCode==36&&event.ctrlKey){$.datepicker._showDatepicker(this);}else{handled=false;}}if(handled){event.preventDefault();event.stopPropagation();}},_doKeyPress:function(event){var inst=$.datepicker._getInst(event.target);if($.datepicker._get(inst,"constrainInput")){var chars=$.datepicker._possibleChars($.datepicker._get(inst,"dateFormat"));var chr=String.fromCharCode(event.charCode==undefined?event.keyCode:event.charCode);return event.ctrlKey||event.metaKey||(chr<" "||!chars||chars.indexOf(chr)>-1);}},_doKeyUp:function(event){var inst=$.datepicker._getInst(event.target);if(inst.input.val()!=inst.lastVal){try{var date=$.datepicker.parseDate($.datepicker._get(inst,"dateFormat"),(inst.input?inst.input.val():null),$.datepicker._getFormatConfig(inst));if(date){$.datepicker._setDateFromField(inst);$.datepicker._updateAlternate(inst);$.datepicker._updateDatepicker(inst);}}catch(err){$.datepicker.log(err);}}return true;},_showDatepicker:function(input){input=input.target||input;if(input.nodeName.toLowerCase()!="input"){input=$("input",input.parentNode)[0];}if($.datepicker._isDisabledDatepicker(input)||$.datepicker._lastInput==input){return;}var inst=$.datepicker._getInst(input);if($.datepicker._curInst&&$.datepicker._curInst!=inst){$.datepicker._curInst.dpDiv.stop(true,true);if(inst&&$.datepicker._datepickerShowing){$.datepicker._hideDatepicker($.datepicker._curInst.input[0]);}}var beforeShow=$.datepicker._get(inst,"beforeShow");var beforeShowSettings=beforeShow?beforeShow.apply(input,[input,inst]):{};if(beforeShowSettings===false){return;}extendRemove(inst.settings,beforeShowSettings);inst.lastVal=null;$.datepicker._lastInput=input;$.datepicker._setDateFromField(inst);if($.datepicker._inDialog){input.value="";}if(!$.datepicker._pos){$.datepicker._pos=$.datepicker._findPos(input);$.datepicker._pos[1]+=input.offsetHeight;}var isFixed=false;$(input).parents().each(function(){isFixed|=$(this).css("position")=="fixed";return !isFixed;});var offset={left:$.datepicker._pos[0],top:$.datepicker._pos[1]};$.datepicker._pos=null;inst.dpDiv.empty();inst.dpDiv.css({position:"absolute",display:"block",top:"-1000px"});$.datepicker._updateDatepicker(inst);offset=$.datepicker._checkOffset(inst,offset,isFixed);inst.dpDiv.css({position:($.datepicker._inDialog&&$.blockUI?"static":(isFixed?"fixed":"absolute")),display:"none",left:offset.left+"px",top:offset.top+"px"});if(!inst.inline){var showAnim=$.datepicker._get(inst,"showAnim");var duration=$.datepicker._get(inst,"duration");var postProcess=function(){var cover=inst.dpDiv.find("iframe.ui-datepicker-cover");if(!!cover.length){var borders=$.datepicker._getBorders(inst.dpDiv);cover.css({left:-borders[0],top:-borders[1],width:inst.dpDiv.outerWidth(),height:inst.dpDiv.outerHeight()});}};inst.dpDiv.zIndex($(input).zIndex()+1);$.datepicker._datepickerShowing=true;if($.effects&&($.effects.effect[showAnim]||$.effects[showAnim])){inst.dpDiv.show(showAnim,$.datepicker._get(inst,"showOptions"),duration,postProcess);}else{inst.dpDiv[showAnim||"show"]((showAnim?duration:null),postProcess);}if(!showAnim||!duration){postProcess();}if(inst.input.is(":visible")&&!inst.input.is(":disabled")){inst.input.focus();}$.datepicker._curInst=inst;}},_updateDatepicker:function(inst){this.maxRows=4;var borders=$.datepicker._getBorders(inst.dpDiv);instActive=inst;inst.dpDiv.empty().append(this._generateHTML(inst));this._attachHandlers(inst);var cover=inst.dpDiv.find("iframe.ui-datepicker-cover");if(!!cover.length){cover.css({left:-borders[0],top:-borders[1],width:inst.dpDiv.outerWidth(),height:inst.dpDiv.outerHeight()});}inst.dpDiv.find("."+this._dayOverClass+" a").mouseover();var numMonths=this._getNumberOfMonths(inst);var cols=numMonths[1];var width=17;inst.dpDiv.removeClass("ui-datepicker-multi-2 ui-datepicker-multi-3 ui-datepicker-multi-4").width("");if(cols>1){inst.dpDiv.addClass("ui-datepicker-multi-"+cols).css("width",(width*cols)+"em");}inst.dpDiv[(numMonths[0]!=1||numMonths[1]!=1?"add":"remove")+"Class"]("ui-datepicker-multi");inst.dpDiv[(this._get(inst,"isRTL")?"add":"remove")+"Class"]("ui-datepicker-rtl");if(inst==$.datepicker._curInst&&$.datepicker._datepickerShowing&&inst.input&&inst.input.is(":visible")&&!inst.input.is(":disabled")&&inst.input[0]!=document.activeElement){inst.input.focus();}if(inst.yearshtml){var origyearshtml=inst.yearshtml;setTimeout(function(){if(origyearshtml===inst.yearshtml&&inst.yearshtml){inst.dpDiv.find("select.ui-datepicker-year:first").replaceWith(inst.yearshtml);}origyearshtml=inst.yearshtml=null;},0);}},_getBorders:function(elem){var convert=function(value){return{thin:1,medium:2,thick:3}[value]||value;};return[parseFloat(convert(elem.css("border-left-width"))),parseFloat(convert(elem.css("border-top-width")))];},_checkOffset:function(inst,offset,isFixed){var dpWidth=inst.dpDiv.outerWidth();var dpHeight=inst.dpDiv.outerHeight();var inputWidth=inst.input?inst.input.outerWidth():0;var inputHeight=inst.input?inst.input.outerHeight():0;var viewWidth=document.documentElement.clientWidth+(isFixed?0:$(document).scrollLeft());var viewHeight=document.documentElement.clientHeight+(isFixed?0:$(document).scrollTop());offset.left-=(this._get(inst,"isRTL")?(dpWidth-inputWidth):0);offset.left-=(isFixed&&offset.left==inst.input.offset().left)?$(document).scrollLeft():0;offset.top-=(isFixed&&offset.top==(inst.input.offset().top+inputHeight))?$(document).scrollTop():0;offset.left-=Math.min(offset.left,(offset.left+dpWidth>viewWidth&&viewWidth>dpWidth)?Math.abs(offset.left+dpWidth-viewWidth):0);offset.top-=Math.min(offset.top,(offset.top+dpHeight>viewHeight&&viewHeight>dpHeight)?Math.abs(dpHeight+inputHeight):0);return offset;},_findPos:function(obj){var inst=this._getInst(obj);var isRTL=this._get(inst,"isRTL");while(obj&&(obj.type=="hidden"||obj.nodeType!=1||$.expr.filters.hidden(obj))){obj=obj[isRTL?"previousSibling":"nextSibling"];}var position=$(obj).offset();return[position.left,position.top];},_hideDatepicker:function(input){var inst=this._curInst;if(!inst||(input&&inst!=$.data(input,PROP_NAME))){return;}if(this._datepickerShowing){var showAnim=this._get(inst,"showAnim");var duration=this._get(inst,"duration");var postProcess=function(){$.datepicker._tidyDialog(inst);};if($.effects&&($.effects.effect[showAnim]||$.effects[showAnim])){inst.dpDiv.hide(showAnim,$.datepicker._get(inst,"showOptions"),duration,postProcess);}else{inst.dpDiv[(showAnim=="slideDown"?"slideUp":(showAnim=="fadeIn"?"fadeOut":"hide"))]((showAnim?duration:null),postProcess);}if(!showAnim){postProcess();}this._datepickerShowing=false;var onClose=this._get(inst,"onClose");if(onClose){onClose.apply((inst.input?inst.input[0]:null),[(inst.input?inst.input.val():""),inst]);}this._lastInput=null;if(this._inDialog){this._dialogInput.css({position:"absolute",left:"0",top:"-100px"});if($.blockUI){$.unblockUI();$("body").append(this.dpDiv);}}this._inDialog=false;}},_tidyDialog:function(inst){inst.dpDiv.removeClass(this._dialogClass).unbind(".ui-datepicker-calendar");},_checkExternalClick:function(event){if(!$.datepicker._curInst){return;}var $target=$(event.target),inst=$.datepicker._getInst($target[0]);if((($target[0].id!=$.datepicker._mainDivId&&$target.parents("#"+$.datepicker._mainDivId).length==0&&!$target.hasClass($.datepicker.markerClassName)&&!$target.closest("."+$.datepicker._triggerClass).length&&$.datepicker._datepickerShowing&&!($.datepicker._inDialog&&$.blockUI)))||($target.hasClass($.datepicker.markerClassName)&&$.datepicker._curInst!=inst)){$.datepicker._hideDatepicker();}},_adjustDate:function(id,offset,period){var target=$(id);var inst=this._getInst(target[0]);if(this._isDisabledDatepicker(target[0])){return;}this._adjustInstDate(inst,offset+(period=="M"?this._get(inst,"showCurrentAtPos"):0),period);this._updateDatepicker(inst);},_gotoToday:function(id){var target=$(id);var inst=this._getInst(target[0]);if(this._get(inst,"gotoCurrent")&&inst.currentDay){inst.selectedDay=inst.currentDay;inst.drawMonth=inst.selectedMonth=inst.currentMonth;inst.drawYear=inst.selectedYear=inst.currentYear;}else{var date=new Date();inst.selectedDay=date.getDate();inst.drawMonth=inst.selectedMonth=date.getMonth();inst.drawYear=inst.selectedYear=date.getFullYear();}this._notifyChange(inst);this._adjustDate(target);},_selectMonthYear:function(id,select,period){var target=$(id);var inst=this._getInst(target[0]);inst["selected"+(period=="M"?"Month":"Year")]=inst["draw"+(period=="M"?"Month":"Year")]=parseInt(select.options[select.selectedIndex].value,10);this._notifyChange(inst);this._adjustDate(target);},_selectDay:function(id,month,year,td){var target=$(id);if($(td).hasClass(this._unselectableClass)||this._isDisabledDatepicker(target[0])){return;}var inst=this._getInst(target[0]);inst.selectedDay=inst.currentDay=$("a",td).html();inst.selectedMonth=inst.currentMonth=month;inst.selectedYear=inst.currentYear=year;this._selectDate(id,this._formatDate(inst,inst.currentDay,inst.currentMonth,inst.currentYear));},_clearDate:function(id){var target=$(id);var inst=this._getInst(target[0]);this._selectDate(target,"");},_selectDate:function(id,dateStr){var target=$(id);var inst=this._getInst(target[0]);dateStr=(dateStr!=null?dateStr:this._formatDate(inst));if(inst.input){inst.input.val(dateStr);}this._updateAlternate(inst);var onSelect=this._get(inst,"onSelect");if(onSelect){onSelect.apply((inst.input?inst.input[0]:null),[dateStr,inst]);}else{if(inst.input){inst.input.trigger("change");}}if(inst.inline){this._updateDatepicker(inst);}else{this._hideDatepicker();this._lastInput=inst.input[0];if(typeof(inst.input[0])!="object"){inst.input.focus();}this._lastInput=null;}},_updateAlternate:function(inst){var altField=this._get(inst,"altField");if(altField){var altFormat=this._get(inst,"altFormat")||this._get(inst,"dateFormat");var date=this._getDate(inst);var dateStr=this.formatDate(altFormat,date,this._getFormatConfig(inst));$(altField).each(function(){$(this).val(dateStr);});}},noWeekends:function(date){var day=date.getDay();return[(day>0&&day<6),""];},iso8601Week:function(date){var checkDate=new Date(date.getTime());checkDate.setDate(checkDate.getDate()+4-(checkDate.getDay()||7));var time=checkDate.getTime();checkDate.setMonth(0);checkDate.setDate(1);return Math.floor(Math.round((time-checkDate)/86400000)/7)+1;},parseDate:function(format,value,settings){if(format==null||value==null){throw"Invalid arguments";}value=(typeof value=="object"?value.toString():value+"");if(value==""){return null;}var shortYearCutoff=(settings?settings.shortYearCutoff:null)||this._defaults.shortYearCutoff;shortYearCutoff=(typeof shortYearCutoff!="string"?shortYearCutoff:new Date().getFullYear()%100+parseInt(shortYearCutoff,10));var dayNamesShort=(settings?settings.dayNamesShort:null)||this._defaults.dayNamesShort;var dayNames=(settings?settings.dayNames:null)||this._defaults.dayNames;var monthNamesShort=(settings?settings.monthNamesShort:null)||this._defaults.monthNamesShort;var monthNames=(settings?settings.monthNames:null)||this._defaults.monthNames;var year=-1;var month=-1;var day=-1;var doy=-1;var literal=false;var lookAhead=function(match){var matches=(iFormat+1<format.length&&format.charAt(iFormat+1)==match);if(matches){iFormat++;}return matches;};var getNumber=function(match){var isDoubled=lookAhead(match);var size=(match=="@"?14:(match=="!"?20:(match=="y"&&isDoubled?4:(match=="o"?3:2))));var digits=new RegExp("^\\d{1,"+size+"}");var num=value.substring(iValue).match(digits);if(!num){throw"Missing number at position "+iValue;}iValue+=num[0].length;return parseInt(num[0],10);};var getName=function(match,shortNames,longNames){var names=$.map(lookAhead(match)?longNames:shortNames,function(v,k){return[[k,v]];}).sort(function(a,b){return -(a[1].length-b[1].length);});var index=-1;$.each(names,function(i,pair){var name=pair[1];if(value.substr(iValue,name.length).toLowerCase()==name.toLowerCase()){index=pair[0];iValue+=name.length;return false;}});if(index!=-1){return index+1;}else{throw"Unknown name at position "+iValue;}};var checkLiteral=function(){if(value.charAt(iValue)!=format.charAt(iFormat)){throw"Unexpected literal at position "+iValue;}iValue++;};var iValue=0;for(var iFormat=0;iFormat<format.length;iFormat++){if(literal){if(format.charAt(iFormat)=="'"&&!lookAhead("'")){literal=false;}else{checkLiteral();}}else{switch(format.charAt(iFormat)){case"d":day=getNumber("d");break;case"D":getName("D",dayNamesShort,dayNames);break;case"o":doy=getNumber("o");break;case"m":month=getNumber("m");break;case"M":month=getName("M",monthNamesShort,monthNames);break;case"y":year=getNumber("y");break;case"@":var date=new Date(getNumber("@"));year=date.getFullYear();month=date.getMonth()+1;day=date.getDate();break;case"!":var date=new Date((getNumber("!")-this._ticksTo1970)/10000);year=date.getFullYear();month=date.getMonth()+1;day=date.getDate();break;case"'":if(lookAhead("'")){checkLiteral();}else{literal=true;}break;default:checkLiteral();}}}if(iValue<value.length){var extra=value.substr(iValue);if(!/^\s+/.test(extra)){throw"Extra/unparsed characters found in date: "+extra;}}if(year==-1){year=new Date().getFullYear();}else{if(year<100){year+=new Date().getFullYear()-new Date().getFullYear()%100+(year<=shortYearCutoff?0:-100);}}if(doy>-1){month=1;day=doy;do{var dim=this._getDaysInMonth(year,month-1);if(day<=dim){break;}month++;day-=dim;}while(true);}var date=this._daylightSavingAdjust(new Date(year,month-1,day));if(date.getFullYear()!=year||date.getMonth()+1!=month||date.getDate()!=day){throw"Invalid date";}return date;},ATOM:"yy-mm-dd",COOKIE:"D, dd M yy",ISO_8601:"yy-mm-dd",RFC_822:"D, d M y",RFC_850:"DD, dd-M-y",RFC_1036:"D, d M y",RFC_1123:"D, d M yy",RFC_2822:"D, d M yy",RSS:"D, d M y",TICKS:"!",TIMESTAMP:"@",W3C:"yy-mm-dd",_ticksTo1970:(((1970-1)*365+Math.floor(1970/4)-Math.floor(1970/100)+Math.floor(1970/400))*24*60*60*10000000),formatDate:function(format,date,settings){if(!date){return"";}var dayNamesShort=(settings?settings.dayNamesShort:null)||this._defaults.dayNamesShort;var dayNames=(settings?settings.dayNames:null)||this._defaults.dayNames;var monthNamesShort=(settings?settings.monthNamesShort:null)||this._defaults.monthNamesShort;var monthNames=(settings?settings.monthNames:null)||this._defaults.monthNames;var lookAhead=function(match){var matches=(iFormat+1<format.length&&format.charAt(iFormat+1)==match);if(matches){iFormat++;}return matches;};var formatNumber=function(match,value,len){var num=""+value;if(lookAhead(match)){while(num.length<len){num="0"+num;}}return num;};var formatName=function(match,value,shortNames,longNames){return(lookAhead(match)?longNames[value]:shortNames[value]);};var output="";var literal=false;if(date){for(var iFormat=0;iFormat<format.length;iFormat++){if(literal){if(format.charAt(iFormat)=="'"&&!lookAhead("'")){literal=false;}else{output+=format.charAt(iFormat);}}else{switch(format.charAt(iFormat)){case"d":output+=formatNumber("d",date.getDate(),2);break;case"D":output+=formatName("D",date.getDay(),dayNamesShort,dayNames);break;case"o":output+=formatNumber("o",Math.round((new Date(date.getFullYear(),date.getMonth(),date.getDate()).getTime()-new Date(date.getFullYear(),0,0).getTime())/86400000),3);break;case"m":output+=formatNumber("m",date.getMonth()+1,2);break;case"M":output+=formatName("M",date.getMonth(),monthNamesShort,monthNames);break;case"y":output+=(lookAhead("y")?date.getFullYear():(date.getYear()%100<10?"0":"")+date.getYear()%100);break;case"@":output+=date.getTime();break;case"!":output+=date.getTime()*10000+this._ticksTo1970;break;case"'":if(lookAhead("'")){output+="'";}else{literal=true;}break;default:output+=format.charAt(iFormat);}}}}return output;},_possibleChars:function(format){var chars="";var literal=false;var lookAhead=function(match){var matches=(iFormat+1<format.length&&format.charAt(iFormat+1)==match);if(matches){iFormat++;}return matches;};for(var iFormat=0;iFormat<format.length;iFormat++){if(literal){if(format.charAt(iFormat)=="'"&&!lookAhead("'")){literal=false;}else{chars+=format.charAt(iFormat);}}else{switch(format.charAt(iFormat)){case"d":case"m":case"y":case"@":chars+="0123456789";break;case"D":case"M":return null;case"'":if(lookAhead("'")){chars+="'";}else{literal=true;}break;default:chars+=format.charAt(iFormat);}}}return chars;},_get:function(inst,name){return inst.settings[name]!==undefined?inst.settings[name]:this._defaults[name];},_setDateFromField:function(inst,noDefault){if(inst.input.val()==inst.lastVal){return;}var dateFormat=this._get(inst,"dateFormat");var dates=inst.lastVal=inst.input?inst.input.val():null;var date,defaultDate;date=defaultDate=this._getDefaultDate(inst);var settings=this._getFormatConfig(inst);try{date=this.parseDate(dateFormat,dates,settings)||defaultDate;}catch(event){this.log(event);dates=(noDefault?"":dates);}inst.selectedDay=date.getDate();inst.drawMonth=inst.selectedMonth=date.getMonth();inst.drawYear=inst.selectedYear=date.getFullYear();inst.currentDay=(dates?date.getDate():0);inst.currentMonth=(dates?date.getMonth():0);inst.currentYear=(dates?date.getFullYear():0);this._adjustInstDate(inst);},_getDefaultDate:function(inst){return this._restrictMinMax(inst,this._determineDate(inst,this._get(inst,"defaultDate"),new Date()));},_determineDate:function(inst,date,defaultDate){var offsetNumeric=function(offset){var date=new Date();date.setDate(date.getDate()+offset);return date;};var offsetString=function(offset){try{return $.datepicker.parseDate($.datepicker._get(inst,"dateFormat"),offset,$.datepicker._getFormatConfig(inst));}catch(e){}var date=(offset.toLowerCase().match(/^c/)?$.datepicker._getDate(inst):null)||new Date();var year=date.getFullYear();var month=date.getMonth();var day=date.getDate();var pattern=/([+-]?[0-9]+)\s*(d|D|w|W|m|M|y|Y)?/g;var matches=pattern.exec(offset);while(matches){switch(matches[2]||"d"){case"d":case"D":day+=parseInt(matches[1],10);break;case"w":case"W":day+=parseInt(matches[1],10)*7;break;case"m":case"M":month+=parseInt(matches[1],10);day=Math.min(day,$.datepicker._getDaysInMonth(year,month));break;case"y":case"Y":year+=parseInt(matches[1],10);day=Math.min(day,$.datepicker._getDaysInMonth(year,month));break;}matches=pattern.exec(offset);}return new Date(year,month,day);};var newDate=(date==null||date===""?defaultDate:(typeof date=="string"?offsetString(date):(typeof date=="number"?(isNaN(date)?defaultDate:offsetNumeric(date)):new Date(date.getTime()))));newDate=(newDate&&newDate.toString()=="Invalid Date"?defaultDate:newDate);if(newDate){newDate.setHours(0);newDate.setMinutes(0);newDate.setSeconds(0);newDate.setMilliseconds(0);}return this._daylightSavingAdjust(newDate);},_daylightSavingAdjust:function(date){if(!date){return null;}date.setHours(date.getHours()>12?date.getHours()+2:0);return date;},_setDate:function(inst,date,noChange){var clear=!date;var origMonth=inst.selectedMonth;var origYear=inst.selectedYear;var newDate=this._restrictMinMax(inst,this._determineDate(inst,date,new Date()));inst.selectedDay=inst.currentDay=newDate.getDate();inst.drawMonth=inst.selectedMonth=inst.currentMonth=newDate.getMonth();inst.drawYear=inst.selectedYear=inst.currentYear=newDate.getFullYear();if((origMonth!=inst.selectedMonth||origYear!=inst.selectedYear)&&!noChange){this._notifyChange(inst);}this._adjustInstDate(inst);if(inst.input){inst.input.val(clear?"":this._formatDate(inst));}},_getDate:function(inst){var startDate=(!inst.currentYear||(inst.input&&inst.input.val()=="")?null:this._daylightSavingAdjust(new Date(inst.currentYear,inst.currentMonth,inst.currentDay)));return startDate;},_attachHandlers:function(inst){var stepMonths=this._get(inst,"stepMonths");var id="#"+inst.id.replace(/\\\\/g,"\\");inst.dpDiv.find("[data-handler]").map(function(){var handler={prev:function(){window["DP_jQuery_"+dpuuid].datepicker._adjustDate(id,-stepMonths,"M");},next:function(){window["DP_jQuery_"+dpuuid].datepicker._adjustDate(id,+stepMonths,"M");},hide:function(){window["DP_jQuery_"+dpuuid].datepicker._hideDatepicker();},today:function(){window["DP_jQuery_"+dpuuid].datepicker._gotoToday(id);},selectDay:function(){window["DP_jQuery_"+dpuuid].datepicker._selectDay(id,+this.getAttribute("data-month"),+this.getAttribute("data-year"),this);return false;},selectMonth:function(){window["DP_jQuery_"+dpuuid].datepicker._selectMonthYear(id,this,"M");return false;},selectYear:function(){window["DP_jQuery_"+dpuuid].datepicker._selectMonthYear(id,this,"Y");return false;}};$(this).bind(this.getAttribute("data-event"),handler[this.getAttribute("data-handler")]);});},_generateHTML:function(inst){var today=new Date();today=this._daylightSavingAdjust(new Date(today.getFullYear(),today.getMonth(),today.getDate()));var isRTL=this._get(inst,"isRTL");var showButtonPanel=this._get(inst,"showButtonPanel");var hideIfNoPrevNext=this._get(inst,"hideIfNoPrevNext");var navigationAsDateFormat=this._get(inst,"navigationAsDateFormat");var numMonths=this._getNumberOfMonths(inst);var showCurrentAtPos=this._get(inst,"showCurrentAtPos");var stepMonths=this._get(inst,"stepMonths");var isMultiMonth=(numMonths[0]!=1||numMonths[1]!=1);var currentDate=this._daylightSavingAdjust((!inst.currentDay?new Date(9999,9,9):new Date(inst.currentYear,inst.currentMonth,inst.currentDay)));var minDate=this._getMinMaxDate(inst,"min");var maxDate=this._getMinMaxDate(inst,"max");var drawMonth=inst.drawMonth-showCurrentAtPos;var drawYear=inst.drawYear;if(drawMonth<0){drawMonth+=12;drawYear--;}if(maxDate){var maxDraw=this._daylightSavingAdjust(new Date(maxDate.getFullYear(),maxDate.getMonth()-(numMonths[0]*numMonths[1])+1,maxDate.getDate()));maxDraw=(minDate&&maxDraw<minDate?minDate:maxDraw);while(this._daylightSavingAdjust(new Date(drawYear,drawMonth,1))>maxDraw){drawMonth--;if(drawMonth<0){drawMonth=11;drawYear--;}}}inst.drawMonth=drawMonth;inst.drawYear=drawYear;var prevText=this._get(inst,"prevText");prevText=(!navigationAsDateFormat?prevText:this.formatDate(prevText,this._daylightSavingAdjust(new Date(drawYear,drawMonth-stepMonths,1)),this._getFormatConfig(inst)));var prev=(this._canAdjustMonth(inst,-1,drawYear,drawMonth)?'<a class="ui-datepicker-prev ui-corner-all" data-handler="prev" data-event="click" title="'+prevText+'"><span class="ui-icon ui-icon-circle-triangle-'+(isRTL?"e":"w")+'">'+prevText+"</span></a>":(hideIfNoPrevNext?"":'<a class="ui-datepicker-prev ui-corner-all ui-state-disabled" title="'+prevText+'"><span class="ui-icon ui-icon-circle-triangle-'+(isRTL?"e":"w")+'">'+prevText+"</span></a>"));var nextText=this._get(inst,"nextText");nextText=(!navigationAsDateFormat?nextText:this.formatDate(nextText,this._daylightSavingAdjust(new Date(drawYear,drawMonth+stepMonths,1)),this._getFormatConfig(inst)));var next=(this._canAdjustMonth(inst,+1,drawYear,drawMonth)?'<a class="ui-datepicker-next ui-corner-all" data-handler="next" data-event="click" title="'+nextText+'"><span class="ui-icon ui-icon-circle-triangle-'+(isRTL?"w":"e")+'">'+nextText+"</span></a>":(hideIfNoPrevNext?"":'<a class="ui-datepicker-next ui-corner-all ui-state-disabled" title="'+nextText+'"><span class="ui-icon ui-icon-circle-triangle-'+(isRTL?"w":"e")+'">'+nextText+"</span></a>"));var currentText=this._get(inst,"currentText");var gotoDate=(this._get(inst,"gotoCurrent")&&inst.currentDay?currentDate:today);currentText=(!navigationAsDateFormat?currentText:this.formatDate(currentText,gotoDate,this._getFormatConfig(inst)));var controls=(!inst.inline?'<button type="button" class="ui-datepicker-close ui-state-default ui-priority-primary ui-corner-all" data-handler="hide" data-event="click">'+this._get(inst,"closeText")+"</button>":"");var buttonPanel=(showButtonPanel)?'<div class="ui-datepicker-buttonpane ui-widget-content">'+(isRTL?controls:"")+(this._isInRange(inst,gotoDate)?'<button type="button" class="ui-datepicker-current ui-state-default ui-priority-secondary ui-corner-all" data-handler="today" data-event="click">'+currentText+"</button>":"")+(isRTL?"":controls)+"</div>":"";var firstDay=parseInt(this._get(inst,"firstDay"),10);firstDay=(isNaN(firstDay)?0:firstDay);var showWeek=this._get(inst,"showWeek");var dayNames=this._get(inst,"dayNames");var dayNamesShort=this._get(inst,"dayNamesShort");var dayNamesMin=this._get(inst,"dayNamesMin");var monthNames=this._get(inst,"monthNames");var monthNamesShort=this._get(inst,"monthNamesShort");var beforeShowDay=this._get(inst,"beforeShowDay");var showOtherMonths=this._get(inst,"showOtherMonths");var selectOtherMonths=this._get(inst,"selectOtherMonths");var calculateWeek=this._get(inst,"calculateWeek")||this.iso8601Week;var defaultDate=this._getDefaultDate(inst);var html="";for(var row=0;row<numMonths[0];row++){var group="";this.maxRows=4;for(var col=0;col<numMonths[1];col++){var selectedDate=this._daylightSavingAdjust(new Date(drawYear,drawMonth,inst.selectedDay));var cornerClass=" ui-corner-all";var calender="";if(isMultiMonth){calender+='<div class="ui-datepicker-group';if(numMonths[1]>1){switch(col){case 0:calender+=" ui-datepicker-group-first";cornerClass=" ui-corner-"+(isRTL?"right":"left");break;case numMonths[1]-1:calender+=" ui-datepicker-group-last";cornerClass=" ui-corner-"+(isRTL?"left":"right");break;default:calender+=" ui-datepicker-group-middle";cornerClass="";break;}}calender+='">';}calender+='<div class="ui-datepicker-header ui-widget-header ui-helper-clearfix'+cornerClass+'">'+(/all|left/.test(cornerClass)&&row==0?(isRTL?next:prev):"")+(/all|right/.test(cornerClass)&&row==0?(isRTL?prev:next):"")+this._generateMonthYearHeader(inst,drawMonth,drawYear,minDate,maxDate,row>0||col>0,monthNames,monthNamesShort)+'</div><table class="ui-datepicker-calendar"><thead><tr>';var thead=(showWeek?'<th class="ui-datepicker-week-col">'+this._get(inst,"weekHeader")+"</th>":"");for(var dow=0;dow<7;dow++){var day=(dow+firstDay)%7;thead+="<th"+((dow+firstDay+6)%7>=5?' class="ui-datepicker-week-end"':"")+'><span title="'+dayNames[day]+'">'+dayNamesMin[day]+"</span></th>";}calender+=thead+"</tr></thead><tbody>";var daysInMonth=this._getDaysInMonth(drawYear,drawMonth);if(drawYear==inst.selectedYear&&drawMonth==inst.selectedMonth){inst.selectedDay=Math.min(inst.selectedDay,daysInMonth);}var leadDays=(this._getFirstDayOfMonth(drawYear,drawMonth)-firstDay+7)%7;var curRows=Math.ceil((leadDays+daysInMonth)/7);var numRows=(isMultiMonth?this.maxRows>curRows?this.maxRows:curRows:curRows);this.maxRows=numRows;var printDate=this._daylightSavingAdjust(new Date(drawYear,drawMonth,1-leadDays));for(var dRow=0;dRow<numRows;dRow++){calender+="<tr>";var tbody=(!showWeek?"":'<td class="ui-datepicker-week-col">'+this._get(inst,"calculateWeek")(printDate)+"</td>");for(var dow=0;dow<7;dow++){var daySettings=(beforeShowDay?beforeShowDay.apply((inst.input?inst.input[0]:null),[printDate]):[true,""]);var otherMonth=(printDate.getMonth()!=drawMonth);var unselectable=(otherMonth&&!selectOtherMonths)||!daySettings[0]||(minDate&&printDate<minDate)||(maxDate&&printDate>maxDate);tbody+='<td class="'+((dow+firstDay+6)%7>=5?" ui-datepicker-week-end":"")+(otherMonth?" ui-datepicker-other-month":"")+((printDate.getTime()==selectedDate.getTime()&&drawMonth==inst.selectedMonth&&inst._keyEvent)||(defaultDate.getTime()==printDate.getTime()&&defaultDate.getTime()==selectedDate.getTime())?" "+this._dayOverClass:"")+(unselectable?" "+this._unselectableClass+" ui-state-disabled":"")+(otherMonth&&!showOtherMonths?"":" "+daySettings[1]+(printDate.getTime()==currentDate.getTime()?" "+this._currentClass:"")+(printDate.getTime()==today.getTime()?" ui-datepicker-today":""))+'"'+((!otherMonth||showOtherMonths)&&daySettings[2]?' title="'+daySettings[2]+'"':"")+(unselectable?"":' data-handler="selectDay" data-event="click" data-month="'+printDate.getMonth()+'" data-year="'+printDate.getFullYear()+'"')+">"+(otherMonth&&!showOtherMonths?"&#xa0;":(unselectable?'<span class="ui-state-default">'+printDate.getDate()+"</span>":'<a class="ui-state-default'+(printDate.getTime()==today.getTime()?" ui-state-highlight":"")+(printDate.getTime()==currentDate.getTime()?" ui-state-active":"")+(otherMonth?" ui-priority-secondary":"")+'" href="#">'+printDate.getDate()+"</a>"))+"</td>";printDate.setDate(printDate.getDate()+1);printDate=this._daylightSavingAdjust(printDate);}calender+=tbody+"</tr>";}drawMonth++;if(drawMonth>11){drawMonth=0;drawYear++;}calender+="</tbody></table>"+(isMultiMonth?"</div>"+((numMonths[0]>0&&col==numMonths[1]-1)?'<div class="ui-datepicker-row-break"></div>':""):"");group+=calender;}html+=group;}html+=buttonPanel+($.browser.msie&&parseInt($.browser.version,10)<7&&!inst.inline?'<iframe src="javascript:false;" class="ui-datepicker-cover" frameborder="0"></iframe>':"");inst._keyEvent=false;return html;},_generateMonthYearHeader:function(inst,drawMonth,drawYear,minDate,maxDate,secondary,monthNames,monthNamesShort){var changeMonth=this._get(inst,"changeMonth");var changeYear=this._get(inst,"changeYear");var showMonthAfterYear=this._get(inst,"showMonthAfterYear");var html='<div class="ui-datepicker-title">';var monthHtml="";if(secondary||!changeMonth){monthHtml+='<span class="ui-datepicker-month">'+monthNames[drawMonth]+"</span>";}else{var inMinYear=(minDate&&minDate.getFullYear()==drawYear);var inMaxYear=(maxDate&&maxDate.getFullYear()==drawYear);monthHtml+='<select class="ui-datepicker-month" data-handler="selectMonth" data-event="change">';for(var month=0;month<12;month++){if((!inMinYear||month>=minDate.getMonth())&&(!inMaxYear||month<=maxDate.getMonth())){monthHtml+='<option value="'+month+'"'+(month==drawMonth?' selected="selected"':"")+">"+monthNamesShort[month]+"</option>";}}monthHtml+="</select>";}if(!showMonthAfterYear){html+=monthHtml+(secondary||!(changeMonth&&changeYear)?"&#xa0;":"");}if(!inst.yearshtml){inst.yearshtml="";if(secondary||!changeYear){html+='<span class="ui-datepicker-year">'+drawYear+"</span>";}else{var years=this._get(inst,"yearRange").split(":");var thisYear=new Date().getFullYear();var determineYear=function(value){var year=(value.match(/c[+-].*/)?drawYear+parseInt(value.substring(1),10):(value.match(/[+-].*/)?thisYear+parseInt(value,10):parseInt(value,10)));return(isNaN(year)?thisYear:year);};var year=determineYear(years[0]);var endYear=Math.max(year,determineYear(years[1]||""));year=(minDate?Math.max(year,minDate.getFullYear()):year);endYear=(maxDate?Math.min(endYear,maxDate.getFullYear()):endYear);inst.yearshtml+='<select class="ui-datepicker-year" data-handler="selectYear" data-event="change">';for(;year<=endYear;year++){inst.yearshtml+='<option value="'+year+'"'+(year==drawYear?' selected="selected"':"")+">"+year+"</option>";}inst.yearshtml+="</select>";html+=inst.yearshtml;inst.yearshtml=null;}}html+=this._get(inst,"yearSuffix");if(showMonthAfterYear){html+=(secondary||!(changeMonth&&changeYear)?"&#xa0;":"")+monthHtml;}html+="</div>";return html;},_adjustInstDate:function(inst,offset,period){var year=inst.drawYear+(period=="Y"?offset:0);var month=inst.drawMonth+(period=="M"?offset:0);var day=Math.min(inst.selectedDay,this._getDaysInMonth(year,month))+(period=="D"?offset:0);var date=this._restrictMinMax(inst,this._daylightSavingAdjust(new Date(year,month,day)));inst.selectedDay=date.getDate();inst.drawMonth=inst.selectedMonth=date.getMonth();inst.drawYear=inst.selectedYear=date.getFullYear();if(period=="M"||period=="Y"){this._notifyChange(inst);}},_restrictMinMax:function(inst,date){var minDate=this._getMinMaxDate(inst,"min");var maxDate=this._getMinMaxDate(inst,"max");var newDate=(minDate&&date<minDate?minDate:date);newDate=(maxDate&&newDate>maxDate?maxDate:newDate);return newDate;},_notifyChange:function(inst){var onChange=this._get(inst,"onChangeMonthYear");if(onChange){onChange.apply((inst.input?inst.input[0]:null),[inst.selectedYear,inst.selectedMonth+1,inst]);}},_getNumberOfMonths:function(inst){var numMonths=this._get(inst,"numberOfMonths");return(numMonths==null?[1,1]:(typeof numMonths=="number"?[1,numMonths]:numMonths));},_getMinMaxDate:function(inst,minMax){return this._determineDate(inst,this._get(inst,minMax+"Date"),null);},_getDaysInMonth:function(year,month){return 32-this._daylightSavingAdjust(new Date(year,month,32)).getDate();},_getFirstDayOfMonth:function(year,month){return new Date(year,month,1).getDay();},_canAdjustMonth:function(inst,offset,curYear,curMonth){var numMonths=this._getNumberOfMonths(inst);var date=this._daylightSavingAdjust(new Date(curYear,curMonth+(offset<0?offset:numMonths[0]*numMonths[1]),1));if(offset<0){date.setDate(this._getDaysInMonth(date.getFullYear(),date.getMonth()));}return this._isInRange(inst,date);},_isInRange:function(inst,date){var minDate=this._getMinMaxDate(inst,"min");var maxDate=this._getMinMaxDate(inst,"max");return((!minDate||date.getTime()>=minDate.getTime())&&(!maxDate||date.getTime()<=maxDate.getTime()));},_getFormatConfig:function(inst){var shortYearCutoff=this._get(inst,"shortYearCutoff");shortYearCutoff=(typeof shortYearCutoff!="string"?shortYearCutoff:new Date().getFullYear()%100+parseInt(shortYearCutoff,10));return{shortYearCutoff:shortYearCutoff,dayNamesShort:this._get(inst,"dayNamesShort"),dayNames:this._get(inst,"dayNames"),monthNamesShort:this._get(inst,"monthNamesShort"),monthNames:this._get(inst,"monthNames")};},_formatDate:function(inst,day,month,year){if(!day){inst.currentDay=inst.selectedDay;inst.currentMonth=inst.selectedMonth;inst.currentYear=inst.selectedYear;}var date=(day?(typeof day=="object"?day:this._daylightSavingAdjust(new Date(year,month,day))):this._daylightSavingAdjust(new Date(inst.currentYear,inst.currentMonth,inst.currentDay)));return this.formatDate(this._get(inst,"dateFormat"),date,this._getFormatConfig(inst));}});function bindHover(dpDiv){var selector="button, .ui-datepicker-prev, .ui-datepicker-next, .ui-datepicker-calendar td a";return dpDiv.delegate(selector,"mouseout",function(){$(this).removeClass("ui-state-hover");if(this.className.indexOf("ui-datepicker-prev")!=-1){$(this).removeClass("ui-datepicker-prev-hover");}if(this.className.indexOf("ui-datepicker-next")!=-1){$(this).removeClass("ui-datepicker-next-hover");}}).delegate(selector,"mouseover",function(){if(!$.datepicker._isDisabledDatepicker(instActive.inline?dpDiv.parent()[0]:instActive.input[0])){$(this).parents(".ui-datepicker-calendar").find("a").removeClass("ui-state-hover");$(this).addClass("ui-state-hover");if(this.className.indexOf("ui-datepicker-prev")!=-1){$(this).addClass("ui-datepicker-prev-hover");}if(this.className.indexOf("ui-datepicker-next")!=-1){$(this).addClass("ui-datepicker-next-hover");}}});}function extendRemove(target,props){$.extend(target,props);for(var name in props){if(props[name]==null||props[name]==undefined){target[name]=props[name];}}return target;}$.fn.datepicker=function(options){if(!this.length){return this;}if(!$.datepicker.initialized){$(document).mousedown($.datepicker._checkExternalClick).find(document.body).append($.datepicker.dpDiv);$.datepicker.initialized=true;}var otherArgs=Array.prototype.slice.call(arguments,1);if(typeof options=="string"&&(options=="isDisabled"||options=="getDate"||options=="widget")){return $.datepicker["_"+options+"Datepicker"].apply($.datepicker,[this[0]].concat(otherArgs));}if(options=="option"&&arguments.length==2&&typeof arguments[1]=="string"){return $.datepicker["_"+options+"Datepicker"].apply($.datepicker,[this[0]].concat(otherArgs));}return this.each(function(){typeof options=="string"?$.datepicker["_"+options+"Datepicker"].apply($.datepicker,[this].concat(otherArgs)):$.datepicker._attachDatepicker(this,options);});};$.datepicker=new Datepicker();$.datepicker.initialized=false;$.datepicker.uuid=new Date().getTime();$.datepicker.version="1.9.0";window["DP_jQuery_"+dpuuid]=$;})(jquery);(function($,undefined){var uiDialogClasses="ui-dialog ui-widget ui-widget-content ui-corner-all ",sizeRelatedOptions={buttons:true,height:true,maxHeight:true,maxWidth:true,minHeight:true,minWidth:true,width:true},resizableRelatedOptions={maxHeight:true,maxWidth:true,minHeight:true,minWidth:true};$.widget("ui.dialog",{version:"1.9.0",options:{autoOpen:true,buttons:{},closeOnEscape:true,closeText:"close",dialogClass:"",draggable:true,hide:null,height:"auto",maxHeight:false,maxWidth:false,minHeight:150,minWidth:150,modal:false,position:{my:"center",at:"center",of:window,collision:"fit",using:function(pos){var topOffset=$(this).css(pos).offset().top;if(topOffset<0){$(this).css("top",pos.top-topOffset);}}},resizable:true,show:null,stack:true,title:"",width:300,zIndex:1000},_create:function(){this.originalTitle=this.element.attr("title");if(typeof this.originalTitle!=="string"){this.originalTitle="";}this.oldPosition={parent:this.element.parent(),index:this.element.parent().children().index(this.element)};this.options.title=this.options.title||this.originalTitle;var that=this,options=this.options,title=options.title||"&#160;",uiDialog=(this.uiDialog=$("<div>")).addClass(uiDialogClasses+options.dialogClass).css({display:"none",outline:0,zIndex:options.zIndex}).attr("tabIndex",-1).keydown(function(event){if(options.closeOnEscape&&!event.isDefaultPrevented()&&event.keyCode&&event.keyCode===$.ui.keyCode.ESCAPE){that.close(event);event.preventDefault();}}).mousedown(function(event){that.moveToTop(false,event);}).appendTo("body"),uiDialogContent=this.element.show().removeAttr("title").addClass("ui-dialog-content ui-widget-content").appendTo(uiDialog),uiDialogTitlebar=(this.uiDialogTitlebar=$("<div>")).addClass("ui-dialog-titlebar  ui-widget-header  ui-corner-all  ui-helper-clearfix").prependTo(uiDialog),uiDialogTitlebarClose=$("<a href='#'></a>").addClass("ui-dialog-titlebar-close  ui-corner-all").attr("role","button").click(function(event){event.preventDefault();that.close(event);}).appendTo(uiDialogTitlebar),uiDialogTitlebarCloseText=(this.uiDialogTitlebarCloseText=$("<span>")).addClass("ui-icon ui-icon-closethick").text(options.closeText).appendTo(uiDialogTitlebarClose),uiDialogTitle=$("<span>").uniqueId().addClass("ui-dialog-title").html(title).prependTo(uiDialogTitlebar),uiDialogButtonPane=(this.uiDialogButtonPane=$("<div>")).addClass("ui-dialog-buttonpane ui-widget-content ui-helper-clearfix"),uiButtonSet=(this.uiButtonSet=$("<div>")).addClass("ui-dialog-buttonset").appendTo(uiDialogButtonPane);uiDialog.attr({role:"dialog","aria-labelledby":uiDialogTitle.attr("id")});uiDialogTitlebar.find("*").add(uiDialogTitlebar).disableSelection();this._hoverable(uiDialogTitlebarClose);this._focusable(uiDialogTitlebarClose);if(options.draggable&&$.fn.draggable){this._makeDraggable();}if(options.resizable&&$.fn.resizable){this._makeResizable();}this._createButtons(options.buttons);this._isOpen=false;if($.fn.bgiframe){uiDialog.bgiframe();}this._on(uiDialog,{keydown:function(event){if(!options.modal||event.keyCode!==$.ui.keyCode.TAB){return;}var tabbables=$(":tabbable",uiDialog),first=tabbables.filter(":first"),last=tabbables.filter(":last");if(event.target===last[0]&&!event.shiftKey){first.focus(1);return false;}else{if(event.target===first[0]&&event.shiftKey){last.focus(1);return false;}}}});},_init:function(){if(this.options.autoOpen){this.open();}},_destroy:function(){var next,oldPosition=this.oldPosition;if(this.overlay){this.overlay.destroy();}this.uiDialog.hide();this.element.removeClass("ui-dialog-content ui-widget-content").hide().appendTo("body");this.uiDialog.remove();if(this.originalTitle){this.element.attr("title",this.originalTitle);}next=oldPosition.parent.children().eq(oldPosition.index);if(next.length&&next[0]!==this.element[0]){next.before(this.element);}else{oldPosition.parent.append(this.element);}},widget:function(){return this.uiDialog;},close:function(event){var that=this,maxZ,thisZ;if(!this._isOpen){return;}if(false===this._trigger("beforeClose",event)){return;}this._isOpen=false;if(this.overlay){this.overlay.destroy();}if(this.options.hide){this.uiDialog.hide(this.options.hide,function(){that._trigger("close",event);});}else{this.uiDialog.hide();this._trigger("close",event);}$.ui.dialog.overlay.resize();if(this.options.modal){maxZ=0;$(".ui-dialog").each(function(){if(this!==that.uiDialog[0]){thisZ=$(this).css("z-index");if(!isNaN(thisZ)){maxZ=Math.max(maxZ,thisZ);}}});$.ui.dialog.maxZ=maxZ;}return this;},isOpen:function(){return this._isOpen;},moveToTop:function(force,event){var options=this.options,saveScroll;if((options.modal&&!force)||(!options.stack&&!options.modal)){return this._trigger("focus",event);}if(options.zIndex>$.ui.dialog.maxZ){$.ui.dialog.maxZ=options.zIndex;}if(this.overlay){$.ui.dialog.maxZ+=1;$.ui.dialog.overlay.maxZ=$.ui.dialog.maxZ;this.overlay.$el.css("z-index",$.ui.dialog.overlay.maxZ);}saveScroll={scrollTop:this.element.scrollTop(),scrollLeft:this.element.scrollLeft()};$.ui.dialog.maxZ+=1;this.uiDialog.css("z-index",$.ui.dialog.maxZ);this.element.attr(saveScroll);this._trigger("focus",event);return this;},open:function(){if(this._isOpen){return;}var hasFocus,options=this.options,uiDialog=this.uiDialog;this._size();this._position(options.position);uiDialog.show(options.show);this.overlay=options.modal?new $.ui.dialog.overlay(this):null;this.moveToTop(true);hasFocus=this.element.find(":tabbable");if(!hasFocus.length){hasFocus=this.uiDialogButtonPane.find(":tabbable");if(!hasFocus.length){hasFocus=uiDialog;}}hasFocus.eq(0).focus();this._isOpen=true;this._trigger("open");return this;},_createButtons:function(buttons){var uiDialogButtonPane,uiButtonSet,that=this,hasButtons=false;this.uiDialogButtonPane.remove();this.uiButtonSet.empty();if(typeof buttons==="object"&&buttons!==null){$.each(buttons,function(){return !(hasButtons=true);});}if(hasButtons){$.each(buttons,function(name,props){props=$.isFunction(props)?{click:props,text:name}:props;var button=$("<button type='button'>").attr(props,true).unbind("click").click(function(){props.click.apply(that.element[0],arguments);}).appendTo(that.uiButtonSet);if($.fn.button){button.button();}});this.uiDialog.addClass("ui-dialog-buttons");this.uiDialogButtonPane.appendTo(this.uiDialog);}else{this.uiDialog.removeClass("ui-dialog-buttons");}},_makeDraggable:function(){var that=this,options=this.options;function filteredUi(ui){return{position:ui.position,offset:ui.offset};}this.uiDialog.draggable({cancel:".ui-dialog-content, .ui-dialog-titlebar-close",handle:".ui-dialog-titlebar",containment:"document",start:function(event,ui){$(this).addClass("ui-dialog-dragging");that._trigger("dragStart",event,filteredUi(ui));},drag:function(event,ui){that._trigger("drag",event,filteredUi(ui));},stop:function(event,ui){options.position=[ui.position.left-that.document.scrollLeft(),ui.position.top-that.document.scrollTop()];$(this).removeClass("ui-dialog-dragging");that._trigger("dragStop",event,filteredUi(ui));$.ui.dialog.overlay.resize();}});},_makeResizable:function(handles){handles=(handles===undefined?this.options.resizable:handles);var that=this,options=this.options,position=this.uiDialog.css("position"),resizeHandles=typeof handles==="string"?handles:"n,e,s,w,se,sw,ne,nw";function filteredUi(ui){return{originalPosition:ui.originalPosition,originalSize:ui.originalSize,position:ui.position,size:ui.size};}this.uiDialog.resizable({cancel:".ui-dialog-content",containment:"document",alsoResize:this.element,maxWidth:options.maxWidth,maxHeight:options.maxHeight,minWidth:options.minWidth,minHeight:this._minHeight(),handles:resizeHandles,start:function(event,ui){$(this).addClass("ui-dialog-resizing");that._trigger("resizeStart",event,filteredUi(ui));},resize:function(event,ui){that._trigger("resize",event,filteredUi(ui));},stop:function(event,ui){$(this).removeClass("ui-dialog-resizing");options.height=$(this).height();options.width=$(this).width();that._trigger("resizeStop",event,filteredUi(ui));$.ui.dialog.overlay.resize();}}).css("position",position).find(".ui-resizable-se").addClass("ui-icon ui-icon-grip-diagonal-se");},_minHeight:function(){var options=this.options;if(options.height==="auto"){return options.minHeight;}else{return Math.min(options.minHeight,options.height);}},_position:function(position){var myAt=[],offset=[0,0],isVisible;if(position){if(typeof position==="string"||(typeof position==="object"&&"0" in position)){myAt=position.split?position.split(" "):[position[0],position[1]];if(myAt.length===1){myAt[1]=myAt[0];}$.each(["left","top"],function(i,offsetPosition){if(+myAt[i]===myAt[i]){offset[i]=myAt[i];myAt[i]=offsetPosition;}});position={my:myAt.join(" "),at:myAt.join(" "),offset:offset.join(" ")};}position=$.extend({},$.ui.dialog.prototype.options.position,position);}else{position=$.ui.dialog.prototype.options.position;}isVisible=this.uiDialog.is(":visible");if(!isVisible){this.uiDialog.show();}this.uiDialog.position(position);if(!isVisible){this.uiDialog.hide();}},_setOptions:function(options){var that=this,resizableOptions={},resize=false;$.each(options,function(key,value){that._setOption(key,value);if(key in sizeRelatedOptions){resize=true;}if(key in resizableRelatedOptions){resizableOptions[key]=value;}});if(resize){this._size();}if(this.uiDialog.is(":data(resizable)")){this.uiDialog.resizable("option",resizableOptions);}},_setOption:function(key,value){var isDraggable,isResizable,uiDialog=this.uiDialog;switch(key){case"buttons":this._createButtons(value);break;case"closeText":this.uiDialogTitlebarCloseText.text(""+value);break;case"dialogClass":uiDialog.removeClass(this.options.dialogClass).addClass(uiDialogClasses+value);break;case"disabled":if(value){uiDialog.addClass("ui-dialog-disabled");}else{uiDialog.removeClass("ui-dialog-disabled");}break;case"draggable":isDraggable=uiDialog.is(":data(draggable)");if(isDraggable&&!value){uiDialog.draggable("destroy");}if(!isDraggable&&value){this._makeDraggable();}break;case"position":this._position(value);break;case"resizable":isResizable=uiDialog.is(":data(resizable)");if(isResizable&&!value){uiDialog.resizable("destroy");}if(isResizable&&typeof value==="string"){uiDialog.resizable("option","handles",value);}if(!isResizable&&value!==false){this._makeResizable(value);}break;case"title":$(".ui-dialog-title",this.uiDialogTitlebar).html(""+(value||"&#160;"));break;}this._super(key,value);},_size:function(){var nonContentHeight,minContentHeight,autoHeight,options=this.options,isVisible=this.uiDialog.is(":visible");this.element.show().css({width:"auto",minHeight:0,height:0});if(options.minWidth>options.width){options.width=options.minWidth;}nonContentHeight=this.uiDialog.css({height:"auto",width:options.width}).outerHeight();minContentHeight=Math.max(0,options.minHeight-nonContentHeight);if(options.height==="auto"){if($.support.minHeight){this.element.css({minHeight:minContentHeight,height:"auto"});}else{this.uiDialog.show();autoHeight=this.element.css("height","auto").height();if(!isVisible){this.uiDialog.hide();}this.element.height(Math.max(autoHeight,minContentHeight));}}else{this.element.height(Math.max(options.height-nonContentHeight,0));}if(this.uiDialog.is(":data(resizable)")){this.uiDialog.resizable("option","minHeight",this._minHeight());}}});$.extend($.ui.dialog,{uuid:0,maxZ:0,getTitleId:function($el){var id=$el.attr("id");if(!id){this.uuid+=1;id=this.uuid;}return"ui-dialog-title-"+id;},overlay:function(dialog){this.$el=$.ui.dialog.overlay.create(dialog);}});$.extend($.ui.dialog.overlay,{instances:[],oldInstances:[],maxZ:0,events:$.map("focus,mousedown,mouseup,keydown,keypress,click".split(","),function(event){return event+".dialog-overlay";}).join(" "),create:function(dialog){if(this.instances.length===0){setTimeout(function(){if($.ui.dialog.overlay.instances.length){$(document).bind($.ui.dialog.overlay.events,function(event){if($(event.target).zIndex()<$.ui.dialog.overlay.maxZ){return false;}});}},1);$(window).bind("resize.dialog-overlay",$.ui.dialog.overlay.resize);}var $el=(this.oldInstances.pop()||$("<div>").addClass("ui-widget-overlay"));$(document).bind("keydown.dialog-overlay",function(event){var instances=$.ui.dialog.overlay.instances;if(instances.length!==0&&instances[instances.length-1]===$el&&dialog.options.closeOnEscape&&!event.isDefaultPrevented()&&event.keyCode&&event.keyCode===$.ui.keyCode.ESCAPE){dialog.close(event);event.preventDefault();}});$el.appendTo(document.body).css({width:this.width(),height:this.height()});if($.fn.bgiframe){$el.bgiframe();}this.instances.push($el);return $el;},destroy:function($el){var indexOf=$.inArray($el,this.instances),maxZ=0;if(indexOf!==-1){this.oldInstances.push(this.instances.splice(indexOf,1)[0]);}if(this.instances.length===0){$([document,window]).unbind(".dialog-overlay");}$el.height(0).width(0).remove();$.each(this.instances,function(){maxZ=Math.max(maxZ,this.css("z-index"));});this.maxZ=maxZ;},height:function(){var scrollHeight,offsetHeight;if($.browser.msie){scrollHeight=Math.max(document.documentElement.scrollHeight,document.body.scrollHeight);offsetHeight=Math.max(document.documentElement.offsetHeight,document.body.offsetHeight);if(scrollHeight<offsetHeight){return $(window).height()+"px";}else{return scrollHeight+"px";}}else{return $(document).height()+"px";}},width:function(){var scrollWidth,offsetWidth;if($.browser.msie){scrollWidth=Math.max(document.documentElement.scrollWidth,document.body.scrollWidth);offsetWidth=Math.max(document.documentElement.offsetWidth,document.body.offsetWidth);if(scrollWidth<offsetWidth){return $(window).width()+"px";}else{return scrollWidth+"px";}}else{return $(document).width()+"px";}},resize:function(){var $overlays=$([]);$.each($.ui.dialog.overlay.instances,function(){$overlays=$overlays.add(this);});$overlays.css({width:0,height:0}).css({width:$.ui.dialog.overlay.width(),height:$.ui.dialog.overlay.height()});}});$.extend($.ui.dialog.overlay.prototype,{destroy:function(){$.ui.dialog.overlay.destroy(this.$el);}});}(jquery));(function($,undefined){var rvertical=/up|down|vertical/,rpositivemotion=/up|left|vertical|horizontal/;$.effects.effect.blind=function(o,done){var el=$(this),props=["position","top","bottom","left","right","height","width"],mode=$.effects.setMode(el,o.mode||"hide"),direction=o.direction||"up",vertical=rvertical.test(direction),ref=vertical?"height":"width",ref2=vertical?"top":"left",motion=rpositivemotion.test(direction),animation={},show=mode==="show",wrapper,distance,margin;if(el.parent().is(".ui-effects-wrapper")){$.effects.save(el.parent(),props);}else{$.effects.save(el,props);}el.show();wrapper=$.effects.createWrapper(el).css({overflow:"hidden"});distance=wrapper[ref]();margin=parseFloat(wrapper.css(ref2))||0;animation[ref]=show?distance:0;if(!motion){el.css(vertical?"bottom":"right",0).css(vertical?"top":"left","auto").css({position:"absolute"});animation[ref2]=show?margin:distance+margin;}if(show){wrapper.css(ref,0);if(!motion){wrapper.css(ref2,margin+distance);}}wrapper.animate(animation,{duration:o.duration,easing:o.easing,queue:false,complete:function(){if(mode==="hide"){el.hide();}$.effects.restore(el,props);$.effects.removeWrapper(el);done();}});};})(jquery);(function($,undefined){$.effects.effect.bounce=function(o,done){var el=$(this),props=["position","top","bottom","left","right","height","width"],mode=$.effects.setMode(el,o.mode||"effect"),hide=mode==="hide",show=mode==="show",direction=o.direction||"up",distance=o.distance,times=o.times||5,anims=times*2+(show||hide?1:0),speed=o.duration/anims,easing=o.easing,ref=(direction==="up"||direction==="down")?"top":"left",motion=(direction==="up"||direction==="left"),i,upAnim,downAnim,queue=el.queue(),queuelen=queue.length;if(show||hide){props.push("opacity");}$.effects.save(el,props);el.show();$.effects.createWrapper(el);if(!distance){distance=el[ref==="top"?"outerHeight":"outerWidth"]()/3;}if(show){downAnim={opacity:1};downAnim[ref]=0;el.css("opacity",0).css(ref,motion?-distance*2:distance*2).animate(downAnim,speed,easing);}if(hide){distance=distance/Math.pow(2,times-1);}downAnim={};downAnim[ref]=0;for(i=0;i<times;i++){upAnim={};upAnim[ref]=(motion?"-=":"+=")+distance;el.animate(upAnim,speed,easing).animate(downAnim,speed,easing);distance=hide?distance*2:distance/2;}if(hide){upAnim={opacity:0};upAnim[ref]=(motion?"-=":"+=")+distance;el.animate(upAnim,speed,easing);}el.queue(function(){if(hide){el.hide();}$.effects.restore(el,props);$.effects.removeWrapper(el);done();});if(queuelen>1){queue.splice.apply(queue,[1,0].concat(queue.splice(queuelen,anims+1)));}el.dequeue();};})(jquery);(function($,undefined){$.effects.effect.clip=function(o,done){var el=$(this),props=["position","top","bottom","left","right","height","width"],mode=$.effects.setMode(el,o.mode||"hide"),show=mode==="show",direction=o.direction||"vertical",vert=direction==="vertical",size=vert?"height":"width",position=vert?"top":"left",animation={},wrapper,animate,distance;$.effects.save(el,props);el.show();wrapper=$.effects.createWrapper(el).css({overflow:"hidden"});animate=(el[0].tagName==="IMG")?wrapper:el;distance=animate[size]();if(show){animate.css(size,0);animate.css(position,distance/2);}animation[size]=show?distance:0;animation[position]=show?0:distance/2;animate.animate(animation,{queue:false,duration:o.duration,easing:o.easing,complete:function(){if(!show){el.hide();}$.effects.restore(el,props);$.effects.removeWrapper(el);done();}});};})(jquery);(function($,undefined){$.effects.effect.drop=function(o,done){var el=$(this),props=["position","top","bottom","left","right","opacity","height","width"],mode=$.effects.setMode(el,o.mode||"hide"),show=mode==="show",direction=o.direction||"left",ref=(direction==="up"||direction==="down")?"top":"left",motion=(direction==="up"||direction==="left")?"pos":"neg",animation={opacity:show?1:0},distance;$.effects.save(el,props);el.show();$.effects.createWrapper(el);distance=o.distance||el[ref==="top"?"outerHeight":"outerWidth"](true)/2;if(show){el.css("opacity",0).css(ref,motion==="pos"?-distance:distance);}animation[ref]=(show?(motion==="pos"?"+=":"-="):(motion==="pos"?"-=":"+="))+distance;el.animate(animation,{queue:false,duration:o.duration,easing:o.easing,complete:function(){if(mode==="hide"){el.hide();}$.effects.restore(el,props);$.effects.removeWrapper(el);done();}});};})(jquery);(function($,undefined){$.effects.effect.explode=function(o,done){var rows=o.pieces?Math.round(Math.sqrt(o.pieces)):3,cells=rows,el=$(this),mode=$.effects.setMode(el,o.mode||"hide"),show=mode==="show",offset=el.show().css("visibility","hidden").offset(),width=Math.ceil(el.outerWidth()/cells),height=Math.ceil(el.outerHeight()/rows),pieces=[],i,j,left,top,mx,my;function childComplete(){pieces.push(this);if(pieces.length===rows*cells){animComplete();}}for(i=0;i<rows;i++){top=offset.top+i*height;my=i-(rows-1)/2;for(j=0;j<cells;j++){left=offset.left+j*width;mx=j-(cells-1)/2;el.clone().appendTo("body").wrap("<div></div>").css({position:"absolute",visibility:"visible",left:-j*width,top:-i*height}).parent().addClass("ui-effects-explode").css({position:"absolute",overflow:"hidden",width:width,height:height,left:left+(show?mx*width:0),top:top+(show?my*height:0),opacity:show?0:1}).animate({left:left+(show?0:mx*width),top:top+(show?0:my*height),opacity:show?1:0},o.duration||500,o.easing,childComplete);}}function animComplete(){el.css({visibility:"visible"});$(pieces).remove();if(!show){el.hide();}done();}};})(jquery);(function($,undefined){$.effects.effect.fade=function(o,done){var el=$(this),mode=$.effects.setMode(el,o.mode||"toggle");el.animate({opacity:mode},{queue:false,duration:o.duration,easing:o.easing,complete:done});};})(jquery);(function($,undefined){$.effects.effect.fold=function(o,done){var el=$(this),props=["position","top","bottom","left","right","height","width"],mode=$.effects.setMode(el,o.mode||"hide"),show=mode==="show",hide=mode==="hide",size=o.size||15,percent=/([0-9]+)%/.exec(size),horizFirst=!!o.horizFirst,widthFirst=show!==horizFirst,ref=widthFirst?["width","height"]:["height","width"],duration=o.duration/2,wrapper,distance,animation1={},animation2={};$.effects.save(el,props);el.show();wrapper=$.effects.createWrapper(el).css({overflow:"hidden"});distance=widthFirst?[wrapper.width(),wrapper.height()]:[wrapper.height(),wrapper.width()];if(percent){size=parseInt(percent[1],10)/100*distance[hide?0:1];}if(show){wrapper.css(horizFirst?{height:0,width:size}:{height:size,width:0});}animation1[ref[0]]=show?distance[0]:size;animation2[ref[1]]=show?distance[1]:0;wrapper.animate(animation1,duration,o.easing).animate(animation2,duration,o.easing,function(){if(hide){el.hide();}$.effects.restore(el,props);$.effects.removeWrapper(el);done();});};})(jquery);(function($,undefined){$.effects.effect.highlight=function(o,done){var elem=$(this),props=["backgroundImage","backgroundColor","opacity"],mode=$.effects.setMode(elem,o.mode||"show"),animation={backgroundColor:elem.css("backgroundColor")};if(mode==="hide"){animation.opacity=0;}$.effects.save(elem,props);elem.show().css({backgroundImage:"none",backgroundColor:o.color||"#ffff99"}).animate(animation,{queue:false,duration:o.duration,easing:o.easing,complete:function(){if(mode==="hide"){elem.hide();}$.effects.restore(elem,props);done();}});};})(jquery);(function($,undefined){$.effects.effect.pulsate=function(o,done){var elem=$(this),mode=$.effects.setMode(elem,o.mode||"show"),show=mode==="show",hide=mode==="hide",showhide=(show||mode==="hide"),anims=((o.times||5)*2)+(showhide?1:0),duration=o.duration/anims,animateTo=0,queue=elem.queue(),queuelen=queue.length,i;if(show||!elem.is(":visible")){elem.css("opacity",0).show();animateTo=1;}for(i=1;i<anims;i++){elem.animate({opacity:animateTo},duration,o.easing);animateTo=1-animateTo;}elem.animate({opacity:animateTo},duration,o.easing);elem.queue(function(){if(hide){elem.hide();}done();});if(queuelen>1){queue.splice.apply(queue,[1,0].concat(queue.splice(queuelen,anims+1)));}elem.dequeue();};})(jquery);(function($,undefined){$.effects.effect.puff=function(o,done){var elem=$(this),mode=$.effects.setMode(elem,o.mode||"hide"),hide=mode==="hide",percent=parseInt(o.percent,10)||150,factor=percent/100,original={height:elem.height(),width:elem.width()};$.extend(o,{effect:"scale",queue:false,fade:true,mode:mode,complete:done,percent:hide?percent:100,from:hide?original:{height:original.height*factor,width:original.width*factor}});elem.effect(o);};$.effects.effect.scale=function(o,done){var el=$(this),options=$.extend(true,{},o),mode=$.effects.setMode(el,o.mode||"effect"),percent=parseInt(o.percent,10)||(parseInt(o.percent,10)===0?0:(mode==="hide"?0:100)),direction=o.direction||"both",origin=o.origin,original={height:el.height(),width:el.width(),outerHeight:el.outerHeight(),outerWidth:el.outerWidth()},factor={y:direction!=="horizontal"?(percent/100):1,x:direction!=="vertical"?(percent/100):1};options.effect="size";options.queue=false;options.complete=done;if(mode!=="effect"){options.origin=origin||["middle","center"];options.restore=true;}options.from=o.from||(mode==="show"?{height:0,width:0}:original);options.to={height:original.height*factor.y,width:original.width*factor.x,outerHeight:original.outerHeight*factor.y,outerWidth:original.outerWidth*factor.x};if(options.fade){if(mode==="show"){options.from.opacity=0;options.to.opacity=1;}if(mode==="hide"){options.from.opacity=1;options.to.opacity=0;}}el.effect(options);};$.effects.effect.size=function(o,done){var el=$(this),props=["position","top","bottom","left","right","width","height","overflow","opacity"],props1=["position","top","bottom","left","right","overflow","opacity"],props2=["width","height","overflow"],cProps=["fontSize"],vProps=["borderTopWidth","borderBottomWidth","paddingTop","paddingBottom"],hProps=["borderLeftWidth","borderRightWidth","paddingLeft","paddingRight"],mode=$.effects.setMode(el,o.mode||"effect"),restore=o.restore||mode!=="effect",scale=o.scale||"both",origin=o.origin||["middle","center"],original,baseline,factor,position=el.css("position");if(mode==="show"){el.show();}original={height:el.height(),width:el.width(),outerHeight:el.outerHeight(),outerWidth:el.outerWidth()};el.from=o.from||original;el.to=o.to||original;factor={from:{y:el.from.height/original.height,x:el.from.width/original.width},to:{y:el.to.height/original.height,x:el.to.width/original.width}};if(scale==="box"||scale==="both"){if(factor.from.y!==factor.to.y){props=props.concat(vProps);el.from=$.effects.setTransition(el,vProps,factor.from.y,el.from);el.to=$.effects.setTransition(el,vProps,factor.to.y,el.to);}if(factor.from.x!==factor.to.x){props=props.concat(hProps);el.from=$.effects.setTransition(el,hProps,factor.from.x,el.from);el.to=$.effects.setTransition(el,hProps,factor.to.x,el.to);}}if(scale==="content"||scale==="both"){if(factor.from.y!==factor.to.y){props=props.concat(cProps);el.from=$.effects.setTransition(el,cProps,factor.from.y,el.from);el.to=$.effects.setTransition(el,cProps,factor.to.y,el.to);}}$.effects.save(el,restore?props:props1);el.show();$.effects.createWrapper(el);el.css("overflow","hidden").css(el.from);if(origin){baseline=$.effects.getBaseline(origin,original);el.from.top=(original.outerHeight-el.outerHeight())*baseline.y;el.from.left=(original.outerWidth-el.outerWidth())*baseline.x;el.to.top=(original.outerHeight-el.to.outerHeight)*baseline.y;el.to.left=(original.outerWidth-el.to.outerWidth)*baseline.x;}el.css(el.from);if(scale==="content"||scale==="both"){vProps=vProps.concat(["marginTop","marginBottom"]).concat(cProps);hProps=hProps.concat(["marginLeft","marginRight"]);props2=props.concat(vProps).concat(hProps);el.find("*[width]").each(function(){var child=$(this),c_original={height:child.height(),width:child.width()};if(restore){$.effects.save(child,props2);}child.from={height:c_original.height*factor.from.y,width:c_original.width*factor.from.x};child.to={height:c_original.height*factor.to.y,width:c_original.width*factor.to.x};if(factor.from.y!==factor.to.y){child.from=$.effects.setTransition(child,vProps,factor.from.y,child.from);child.to=$.effects.setTransition(child,vProps,factor.to.y,child.to);}if(factor.from.x!==factor.to.x){child.from=$.effects.setTransition(child,hProps,factor.from.x,child.from);child.to=$.effects.setTransition(child,hProps,factor.to.x,child.to);}child.css(child.from);child.animate(child.to,o.duration,o.easing,function(){if(restore){$.effects.restore(child,props2);}});});}el.animate(el.to,{queue:false,duration:o.duration,easing:o.easing,complete:function(){if(el.to.opacity===0){el.css("opacity",el.from.opacity);}if(mode==="hide"){el.hide();}$.effects.restore(el,restore?props:props1);if(!restore){if(position==="static"){el.css({position:"relative",top:el.to.top,left:el.to.left});}else{$.each(["top","left"],function(idx,pos){el.css(pos,function(_,str){var val=parseInt(str,10),toRef=idx?el.to.left:el.to.top;if(str==="auto"){return toRef+"px";}return val+toRef+"px";});});}}$.effects.removeWrapper(el);done();}});};})(jquery);(function($,undefined){$.effects.effect.shake=function(o,done){var el=$(this),props=["position","top","bottom","left","right","height","width"],mode=$.effects.setMode(el,o.mode||"effect"),direction=o.direction||"left",distance=o.distance||20,times=o.times||3,anims=times*2+1,speed=Math.round(o.duration/anims),ref=(direction==="up"||direction==="down")?"top":"left",positiveMotion=(direction==="up"||direction==="left"),animation={},animation1={},animation2={},i,queue=el.queue(),queuelen=queue.length;$.effects.save(el,props);el.show();$.effects.createWrapper(el);animation[ref]=(positiveMotion?"-=":"+=")+distance;animation1[ref]=(positiveMotion?"+=":"-=")+distance*2;animation2[ref]=(positiveMotion?"-=":"+=")+distance*2;el.animate(animation,speed,o.easing);for(i=1;i<times;i++){el.animate(animation1,speed,o.easing).animate(animation2,speed,o.easing);}el.animate(animation1,speed,o.easing).animate(animation,speed/2,o.easing).queue(function(){if(mode==="hide"){el.hide();}$.effects.restore(el,props);$.effects.removeWrapper(el);done();});if(queuelen>1){queue.splice.apply(queue,[1,0].concat(queue.splice(queuelen,anims+1)));}el.dequeue();};})(jquery);(function($,undefined){$.effects.effect.slide=function(o,done){var el=$(this),props=["position","top","bottom","left","right","width","height"],mode=$.effects.setMode(el,o.mode||"show"),show=mode==="show",direction=o.direction||"left",ref=(direction==="up"||direction==="down")?"top":"left",positiveMotion=(direction==="up"||direction==="left"),distance,animation={};$.effects.save(el,props);el.show();distance=o.distance||el[ref==="top"?"outerHeight":"outerWidth"](true);$.effects.createWrapper(el).css({overflow:"hidden"});if(show){el.css(ref,positiveMotion?(isNaN(distance)?"-"+distance:-distance):distance);}animation[ref]=(show?(positiveMotion?"+=":"-="):(positiveMotion?"-=":"+="))+distance;el.animate(animation,{queue:false,duration:o.duration,easing:o.easing,complete:function(){if(mode==="hide"){el.hide();}$.effects.restore(el,props);$.effects.removeWrapper(el);done();}});};})(jquery);(function($,undefined){$.effects.effect.transfer=function(o,done){var elem=$(this),target=$(o.to),targetFixed=target.css("position")==="fixed",body=$("body"),fixTop=targetFixed?body.scrollTop():0,fixLeft=targetFixed?body.scrollLeft():0,endPosition=target.offset(),animation={top:endPosition.top-fixTop,left:endPosition.left-fixLeft,height:target.innerHeight(),width:target.innerWidth()},startPosition=elem.offset(),transfer=$('<div class="ui-effects-transfer"></div>').appendTo(document.body).addClass(o.className).css({top:startPosition.top-fixTop,left:startPosition.left-fixLeft,height:elem.innerHeight(),width:elem.innerWidth(),position:targetFixed?"fixed":"absolute"}).animate(animation,o.duration,o.easing,function(){transfer.remove();done();});};})(jquery);(function($,undefined){var mouseHandled=false;$.widget("ui.menu",{version:"1.9.0",defaultElement:"<ul>",delay:300,options:{icons:{submenu:"ui-icon-carat-1-e"},menus:"ul",position:{my:"left top",at:"right top"},role:"menu",blur:null,focus:null,select:null},_create:function(){this.activeMenu=this.element;this.element.uniqueId().addClass("ui-menu ui-widget ui-widget-content ui-corner-all").toggleClass("ui-menu-icons",!!this.element.find(".ui-icon").length).attr({role:this.options.role,tabIndex:0}).bind("click"+this.eventNamespace,$.proxy(function(event){if(this.options.disabled){event.preventDefault();}},this));if(this.options.disabled){this.element.addClass("ui-state-disabled").attr("aria-disabled","true");}this._on({"mousedown .ui-menu-item > a":function(event){event.preventDefault();},"click .ui-state-disabled > a":function(event){event.preventDefault();},"click .ui-menu-item:has(a)":function(event){var target=$(event.target).closest(".ui-menu-item");if(!mouseHandled&&target.not(".ui-state-disabled").length){mouseHandled=true;this.select(event);if(target.has(".ui-menu").length){this.expand(event);}else{if(!this.element.is(":focus")){this.element.trigger("focus",[true]);if(this.active&&this.active.parents(".ui-menu").length===1){clearTimeout(this.timer);}}}}},"mouseenter .ui-menu-item":function(event){var target=$(event.currentTarget);target.siblings().children(".ui-state-active").removeClass("ui-state-active");this.focus(event,target);},mouseleave:"collapseAll","mouseleave .ui-menu":"collapseAll",focus:function(event,keepActiveItem){var item=this.active||this.element.children(".ui-menu-item").eq(0);if(!keepActiveItem){this.focus(event,item);}},blur:function(event){this._delay(function(){if(!$.contains(this.element[0],this.document[0].activeElement)){this.collapseAll(event);}});},keydown:"_keydown"});this.refresh();this._on(this.document,{click:function(event){if(!$(event.target).closest(".ui-menu").length){this.collapseAll(event);}mouseHandled=false;}});},_destroy:function(){this.element.removeAttr("aria-activedescendant").find(".ui-menu").andSelf().removeClass("ui-menu ui-widget ui-widget-content ui-corner-all ui-menu-icons").removeAttr("role").removeAttr("tabIndex").removeAttr("aria-labelledby").removeAttr("aria-expanded").removeAttr("aria-hidden").removeAttr("aria-disabled").removeUniqueId().show();this.element.find(".ui-menu-item").removeClass("ui-menu-item").removeAttr("role").removeAttr("aria-disabled").children("a").removeUniqueId().removeClass("ui-corner-all ui-state-hover").removeAttr("tabIndex").removeAttr("role").removeAttr("aria-haspopup").children().each(function(){var elem=$(this);if(elem.data("ui-menu-submenu-carat")){elem.remove();}});this.element.find(".ui-menu-divider").removeClass("ui-menu-divider ui-widget-content");},_keydown:function(event){var match,prev,character,skip,regex,preventDefault=true;function escape(value){return value.replace(/[\-\[\]{}()*+?.,\\\^$|#\s]/g,"\\$&");}switch(event.keyCode){case $.ui.keyCode.PAGE_UP:this.previousPage(event);break;case $.ui.keyCode.PAGE_DOWN:this.nextPage(event);break;case $.ui.keyCode.HOME:this._move("first","first",event);break;case $.ui.keyCode.END:this._move("last","last",event);break;case $.ui.keyCode.UP:this.previous(event);break;case $.ui.keyCode.DOWN:this.next(event);break;case $.ui.keyCode.LEFT:this.collapse(event);break;case $.ui.keyCode.RIGHT:if(this.active&&!this.active.is(".ui-state-disabled")){this.expand(event);}break;case $.ui.keyCode.ENTER:case $.ui.keyCode.SPACE:this._activate(event);break;case $.ui.keyCode.ESCAPE:this.collapse(event);break;default:preventDefault=false;prev=this.previousFilter||"";character=String.fromCharCode(event.keyCode);skip=false;clearTimeout(this.filterTimer);if(character===prev){skip=true;}else{character=prev+character;}regex=new RegExp("^"+escape(character),"i");match=this.activeMenu.children(".ui-menu-item").filter(function(){return regex.test($(this).children("a").text());});match=skip&&match.index(this.active.next())!==-1?this.active.nextAll(".ui-menu-item"):match;if(!match.length){character=String.fromCharCode(event.keyCode);regex=new RegExp("^"+escape(character),"i");match=this.activeMenu.children(".ui-menu-item").filter(function(){return regex.test($(this).children("a").text());});}if(match.length){this.focus(event,match);if(match.length>1){this.previousFilter=character;this.filterTimer=this._delay(function(){delete this.previousFilter;},1000);}else{delete this.previousFilter;}}else{delete this.previousFilter;}}if(preventDefault){event.preventDefault();}},_activate:function(event){if(!this.active.is(".ui-state-disabled")){if(this.active.children("a[aria-haspopup='true']").length){this.expand(event);}else{this.select(event);}}},refresh:function(){var menus,icon=this.options.icons.submenu,submenus=this.element.find(this.options.menus+":not(.ui-menu)").addClass("ui-menu ui-widget ui-widget-content ui-corner-all").hide().attr({role:this.options.role,"aria-hidden":"true","aria-expanded":"false"});menus=submenus.add(this.element);menus.children(":not(.ui-menu-item):has(a)").addClass("ui-menu-item").attr("role","presentation").children("a").uniqueId().addClass("ui-corner-all").attr({tabIndex:-1,role:this._itemRole()});menus.children(":not(.ui-menu-item)").each(function(){var item=$(this);if(!/[^\-—–\s]/.test(item.text())){item.addClass("ui-widget-content ui-menu-divider");}});menus.children(".ui-state-disabled").attr("aria-disabled","true");submenus.each(function(){var menu=$(this),item=menu.prev("a"),submenuCarat=$("<span>").addClass("ui-menu-icon ui-icon "+icon).data("ui-menu-submenu-carat",true);item.attr("aria-haspopup","true").prepend(submenuCarat);menu.attr("aria-labelledby",item.attr("id"));});if(this.active&&!$.contains(this.element[0],this.active[0])){this.blur();}},_itemRole:function(){return{menu:"menuitem",listbox:"option"}[this.options.role];},focus:function(event,item){var nested,focused;this.blur(event,event&&event.type==="focus");this._scrollIntoView(item);this.active=item.first();focused=this.active.children("a").addClass("ui-state-focus");if(this.options.role){this.element.attr("aria-activedescendant",focused.attr("id"));}this.active.parent().closest(".ui-menu-item").children("a:first").addClass("ui-state-active");if(event&&event.type==="keydown"){this._close();}else{this.timer=this._delay(function(){this._close();},this.delay);}nested=item.children(".ui-menu");if(nested.length&&(/^mouse/.test(event.type))){this._startOpening(nested);}this.activeMenu=item.parent();this._trigger("focus",event,{item:item});},_scrollIntoView:function(item){var borderTop,paddingTop,offset,scroll,elementHeight,itemHeight;if(this._hasScroll()){borderTop=parseFloat($.css(this.activeMenu[0],"borderTopWidth"))||0;paddingTop=parseFloat($.css(this.activeMenu[0],"paddingTop"))||0;offset=item.offset().top-this.activeMenu.offset().top-borderTop-paddingTop;scroll=this.activeMenu.scrollTop();elementHeight=this.activeMenu.height();itemHeight=item.height();if(offset<0){this.activeMenu.scrollTop(scroll+offset);}else{if(offset+itemHeight>elementHeight){this.activeMenu.scrollTop(scroll+offset-elementHeight+itemHeight);}}}},blur:function(event,fromFocus){if(!fromFocus){clearTimeout(this.timer);}if(!this.active){return;}this.active.children("a").removeClass("ui-state-focus");this.active=null;this._trigger("blur",event,{item:this.active});},_startOpening:function(submenu){clearTimeout(this.timer);if(submenu.attr("aria-hidden")!=="true"){return;}this.timer=this._delay(function(){this._close();this._open(submenu);},this.delay);},_open:function(submenu){var position=$.extend({of:this.active},this.options.position);clearTimeout(this.timer);this.element.find(".ui-menu").not(submenu.parents(".ui-menu")).hide().attr("aria-hidden","true");submenu.show().removeAttr("aria-hidden").attr("aria-expanded","true").position(position);},collapseAll:function(event,all){clearTimeout(this.timer);this.timer=this._delay(function(){var currentMenu=all?this.element:$(event&&event.target).closest(this.element.find(".ui-menu"));if(!currentMenu.length){currentMenu=this.element;}this._close(currentMenu);this.blur(event);this.activeMenu=currentMenu;},this.delay);},_close:function(startMenu){if(!startMenu){startMenu=this.active?this.active.parent():this.element;}startMenu.find(".ui-menu").hide().attr("aria-hidden","true").attr("aria-expanded","false").end().find("a.ui-state-active").removeClass("ui-state-active");},collapse:function(event){var newItem=this.active&&this.active.parent().closest(".ui-menu-item",this.element);if(newItem&&newItem.length){this._close();this.focus(event,newItem);}},expand:function(event){var newItem=this.active&&this.active.children(".ui-menu ").children(".ui-menu-item").first();if(newItem&&newItem.length){this._open(newItem.parent());this._delay(function(){this.focus(event,newItem);});}},next:function(event){this._move("next","first",event);},previous:function(event){this._move("prev","last",event);},isFirstItem:function(){return this.active&&!this.active.prevAll(".ui-menu-item").length;},isLastItem:function(){return this.active&&!this.active.nextAll(".ui-menu-item").length;},_move:function(direction,filter,event){var next;if(this.active){if(direction==="first"||direction==="last"){next=this.active[direction==="first"?"prevAll":"nextAll"](".ui-menu-item").eq(-1);}else{next=this.active[direction+"All"](".ui-menu-item").eq(0);}}if(!next||!next.length||!this.active){next=this.activeMenu.children(".ui-menu-item")[filter]();}this.focus(event,next);},nextPage:function(event){var item,base,height;if(!this.active){this.next(event);return;}if(this.isLastItem()){return;}if(this._hasScroll()){base=this.active.offset().top;height=this.element.height();this.active.nextAll(".ui-menu-item").each(function(){item=$(this);return item.offset().top-base-height<0;});this.focus(event,item);}else{this.focus(event,this.activeMenu.children(".ui-menu-item")[!this.active?"first":"last"]());}},previousPage:function(event){var item,base,height;if(!this.active){this.next(event);return;}if(this.isFirstItem()){return;}if(this._hasScroll()){base=this.active.offset().top;height=this.element.height();this.active.prevAll(".ui-menu-item").each(function(){item=$(this);return item.offset().top-base+height>0;});this.focus(event,item);}else{this.focus(event,this.activeMenu.children(".ui-menu-item").first());}},_hasScroll:function(){return this.element.outerHeight()<this.element.prop("scrollHeight");},select:function(event){this.active=this.active||$(event.target).closest(".ui-menu-item");var ui={item:this.active};if(!this.active.has(".ui-menu").length){this.collapseAll(event,true);}this._trigger("select",event,ui);}});}(jquery));(function($,undefined){$.ui=$.ui||{};var cachedScrollbarWidth,max=Math.max,abs=Math.abs,round=Math.round,rhorizontal=/left|center|right/,rvertical=/top|center|bottom/,roffset=/[\+\-]\d+%?/,rposition=/^\w+/,rpercent=/%$/,_position=$.fn.position;function getOffsets(offsets,width,height){return[parseInt(offsets[0],10)*(rpercent.test(offsets[0])?width/100:1),parseInt(offsets[1],10)*(rpercent.test(offsets[1])?height/100:1)];}function parseCss(element,property){return parseInt($.css(element,property),10)||0;}$.position={scrollbarWidth:function(){if(cachedScrollbarWidth!==undefined){return cachedScrollbarWidth;}var w1,w2,div=$("<div style='display:block;width:50px;height:50px;overflow:hidden;'><div style='height:100px;width:auto;'></div></div>"),innerDiv=div.children()[0];$("body").append(div);w1=innerDiv.offsetWidth;div.css("overflow","scroll");w2=innerDiv.offsetWidth;if(w1===w2){w2=div[0].clientWidth;}div.remove();return(cachedScrollbarWidth=w1-w2);},getScrollInfo:function(within){var overflowX=within.isWindow?"":within.element.css("overflow-x"),overflowY=within.isWindow?"":within.element.css("overflow-y"),hasOverflowX=overflowX==="scroll"||(overflowX==="auto"&&within.width<within.element[0].scrollWidth),hasOverflowY=overflowY==="scroll"||(overflowY==="auto"&&within.height<within.element[0].scrollHeight);return{width:hasOverflowX?$.position.scrollbarWidth():0,height:hasOverflowY?$.position.scrollbarWidth():0};},getWithinInfo:function(element){var withinElement=$(element||window),isWindow=$.isWindow(withinElement[0]);return{element:withinElement,isWindow:isWindow,offset:withinElement.offset()||{left:0,top:0},scrollLeft:withinElement.scrollLeft(),scrollTop:withinElement.scrollTop(),width:isWindow?withinElement.width():withinElement.outerWidth(),height:isWindow?withinElement.height():withinElement.outerHeight()};}};$.fn.position=function(options){if(!options||!options.of){return _position.apply(this,arguments);}options=$.extend({},options);var atOffset,targetWidth,targetHeight,targetOffset,basePosition,target=$(options.of),within=$.position.getWithinInfo(options.within),scrollInfo=$.position.getScrollInfo(within),targetElem=target[0],collision=(options.collision||"flip").split(" "),offsets={};if(targetElem.nodeType===9){targetWidth=target.width();targetHeight=target.height();targetOffset={top:0,left:0};}else{if($.isWindow(targetElem)){targetWidth=target.width();targetHeight=target.height();targetOffset={top:target.scrollTop(),left:target.scrollLeft()};}else{if(targetElem.preventDefault){options.at="left top";targetWidth=targetHeight=0;targetOffset={top:targetElem.pageY,left:targetElem.pageX};}else{targetWidth=target.outerWidth();targetHeight=target.outerHeight();targetOffset=target.offset();}}}basePosition=$.extend({},targetOffset);$.each(["my","at"],function(){var pos=(options[this]||"").split(" "),horizontalOffset,verticalOffset;if(pos.length===1){pos=rhorizontal.test(pos[0])?pos.concat(["center"]):rvertical.test(pos[0])?["center"].concat(pos):["center","center"];}pos[0]=rhorizontal.test(pos[0])?pos[0]:"center";pos[1]=rvertical.test(pos[1])?pos[1]:"center";horizontalOffset=roffset.exec(pos[0]);verticalOffset=roffset.exec(pos[1]);offsets[this]=[horizontalOffset?horizontalOffset[0]:0,verticalOffset?verticalOffset[0]:0];options[this]=[rposition.exec(pos[0])[0],rposition.exec(pos[1])[0]];});if(collision.length===1){collision[1]=collision[0];}if(options.at[0]==="right"){basePosition.left+=targetWidth;}else{if(options.at[0]==="center"){basePosition.left+=targetWidth/2;}}if(options.at[1]==="bottom"){basePosition.top+=targetHeight;}else{if(options.at[1]==="center"){basePosition.top+=targetHeight/2;}}atOffset=getOffsets(offsets.at,targetWidth,targetHeight);basePosition.left+=atOffset[0];basePosition.top+=atOffset[1];return this.each(function(){var collisionPosition,using,elem=$(this),elemWidth=elem.outerWidth(),elemHeight=elem.outerHeight(),marginLeft=parseCss(this,"marginLeft"),marginTop=parseCss(this,"marginTop"),collisionWidth=elemWidth+marginLeft+parseCss(this,"marginRight")+scrollInfo.width,collisionHeight=elemHeight+marginTop+parseCss(this,"marginBottom")+scrollInfo.height,position=$.extend({},basePosition),myOffset=getOffsets(offsets.my,elem.outerWidth(),elem.outerHeight());if(options.my[0]==="right"){position.left-=elemWidth;}else{if(options.my[0]==="center"){position.left-=elemWidth/2;}}if(options.my[1]==="bottom"){position.top-=elemHeight;}else{if(options.my[1]==="center"){position.top-=elemHeight/2;}}position.left+=myOffset[0];position.top+=myOffset[1];if(!$.support.offsetFractions){position.left=round(position.left);position.top=round(position.top);}collisionPosition={marginLeft:marginLeft,marginTop:marginTop};$.each(["left","top"],function(i,dir){if($.ui.position[collision[i]]){$.ui.position[collision[i]][dir](position,{targetWidth:targetWidth,targetHeight:targetHeight,elemWidth:elemWidth,elemHeight:elemHeight,collisionPosition:collisionPosition,collisionWidth:collisionWidth,collisionHeight:collisionHeight,offset:[atOffset[0]+myOffset[0],atOffset[1]+myOffset[1]],my:options.my,at:options.at,within:within,elem:elem});}});if($.fn.bgiframe){elem.bgiframe();}if(options.using){using=function(props){var left=targetOffset.left-position.left,right=left+targetWidth-elemWidth,top=targetOffset.top-position.top,bottom=top+targetHeight-elemHeight,feedback={target:{element:target,left:targetOffset.left,top:targetOffset.top,width:targetWidth,height:targetHeight},element:{element:elem,left:position.left,top:position.top,width:elemWidth,height:elemHeight},horizontal:right<0?"left":left>0?"right":"center",vertical:bottom<0?"top":top>0?"bottom":"middle"};if(targetWidth<elemWidth&&abs(left+right)<targetWidth){feedback.horizontal="center";}if(targetHeight<elemHeight&&abs(top+bottom)<targetHeight){feedback.vertical="middle";}if(max(abs(left),abs(right))>max(abs(top),abs(bottom))){feedback.important="horizontal";}else{feedback.important="vertical";}options.using.call(this,props,feedback);};}elem.offset($.extend(position,{using:using}));});};$.ui.position={fit:{left:function(position,data){var within=data.within,withinOffset=within.isWindow?within.scrollLeft:within.offset.left,outerWidth=within.width,collisionPosLeft=position.left-data.collisionPosition.marginLeft,overLeft=withinOffset-collisionPosLeft,overRight=collisionPosLeft+data.collisionWidth-outerWidth-withinOffset,newOverRight;if(data.collisionWidth>outerWidth){if(overLeft>0&&overRight<=0){newOverRight=position.left+overLeft+data.collisionWidth-outerWidth-withinOffset;position.left+=overLeft-newOverRight;}else{if(overRight>0&&overLeft<=0){position.left=withinOffset;}else{if(overLeft>overRight){position.left=withinOffset+outerWidth-data.collisionWidth;}else{position.left=withinOffset;}}}}else{if(overLeft>0){position.left+=overLeft;}else{if(overRight>0){position.left-=overRight;}else{position.left=max(position.left-collisionPosLeft,position.left);}}}},top:function(position,data){var within=data.within,withinOffset=within.isWindow?within.scrollTop:within.offset.top,outerHeight=data.within.height,collisionPosTop=position.top-data.collisionPosition.marginTop,overTop=withinOffset-collisionPosTop,overBottom=collisionPosTop+data.collisionHeight-outerHeight-withinOffset,newOverBottom;if(data.collisionHeight>outerHeight){if(overTop>0&&overBottom<=0){newOverBottom=position.top+overTop+data.collisionHeight-outerHeight-withinOffset;position.top+=overTop-newOverBottom;}else{if(overBottom>0&&overTop<=0){position.top=withinOffset;}else{if(overTop>overBottom){position.top=withinOffset+outerHeight-data.collisionHeight;}else{position.top=withinOffset;}}}}else{if(overTop>0){position.top+=overTop;}else{if(overBottom>0){position.top-=overBottom;}else{position.top=max(position.top-collisionPosTop,position.top);}}}}},flip:{left:function(position,data){var within=data.within,withinOffset=within.offset.left+within.scrollLeft,outerWidth=within.width,offsetLeft=within.isWindow?within.scrollLeft:within.offset.left,collisionPosLeft=position.left-data.collisionPosition.marginLeft,overLeft=collisionPosLeft-offsetLeft,overRight=collisionPosLeft+data.collisionWidth-outerWidth-offsetLeft,myOffset=data.my[0]==="left"?-data.elemWidth:data.my[0]==="right"?data.elemWidth:0,atOffset=data.at[0]==="left"?data.targetWidth:data.at[0]==="right"?-data.targetWidth:0,offset=-2*data.offset[0],newOverRight,newOverLeft;if(overLeft<0){newOverRight=position.left+myOffset+atOffset+offset+data.collisionWidth-outerWidth-withinOffset;if(newOverRight<0||newOverRight<abs(overLeft)){position.left+=myOffset+atOffset+offset;}}else{if(overRight>0){newOverLeft=position.left-data.collisionPosition.marginLeft+myOffset+atOffset+offset-offsetLeft;if(newOverLeft>0||abs(newOverLeft)<overRight){position.left+=myOffset+atOffset+offset;}}}},top:function(position,data){var within=data.within,withinOffset=within.offset.top+within.scrollTop,outerHeight=within.height,offsetTop=within.isWindow?within.scrollTop:within.offset.top,collisionPosTop=position.top-data.collisionPosition.marginTop,overTop=collisionPosTop-offsetTop,overBottom=collisionPosTop+data.collisionHeight-outerHeight-offsetTop,top=data.my[1]==="top",myOffset=top?-data.elemHeight:data.my[1]==="bottom"?data.elemHeight:0,atOffset=data.at[1]==="top"?data.targetHeight:data.at[1]==="bottom"?-data.targetHeight:0,offset=-2*data.offset[1],newOverTop,newOverBottom;if(overTop<0){newOverBottom=position.top+myOffset+atOffset+offset+data.collisionHeight-outerHeight-withinOffset;if((position.top+myOffset+atOffset+offset)>overTop&&(newOverBottom<0||newOverBottom<abs(overTop))){position.top+=myOffset+atOffset+offset;}}else{if(overBottom>0){newOverTop=position.top-data.collisionPosition.marginTop+myOffset+atOffset+offset-offsetTop;if((position.top+myOffset+atOffset+offset)>overBottom&&(newOverTop>0||abs(newOverTop)<overBottom)){position.top+=myOffset+atOffset+offset;}}}}},flipfit:{left:function(){$.ui.position.flip.left.apply(this,arguments);$.ui.position.fit.left.apply(this,arguments);},top:function(){$.ui.position.flip.top.apply(this,arguments);$.ui.position.fit.top.apply(this,arguments);}}};(function(){var testElement,testElementParent,testElementStyle,offsetLeft,i,body=document.getElementsByTagName("body")[0],div=document.createElement("div");testElement=document.createElement(body?"div":"body");testElementStyle={visibility:"hidden",width:0,height:0,border:0,margin:0,background:"none"};if(body){$.extend(testElementStyle,{position:"absolute",left:"-1000px",top:"-1000px"});}for(i in testElementStyle){testElement.style[i]=testElementStyle[i];}testElement.appendChild(div);testElementParent=body||document.documentElement;testElementParent.insertBefore(testElement,testElementParent.firstChild);div.style.cssText="position: absolute; left: 10.7432222px;";offsetLeft=$(div).offset().left;$.support.offsetFractions=offsetLeft>10&&offsetLeft<11;testElement.innerHTML="";testElementParent.removeChild(testElement);})();if($.uiBackCompat!==false){(function($){var _position=$.fn.position;$.fn.position=function(options){if(!options||!options.offset){return _position.call(this,options);}var offset=options.offset.split(" "),at=options.at.split(" ");if(offset.length===1){offset[1]=offset[0];}if(/^\d/.test(offset[0])){offset[0]="+"+offset[0];}if(/^\d/.test(offset[1])){offset[1]="+"+offset[1];}if(at.length===1){if(/left|center|right/.test(at[0])){at[1]="center";}else{at[1]=at[0];at[0]="center";}}return _position.call(this,$.extend(options,{at:at[0]+offset[0]+" "+at[1]+offset[1],offset:undefined}));};}(jquery));}}(jquery));(function($,undefined){$.widget("ui.progressbar",{version:"1.9.0",options:{value:0,max:100},min:0,_create:function(){this.element.addClass("ui-progressbar ui-widget ui-widget-content ui-corner-all").attr({role:"progressbar","aria-valuemin":this.min,"aria-valuemax":this.options.max,"aria-valuenow":this._value()});this.valueDiv=$("<div class='ui-progressbar-value ui-widget-header ui-corner-left'></div>").appendTo(this.element);this.oldValue=this._value();this._refreshValue();},_destroy:function(){this.element.removeClass("ui-progressbar ui-widget ui-widget-content ui-corner-all").removeAttr("role").removeAttr("aria-valuemin").removeAttr("aria-valuemax").removeAttr("aria-valuenow");this.valueDiv.remove();},value:function(newValue){if(newValue===undefined){return this._value();}this._setOption("value",newValue);return this;},_setOption:function(key,value){if(key==="value"){this.options.value=value;this._refreshValue();if(this._value()===this.options.max){this._trigger("complete");}}this._super(key,value);},_value:function(){var val=this.options.value;if(typeof val!=="number"){val=0;}return Math.min(this.options.max,Math.max(this.min,val));},_percentage:function(){return 100*this._value()/this.options.max;},_refreshValue:function(){var value=this.value(),percentage=this._percentage();if(this.oldValue!==value){this.oldValue=value;this._trigger("change");}this.valueDiv.toggle(value>this.min).toggleClass("ui-corner-right",value===this.options.max).width(percentage.toFixed(0)+"%");this.element.attr("aria-valuenow",value);}});})(jquery);(function($,undefined){var numPages=5;$.widget("ui.slider",$.ui.mouse,{version:"1.9.0",widgetEventPrefix:"slide",options:{animate:false,distance:0,max:100,min:0,orientation:"horizontal",range:false,step:1,value:0,values:null},_create:function(){var i,o=this.options,existingHandles=this.element.find(".ui-slider-handle").addClass("ui-state-default ui-corner-all"),handle="<a class='ui-slider-handle ui-state-default ui-corner-all' href='#'></a>",handleCount=(o.values&&o.values.length)||1,handles=[];this._keySliding=false;this._mouseSliding=false;this._animateOff=true;this._handleIndex=null;this._detectOrientation();this._mouseInit();this.element.addClass("ui-slider ui-slider-"+this.orientation+" ui-widget ui-widget-content ui-corner-all"+(o.disabled?" ui-slider-disabled ui-disabled":""));this.range=$([]);if(o.range){if(o.range===true){if(!o.values){o.values=[this._valueMin(),this._valueMin()];}if(o.values.length&&o.values.length!==2){o.values=[o.values[0],o.values[0]];}}this.range=$("<div></div>").appendTo(this.element).addClass("ui-slider-range ui-widget-header"+((o.range==="min"||o.range==="max")?" ui-slider-range-"+o.range:""));}for(i=existingHandles.length;i<handleCount;i++){handles.push(handle);}this.handles=existingHandles.add($(handles.join("")).appendTo(this.element));this.handle=this.handles.eq(0);this.handles.add(this.range).filter("a").click(function(event){event.preventDefault();}).mouseenter(function(){if(!o.disabled){$(this).addClass("ui-state-hover");}}).mouseleave(function(){$(this).removeClass("ui-state-hover");}).focus(function(){if(!o.disabled){$(".ui-slider .ui-state-focus").removeClass("ui-state-focus");$(this).addClass("ui-state-focus");}else{$(this).blur();}}).blur(function(){$(this).removeClass("ui-state-focus");});this.handles.each(function(i){$(this).data("ui-slider-handle-index",i);});this._on(this.handles,{keydown:function(event){var allowed,curVal,newVal,step,index=$(event.target).data("ui-slider-handle-index");switch(event.keyCode){case $.ui.keyCode.HOME:case $.ui.keyCode.END:case $.ui.keyCode.PAGE_UP:case $.ui.keyCode.PAGE_DOWN:case $.ui.keyCode.UP:case $.ui.keyCode.RIGHT:case $.ui.keyCode.DOWN:case $.ui.keyCode.LEFT:event.preventDefault();if(!this._keySliding){this._keySliding=true;$(event.target).addClass("ui-state-active");allowed=this._start(event,index);if(allowed===false){return;}}break;}step=this.options.step;if(this.options.values&&this.options.values.length){curVal=newVal=this.values(index);}else{curVal=newVal=this.value();}switch(event.keyCode){case $.ui.keyCode.HOME:newVal=this._valueMin();break;case $.ui.keyCode.END:newVal=this._valueMax();break;case $.ui.keyCode.PAGE_UP:newVal=this._trimAlignValue(curVal+((this._valueMax()-this._valueMin())/numPages));break;case $.ui.keyCode.PAGE_DOWN:newVal=this._trimAlignValue(curVal-((this._valueMax()-this._valueMin())/numPages));break;case $.ui.keyCode.UP:case $.ui.keyCode.RIGHT:if(curVal===this._valueMax()){return;}newVal=this._trimAlignValue(curVal+step);break;case $.ui.keyCode.DOWN:case $.ui.keyCode.LEFT:if(curVal===this._valueMin()){return;}newVal=this._trimAlignValue(curVal-step);break;}this._slide(event,index,newVal);},keyup:function(event){var index=$(event.target).data("ui-slider-handle-index");if(this._keySliding){this._keySliding=false;this._stop(event,index);this._change(event,index);$(event.target).removeClass("ui-state-active");}}});this._refreshValue();this._animateOff=false;},_destroy:function(){this.handles.remove();this.range.remove();this.element.removeClass("ui-slider ui-slider-horizontal ui-slider-vertical ui-slider-disabled ui-widget ui-widget-content ui-corner-all");this._mouseDestroy();},_mouseCapture:function(event){var position,normValue,distance,closestHandle,index,allowed,offset,mouseOverHandle,that=this,o=this.options;if(o.disabled){return false;}this.elementSize={width:this.element.outerWidth(),height:this.element.outerHeight()};this.elementOffset=this.element.offset();position={x:event.pageX,y:event.pageY};normValue=this._normValueFromMouse(position);distance=this._valueMax()-this._valueMin()+1;this.handles.each(function(i){var thisDistance=Math.abs(normValue-that.values(i));if(distance>thisDistance){distance=thisDistance;closestHandle=$(this);index=i;}});if(o.range===true&&this.values(1)===o.min){index+=1;closestHandle=$(this.handles[index]);}allowed=this._start(event,index);if(allowed===false){return false;}this._mouseSliding=true;this._handleIndex=index;closestHandle.addClass("ui-state-active").focus();offset=closestHandle.offset();mouseOverHandle=!$(event.target).parents().andSelf().is(".ui-slider-handle");this._clickOffset=mouseOverHandle?{left:0,top:0}:{left:event.pageX-offset.left-(closestHandle.width()/2),top:event.pageY-offset.top-(closestHandle.height()/2)-(parseInt(closestHandle.css("borderTopWidth"),10)||0)-(parseInt(closestHandle.css("borderBottomWidth"),10)||0)+(parseInt(closestHandle.css("marginTop"),10)||0)};if(!this.handles.hasClass("ui-state-hover")){this._slide(event,index,normValue);}this._animateOff=true;return true;},_mouseStart:function(event){return true;},_mouseDrag:function(event){var position={x:event.pageX,y:event.pageY},normValue=this._normValueFromMouse(position);this._slide(event,this._handleIndex,normValue);return false;},_mouseStop:function(event){this.handles.removeClass("ui-state-active");this._mouseSliding=false;this._stop(event,this._handleIndex);this._change(event,this._handleIndex);this._handleIndex=null;this._clickOffset=null;this._animateOff=false;return false;},_detectOrientation:function(){this.orientation=(this.options.orientation==="vertical")?"vertical":"horizontal";},_normValueFromMouse:function(position){var pixelTotal,pixelMouse,percentMouse,valueTotal,valueMouse;if(this.orientation==="horizontal"){pixelTotal=this.elementSize.width;pixelMouse=position.x-this.elementOffset.left-(this._clickOffset?this._clickOffset.left:0);}else{pixelTotal=this.elementSize.height;pixelMouse=position.y-this.elementOffset.top-(this._clickOffset?this._clickOffset.top:0);}percentMouse=(pixelMouse/pixelTotal);if(percentMouse>1){percentMouse=1;}if(percentMouse<0){percentMouse=0;}if(this.orientation==="vertical"){percentMouse=1-percentMouse;}valueTotal=this._valueMax()-this._valueMin();valueMouse=this._valueMin()+percentMouse*valueTotal;return this._trimAlignValue(valueMouse);},_start:function(event,index){var uiHash={handle:this.handles[index],value:this.value()};if(this.options.values&&this.options.values.length){uiHash.value=this.values(index);uiHash.values=this.values();}return this._trigger("start",event,uiHash);},_slide:function(event,index,newVal){var otherVal,newValues,allowed;if(this.options.values&&this.options.values.length){otherVal=this.values(index?0:1);if((this.options.values.length===2&&this.options.range===true)&&((index===0&&newVal>otherVal)||(index===1&&newVal<otherVal))){newVal=otherVal;}if(newVal!==this.values(index)){newValues=this.values();newValues[index]=newVal;allowed=this._trigger("slide",event,{handle:this.handles[index],value:newVal,values:newValues});otherVal=this.values(index?0:1);if(allowed!==false){this.values(index,newVal,true);}}}else{if(newVal!==this.value()){allowed=this._trigger("slide",event,{handle:this.handles[index],value:newVal});if(allowed!==false){this.value(newVal);}}}},_stop:function(event,index){var uiHash={handle:this.handles[index],value:this.value()};if(this.options.values&&this.options.values.length){uiHash.value=this.values(index);uiHash.values=this.values();}this._trigger("stop",event,uiHash);},_change:function(event,index){if(!this._keySliding&&!this._mouseSliding){var uiHash={handle:this.handles[index],value:this.value()};if(this.options.values&&this.options.values.length){uiHash.value=this.values(index);uiHash.values=this.values();}this._trigger("change",event,uiHash);}},value:function(newValue){if(arguments.length){this.options.value=this._trimAlignValue(newValue);this._refreshValue();this._change(null,0);return;}return this._value();},values:function(index,newValue){var vals,newValues,i;if(arguments.length>1){this.options.values[index]=this._trimAlignValue(newValue);this._refreshValue();this._change(null,index);return;}if(arguments.length){if($.isArray(arguments[0])){vals=this.options.values;newValues=arguments[0];for(i=0;i<vals.length;i+=1){vals[i]=this._trimAlignValue(newValues[i]);this._change(null,i);}this._refreshValue();}else{if(this.options.values&&this.options.values.length){return this._values(index);}else{return this.value();}}}else{return this._values();}},_setOption:function(key,value){var i,valsLength=0;if($.isArray(this.options.values)){valsLength=this.options.values.length;}$.Widget.prototype._setOption.apply(this,arguments);switch(key){case"disabled":if(value){this.handles.filter(".ui-state-focus").blur();this.handles.removeClass("ui-state-hover");this.handles.prop("disabled",true);this.element.addClass("ui-disabled");}else{this.handles.prop("disabled",false);this.element.removeClass("ui-disabled");}break;case"orientation":this._detectOrientation();this.element.removeClass("ui-slider-horizontal ui-slider-vertical").addClass("ui-slider-"+this.orientation);this._refreshValue();break;case"value":this._animateOff=true;this._refreshValue();this._change(null,0);this._animateOff=false;break;case"values":this._animateOff=true;this._refreshValue();for(i=0;i<valsLength;i+=1){this._change(null,i);}this._animateOff=false;break;}},_value:function(){var val=this.options.value;val=this._trimAlignValue(val);return val;},_values:function(index){var val,vals,i;if(arguments.length){val=this.options.values[index];val=this._trimAlignValue(val);return val;}else{vals=this.options.values.slice();for(i=0;i<vals.length;i+=1){vals[i]=this._trimAlignValue(vals[i]);}return vals;}},_trimAlignValue:function(val){if(val<=this._valueMin()){return this._valueMin();}if(val>=this._valueMax()){return this._valueMax();}var step=(this.options.step>0)?this.options.step:1,valModStep=(val-this._valueMin())%step,alignValue=val-valModStep;if(Math.abs(valModStep)*2>=step){alignValue+=(valModStep>0)?step:(-step);}return parseFloat(alignValue.toFixed(5));},_valueMin:function(){return this.options.min;},_valueMax:function(){return this.options.max;},_refreshValue:function(){var lastValPercent,valPercent,value,valueMin,valueMax,oRange=this.options.range,o=this.options,that=this,animate=(!this._animateOff)?o.animate:false,_set={};if(this.options.values&&this.options.values.length){this.handles.each(function(i,j){valPercent=(that.values(i)-that._valueMin())/(that._valueMax()-that._valueMin())*100;_set[that.orientation==="horizontal"?"left":"bottom"]=valPercent+"%";$(this).stop(1,1)[animate?"animate":"css"](_set,o.animate);if(that.options.range===true){if(that.orientation==="horizontal"){if(i===0){that.range.stop(1,1)[animate?"animate":"css"]({left:valPercent+"%"},o.animate);}if(i===1){that.range[animate?"animate":"css"]({width:(valPercent-lastValPercent)+"%"},{queue:false,duration:o.animate});}}else{if(i===0){that.range.stop(1,1)[animate?"animate":"css"]({bottom:(valPercent)+"%"},o.animate);}if(i===1){that.range[animate?"animate":"css"]({height:(valPercent-lastValPercent)+"%"},{queue:false,duration:o.animate});}}}lastValPercent=valPercent;});}else{value=this.value();valueMin=this._valueMin();valueMax=this._valueMax();valPercent=(valueMax!==valueMin)?(value-valueMin)/(valueMax-valueMin)*100:0;_set[this.orientation==="horizontal"?"left":"bottom"]=valPercent+"%";this.handle.stop(1,1)[animate?"animate":"css"](_set,o.animate);if(oRange==="min"&&this.orientation==="horizontal"){this.range.stop(1,1)[animate?"animate":"css"]({width:valPercent+"%"},o.animate);}if(oRange==="max"&&this.orientation==="horizontal"){this.range[animate?"animate":"css"]({width:(100-valPercent)+"%"},{queue:false,duration:o.animate});}if(oRange==="min"&&this.orientation==="vertical"){this.range.stop(1,1)[animate?"animate":"css"]({height:valPercent+"%"},o.animate);}if(oRange==="max"&&this.orientation==="vertical"){this.range[animate?"animate":"css"]({height:(100-valPercent)+"%"},{queue:false,duration:o.animate});}}}});}(jquery));(function($){function modifier(fn){return function(){var previous=this.element.val();fn.apply(this,arguments);this._refresh();if(previous!==this.element.val()){this._trigger("change");}};}$.widget("ui.spinner",{version:"1.9.0",defaultElement:"<input>",widgetEventPrefix:"spin",options:{culture:null,icons:{down:"ui-icon-triangle-1-s",up:"ui-icon-triangle-1-n"},incremental:true,max:null,min:null,numberFormat:null,page:10,step:1,change:null,spin:null,start:null,stop:null},_create:function(){this._setOption("max",this.options.max);this._setOption("min",this.options.min);this._setOption("step",this.options.step);this._value(this.element.val(),true);this._draw();this._on(this._events);this._refresh();this._on(this.window,{beforeunload:function(){this.element.removeAttr("autocomplete");}});},_getCreateOptions:function(){var options={},element=this.element;$.each(["min","max","step"],function(i,option){var value=element.attr(option);if(value!==undefined&&value.length){options[option]=value;}});return options;},_events:{keydown:function(event){if(this._start(event)&&this._keydown(event)){event.preventDefault();}},keyup:"_stop",focus:function(){this.uiSpinner.addClass("ui-state-active");this.previous=this.element.val();},blur:function(event){if(this.cancelBlur){delete this.cancelBlur;return;}this._refresh();this.uiSpinner.removeClass("ui-state-active");if(this.previous!==this.element.val()){this._trigger("change",event);}},mousewheel:function(event,delta){if(!delta){return;}if(!this.spinning&&!this._start(event)){return false;}this._spin((delta>0?1:-1)*this.options.step,event);clearTimeout(this.mousewheelTimer);this.mousewheelTimer=this._delay(function(){if(this.spinning){this._stop(event);}},100);event.preventDefault();},"mousedown .ui-spinner-button":function(event){var previous;previous=this.element[0]===this.document[0].activeElement?this.previous:this.element.val();function checkFocus(){var isActive=this.element[0]===this.document[0].activeElement;if(!isActive){this.element.focus();this.previous=previous;this._delay(function(){this.previous=previous;});}}event.preventDefault();checkFocus.call(this);this.cancelBlur=true;this._delay(function(){delete this.cancelBlur;checkFocus.call(this);});if(this._start(event)===false){return;}this._repeat(null,$(event.currentTarget).hasClass("ui-spinner-up")?1:-1,event);},"mouseup .ui-spinner-button":"_stop","mouseenter .ui-spinner-button":function(event){if(!$(event.currentTarget).hasClass("ui-state-active")){return;}if(this._start(event)===false){return false;}this._repeat(null,$(event.currentTarget).hasClass("ui-spinner-up")?1:-1,event);},"mouseleave .ui-spinner-button":"_stop"},_draw:function(){var uiSpinner=this.uiSpinner=this.element.addClass("ui-spinner-input").attr("autocomplete","off").wrap(this._uiSpinnerHtml()).parent().append(this._buttonHtml());this._hoverable(uiSpinner);this.element.attr("role","spinbutton");this.buttons=uiSpinner.find(".ui-spinner-button").attr("tabIndex",-1).button().removeClass("ui-corner-all");if(this.buttons.height()>Math.ceil(uiSpinner.height()*0.5)&&uiSpinner.height()>0){uiSpinner.height(uiSpinner.height());}if(this.options.disabled){this.disable();}},_keydown:function(event){var options=this.options,keyCode=$.ui.keyCode;switch(event.keyCode){case keyCode.UP:this._repeat(null,1,event);return true;case keyCode.DOWN:this._repeat(null,-1,event);return true;case keyCode.PAGE_UP:this._repeat(null,options.page,event);return true;case keyCode.PAGE_DOWN:this._repeat(null,-options.page,event);return true;}return false;},_uiSpinnerHtml:function(){return"<span class='ui-spinner ui-state-default ui-widget ui-widget-content ui-corner-all'></span>";},_buttonHtml:function(){return"<a class='ui-spinner-button ui-spinner-up ui-corner-tr'><span class='ui-icon "+this.options.icons.up+"'>&#9650;</span></a><a class='ui-spinner-button ui-spinner-down ui-corner-br'><span class='ui-icon "+this.options.icons.down+"'>&#9660;</span></a>";},_start:function(event){if(!this.spinning&&this._trigger("start",event)===false){return false;}if(!this.counter){this.counter=1;}this.spinning=true;return true;},_repeat:function(i,steps,event){i=i||500;clearTimeout(this.timer);this.timer=this._delay(function(){this._repeat(40,steps,event);},i);this._spin(steps*this.options.step,event);},_spin:function(step,event){var value=this.value()||0;if(!this.counter){this.counter=1;}value=this._adjustValue(value+step*this._increment(this.counter));if(!this.spinning||this._trigger("spin",event,{value:value})!==false){this._value(value);this.counter++;}},_increment:function(i){var incremental=this.options.incremental;if(incremental){return $.isFunction(incremental)?incremental(i):Math.floor(i*i*i/50000-i*i/500+17*i/200+1);}return 1;},_precision:function(){var precision=this._precisionOf(this.options.step);if(this.options.min!==null){precision=Math.max(precision,this._precisionOf(this.options.min));}return precision;},_precisionOf:function(num){var str=num.toString(),decimal=str.indexOf(".");return decimal===-1?0:str.length-decimal-1;},_adjustValue:function(value){var base,aboveMin,options=this.options;base=options.min!==null?options.min:0;aboveMin=value-base;aboveMin=Math.round(aboveMin/options.step)*options.step;value=base+aboveMin;value=parseFloat(value.toFixed(this._precision()));if(options.max!==null&&value>options.max){return options.max;}if(options.min!==null&&value<options.min){return options.min;}return value;},_stop:function(event){if(!this.spinning){return;}clearTimeout(this.timer);clearTimeout(this.mousewheelTimer);this.counter=0;this.spinning=false;this._trigger("stop",event);},_setOption:function(key,value){if(key==="culture"||key==="numberFormat"){var prevValue=this._parse(this.element.val());this.options[key]=value;this.element.val(this._format(prevValue));return;}if(key==="max"||key==="min"||key==="step"){if(typeof value==="string"){value=this._parse(value);}}this._super(key,value);if(key==="disabled"){if(value){this.element.prop("disabled",true);this.buttons.button("disable");}else{this.element.prop("disabled",false);this.buttons.button("enable");}}},_setOptions:modifier(function(options){this._super(options);this._value(this.element.val());}),_parse:function(val){if(typeof val==="string"&&val!==""){val=window.Globalize&&this.options.numberFormat?Globalize.parseFloat(val,10,this.options.culture):+val;}return val===""||isNaN(val)?null:val;},_format:function(value){if(value===""){return"";}return window.Globalize&&this.options.numberFormat?Globalize.format(value,this.options.numberFormat,this.options.culture):value;},_refresh:function(){this.element.attr({"aria-valuemin":this.options.min,"aria-valuemax":this.options.max,"aria-valuenow":this._parse(this.element.val())});},_value:function(value,allowAny){var parsed;if(value!==""){parsed=this._parse(value);if(parsed!==null){if(!allowAny){parsed=this._adjustValue(parsed);}value=this._format(parsed);}}this.element.val(value);this._refresh();},_destroy:function(){this.element.removeClass("ui-spinner-input").prop("disabled",false).removeAttr("autocomplete").removeAttr("role").removeAttr("aria-valuemin").removeAttr("aria-valuemax").removeAttr("aria-valuenow");this.uiSpinner.replaceWith(this.element);},stepUp:modifier(function(steps){this._stepUp(steps);}),_stepUp:function(steps){this._spin((steps||1)*this.options.step);},stepDown:modifier(function(steps){this._stepDown(steps);}),_stepDown:function(steps){this._spin((steps||1)*-this.options.step);},pageUp:modifier(function(pages){this._stepUp((pages||1)*this.options.page);}),pageDown:modifier(function(pages){this._stepDown((pages||1)*this.options.page);}),value:function(newVal){if(!arguments.length){return this._parse(this.element.val());}modifier(this._value).call(this,newVal);},widget:function(){return this.uiSpinner;}});}(jquery));(function($,undefined){var tabId=0,rhash=/#.*$/;function getNextTabId(){return ++tabId;}function isLocal(anchor){anchor=anchor.cloneNode(false);return anchor.hash.length>1&&anchor.href.replace(rhash,"")===location.href.replace(rhash,"");}$.widget("ui.tabs",{version:"1.9.0",delay:300,options:{active:null,collapsible:false,event:"click",heightStyle:"content",hide:null,show:null,activate:null,beforeActivate:null,beforeLoad:null,load:null},_create:function(){var panel,that=this,options=this.options,active=options.active;this.running=false;this.element.addClass("ui-tabs ui-widget ui-widget-content ui-corner-all").toggleClass("ui-tabs-collapsible",options.collapsible).delegate(".ui-tabs-nav > li","mousedown"+this.eventNamespace,function(event){if($(this).is(".ui-state-disabled")){event.preventDefault();}}).delegate(".ui-tabs-anchor","focus"+this.eventNamespace,function(){if($(this).closest("li").is(".ui-state-disabled")){this.blur();}});this._processTabs();if(active===null){if(location.hash){this.anchors.each(function(i,anchor){if(anchor.hash===location.hash){active=i;return false;}});}if(active===null){active=this.tabs.filter(".ui-tabs-active").index();}if(active===null||active===-1){active=this.tabs.length?0:false;}}if(active!==false){active=this.tabs.index(this.tabs.eq(active));if(active===-1){active=options.collapsible?false:0;}}options.active=active;if(!options.collapsible&&options.active===false&&this.anchors.length){options.active=0;}if($.isArray(options.disabled)){options.disabled=$.unique(options.disabled.concat($.map(this.tabs.filter(".ui-state-disabled"),function(li){return that.tabs.index(li);}))).sort();}if(this.options.active!==false&&this.anchors.length){this.active=this._findActive(this.options.active);}else{this.active=$();}this._refresh();if(this.active.length){this.load(options.active);}},_getCreateEventData:function(){return{tab:this.active,panel:!this.active.length?$():this._getPanelForTab(this.active)};},_tabKeydown:function(event){var focusedTab=$(this.document[0].activeElement).closest("li"),selectedIndex=this.tabs.index(focusedTab),goingForward=true;if(this._handlePageNav(event)){return;}switch(event.keyCode){case $.ui.keyCode.RIGHT:case $.ui.keyCode.DOWN:selectedIndex++;break;case $.ui.keyCode.UP:case $.ui.keyCode.LEFT:goingForward=false;selectedIndex--;break;case $.ui.keyCode.END:selectedIndex=this.anchors.length-1;break;case $.ui.keyCode.HOME:selectedIndex=0;break;case $.ui.keyCode.SPACE:event.preventDefault();clearTimeout(this.activating);this._activate(selectedIndex);return;case $.ui.keyCode.ENTER:event.preventDefault();clearTimeout(this.activating);this._activate(selectedIndex===this.options.active?false:selectedIndex);return;default:return;}event.preventDefault();clearTimeout(this.activating);selectedIndex=this._focusNextTab(selectedIndex,goingForward);if(!event.ctrlKey){focusedTab.attr("aria-selected","false");this.tabs.eq(selectedIndex).attr("aria-selected","true");this.activating=this._delay(function(){this.option("active",selectedIndex);},this.delay);}},_panelKeydown:function(event){if(this._handlePageNav(event)){return;}if(event.ctrlKey&&event.keyCode===$.ui.keyCode.UP){event.preventDefault();this.active.focus();}},_handlePageNav:function(event){if(event.altKey&&event.keyCode===$.ui.keyCode.PAGE_UP){this._activate(this._focusNextTab(this.options.active-1,false));return true;}if(event.altKey&&event.keyCode===$.ui.keyCode.PAGE_DOWN){this._activate(this._focusNextTab(this.options.active+1,true));return true;}},_findNextTab:function(index,goingForward){var lastTabIndex=this.tabs.length-1;function constrain(){if(index>lastTabIndex){index=0;}if(index<0){index=lastTabIndex;}return index;}while($.inArray(constrain(),this.options.disabled)!==-1){index=goingForward?index+1:index-1;}return index;},_focusNextTab:function(index,goingForward){index=this._findNextTab(index,goingForward);this.tabs.eq(index).focus();return index;},_setOption:function(key,value){if(key==="active"){this._activate(value);return;}if(key==="disabled"){this._setupDisabled(value);return;}this._super(key,value);if(key==="collapsible"){this.element.toggleClass("ui-tabs-collapsible",value);if(!value&&this.options.active===false){this._activate(0);}}if(key==="event"){this._setupEvents(value);}if(key==="heightStyle"){this._setupHeightStyle(value);}},_tabId:function(tab){return tab.attr("aria-controls")||"ui-tabs-"+getNextTabId();},_sanitizeSelector:function(hash){return hash?hash.replace(/[!"$%&'()*+,.\/:;<=>?@\[\]\^`{|}~]/g,"\\$&"):"";},refresh:function(){var next,options=this.options,lis=this.tablist.children(":has(a[href])");options.disabled=$.map(lis.filter(".ui-state-disabled"),function(tab){return lis.index(tab);});this._processTabs();if(options.active===false||!this.anchors.length){options.active=false;this.active=$();}else{if(this.active.length&&!$.contains(this.tablist[0],this.active[0])){if(this.tabs.length===options.disabled.length){options.active=false;this.active=$();}else{this._activate(this._findNextTab(Math.max(0,options.active-1),false));}}else{options.active=this.tabs.index(this.active);}}this._refresh();},_refresh:function(){this._setupDisabled(this.options.disabled);this._setupEvents(this.options.event);this._setupHeightStyle(this.options.heightStyle);this.tabs.not(this.active).attr({"aria-selected":"false",tabIndex:-1});this.panels.not(this._getPanelForTab(this.active)).hide().attr({"aria-expanded":"false","aria-hidden":"true"});if(!this.active.length){this.tabs.eq(0).attr("tabIndex",0);}else{this.active.addClass("ui-tabs-active ui-state-active").attr({"aria-selected":"true",tabIndex:0});this._getPanelForTab(this.active).show().attr({"aria-expanded":"true","aria-hidden":"false"});}},_processTabs:function(){var that=this;this.tablist=this._getList().addClass("ui-tabs-nav ui-helper-reset ui-helper-clearfix ui-widget-header ui-corner-all").attr("role","tablist");this.tabs=this.tablist.find("> li:has(a[href])").addClass("ui-state-default ui-corner-top").attr({role:"tab",tabIndex:-1});this.anchors=this.tabs.map(function(){return $("a",this)[0];}).addClass("ui-tabs-anchor").attr({role:"presentation",tabIndex:-1});this.panels=$();this.anchors.each(function(i,anchor){var selector,panel,panelId,anchorId=$(anchor).uniqueId().attr("id"),tab=$(anchor).closest("li"),originalAriaControls=tab.attr("aria-controls");if(isLocal(anchor)){selector=anchor.hash;panel=that.element.find(that._sanitizeSelector(selector));}else{panelId=that._tabId(tab);selector="#"+panelId;panel=that.element.find(selector);if(!panel.length){panel=that._createPanel(panelId);panel.insertAfter(that.panels[i-1]||that.tablist);}panel.attr("aria-live","polite");}if(panel.length){that.panels=that.panels.add(panel);}if(originalAriaControls){tab.data("ui-tabs-aria-controls",originalAriaControls);}tab.attr({"aria-controls":selector.substring(1),"aria-labelledby":anchorId});panel.attr("aria-labelledby",anchorId);});this.panels.addClass("ui-tabs-panel ui-widget-content ui-corner-bottom").attr("role","tabpanel");},_getList:function(){return this.element.find("ol,ul").eq(0);},_createPanel:function(id){return $("<div>").attr("id",id).addClass("ui-tabs-panel ui-widget-content ui-corner-bottom").data("ui-tabs-destroy",true);},_setupDisabled:function(disabled){if($.isArray(disabled)){if(!disabled.length){disabled=false;}else{if(disabled.length===this.anchors.length){disabled=true;}}}for(var i=0,li;(li=this.tabs[i]);i++){if(disabled===true||$.inArray(i,disabled)!==-1){$(li).addClass("ui-state-disabled").attr("aria-disabled","true");}else{$(li).removeClass("ui-state-disabled").removeAttr("aria-disabled");}}this.options.disabled=disabled;},_setupEvents:function(event){var events={click:function(event){event.preventDefault();}};if(event){$.each(event.split(" "),function(index,eventName){events[eventName]="_eventHandler";});}this._off(this.anchors.add(this.tabs).add(this.panels));this._on(this.anchors,events);this._on(this.tabs,{keydown:"_tabKeydown"});this._on(this.panels,{keydown:"_panelKeydown"});this._focusable(this.tabs);this._hoverable(this.tabs);},_setupHeightStyle:function(heightStyle){var maxHeight,overflow,parent=this.element.parent();if(heightStyle==="fill"){if(!$.support.minHeight){overflow=parent.css("overflow");parent.css("overflow","hidden");}maxHeight=parent.height();this.element.siblings(":visible").each(function(){var elem=$(this),position=elem.css("position");if(position==="absolute"||position==="fixed"){return;}maxHeight-=elem.outerHeight(true);});if(overflow){parent.css("overflow",overflow);}this.element.children().not(this.panels).each(function(){maxHeight-=$(this).outerHeight(true);});this.panels.each(function(){$(this).height(Math.max(0,maxHeight-$(this).innerHeight()+$(this).height()));}).css("overflow","auto");}else{if(heightStyle==="auto"){maxHeight=0;this.panels.each(function(){maxHeight=Math.max(maxHeight,$(this).height("").height());}).height(maxHeight);}}},_eventHandler:function(event){var options=this.options,active=this.active,anchor=$(event.currentTarget),tab=anchor.closest("li"),clickedIsActive=tab[0]===active[0],collapsing=clickedIsActive&&options.collapsible,toShow=collapsing?$():this._getPanelForTab(tab),toHide=!active.length?$():this._getPanelForTab(active),eventData={oldTab:active,oldPanel:toHide,newTab:collapsing?$():tab,newPanel:toShow};event.preventDefault();if(tab.hasClass("ui-state-disabled")||tab.hasClass("ui-tabs-loading")||this.running||(clickedIsActive&&!options.collapsible)||(this._trigger("beforeActivate",event,eventData)===false)){return;}options.active=collapsing?false:this.tabs.index(tab);this.active=clickedIsActive?$():tab;if(this.xhr){this.xhr.abort();}if(!toHide.length&&!toShow.length){$.error("jQuery UI Tabs: Mismatching fragment identifier.");}if(toShow.length){this.load(this.tabs.index(tab),event);}this._toggle(event,eventData);},_toggle:function(event,eventData){var that=this,toShow=eventData.newPanel,toHide=eventData.oldPanel;this.running=true;function complete(){that.running=false;that._trigger("activate",event,eventData);}function show(){eventData.newTab.closest("li").addClass("ui-tabs-active ui-state-active");if(toShow.length&&that.options.show){that._show(toShow,that.options.show,complete);}else{toShow.show();complete();}}if(toHide.length&&this.options.hide){this._hide(toHide,this.options.hide,function(){eventData.oldTab.closest("li").removeClass("ui-tabs-active ui-state-active");show();});}else{eventData.oldTab.closest("li").removeClass("ui-tabs-active ui-state-active");toHide.hide();show();}toHide.attr({"aria-expanded":"false","aria-hidden":"true"});eventData.oldTab.attr("aria-selected","false");if(toShow.length&&toHide.length){eventData.oldTab.attr("tabIndex",-1);}else{if(toShow.length){this.tabs.filter(function(){return $(this).attr("tabIndex")===0;}).attr("tabIndex",-1);}}toShow.attr({"aria-expanded":"true","aria-hidden":"false"});eventData.newTab.attr({"aria-selected":"true",tabIndex:0});},_activate:function(index){var anchor,active=this._findActive(index);if(active[0]===this.active[0]){return;}if(!active.length){active=this.active;}anchor=active.find(".ui-tabs-anchor")[0];this._eventHandler({target:anchor,currentTarget:anchor,preventDefault:$.noop});},_findActive:function(index){return index===false?$():this.tabs.eq(index);},_getIndex:function(index){if(typeof index==="string"){index=this.anchors.index(this.anchors.filter("[href$='"+index+"']"));}return index;},_destroy:function(){if(this.xhr){this.xhr.abort();}this.element.removeClass("ui-tabs ui-widget ui-widget-content ui-corner-all ui-tabs-collapsible");this.tablist.removeClass("ui-tabs-nav ui-helper-reset ui-helper-clearfix ui-widget-header ui-corner-all").removeAttr("role");this.anchors.removeClass("ui-tabs-anchor").removeAttr("role").removeAttr("tabIndex").removeData("href.tabs").removeData("load.tabs").removeUniqueId();this.tabs.add(this.panels).each(function(){if($.data(this,"ui-tabs-destroy")){$(this).remove();}else{$(this).removeClass("ui-state-default ui-state-active ui-state-disabled ui-corner-top ui-corner-bottom ui-widget-content ui-tabs-active ui-tabs-panel").removeAttr("tabIndex").removeAttr("aria-live").removeAttr("aria-busy").removeAttr("aria-selected").removeAttr("aria-labelledby").removeAttr("aria-hidden").removeAttr("aria-expanded").removeAttr("role");}});this.tabs.each(function(){var li=$(this),prev=li.data("ui-tabs-aria-controls");if(prev){li.attr("aria-controls",prev);}else{li.removeAttr("aria-controls");}});if(this.options.heightStyle!=="content"){this.panels.css("height","");}},enable:function(index){var disabled=this.options.disabled;if(disabled===false){return;}if(index===undefined){disabled=false;}else{index=this._getIndex(index);if($.isArray(disabled)){disabled=$.map(disabled,function(num){return num!==index?num:null;});}else{disabled=$.map(this.tabs,function(li,num){return num!==index?num:null;});}}this._setupDisabled(disabled);},disable:function(index){var disabled=this.options.disabled;if(disabled===true){return;}if(index===undefined){disabled=true;}else{index=this._getIndex(index);if($.inArray(index,disabled)!==-1){return;}if($.isArray(disabled)){disabled=$.merge([index],disabled).sort();}else{disabled=[index];}}this._setupDisabled(disabled);},load:function(index,event){index=this._getIndex(index);var that=this,tab=this.tabs.eq(index),anchor=tab.find(".ui-tabs-anchor"),panel=this._getPanelForTab(tab),eventData={tab:tab,panel:panel};if(isLocal(anchor[0])){return;}this.xhr=$.ajax(this._ajaxSettings(anchor,event,eventData));if(this.xhr&&this.xhr.statusText!=="canceled"){tab.addClass("ui-tabs-loading");panel.attr("aria-busy","true");this.xhr.success(function(response){setTimeout(function(){panel.html(response);that._trigger("load",event,eventData);},1);}).complete(function(jqXHR,status){setTimeout(function(){if(status==="abort"){that.panels.stop(false,true);}tab.removeClass("ui-tabs-loading");panel.removeAttr("aria-busy");if(jqXHR===that.xhr){delete that.xhr;}},1);});}},_ajaxSettings:function(anchor,event,eventData){var that=this;return{url:anchor.attr("href"),beforeSend:function(jqXHR,settings){return that._trigger("beforeLoad",event,$.extend({jqXHR:jqXHR,ajaxSettings:settings},eventData));}};},_getPanelForTab:function(tab){var id=$(tab).attr("aria-controls");return this.element.find(this._sanitizeSelector("#"+id));}});if($.uiBackCompat!==false){$.ui.tabs.prototype._ui=function(tab,panel){return{tab:tab,panel:panel,index:this.anchors.index(tab)};};$.widget("ui.tabs",$.ui.tabs,{url:function(index,url){this.anchors.eq(index).attr("href",url);}});$.widget("ui.tabs",$.ui.tabs,{options:{ajaxOptions:null,cache:false},_create:function(){this._super();var that=this;this._on({tabsbeforeload:function(event,ui){if($.data(ui.tab[0],"cache.tabs")){event.preventDefault();return;}ui.jqXHR.success(function(){if(that.options.cache){$.data(ui.tab[0],"cache.tabs",true);}});}});},_ajaxSettings:function(anchor,event,ui){var ajaxOptions=this.options.ajaxOptions;return $.extend({},ajaxOptions,{error:function(xhr,s,e){try{ajaxOptions.error(xhr,s,ui.tab.closest("li").index(),ui.tab[0]);}catch(e){}}},this._superApply(arguments));},_setOption:function(key,value){if(key==="cache"&&value===false){this.anchors.removeData("cache.tabs");}this._super(key,value);},_destroy:function(){this.anchors.removeData("cache.tabs");this._super();},url:function(index,url){this.anchors.eq(index).removeData("cache.tabs");this._superApply(arguments);}});$.widget("ui.tabs",$.ui.tabs,{abort:function(){if(this.xhr){this.xhr.abort();}}});$.widget("ui.tabs",$.ui.tabs,{options:{spinner:"<em>Loading&#8230;</em>"},_create:function(){this._super();this._on({tabsbeforeload:function(event,ui){if(event.target!==this.element[0]||!this.options.spinner){return;}var span=ui.tab.find("span"),html=span.html();span.html(this.options.spinner);ui.jqXHR.complete(function(){span.html(html);});}});}});$.widget("ui.tabs",$.ui.tabs,{options:{enable:null,disable:null},enable:function(index){var options=this.options,trigger;if(index&&options.disabled===true||($.isArray(options.disabled)&&$.inArray(index,options.disabled)!==-1)){trigger=true;}this._superApply(arguments);if(trigger){this._trigger("enable",null,this._ui(this.anchors[index],this.panels[index]));}},disable:function(index){var options=this.options,trigger;if(index&&options.disabled===false||($.isArray(options.disabled)&&$.inArray(index,options.disabled)===-1)){trigger=true;}this._superApply(arguments);if(trigger){this._trigger("disable",null,this._ui(this.anchors[index],this.panels[index]));}}});$.widget("ui.tabs",$.ui.tabs,{options:{add:null,remove:null,tabTemplate:"<li><a href='#{href}'><span>#{label}</span></a></li>"},add:function(url,label,index){if(index===undefined){index=this.anchors.length;}var doInsertAfter,panel,options=this.options,li=$(options.tabTemplate.replace(/#\{href\}/g,url).replace(/#\{label\}/g,label)),id=!url.indexOf("#")?url.replace("#",""):this._tabId(li);li.addClass("ui-state-default ui-corner-top").data("ui-tabs-destroy",true);li.attr("aria-controls",id);doInsertAfter=index>=this.tabs.length;panel=this.element.find("#"+id);if(!panel.length){panel=this._createPanel(id);if(doInsertAfter){if(index>0){panel.insertAfter(this.panels.eq(-1));}else{panel.appendTo(this.element);}}else{panel.insertBefore(this.panels[index]);}}panel.addClass("ui-tabs-panel ui-widget-content ui-corner-bottom").hide();if(doInsertAfter){li.appendTo(this.tablist);}else{li.insertBefore(this.tabs[index]);}options.disabled=$.map(options.disabled,function(n){return n>=index?++n:n;});this.refresh();if(this.tabs.length===1&&options.active===false){this.option("active",0);}this._trigger("add",null,this._ui(this.anchors[index],this.panels[index]));return this;},remove:function(index){index=this._getIndex(index);var options=this.options,tab=this.tabs.eq(index).remove(),panel=this._getPanelForTab(tab).remove();if(tab.hasClass("ui-tabs-active")&&this.anchors.length>2){this._activate(index+(index+1<this.anchors.length?1:-1));}options.disabled=$.map($.grep(options.disabled,function(n){return n!==index;}),function(n){return n>=index?--n:n;});this.refresh();this._trigger("remove",null,this._ui(tab.find("a")[0],panel[0]));return this;}});$.widget("ui.tabs",$.ui.tabs,{length:function(){return this.anchors.length;}});$.widget("ui.tabs",$.ui.tabs,{options:{idPrefix:"ui-tabs-"},_tabId:function(tab){var a=tab.is("li")?tab.find("a[href]"):tab;a=a[0];return $(a).closest("li").attr("aria-controls")||a.title&&a.title.replace(/\s/g,"_").replace(/[^\w\u00c0-\uFFFF\-]/g,"")||this.options.idPrefix+getNextTabId();}});$.widget("ui.tabs",$.ui.tabs,{options:{panelTemplate:"<div></div>"},_createPanel:function(id){return $(this.options.panelTemplate).attr("id",id).addClass("ui-tabs-panel ui-widget-content ui-corner-bottom").data("ui-tabs-destroy",true);}});$.widget("ui.tabs",$.ui.tabs,{_create:function(){var options=this.options;if(options.active===null&&options.selected!==undefined){options.active=options.selected===-1?false:options.selected;}this._super();options.selected=options.active;if(options.selected===false){options.selected=-1;}},_setOption:function(key,value){if(key!=="selected"){return this._super(key,value);}var options=this.options;this._super("active",value===-1?false:value);options.selected=options.active;if(options.selected===false){options.selected=-1;}},_eventHandler:function(event){this._superApply(arguments);this.options.selected=this.options.active;if(this.options.selected===false){this.options.selected=-1;}}});$.widget("ui.tabs",$.ui.tabs,{options:{show:null,select:null},_create:function(){this._super();if(this.options.active!==false){this._trigger("show",null,this._ui(this.active.find(".ui-tabs-anchor")[0],this._getPanelForTab(this.active)[0]));}},_trigger:function(type,event,data){var ret=this._superApply(arguments);if(!ret){return false;}if(type==="beforeActivate"&&data.newTab.length){ret=this._super("select",event,{tab:data.newTab.find(".ui-tabs-anchor")[0],panel:data.newPanel[0],index:data.newTab.closest("li").index()});}else{if(type==="activate"&&data.newTab.length){ret=this._super("show",event,{tab:data.newTab.find(".ui-tabs-anchor")[0],panel:data.newPanel[0],index:data.newTab.closest("li").index()});}}return ret;}});$.widget("ui.tabs",$.ui.tabs,{select:function(index){index=this._getIndex(index);if(index===-1){if(this.options.collapsible&&this.options.selected!==-1){index=this.options.selected;}else{return;}}this.anchors.eq(index).trigger(this.options.event+this.eventNamespace);}});(function(){var listId=0;$.widget("ui.tabs",$.ui.tabs,{options:{cookie:null},_create:function(){var options=this.options,active;if(options.active==null&&options.cookie){active=parseInt(this._cookie(),10);if(active===-1){active=false;}options.active=active;}this._super();},_cookie:function(active){var cookie=[this.cookie||(this.cookie=this.options.cookie.name||"ui-tabs-"+(++listId))];if(arguments.length){cookie.push(active===false?-1:active);cookie.push(this.options.cookie);}return $.cookie.apply(null,cookie);},_refresh:function(){this._super();if(this.options.cookie){this._cookie(this.options.active,this.options.cookie);}},_eventHandler:function(event){this._superApply(arguments);if(this.options.cookie){this._cookie(this.options.active,this.options.cookie);}},_destroy:function(){this._super();if(this.options.cookie){this._cookie(null,this.options.cookie);}}});})();$.widget("ui.tabs",$.ui.tabs,{_trigger:function(type,event,data){var _data=$.extend({},data);if(type==="load"){_data.panel=_data.panel[0];_data.tab=_data.tab.find(".ui-tabs-anchor")[0];}return this._super(type,event,_data);}});$.widget("ui.tabs",$.ui.tabs,{options:{fx:null},_getFx:function(){var hide,show,fx=this.options.fx;if(fx){if($.isArray(fx)){hide=fx[0];show=fx[1];}else{hide=show=fx;}}return fx?{show:show,hide:hide}:null;},_toggle:function(event,eventData){var that=this,toShow=eventData.newPanel,toHide=eventData.oldPanel,fx=this._getFx();if(!fx){return this._super(event,eventData);}that.running=true;function complete(){that.running=false;that._trigger("activate",event,eventData);}function show(){eventData.newTab.closest("li").addClass("ui-tabs-active ui-state-active");if(toShow.length&&fx.show){toShow.animate(fx.show,fx.show.duration,function(){complete();});}else{toShow.show();complete();}}if(toHide.length&&fx.hide){toHide.animate(fx.hide,fx.hide.duration,function(){eventData.oldTab.closest("li").removeClass("ui-tabs-active ui-state-active");show();});}else{eventData.oldTab.closest("li").removeClass("ui-tabs-active ui-state-active");toHide.hide();show();}}});}})(jquery);(function($){var increments=0;function addDescribedBy(elem,id){var describedby=(elem.attr("aria-describedby")||"").split(/\s+/);describedby.push(id);elem.data("ui-tooltip-id",id).attr("aria-describedby",$.trim(describedby.join(" ")));}function removeDescribedBy(elem){var id=elem.data("ui-tooltip-id"),describedby=(elem.attr("aria-describedby")||"").split(/\s+/),index=$.inArray(id,describedby);if(index!==-1){describedby.splice(index,1);}elem.removeData("ui-tooltip-id");describedby=$.trim(describedby.join(" "));if(describedby){elem.attr("aria-describedby",describedby);}else{elem.removeAttr("aria-describedby");}}$.widget("ui.tooltip",{version:"1.9.0",options:{content:function(){return $(this).attr("title");},hide:true,items:"[title]",position:{my:"left+15 center",at:"right center",collision:"flipfit flipfit"},show:true,tooltipClass:null,track:false,close:null,open:null},_create:function(){this._on({mouseover:"open",focusin:"open"});this.tooltips={};},_setOption:function(key,value){var that=this;if(key==="disabled"){this[value?"_disable":"_enable"]();this.options[key]=value;return;}this._super(key,value);if(key==="content"){$.each(this.tooltips,function(id,element){that._updateContent(element);});}},_disable:function(){var that=this;$.each(this.tooltips,function(id,element){var event=$.Event("blur");event.target=event.currentTarget=element[0];that.close(event,true);});this.element.find(this.options.items).andSelf().each(function(){var element=$(this);if(element.is("[title]")){element.data("ui-tooltip-title",element.attr("title")).attr("title","");}});},_enable:function(){this.element.find(this.options.items).andSelf().each(function(){var element=$(this);if(element.data("ui-tooltip-title")){element.attr("title",element.data("ui-tooltip-title"));}});},open:function(event){var target=$(event?event.target:this.element).closest(this.options.items);if(!target.length){return;}if(this.options.track&&target.data("ui-tooltip-id")){this._find(target).position($.extend({of:target},this.options.position));this._off(this.document,"mousemove");return;}if(target.attr("title")){target.data("ui-tooltip-title",target.attr("title"));}target.data("tooltip-open",true);this._updateContent(target,event);},_updateContent:function(target,event){var content,contentOption=this.options.content,that=this;if(typeof contentOption==="string"){return this._open(event,target,contentOption);}content=contentOption.call(target[0],function(response){if(!target.data("tooltip-open")){return;}that._delay(function(){this._open(event,target,response);});});if(content){this._open(event,target,content);}},_open:function(event,target,content){var tooltip,positionOption;if(!content){return;}tooltip=this._find(target);if(tooltip.length){tooltip.find(".ui-tooltip-content").html(content);return;}if(target.is("[title]")){if(event&&event.type==="mouseover"){target.attr("title","");}else{target.removeAttr("title");}}tooltip=this._tooltip(target);addDescribedBy(target,tooltip.attr("id"));tooltip.find(".ui-tooltip-content").html(content);function position(event){positionOption.of=event;tooltip.position(positionOption);}if(this.options.track&&event&&/^mouse/.test(event.originalEvent.type)){positionOption=$.extend({},this.options.position);this._on(this.document,{mousemove:position});position(event);}else{tooltip.position($.extend({of:target},this.options.position));}tooltip.hide();this._show(tooltip,this.options.show);this._trigger("open",event,{tooltip:tooltip});this._on(target,{mouseleave:"close",focusout:"close",keyup:function(event){if(event.keyCode===$.ui.keyCode.ESCAPE){var fakeEvent=$.Event(event);fakeEvent.currentTarget=target[0];this.close(fakeEvent,true);}}});},close:function(event,force){var that=this,target=$(event?event.currentTarget:this.element),tooltip=this._find(target);if(this.closing){return;}if(!force&&event&&event.type!=="focusout"&&this.document[0].activeElement===target[0]){return;}if(target.data("ui-tooltip-title")){target.attr("title",target.data("ui-tooltip-title"));}removeDescribedBy(target);tooltip.stop(true);this._hide(tooltip,this.options.hide,function(){$(this).remove();delete that.tooltips[this.id];});target.removeData("tooltip-open");this._off(target,"mouseleave focusout keyup");this._off(this.document,"mousemove");this.closing=true;this._trigger("close",event,{tooltip:tooltip});this.closing=false;},_tooltip:function(element){var id="ui-tooltip-"+increments++,tooltip=$("<div>").attr({id:id,role:"tooltip"}).addClass("ui-tooltip ui-widget ui-corner-all ui-widget-content "+(this.options.tooltipClass||""));$("<div>").addClass("ui-tooltip-content").appendTo(tooltip);tooltip.appendTo(this.document[0].body);if($.fn.bgiframe){tooltip.bgiframe();}this.tooltips[id]=element;return tooltip;},_find:function(target){var id=target.data("ui-tooltip-id");return id?$("#"+id):$();},_destroy:function(){var that=this;$.each(this.tooltips,function(id,element){var event=$.Event("blur");event.target=event.currentTarget=element[0];that.close(event,true);$("#"+id).remove();if(element.data("ui-tooltip-title")){element.attr("title",element.data("ui-tooltip-title"));element.removeData("ui-tooltip-title");}});}});}(jquery));});bettercms.define("bcms.jquery.unobtrusive",["bcms.jquery","bcms.jquery.validate"],function(a){
/*
    ** Unobtrusive Ajax support library for jQuery
    ** Copyright (C) Microsoft Corporation. All rights reserved.
    */
(function(b){var f="unobtrusiveAjaxClick",g="unobtrusiveValidation";function h(l,k){var m=window,n=(l||"").split(".");while(m&&n.length){m=m[n.shift()];}if(typeof(m)==="function"){return m;}k.push(l);return Function.constructor.apply(null,k);}function i(k){return k==="GET"||k==="POST";}function c(l,k){if(!i(k)){l.setRequestHeader("X-HTTP-Method-Override",k);}}function d(m,l,k){var n;if(k.indexOf("application/x-javascript")!==-1){return;}n=(m.getAttribute("data-ajax-mode")||"").toUpperCase();b(m.getAttribute("data-ajax-update")).each(function(o,q){var p;switch(n){case"BEFORE":p=q.firstChild;b("<div />").html(l).contents().each(function(){q.insertBefore(this,p);});break;case"AFTER":b("<div />").html(l).contents().each(function(){q.appendChild(this);});break;default:b(q).html(l);break;}});}function e(m,p){var k,n,o,l;k=m.getAttribute("data-ajax-confirm");if(k&&!window.confirm(k)){return;}n=b(m.getAttribute("data-ajax-loading"));l=m.getAttribute("data-ajax-loading-duration")||0;b.extend(p,{type:m.getAttribute("data-ajax-method")||undefined,url:m.getAttribute("data-ajax-url")||undefined,beforeSend:function(r){var q;c(r,o);q=h(m.getAttribute("data-ajax-begin"),["xhr"]).apply(this,arguments);if(q!==false){n.show(l);}return q;},complete:function(){n.hide(l);h(m.getAttribute("data-ajax-complete"),["xhr","status"]).apply(this,arguments);},success:function(q,r,s){d(m,q,s.getResponseHeader("Content-Type")||"text/html");h(m.getAttribute("data-ajax-success"),["data","status","xhr"]).apply(this,arguments);},error:h(m.getAttribute("data-ajax-failure"),["xhr","status","error"])});p.data.push({name:"X-Requested-With",value:"XMLHttpRequest"});o=p.type.toUpperCase();if(!i(o)){p.type="POST";p.data.push({name:"X-HTTP-Method-Override",value:o});}b.ajax(p);}function j(k){var l=b(k).data(g);return !l||!l.validate||l.validate();}b("a[data-ajax=true]").live("click",function(k){k.preventDefault();e(this,{url:this.href,type:"GET",data:[]});});b("form[data-ajax=true] input[type=image]").live("click",function(l){var n=l.target.name,k=b(l.target),m=k.parents("form")[0],o=k.offset();b(m).data(f,[{name:n+".x",value:Math.round(l.pageX-o.left)},{name:n+".y",value:Math.round(l.pageY-o.top)}]);setTimeout(function(){b(m).removeData(f);},0);});b("form[data-ajax=true] :submit").live("click",function(k){var m=k.target.name,l=b(k.target).parents("form")[0];b(l).data(f,m?[{name:m,value:k.target.value}]:[]);setTimeout(function(){b(l).removeData(f);},0);});b("form[data-ajax=true]").live("submit",function(l){var k=b(this).data(f)||[];l.preventDefault();if(!j(this)){return;}e(this,{url:this.action,type:this.method||"GET",data:k.concat(b(this).serializeArray())});});}(a));});bettercms.define("bcms.jquery.validate",["bcms.jquery"],function(a){(function(b){b.extend(b.fn,{validate:function(c){if(!this.length){c&&c.debug&&window.console&&console.warn("nothing selected, can't validate, returning nothing");return;}var d=b.data(this[0],"validator");if(d){return d;}d=new b.validator(c,this[0]);b.data(this[0],"validator",d);if(d.settings.onsubmit){this.find("input, button").filter(".cancel").click(function(){d.cancelSubmit=true;});if(d.settings.submitHandler){this.find("input, button").filter(":submit").click(function(){d.submitButton=this;});}this.submit(function(e){if(d.settings.debug){e.preventDefault();}function f(){if(d.settings.submitHandler){if(d.submitButton){var g=b("<input type='hidden'/>").attr("name",d.submitButton.name).val(d.submitButton.value).appendTo(d.currentForm);}d.settings.submitHandler.call(d,d.currentForm);if(d.submitButton){g.remove();}return false;}return true;}if(d.cancelSubmit){d.cancelSubmit=false;return f();}if(d.form()){if(d.pendingRequest){d.formSubmitted=true;return false;}return f();}else{d.focusInvalid();return false;}});}return d;},valid:function(){if(b(this[0]).is("form")){return this.validate().form();}else{var c=true;var d=b(this[0].form).validate();this.each(function(){c&=d.element(this);});return c;}},removeAttrs:function(d){var e={},c=this;b.each(d.split(/\s/),function(f,g){e[g]=c.attr(g);c.removeAttr(g);});return e;},rules:function(d,c){var f=this[0];if(d){var j=b.data(f.form,"validator").settings;var k=j.rules;var g=b.validator.staticRules(f);switch(d){case"add":b.extend(g,b.validator.normalizeRule(c));k[f.name]=g;if(c.messages){j.messages[f.name]=b.extend(j.messages[f.name],c.messages);}break;case"remove":if(!c){delete k[f.name];return g;}var h={};b.each(c.split(/\s/),function(l,m){h[m]=g[m];delete g[m];});return h;}}var e=b.validator.normalizeRules(b.extend({},b.validator.metadataRules(f),b.validator.classRules(f),b.validator.attributeRules(f),b.validator.staticRules(f)),f);if(e.required){var i=e.required;delete e.required;e=b.extend({required:i},e);}return e;}});b.extend(b.expr[":"],{blank:function(c){return !b.trim(""+c.value);},filled:function(c){return !!b.trim(""+c.value);},unchecked:function(c){return !c.checked;}});b.validator=function(d,c){this.settings=b.extend(true,{},b.validator.defaults,d);this.currentForm=c;this.init();};b.validator.format=function(d,c){if(arguments.length==1){return function(){var e=b.makeArray(arguments);e.unshift(d);return b.validator.format.apply(this,e);};}if(arguments.length>2&&c.constructor!=Array){c=b.makeArray(arguments).slice(1);}if(c.constructor!=Array){c=[c];}b.each(c,function(e,f){d=d.replace(new RegExp("\\{"+e+"\\}","g"),f);});return d;};b.extend(b.validator,{defaults:{messages:{},groups:{},rules:{},errorClass:"error",validClass:"valid",errorElement:"label",focusInvalid:true,errorContainer:b([]),errorLabelContainer:b([]),onsubmit:true,ignore:[],ignoreTitle:false,onfocusin:function(c){this.lastActive=c;if(this.settings.focusCleanup&&!this.blockFocusCleanup){this.settings.unhighlight&&this.settings.unhighlight.call(this,c,this.settings.errorClass,this.settings.validClass);this.addWrapper(this.errorsFor(c)).hide();}},onfocusout:function(c){if(!this.checkable(c)&&(c.name in this.submitted||!this.optional(c))){this.element(c);}},onkeyup:function(c){if(c.name in this.submitted||c==this.lastElement){this.element(c);}},onclick:function(c){if(c.name in this.submitted){this.element(c);}else{if(c.parentNode.name in this.submitted){this.element(c.parentNode);}}},highlight:function(c,d,e){if(c.type==="radio"){this.findByName(c.name).addClass(d).removeClass(e);}else{b(c).addClass(d).removeClass(e);}},unhighlight:function(c,d,e){if(c.type==="radio"){this.findByName(c.name).removeClass(d).addClass(e);}else{b(c).removeClass(d).addClass(e);}}},setDefaults:function(c){b.extend(b.validator.defaults,c);},messages:{required:"This field is required.",remote:"Please fix this field.",email:"Please enter a valid email address.",url:"Please enter a valid URL.",date:"Please enter a valid date.",dateISO:"Please enter a valid date (ISO).",number:"Please enter a valid number.",digits:"Please enter only digits.",creditcard:"Please enter a valid credit card number.",equalTo:"Please enter the same value again.",accept:"Please enter a value with a valid extension.",maxlength:b.validator.format("Please enter no more than {0} characters."),minlength:b.validator.format("Please enter at least {0} characters."),rangelength:b.validator.format("Please enter a value between {0} and {1} characters long."),range:b.validator.format("Please enter a value between {0} and {1}."),max:b.validator.format("Please enter a value less than or equal to {0}."),min:b.validator.format("Please enter a value greater than or equal to {0}.")},autoCreateRanges:false,prototype:{init:function(){this.labelContainer=b(this.settings.errorLabelContainer);this.errorContext=this.labelContainer.length&&this.labelContainer||b(this.currentForm);this.containers=b(this.settings.errorContainer).add(this.settings.errorLabelContainer);this.submitted={};this.valueCache={};this.pendingRequest=0;this.pending={};this.invalid={};this.reset();var d=(this.groups={});b.each(this.settings.groups,function(f,g){b.each(g.split(/\s/),function(h,i){d[i]=f;});});var e=this.settings.rules;b.each(e,function(f,g){e[f]=b.validator.normalizeRule(g);});function c(f){var h=b.data(this[0].form,"validator"),g="on"+f.type.replace(/^validate/,"");h.settings[g]&&h.settings[g].call(h,this[0]);}b(this.currentForm).validateDelegate(":text, :password, :file, select, textarea","focusin focusout keyup",c).validateDelegate(":radio, :checkbox, select, option","click",c);if(this.settings.invalidHandler){b(this.currentForm).bind("invalid-form.validate",this.settings.invalidHandler);}},form:function(){this.checkForm();b.extend(this.submitted,this.errorMap);this.invalid=b.extend({},this.errorMap);if(!this.valid()){b(this.currentForm).triggerHandler("invalid-form",[this]);}this.showErrors();return this.valid();},checkForm:function(){this.prepareForm();for(var d=0,c=(this.currentElements=this.elements());c[d];d++){this.check(c[d]);}return this.valid();},element:function(c){c=this.clean(c);this.lastElement=c;this.prepareElement(c);this.currentElements=b(c);var d=this.check(c);if(d){delete this.invalid[c.name];}else{this.invalid[c.name]=true;}if(!this.numberOfInvalids()){this.toHide=this.toHide.add(this.containers);}this.showErrors();return d;},showErrors:function(c){if(c){b.extend(this.errorMap,c);this.errorList=[];for(var d in c){this.errorList.push({message:c[d],element:this.findByName(d)[0]});}this.successList=b.grep(this.successList,function(e){return !(e.name in c);});}this.settings.showErrors?this.settings.showErrors.call(this,this.errorMap,this.errorList):this.defaultShowErrors();},resetForm:function(){if(b.fn.resetForm){b(this.currentForm).resetForm();}this.submitted={};this.prepareForm();this.hideErrors();this.elements().removeClass(this.settings.errorClass);},numberOfInvalids:function(){return this.objectLength(this.invalid);},objectLength:function(e){var c=0;for(var d in e){c++;}return c;},hideErrors:function(){this.addWrapper(this.toHide).hide();},valid:function(){return this.size()==0;},size:function(){return this.errorList.length;},focusInvalid:function(){if(this.settings.focusInvalid){try{b(this.findLastActive()||this.errorList.length&&this.errorList[0].element||[]).filter(":visible").focus().trigger("focusin");}catch(c){}}},findLastActive:function(){var c=this.lastActive;return c&&b.grep(this.errorList,function(d){return d.element.name==c.name;}).length==1&&c;},elements:function(){var d=this,c={};return b(this.currentForm).find("input, select, textarea").not(":submit, :reset, :image, [disabled]").not(this.settings.ignore).filter(function(){!this.name&&d.settings.debug&&window.console&&console.error("%o has no name assigned",this);if(this.name in c||!d.objectLength(b(this).rules())){return false;}c[this.name]=true;return true;});},clean:function(c){return b(c)[0];},errors:function(){return b(this.settings.errorElement+"."+this.settings.errorClass,this.errorContext);},reset:function(){this.successList=[];this.errorList=[];this.errorMap={};this.toShow=b([]);this.toHide=b([]);this.currentElements=b([]);},prepareForm:function(){this.reset();this.toHide=this.errors().add(this.containers);},prepareElement:function(c){this.reset();this.toHide=this.errorsFor(c);},check:function(f){f=this.clean(f);if(this.checkable(f)){f=this.findByName(f.name).not(this.settings.ignore)[0];}var j=b(f).rules();var c=false;for(var g in j){var i={method:g,parameters:j[g]};try{var h=b.validator.methods[g].call(this,f.value.replace(/\r/g,""),f,i.parameters);if(h=="dependency-mismatch"){c=true;continue;}c=false;if(h=="pending"){this.toHide=this.toHide.not(this.errorsFor(f));return;}if(!h){this.formatAndAdd(f,i);return false;}}catch(d){this.settings.debug&&window.console&&console.log("exception occured when checking element "+f.id+", check the '"+i.method+"' method",d);throw d;}}if(c){return;}if(this.objectLength(j)){this.successList.push(f);}return true;},customMetaMessage:function(c,e){if(!b.metadata){return;}var d=this.settings.meta?b(c).metadata()[this.settings.meta]:b(c).metadata();return d&&d.messages&&d.messages[e];},customMessage:function(e,d){var c=this.settings.messages[e];return c&&(c.constructor==String?c:c[d]);},findDefined:function(){for(var c=0;c<arguments.length;c++){if(arguments[c]!==undefined){return arguments[c];}}return undefined;},defaultMessage:function(c,d){return this.findDefined(this.customMessage(c.name,d),this.customMetaMessage(c,d),!this.settings.ignoreTitle&&c.title||undefined,b.validator.messages[d],"<strong>Warning: No message defined for "+c.name+"</strong>");},formatAndAdd:function(c,e){var d=this.defaultMessage(c,e.method),f=/\$?\{(\d+)\}/g;if(typeof d=="function"){d=d.call(this,e.parameters,c);}else{if(f.test(d)){d=b.format(d.replace(f,"{$1}"),e.parameters);}}this.errorList.push({message:d,element:c});this.errorMap[c.name]=d;this.submitted[c.name]=d;},addWrapper:function(c){if(this.settings.wrapper){c=c.add(c.parent(this.settings.wrapper));}return c;},defaultShowErrors:function(){for(var e=0;this.errorList[e];e++){var d=this.errorList[e];this.settings.highlight&&this.settings.highlight.call(this,d.element,this.settings.errorClass,this.settings.validClass);this.showLabel(d.element,d.message);}if(this.errorList.length){this.toShow=this.toShow.add(this.containers);}if(this.settings.success){for(var e=0;this.successList[e];e++){this.showLabel(this.successList[e]);}}if(this.settings.unhighlight){for(var e=0,c=this.validElements();c[e];e++){this.settings.unhighlight.call(this,c[e],this.settings.errorClass,this.settings.validClass);}}this.toHide=this.toHide.not(this.toShow);this.hideErrors();this.addWrapper(this.toShow).show();},validElements:function(){return this.currentElements.not(this.invalidElements());},invalidElements:function(){return b(this.errorList).map(function(){return this.element;});},showLabel:function(c,e){var d=this.errorsFor(c);if(d.length){d.removeClass().addClass(this.settings.errorClass);d.attr("generated")&&d.html(e);}else{d=b("<"+this.settings.errorElement+"/>").attr({"for":this.idOrName(c),generated:true}).addClass(this.settings.errorClass).html(e||"");if(this.settings.wrapper){d=d.hide().show().wrap("<"+this.settings.wrapper+"/>").parent();}if(!this.labelContainer.append(d).length){this.settings.errorPlacement?this.settings.errorPlacement(d,b(c)):d.insertAfter(c);}}if(!e&&this.settings.success){d.text("");typeof this.settings.success=="string"?d.addClass(this.settings.success):this.settings.success(d);}this.toShow=this.toShow.add(d);},errorsFor:function(c){var d=this.idOrName(c);return this.errors().filter(function(){return b(this).attr("for")==d;});},idOrName:function(c){return this.groups[c.name]||(this.checkable(c)?c.name:c.id||c.name);},checkable:function(c){return/radio|checkbox/i.test(c.type);},findByName:function(d){var c=this.currentForm;return b(document.getElementsByName(d)).map(function(f,e){return e.form==c&&e.name==d&&e||null;});},getLength:function(d,c){switch(c.nodeName.toLowerCase()){case"select":return b("option:selected",c).length;case"input":if(this.checkable(c)){return this.findByName(c.name).filter(":checked").length;}}return d.length;},depend:function(d,c){return this.dependTypes[typeof d]?this.dependTypes[typeof d](d,c):true;},dependTypes:{"boolean":function(d,c){return d;},string:function(d,c){return !!b(d,c.form).length;},"function":function(d,c){return d(c);}},optional:function(c){return !b.validator.methods.required.call(this,b.trim(c.value),c)&&"dependency-mismatch";},startRequest:function(c){if(!this.pending[c.name]){this.pendingRequest++;this.pending[c.name]=true;}},stopRequest:function(c,d){this.pendingRequest--;if(this.pendingRequest<0){this.pendingRequest=0;}delete this.pending[c.name];if(d&&this.pendingRequest==0&&this.formSubmitted&&this.form()){b(this.currentForm).submit();this.formSubmitted=false;}else{if(!d&&this.pendingRequest==0&&this.formSubmitted){b(this.currentForm).triggerHandler("invalid-form",[this]);this.formSubmitted=false;}}},previousValue:function(c){return b.data(c,"previousValue")||b.data(c,"previousValue",{old:null,valid:true,message:this.defaultMessage(c,"remote")});}},classRuleSettings:{required:{required:true},email:{email:true},url:{url:true},date:{date:true},dateISO:{dateISO:true},dateDE:{dateDE:true},number:{number:true},numberDE:{numberDE:true},digits:{digits:true},creditcard:{creditcard:true}},addClassRules:function(c,d){c.constructor==String?this.classRuleSettings[c]=d:b.extend(this.classRuleSettings,c);},classRules:function(d){var e={};var c=b(d).attr("class");c&&b.each(c.split(" "),function(){if(this in b.validator.classRuleSettings){b.extend(e,b.validator.classRuleSettings[this]);}});return e;},attributeRules:function(d){var f={};var c=b(d);for(var e in b.validator.methods){var g=c.attr(e);if(g){f[e]=g;}}if(f.maxlength&&/-1|2147483647|524288/.test(f.maxlength)){delete f.maxlength;}return f;},metadataRules:function(c){if(!b.metadata){return{};}var d=b.data(c.form,"validator").settings.meta;return d?b(c).metadata()[d]:b(c).metadata();},staticRules:function(c){var d={};var e=b.data(c.form,"validator");if(e.settings.rules){d=b.validator.normalizeRule(e.settings.rules[c.name])||{};}return d;},normalizeRules:function(d,c){b.each(d,function(f,g){if(g===false){delete d[f];return;}if(g.param||g.depends){var e=true;switch(typeof g.depends){case"string":e=!!b(g.depends,c.form).length;break;case"function":e=g.depends.call(c,c);break;}if(e){d[f]=g.param!==undefined?g.param:true;}else{delete d[f];}}});b.each(d,function(f,e){d[f]=b.isFunction(e)?e(c):e;});b.each(["minlength","maxlength","min","max"],function(){if(d[this]){d[this]=Number(d[this]);}});b.each(["rangelength","range"],function(){if(d[this]){d[this]=[Number(d[this][0]),Number(d[this][1])];}});if(b.validator.autoCreateRanges){if(d.min&&d.max){d.range=[d.min,d.max];delete d.min;delete d.max;}if(d.minlength&&d.maxlength){d.rangelength=[d.minlength,d.maxlength];delete d.minlength;delete d.maxlength;}}if(d.messages){delete d.messages;}return d;},normalizeRule:function(c){if(typeof c=="string"){var d={};b.each(c.split(/\s/),function(){d[this]=true;});c=d;}return c;},addMethod:function(e,d,c){b.validator.methods[e]=d;b.validator.messages[e]=c!=undefined?c:b.validator.messages[e];if(d.length<3){b.validator.addClassRules(e,b.validator.normalizeRule(e));}},methods:{required:function(f,c,d){if(!this.depend(d,c)){return"dependency-mismatch";}switch(c.nodeName.toLowerCase()){case"select":var e=b(c).val();return e&&e.length>0;case"input":if(this.checkable(c)){return this.getLength(f,c)>0;}default:return b.trim(f).length>0;}},remote:function(h,d,e){if(this.optional(d)){return"dependency-mismatch";}var f=this.previousValue(d);if(!this.settings.messages[d.name]){this.settings.messages[d.name]={};}f.originalMessage=this.settings.messages[d.name].remote;this.settings.messages[d.name].remote=f.message;e=typeof e=="string"&&{url:e}||e;if(this.pending[d.name]){return"pending";}if(f.old===h){return f.valid;}f.old=h;var g=this;this.startRequest(d);var c={};c[d.name]=h;b.ajax(b.extend(true,{url:e,mode:"abort",port:"validate"+d.name,dataType:"json",data:c,success:function(k){g.settings.messages[d.name].remote=f.originalMessage;var m=k===true;if(m){var l=g.formSubmitted;g.prepareElement(d);g.formSubmitted=l;g.successList.push(d);g.showErrors();}else{var i={};var j=k||g.defaultMessage(d,"remote");i[d.name]=f.message=b.isFunction(j)?j(h):j;g.showErrors(i);}f.valid=m;g.stopRequest(d,m);}},e));return"pending";},minlength:function(e,c,d){return this.optional(c)||this.getLength(b.trim(e),c)>=d;},maxlength:function(e,c,d){return this.optional(c)||this.getLength(b.trim(e),c)<=d;},rangelength:function(f,c,e){var d=this.getLength(b.trim(f),c);return this.optional(c)||(d>=e[0]&&d<=e[1]);},min:function(e,c,d){return this.optional(c)||e>=d;},max:function(e,c,d){return this.optional(c)||e<=d;},range:function(e,c,d){return this.optional(c)||(e>=d[0]&&e<=d[1]);},email:function(d,c){return this.optional(c)||/^((([a-z]|\d|[!#\$%&'\*\+\-\/=\?\^_`{\|}~]|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])+(\.([a-z]|\d|[!#\$%&'\*\+\-\/=\?\^_`{\|}~]|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])+)*)|((\x22)((((\x20|\x09)*(\x0d\x0a))?(\x20|\x09)+)?(([\x01-\x08\x0b\x0c\x0e-\x1f\x7f]|\x21|[\x23-\x5b]|[\x5d-\x7e]|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])|(\\([\x01-\x09\x0b\x0c\x0d-\x7f]|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF]))))*(((\x20|\x09)*(\x0d\x0a))?(\x20|\x09)+)?(\x22)))@((([a-z]|\d|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])|(([a-z]|\d|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])([a-z]|\d|-|\.|_|~|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])*([a-z]|\d|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])))\.)+(([a-z]|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])|(([a-z]|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])([a-z]|\d|-|\.|_|~|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])*([a-z]|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])))\.?$/i.test(d);},url:function(d,c){return this.optional(c)||/^(https?|ftp):\/\/(((([a-z]|\d|-|\.|_|~|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])|(%[\da-f]{2})|[!\$&'\(\)\*\+,;=]|:)*@)?(((\d|[1-9]\d|1\d\d|2[0-4]\d|25[0-5])\.(\d|[1-9]\d|1\d\d|2[0-4]\d|25[0-5])\.(\d|[1-9]\d|1\d\d|2[0-4]\d|25[0-5])\.(\d|[1-9]\d|1\d\d|2[0-4]\d|25[0-5]))|((([a-z]|\d|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])|(([a-z]|\d|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])([a-z]|\d|-|\.|_|~|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])*([a-z]|\d|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])))\.)+(([a-z]|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])|(([a-z]|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])([a-z]|\d|-|\.|_|~|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])*([a-z]|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])))\.?)(:\d*)?)(\/((([a-z]|\d|-|\.|_|~|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])|(%[\da-f]{2})|[!\$&'\(\)\*\+,;=]|:|@)+(\/(([a-z]|\d|-|\.|_|~|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])|(%[\da-f]{2})|[!\$&'\(\)\*\+,;=]|:|@)*)*)?)?(\?((([a-z]|\d|-|\.|_|~|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])|(%[\da-f]{2})|[!\$&'\(\)\*\+,;=]|:|@)|[\uE000-\uF8FF]|\/|\?)*)?(\#((([a-z]|\d|-|\.|_|~|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])|(%[\da-f]{2})|[!\$&'\(\)\*\+,;=]|:|@)|\/|\?)*)?$/i.test(d);},date:function(d,c){return this.optional(c)||!/Invalid|NaN/.test(new Date(d));},dateISO:function(d,c){return this.optional(c)||/^\d{4}[\/-]\d{1,2}[\/-]\d{1,2}$/.test(d);},number:function(d,c){return this.optional(c)||/^-?(?:\d+|\d{1,3}(?:,\d{3})+)(?:\.\d+)?$/.test(d);},digits:function(d,c){return this.optional(c)||/^\d+$/.test(d);},creditcard:function(i,e){if(this.optional(e)){return"dependency-mismatch";}if(/[^0-9-]+/.test(i)){return false;}var g=0,h=0,c=false;i=i.replace(/\D/g,"");for(var f=i.length-1;f>=0;f--){var d=i.charAt(f);var h=parseInt(d,10);if(c){if((h*=2)>9){h-=9;}}g+=h;c=!c;}return(g%10)==0;},accept:function(e,c,d){d=typeof d=="string"?d.replace(/,/g,"|"):"png|jpe?g|gif";return this.optional(c)||e.match(new RegExp(".("+d+")$","i"));},equalTo:function(f,c,d){var e=b(d).unbind(".validate-equalTo").bind("blur.validate-equalTo",function(){b(c).valid();});return f==e.val();}}});b.format=b.validator.format;})(a);(function(b){var d={};if(b.ajaxPrefilter){b.ajaxPrefilter(function(g,e,h){var f=g.port;if(g.mode=="abort"){if(d[f]){d[f].abort();}d[f]=h;}});}else{var c=b.ajax;b.ajax=function(g){var e=("mode" in g?g:b.ajaxSettings).mode,f=("port" in g?g:b.ajaxSettings).port;if(e=="abort"){if(d[f]){d[f].abort();}return(d[f]=c.apply(this,arguments));}return c.apply(this,arguments);};}})(a);(function(b){if(!b.event.special.focusin&&!b.event.special.focusout&&document.addEventListener){b.each({focus:"focusin",blur:"focusout"},function(e,c){b.event.special[c]={setup:function(){this.addEventListener(e,d,true);},teardown:function(){this.removeEventListener(e,d,true);},handler:function(f){arguments[0]=b.event.fix(f);arguments[0].type=c;return b.event.handle.apply(this,arguments);}};function d(f){f=b.event.fix(f);f.type=c;return b.event.handle.call(this,f);}});}b.extend(b.fn,{validateDelegate:function(c,e,d){return this.bind(e,function(f){var g=b(f.target);if(g.is(c)){return d.apply(g,arguments);}});}});})(a);});bettercms.define("bcms.jquery.validate.unobtrusive",["bcms.jquery","bcms.jquery.unobtrusive"],function(a){
/*
    ** Unobtrusive validation support library for jQuery and jQuery Validate
    ** Copyright (C) Microsoft Corporation. All rights reserved.
    */
(function(b){var c=b.validator,d,f="unobtrusiveValidation";function m(p,q,r){p.rules[q]=r;if(p.message){p.messages[q]=p.message;}}function n(p){return p.replace(/^\s+|\s+$/g,"").split(/\s*,\s*/g);}function g(p){return p.replace(/([!"#$%&'()*+,./:;<=>?@\[\\\]^`{|}~])/g,"\\$1");}function h(p){return p.substr(0,p.lastIndexOf(".")+1);}function e(q,p){if(q.indexOf("*.")===0){q=q.replace("*.",p);}return q;}function i(q,r){var p=b(this).find("[data-valmsg-for='"+g(r[0].name)+"']"),s=b.parseJSON(p.attr("data-valmsg-replace"))!==false;p.removeClass("bcms-field-validation-valid").addClass("bcms-field-validation-error");q.data("unobtrusiveContainer",p);if(s){p.empty();q.removeClass("bcms-input-validation-error").appendTo(p);}else{q.hide();}}function j(q,s){var p=b(this).find("[data-valmsg-summary=true]"),r=p.find("ul");if(r&&r.length&&s.errorList.length){r.empty();p.addClass("bcms-validation-summary-errors").removeClass("bcms-validation-summary-valid");b.each(s.errorList,function(){b("<li />").html(this.message).appendTo(r);});}}function l(q){var p=q.data("unobtrusiveContainer"),r=b.parseJSON(p.attr("data-valmsg-replace"));if(p){p.addClass("bcms-field-validation-valid").removeClass("bcms-field-validation-error");q.removeData("unobtrusiveContainer");if(r){p.empty();}}}function k(q){var p=b(this);p.data("validator").resetForm();p.find(".bcms-validation-summary-errors").addClass("bcms-validation-summary-valid").removeClass("bcms-validation-summary-errors");p.find(".bcms-field-validation-error").addClass("bcms-field-validation-valid").removeClass("bcms-field-validation-error").removeData("unobtrusiveContainer").find(">*").removeData("unobtrusiveContainer");}function o(q){var p=b(q),s=p.data(f),r=b.proxy(k,q);if(!s){s={options:{errorClass:"bcms-input-validation-error",errorElement:"span",errorPlacement:b.proxy(i,q),invalidHandler:b.proxy(j,q),messages:{},rules:{},success:b.proxy(l,q)},attachValidation:function(){p.unbind("reset."+f,r).bind("reset."+f,r).validate(this.options);},validate:function(){p.validate();return p.valid();}};p.data(f,s);}return s;}c.unobtrusive={adapters:[],parseElement:function(q,u){var p=b(q),r=p.parents("form.bcms-ajax-form")[0],v,t,s;if(!r){return;}v=o(r);v.options.rules[q.name]=t={};v.options.messages[q.name]=s={};b.each(this.adapters,function(){var y="data-val-"+this.name,w=p.attr(y),x={};if(w!==undefined){y+="-";b.each(this.params,function(){x[this]=p.attr(y+this);});this.adapt({element:q,form:r,message:w,params:x,rules:t,messages:s});}});b.extend(t,{__dummy__:true});if(!u){v.attachValidation();}},parse:function(q){var p=b(q).parents("form.bcms-ajax-form").andSelf().add(b(q).find("form.bcms-ajax-form")).filter("form.bcms-ajax-form");b(q).find(":input[data-val=true]").each(function(){c.unobtrusive.parseElement(this,true);});p.each(function(){var r=o(this);if(r){r.attachValidation();}});}};d=c.unobtrusive.adapters;d.add=function(p,r,q){if(!q){q=r;r=[];}this.push({name:p,params:r,adapt:q});return this;};d.addBool=function(p,q){return this.add(p,function(r){m(r,q||p,true);});};d.addMinMax=function(p,u,r,t,s,q){return this.add(p,[s||"min",q||"max"],function(x){var w=x.params.min,v=x.params.max;if(w&&v){m(x,t,[w,v]);}else{if(w){m(x,u,w);}else{if(v){m(x,r,v);}}}});};d.addSingleVal=function(p,q,r){return this.add(p,[q||"val"],function(s){m(s,r||p,s.params[q]);});};c.addMethod("__dummy__",function(r,p,q){return true;});c.addMethod("regex",function(s,p,r){var q;if(this.optional(p)){return true;}q=new RegExp(r).exec(s);return(q&&(q.index===0)&&(q[0].length===s.length));});c.addMethod("nonalphamin",function(s,p,r){var q;if(r){q=s.match(/\W/g);q=q&&q.length>=r;}return q;});d.addSingleVal("accept","exts").addSingleVal("regex","pattern");d.addBool("creditcard").addBool("date").addBool("digits").addBool("email").addBool("number").addBool("url");d.addMinMax("length","minlength","maxlength","rangelength").addMinMax("range","min","max","range");d.add("equalto",["other"],function(r){var t=h(r.element.name),s=r.params.other,q=e(s,t),p=b(r.form).find(":input[name='"+g(q)+"']")[0];m(r,"equalTo",p);});d.add("required",function(p){if(p.element.tagName.toUpperCase()!=="INPUT"||p.element.type.toUpperCase()!=="CHECKBOX"){m(p,"required",true);}});d.add("remote",["url","type","additionalfields"],function(p){var r={url:p.params.url,type:p.params.type||"GET",data:{}},q=h(p.element.name);b.each(n(p.params.additionalfields||p.element.name),function(t,s){var u=e(s,q);r.data[u]=function(){return b(p.form).find(":input[name='"+g(u)+"']").val();};});m(p,"remote",r);});d.add("password",["min","nonalphamin","regex"],function(p){if(p.params.min){m(p,"minlength",p.params.min);}if(p.params.nonalphamin){m(p,"nonalphamin",p.params.nonalphamin);}if(p.params.regex){m(p,"regex",p.params.regex);}});b(function(){c.unobtrusive.parse(document);});}(a));});bettercms.define("bcms.jquery.autocomplete",["bcms.jquery","bcms"],function(a,c){var e=(function(){return{extend:function(g,f){return a.extend(g,f);},createNode:function(g){var f=document.createElement("div");f.innerHTML=g;return f.firstChild;}};}()),d={ESC:27,TAB:9,RETURN:13,UP:38,DOWN:40};function b(g,i){var h=function(){},j=this,f={autoSelectFirst:false,appendTo:"body",serviceUrl:null,lookup:null,onSelect:null,width:"auto",minChars:1,maxHeight:300,deferRequestBy:0,params:{},formatResult:b.formatResult,delimiter:null,zIndex:9999,type:"GET",noCache:false,onSearchStart:h,onBeforeSearchStart:h,onSearchComplete:h,containerClass:"autocomplete-suggestions",tabDisabled:false,dataType:"text",lookupFilter:function(m,k,l){return m.value.toLowerCase().indexOf(l)!==-1;},paramName:"query",transformResult:function(k){return typeof k==="string"?a.parseJSON(k):k;}};j.element=g;j.el=a(g);j.suggestions=[];j.badQueries=[];j.selectedIndex=-1;j.currentValue=j.element.value;j.intervalId=0;j.cachedResponse=[];j.onChangeInterval=null;j.onChange=null;j.ignoreValueChange=false;j.isLocal=false;j.suggestionsContainer=null;j.options=a.extend({},f,i);j.classes={selected:"autocomplete-selected",suggestion:"autocomplete-suggestion"};j.initialize();j.setOptions(i);}b.utils=e;a.Autocomplete=b;b.formatResult=function(i,f){var h=new RegExp("(\\"+["/",".","*","+","?","|","(",")","[","]","{","}","\\"].join("|\\")+")","g"),g="("+f.replace(h,"\\$1")+")";return i.value.replace(new RegExp(g,"gi"),"<strong>$1</strong>");};b.prototype={killerFn:null,initialize:function(){var j=this,i="."+j.classes.suggestion,h=j.classes.selected,g=j.options,f;j.element.setAttribute("autocomplete","off");j.killerFn=function(k){if(a(k.target).closest("."+j.options.containerClass).length===0){j.killSuggestions();j.disableKillerFn();}};if(!g.width||g.width==="auto"){g.width=j.el.outerWidth();}j.suggestionsContainer=b.utils.createNode('<div class="'+g.containerClass+'" style="position: absolute; display: none;"></div>');f=a(j.suggestionsContainer);f.appendTo(g.appendTo).width(g.width);f.on("mouseover.autocomplete",i,function(){j.activate(a(this).data("index"));});f.on("mouseout.autocomplete",function(){j.selectedIndex=-1;f.children("."+h).removeClass(h);});f.on("click.autocomplete",i,function(){j.select(a(this).data("index"),false);});j.fixPosition();if(window.opera){j.el.on("keypress.autocomplete",function(k){j.onKeyPress(k);});}else{j.el.on("keydown.autocomplete",function(k){j.onKeyPress(k);});}j.el.on("keyup.autocomplete",function(k){j.onKeyUp(k);});j.el.on("blur.autocomplete",function(){j.onBlur();});j.el.on("focus.autocomplete",function(){j.fixPosition();});},onBlur:function(){this.enableKillerFn();},setOptions:function(g){var h=this,f=h.options;e.extend(f,g);h.isLocal=a.isArray(f.lookup);if(h.isLocal){f.lookup=h.verifySuggestionsFormat(f.lookup);}a(h.suggestionsContainer).css({"max-height":f.maxHeight+"px",width:f.width+"px","z-index":f.zIndex});},clearCache:function(){this.cachedResponse=[];this.badQueries=[];},clear:function(){this.clearCache();this.currentValue=null;this.suggestions=[];},disable:function(){this.disabled=true;},enable:function(){this.disabled=false;},fixPosition:function(){var g=this,f;if(g.options.appendTo!=="body"){return;}f=g.el.offset();a(g.suggestionsContainer).css({top:(f.top+g.el.outerHeight())+"px",left:f.left+"px"});},enableKillerFn:function(){var f=this;a(document).on("click.autocomplete",f.killerFn);},disableKillerFn:function(){var f=this;a(document).off("click.autocomplete",f.killerFn);},killSuggestions:function(){var f=this;f.stopKillSuggestions();f.intervalId=window.setInterval(function(){f.hide();f.stopKillSuggestions();},300);},stopKillSuggestions:function(){window.clearInterval(this.intervalId);},onKeyPress:function(f){var g=this;if(!g.disabled&&!g.visible&&f.keyCode===d.DOWN&&g.currentValue){g.suggest();return;}if(g.disabled||!g.visible){return;}switch(f.keyCode){case d.ESC:g.el.val(g.currentValue);g.hide();break;case d.TAB:case d.RETURN:if(g.selectedIndex===-1){g.hide();return;}g.select(g.selectedIndex,f.keyCode===d.RETURN);if(f.keyCode===d.TAB&&this.options.tabDisabled===false){return;}break;case d.UP:g.moveUp();break;case d.DOWN:g.moveDown();break;default:return;}f.stopImmediatePropagation();f.preventDefault();},onKeyUp:function(f){var g=this;if(g.disabled){return;}switch(f.keyCode){case d.UP:case d.DOWN:return;}clearInterval(g.onChangeInterval);if(g.currentValue!==g.el.val()){if(g.options.deferRequestBy>0){g.onChangeInterval=setInterval(function(){g.onValueChange();},g.options.deferRequestBy);}else{g.onValueChange();}}},onValueChange:function(){var g=this,f;clearInterval(g.onChangeInterval);g.currentValue=g.element.value;f=g.getQuery(g.currentValue);g.selectedIndex=-1;if(g.ignoreValueChange){g.ignoreValueChange=false;return;}if(f.length<g.options.minChars){g.hide();}else{g.getSuggestions(f);}},getQuery:function(h){var f=this.options.delimiter,g;if(!f){return a.trim(h);}g=h.split(f);return a.trim(g[g.length-1]);},getSuggestionsLocal:function(g){var i=this,h=g.toLowerCase(),f=i.options.lookupFilter;return{suggestions:a.grep(i.options.lookup,function(j){return f(j,g,h);})};},getSuggestions:function(g){var h,j=this,f=j.options,i=f.serviceUrl;if(f.onBeforeSearchStart.call(j.element,f.params)===false){return;}h=j.isLocal?j.getSuggestionsLocal(g):j.cachedResponse[g];if(h&&a.isArray(h.suggestions)){j.suggestions=h.suggestions;j.suggest();}else{if(!j.isBadQuery(g)){f.params[f.paramName]=g;if(f.onSearchStart.call(j.element,f.params)===false){return;}if(a.isFunction(f.serviceUrl)){i=f.serviceUrl.call(j.element,g);}a.ajax({url:i,data:f.ignoreParams?null:f.params,type:f.type,dataType:f.dataType}).done(function(k){j.processResponse(k,g);f.onSearchComplete.call(j.element,g);});}}},isBadQuery:function(h){var f=this.badQueries,g=f.length;while(g--){if(h.indexOf(f[g])===0){return true;}}return false;},hide:function(){var f=this;f.visible=false;f.selectedIndex=-1;a(f.suggestionsContainer).hide();},suggest:function(){if(this.suggestions.length===0){this.hide();return;}var k=this,i=k.options.formatResult,l=k.getQuery(k.currentValue),f=k.classes.suggestion,g=k.classes.selected,h=a(k.suggestionsContainer),j="";a.each(k.suggestions,function(m,n){j+='<div class="'+f+'" data-index="'+m+'">'+i(n,l)+"</div>";});h.html(j).show();k.visible=true;if(k.options.autoSelectFirst){k.selectedIndex=0;h.children().first().addClass(g);}},verifySuggestionsFormat:function(f){if(f.length&&typeof f[0]==="string"){return a.map(f,function(g){return{value:g,data:null};});}return f;},processResponse:function(h,g){var j=this,f=j.options,i=f.transformResult(h,g);i.suggestions=j.verifySuggestionsFormat(i.suggestions);if(!f.noCache){j.cachedResponse[i[f.paramName]]=i;if(i.suggestions.length===0){j.badQueries.push(i[f.paramName]);}}if(g===j.getQuery(j.currentValue)){j.suggestions=i.suggestions;j.suggest();}},activate:function(i){var k=this,f,j=k.classes.selected,h=a(k.suggestionsContainer),g=h.children();h.children("."+j).removeClass(j);k.selectedIndex=i;if(k.selectedIndex!==-1&&g.length>k.selectedIndex){f=g.get(k.selectedIndex);a(f).addClass(j);return f;}return null;},select:function(f,h){var j=this,g=j.suggestions[f];if(g){j.el.val(g);j.ignoreValueChange=h;j.hide();j.onSelect(f);}},moveUp:function(){var f=this;if(f.selectedIndex===-1){return;}if(f.selectedIndex===0){a(f.suggestionsContainer).children().first().removeClass(f.classes.selected);f.selectedIndex=-1;f.el.val(f.currentValue);return;}f.adjustScroll(f.selectedIndex-1);},moveDown:function(){var f=this;if(f.selectedIndex===(f.suggestions.length-1)){return;}f.adjustScroll(f.selectedIndex+1);},adjustScroll:function(h){var k=this,f=k.activate(h),j,l,i,g=25;if(!f){return;}j=f.offsetTop;l=a(k.suggestionsContainer).scrollTop();i=l+k.options.maxHeight-g;if(j<l){a(k.suggestionsContainer).scrollTop(j);}else{if(j>i){a(k.suggestionsContainer).scrollTop(j-k.options.maxHeight+g);}}k.el.val(k.getValue(k.suggestions[h].value));},onSelect:function(f){var i=this,g=i.options.onSelect,h=i.suggestions[f];i.el.val(i.getValue(h.value));if(a.isFunction(g)){g.call(i.element,h);}},getValue:function(j){var i=this,g=i.options.delimiter,f,h;if(!g){return j;}f=i.currentValue;h=f.split(g);if(h.length===1){return j;}return f.substr(0,f.length-h[h.length-1].length)+j;},dispose:function(){var f=this;f.el.off(".autocomplete").removeData("autocomplete");f.disableKillerFn();a(f.suggestionsContainer).remove();}};a.fn.autocomplete=function(h,f){var g="autocomplete";if(arguments.length===0){return this.first().data(g);}return this.each(function(){var i=a(this),j=i.data(g);if(typeof h==="string"){if(j&&typeof j[h]==="function"){j[h](f);}}else{if(j&&j.dispose){j.dispose();}j=new b(this,h);i.data(g,j);}});};return b;});bettercms.define("bcms.jquery.markitup",["bcms.jquery"],function(jquery){(function($){$.fn.markItUp=function(settings,extraSettings){var method,params,options,ctrlKey,shiftKey,altKey;ctrlKey=shiftKey=altKey=false;if(typeof settings=="string"){method=settings;params=extraSettings;}options={id:"",nameSpace:"",root:"",previewHandler:false,previewInWindow:"",previewInElement:"",previewAutoRefresh:true,previewPosition:"after",previewTemplatePath:"~/templates/preview.html",previewParser:false,previewParserPath:"",previewParserVar:"data",resizeHandle:true,beforeInsert:"",afterInsert:"",onEnter:{},onShiftEnter:{},onCtrlEnter:{},onTab:{},markupSet:[{}]};$.extend(options,settings,extraSettings);if(!options.root){$("script").each(function(a,tag){miuScript=$(tag).get(0).src.match(/(.*)jquery\.markitup(\.pack)?\.js$/);if(miuScript!==null){options.root=miuScript[1];}});}var uaMatch=function(ua){ua=ua.toLowerCase();var match=/(chrome)[ \/]([\w.]+)/.exec(ua)||/(webkit)[ \/]([\w.]+)/.exec(ua)||/(opera)(?:.*version|)[ \/]([\w.]+)/.exec(ua)||/(msie) ([\w.]+)/.exec(ua)||ua.indexOf("compatible")<0&&/(mozilla)(?:.*? rv:([\w.]+)|)/.exec(ua)||[];return{browser:match[1]||"",version:match[2]||"0"};};var matched=uaMatch(navigator.userAgent);var browser={};if(matched.browser){browser[matched.browser]=true;browser.version=matched.version;}if(browser.chrome){browser.webkit=true;}else{if(browser.webkit){browser.safari=true;}}return this.each(function(){var $$,textarea,levels,scrollPosition,caretPosition,caretOffset,clicked,hash,header,footer,previewWindow,template,iFrame,abort;$$=$(this);textarea=this;levels=[];abort=false;scrollPosition=caretPosition=0;caretOffset=-1;options.previewParserPath=localize(options.previewParserPath);options.previewTemplatePath=localize(options.previewTemplatePath);if(method){switch(method){case"remove":remove();break;case"insert":markup(params);break;default:$.error("Method "+method+" does not exist on jQuery.markItUp");}return;}function localize(data,inText){if(inText){return data.replace(/("|')~\//g,"$1"+options.root);}return data.replace(/^~\//,options.root);}function init(){id="";nameSpace="";if(options.id){id='id="'+options.id+'"';}else{if($$.attr("id")){id='id="markItUp'+($$.attr("id").substr(0,1).toUpperCase())+($$.attr("id").substr(1))+'"';}}if(options.nameSpace){nameSpace='class="'+options.nameSpace+'"';}$$.wrap("<div "+nameSpace+"></div>");$$.wrap("<div "+id+' class="markItUp"></div>');$$.wrap('<div class="markItUpContainer"></div>');$$.addClass("markItUpEditor");header=$('<div class="markItUpHeader"></div>').insertBefore($$);$(dropMenus(options.markupSet)).appendTo(header);footer=$('<div class="markItUpFooter"></div>').insertAfter($$);if(options.resizeHandle===true&&browser.safari!==true){resizeHandle=$('<div class="markItUpResizeHandle"></div>').insertAfter($$).bind("mousedown.markItUp",function(e){var h=$$.height(),y=e.clientY,mouseMove,mouseUp;mouseMove=function(e){$$.css("height",Math.max(20,e.clientY+h-y)+"px");return false;};mouseUp=function(e){$("html").unbind("mousemove.markItUp",mouseMove).unbind("mouseup.markItUp",mouseUp);return false;};$("html").bind("mousemove.markItUp",mouseMove).bind("mouseup.markItUp",mouseUp);});footer.append(resizeHandle);}$$.bind("keydown.markItUp",keyPressed).bind("keyup",keyPressed);$$.bind("insertion.markItUp",function(e,settings){if(settings.target!==false){get();}if(textarea===$.markItUp.focused){markup(settings);}});$$.bind("focus.markItUp",function(){$.markItUp.focused=this;});if(options.previewInElement){refreshPreview();}}function dropMenus(markupSet){var ul=$("<ul></ul>"),i=0;$("li:hover > ul",ul).css("display","block");$.each(markupSet,function(){var button=this,t="",title,li,j;title=(button.key)?(button.name||"")+" [Ctrl+"+button.key+"]":(button.name||"");key=(button.key)?'accesskey="'+button.key+'"':"";if(button.separator){li=$('<li class="markItUpSeparator">'+(button.separator||"")+"</li>").appendTo(ul);}else{i++;for(j=levels.length-1;j>=0;j--){t+=levels[j]+"-";}li=$('<li class="markItUpButton markItUpButton'+t+(i)+" "+(button.className||"")+'"><a href="" '+key+' title="'+title+'">'+(button.name||"")+"</a></li>").bind("contextmenu.markItUp",function(){return false;}).bind("click.markItUp",function(e){e.preventDefault();}).bind("focusin.markItUp",function(){$$.focus();}).bind("mouseup",function(){if(button.call){eval(button.call)();}setTimeout(function(){markup(button);},1);return false;}).bind("mouseenter.markItUp",function(){$("> ul",this).show();$(document).one("click",function(){$("ul ul",header).hide();});}).bind("mouseleave.markItUp",function(){$("> ul",this).hide();}).appendTo(ul);if(button.dropMenu){levels.push(i);$(li).addClass("markItUpDropMenu").append(dropMenus(button.dropMenu));}}});levels.pop();return ul;}function magicMarkups(string){if(string){string=string.toString();string=string.replace(/\(\!\(([\s\S]*?)\)\!\)/g,function(x,a){var b=a.split("|!|");if(altKey===true){return(b[1]!==undefined)?b[1]:b[0];}else{return(b[1]===undefined)?"":b[0];}});string=string.replace(/\[\!\[([\s\S]*?)\]\!\]/g,function(x,a){var b=a.split(":!:");if(abort===true){return false;}value=prompt(b[0],(b[1])?b[1]:"");if(value===null){abort=true;}return value;});return string;}return"";}function prepare(action){if($.isFunction(action)){action=action(hash);}return magicMarkups(action);}function build(string){var openWith=prepare(clicked.openWith);var placeHolder=prepare(clicked.placeHolder);var replaceWith=prepare(clicked.replaceWith);var closeWith=prepare(clicked.closeWith);var openBlockWith=prepare(clicked.openBlockWith);var closeBlockWith=prepare(clicked.closeBlockWith);var multiline=clicked.multiline;if(replaceWith!==""){block=openWith+replaceWith+closeWith;}else{if(selection===""&&placeHolder!==""){block=openWith+placeHolder+closeWith;}else{string=string||selection;var lines=[string],blocks=[];if(multiline===true){lines=string.split(/\r?\n/);}for(var l=0;l<lines.length;l++){line=lines[l];var trailingSpaces;if(trailingSpaces=line.match(/ *$/)){blocks.push(openWith+line.replace(/ *$/g,"")+closeWith+trailingSpaces);}else{blocks.push(openWith+line+closeWith);}}block=blocks.join("\n");}}block=openBlockWith+block+closeBlockWith;return{block:block,openBlockWith:openBlockWith,openWith:openWith,replaceWith:replaceWith,placeHolder:placeHolder,closeWith:closeWith,closeBlockWith:closeBlockWith};}function markup(button){var len,j,n,i;hash=clicked=button;get();$.extend(hash,{line:"",root:options.root,textarea:textarea,selection:(selection||""),caretPosition:caretPosition,ctrlKey:ctrlKey,shiftKey:shiftKey,altKey:altKey});prepare(options.beforeInsert);prepare(clicked.beforeInsert);if((ctrlKey===true&&shiftKey===true)||button.multiline===true){prepare(clicked.beforeMultiInsert);}$.extend(hash,{line:1});if((ctrlKey===true&&shiftKey===true)){lines=selection.split(/\r?\n/);for(j=0,n=lines.length,i=0;i<n;i++){if($.trim(lines[i])!==""){$.extend(hash,{line:++j,selection:lines[i]});lines[i]=build(lines[i]).block;}else{lines[i]="";}}string={block:lines.join("\n")};start=caretPosition;len=string.block.length+((browser.opera)?n-1:0);}else{if(ctrlKey===true){string=build(selection);start=caretPosition+string.openWith.length;len=string.block.length-string.openWith.length-string.closeWith.length;len=len-(string.block.match(/ $/)?1:0);len-=fixIeBug(string.block);}else{if(shiftKey===true){string=build(selection);start=caretPosition;len=string.block.length;len-=fixIeBug(string.block);}else{string=build(selection);start=caretPosition+string.block.length;len=0;start-=fixIeBug(string.block);}}}if((selection===""&&string.replaceWith==="")){caretOffset+=fixOperaBug(string.block);start=caretPosition+string.openBlockWith.length+string.openWith.length;len=string.block.length-string.openBlockWith.length-string.openWith.length-string.closeWith.length-string.closeBlockWith.length;caretOffset=$$.val().substring(caretPosition,$$.val().length).length;caretOffset-=fixOperaBug($$.val().substring(0,caretPosition));}$.extend(hash,{caretPosition:caretPosition,scrollPosition:scrollPosition});if(string.block!==selection&&abort===false){insert(string.block);set(start,len);}else{caretOffset=-1;}get();$.extend(hash,{line:"",selection:selection});if((ctrlKey===true&&shiftKey===true)||button.multiline===true){prepare(clicked.afterMultiInsert);}prepare(clicked.afterInsert);prepare(options.afterInsert);if(previewWindow&&options.previewAutoRefresh){refreshPreview();}shiftKey=altKey=ctrlKey=abort=false;}function fixOperaBug(string){if(browser.opera){return string.length-string.replace(/\n*/g,"").length;}return 0;}function fixIeBug(string){if(browser.msie){return string.length-string.replace(/\r*/g,"").length;}return 0;}function insert(block){if(document.selection){var newSelection=document.selection.createRange();newSelection.text=block;}else{textarea.value=textarea.value.substring(0,caretPosition)+block+textarea.value.substring(caretPosition+selection.length,textarea.value.length);}}function set(start,len){if(textarea.createTextRange){if(browser.opera&&browser.version>=9.5&&len==0){return false;}range=textarea.createTextRange();range.collapse(true);range.moveStart("character",start);range.moveEnd("character",len);range.select();}else{if(textarea.setSelectionRange){textarea.setSelectionRange(start,start+len);}}textarea.scrollTop=scrollPosition;textarea.focus();}function get(){textarea.focus();scrollPosition=textarea.scrollTop;if(document.selection){selection=document.selection.createRange().text;if(browser.msie){var range=document.selection.createRange(),rangeCopy=range.duplicate();rangeCopy.moveToElementText(textarea);caretPosition=-1;while(rangeCopy.inRange(range)){rangeCopy.moveStart("character");caretPosition++;}}else{caretPosition=textarea.selectionStart;}}else{caretPosition=textarea.selectionStart;selection=textarea.value.substring(caretPosition,textarea.selectionEnd);}return selection;}function preview(){if(typeof options.previewHandler==="function"){previewWindow=true;}else{if(options.previewInElement){previewWindow=$(options.previewInElement);}else{if(!previewWindow||previewWindow.closed){if(options.previewInWindow){previewWindow=window.open("","preview",options.previewInWindow);$(window).unload(function(){previewWindow.close();});}else{iFrame=$('<iframe class="markItUpPreviewFrame"></iframe>');if(options.previewPosition=="after"){iFrame.insertAfter(footer);}else{iFrame.insertBefore(header);}previewWindow=iFrame[iFrame.length-1].contentWindow||frame[iFrame.length-1];}}else{if(altKey===true){if(iFrame){iFrame.remove();}else{previewWindow.close();}previewWindow=iFrame=false;}}}}if(!options.previewAutoRefresh){refreshPreview();}if(options.previewInWindow){previewWindow.focus();}}function refreshPreview(){renderPreview();}function renderPreview(){var phtml;if(options.previewHandler&&typeof options.previewHandler==="function"){options.previewHandler($$.val());}else{if(options.previewParser&&typeof options.previewParser==="function"){var data=options.previewParser($$.val());writeInPreview(localize(data,1));}else{if(options.previewParserPath!==""){$.ajax({type:"POST",dataType:"text",global:false,url:options.previewParserPath,data:options.previewParserVar+"="+encodeURIComponent($$.val()),success:function(data){writeInPreview(localize(data,1));}});}else{if(!template){$.ajax({url:options.previewTemplatePath,dataType:"text",global:false,success:function(data){writeInPreview(localize(data,1).replace(/<!-- content -->/g,$$.val()));}});}}}}return false;}function writeInPreview(data){if(options.previewInElement){$(options.previewInElement).html(data);}else{if(previewWindow&&previewWindow.document){try{sp=previewWindow.document.documentElement.scrollTop;}catch(e){sp=0;}previewWindow.document.open();previewWindow.document.write(data);previewWindow.document.close();previewWindow.document.documentElement.scrollTop=sp;}}}function keyPressed(e){shiftKey=e.shiftKey;altKey=e.altKey;ctrlKey=(!(e.altKey&&e.ctrlKey))?(e.ctrlKey||e.metaKey):false;if(e.type==="keydown"){if(ctrlKey===true){li=$('a[accesskey="'+((e.keyCode==13)?"\\n":String.fromCharCode(e.keyCode))+'"]',header).parent("li");if(li.length!==0){ctrlKey=false;setTimeout(function(){li.triggerHandler("mouseup");},1);return false;}}if(e.keyCode===13||e.keyCode===10){if(ctrlKey===true){ctrlKey=false;markup(options.onCtrlEnter);return options.onCtrlEnter.keepDefault;}else{if(shiftKey===true){shiftKey=false;markup(options.onShiftEnter);return options.onShiftEnter.keepDefault;}else{markup(options.onEnter);return options.onEnter.keepDefault;}}}if(e.keyCode===9){if(shiftKey==true||ctrlKey==true||altKey==true){return false;}if(caretOffset!==-1){get();caretOffset=$$.val().length-caretOffset;set(caretOffset,0);caretOffset=-1;return false;}else{markup(options.onTab);return options.onTab.keepDefault;}}}}function remove(){$$.unbind(".markItUp").removeClass("markItUpEditor");$$.parent("div").parent("div.markItUp").parent("div").replaceWith($$);$$.data("markItUp",null);}init();});};$.fn.markItUpRemove=function(){return this.each(function(){$(this).markItUp("remove");});};$.markItUp=function(settings){var options={target:false};$.extend(options,settings);if(options.target){return $(options.target).each(function(){$(this).focus();$(this).trigger("insertion",[options]);});}else{$("textarea").trigger("insertion",[options]);}};})(jquery);});bettercms.define("bcms.autocomplete",["bcms.jquery","bcms","bcms.jquery.autocomplete","bcms.ko.extenders","bcms.antiXss"],function(a,e,g,h,c){var d={},i={},f={};d.links=i;d.globalization=f;function b(){var l=function(m){var n=typeof m==="string"?a.parseJSON(m):m;return{suggestions:a.map(n.suggestions,function(o){return{value:c.encodeHtml(o.Value),data:o.Key,jsonItem:o};})};},k=function(p,n){var m=n.getAdditionalParameters(),o;if(n.params){for(o in n.params){p[o]=n.params[o];}}for(o in m){p[o]=m[o];}},j=function(n,m){return m.onBeforeSearchStart(n);};h.bindingHandlers.autocomplete={init:function(p,r,m,s){var n=s&&s.autocompleteViewModel?s.autocompleteViewModel:s,q=r()=="onlyExisting",o=new g(p,{serviceUrl:n.serviceUrl,type:"POST",appendTo:a(p).parent(),autoSelectFirst:q,transformResult:l,onSelect:function(t){n.setItem(t.data,t.value,t.jsonItem);},onSearchStart:function(t){k(t,n);},onBeforeSearchStart:function(t){j(t,n);}});n.autocompleteInstance=o;}};h.bindingHandlers.autocompleteList={init:function(p,r,m,s){var n=s&&s.autocompleteViewModel?s.autocompleteViewModel:s,q=r()=="onlyExisting",o=new g(p,{serviceUrl:n.serviceUrl,type:"POST",appendTo:a(p).parent(),autoSelectFirst:q,transformResult:l,onSelect:function(t){n.newItem(t.value);if(q){n.addItemWithId(t.value,t.data);}else{n.addItem();}n.clearItem();if(n.autocompleteInstance){n.autocompleteInstance.ignoreValueChange=false;}},onSearchStart:function(t){k(t,n);},onBeforeSearchStart:function(t){j(t,n);},width:n.width});n.autocompleteInstance=o;}};}d.AutocompleteViewModel=(function(){d.AutocompleteViewModel=function(k){var l=this,j=a.extend({serviceUrl:null,onItemSelect:function(m){}},k);l.autocompleteInstance=null;l.serviceUrl=j.serviceUrl;l.item=null;l.setItem=function(n,o,m){if(n||o){if(n&&o){l.item=new d.AutocompleteItemViewModel(l,o,n);}else{l.item=new d.AutocompleteItemViewModel(l,o);}j.onItemSelect(l.item,m);}};};d.AutocompleteViewModel.prototype.getAdditionalParameters=function(){return{};};d.AutocompleteViewModel.prototype.onBeforeSearchStart=function(j){return true;};return d.AutocompleteViewModel;})();d.AutocompleteListViewModel=(function(){d.AutocompleteListViewModel=function(j,l){var m=this,k=a.extend({serviceUrl:null,pattern:null},l);m.autocompleteInstance=null;m.serviceUrl=k.serviceUrl;m.pattern=k.pattern;m.params=k.params;m.width=k.width;m.isExpanded=h.observable(true);m.hasfocus=h.observable(false);m.items=h.observableArray();m.newItem=h.observable().extend({maxLength:{maxLength:h.maxLength.name},activeDirectoryCompliant:""});m.expandCollapse=function(){var n=!m.isExpanded();m.isExpanded(n);m.hasfocus(n);m.clearItem();};m.addItem=function(){var o=a.trim(m.newItem()),n;if(o&&!m.alreadyExists(o)&&!m.newItem.hasError()){n=new d.AutocompleteItemViewModel(m,o);m.items.push(n);}m.clearItem();};m.addItemWithId=function(p,n){if(p&&n&&!m.alreadyExists(n)){var o=new d.AutocompleteItemViewModel(m,p,n);m.items.push(o);}m.clearItem();};m.alreadyExists=function(p){var n,o;for(n=0;n<m.items().length;n++){o=m.items()[n];if(o.name().toLowerCase()==p.toLowerCase()){o.isActive(true);setTimeout(function(){o.isActive(false);},4000);m.clearItem();return true;}}return false;};m.getExistingItems=function(){var n="",o,p;for(o=0;o<m.items().length;o++){p=m.items()[o];if(n.length>0){n=n+"|";}n+=p.id()||p.name();}return n;};m.clearItem=function(){m.newItem("");if(m.autocompleteInstance){m.autocompleteInstance.currentValue="";}};m.applyItemList=function(o){m.removeAll();if(o){for(var n=0;n<o.length;n++){if(o[n].Value&&o[n].Key){m.items.push(new d.AutocompleteItemViewModel(m,o[n].Value,o[n].Key));}else{m.items.push(new d.AutocompleteItemViewModel(m,o[n]));}}}};m.removeAll=function(){m.items.removeAll();};m.applyItemList(j);};d.AutocompleteListViewModel.prototype.getAdditionalParameters=function(){return{ExistingItems:this.getExistingItems()};};d.AutocompleteListViewModel.prototype.onBeforeSearchStart=function(j){return true;};return d.AutocompleteListViewModel;})();d.AutocompleteItemViewModel=(function(){d.AutocompleteItemViewModel=function(l,k,j){var m=this;m.parent=l;m.isActive=h.observable(false);m.name=h.observable(k);m.id=h.observable(j);m.remove=function(){l.items.remove(m);};m.getItemInputName=function(n){if(m.parent.pattern){return a.format(m.parent.pattern,n);}return null;};};return d.AutocompleteItemViewModel;})();d.init=function(){e.logger.debug("Initializing bcms.autocomplete module.");b();};e.registerInit(d.init);return d;});bettercms.define("bcms.spinner.jquery",["bcms.jquery","bcms"],function(b,a){(function(c,e){var l={},k={scrollableParents:".bcms-scroll-window",spinnerContainers:".bcms-spinner-container"},f={indicatorPrefix:"bcms-loading-indicator",generatedPrefix:"bcms-spinner-target-"},j,n=1,d=[];l.showLoading=function(s,q){if(typeof q!=="boolean"){q=true;}if(q){o();}else{l.hideLoading(s);}var t=c(this);if(t.length==0){return null;}var u=t.attr("id");if(!u){u=h();t.attr("id",u);}var r=g(t,s);d.push(r);m(t,r);return this;};l.hideLoading=function(s){var r=g(c(this),s);for(var q=0;q<d.length;q++){if(d[q]==r){d.splice(q,1);break;}}p(r);return this;};function m(v,q){var w=v.attr("id"),t=parseInt(v.width())+parseInt(v.css("padding-right"))+parseInt(v.css("padding-left")),s=parseInt(v.height())+parseInt(v.css("padding-top"))+parseInt(v.css("padding-bottom"));var u=c('<div class="bcms-spinner-container" id="'+q+'" style="display: none; left: 0; top: 0; position: absolute;"></div>');c(u).css("width",t.toString()+"px");c(u).css("height",s.toString()+"px");c(u).css("z-index","5000");c(u).data("target",w);var r=c('<div class="bcms-loader-2"></div>');c(u).html(r);v.append(u);c(u).show();return q;}function p(q){var r=c("#"+q);r.remove();}function o(){c(k.spinnerContainers).each(function(){var q=c(this);q.remove();});d=[];}function g(r,q){if(!q){q=r.attr("id")||"";}if(q){return f.indicatorPrefix+"-"+q;}else{return f.indicatorPrefix;}}function h(){return f.generatedPrefix+(n++);}function i(){c(k.spinnerContainers).each(function(){var t=c(this),s=t.data("target"),r=t.attr("id");if(s){var v=c("#"+s);if(v.length==1){p(r);var u=false;for(var q=0;q<d.length;q++){if(r==d[q]){u=true;break;}}if(u){m(v,r);}}}});return true;}l.init=function(){e.logger.debug("Initializing spinner CMS");c.fn.showLoading=l.showLoading;c.fn.hideLoading=l.hideLoading;c(window).on("resize",function(){clearTimeout(j);j=setTimeout(i,100);});};l.init();})(b,a);});bettercms.define("bcms.antiXss",["bcms"],function(b){var a={},c={antiXssContainsHtmlError:null};a.globalization=c;function d(e){return String(e).replace(/&/g,"&amp;").replace(/</g,"&lt;").replace(/>/g,"&gt;").replace(/"/g,"&quot;").replace(/'/g,"&#039;").replace(/\//g,"&#x2F;");}a.encodeHtml=function(e){return d(e);};a.init=function(){b.logger.debug("Initializing bcms.antiXss module");};b.registerInit(a.init);return a;});bettercms.define("bcms.authentication",["bcms.jquery","bcms","bcms.modal"],function(a,c,g){var b={},h={sideManuHeader:".bcms-sidemenu-header",logoutButton:".bcms-btn-logout",viewAsPublicLink:".bcms-as-public"},f={logoutUrl:null},e={confirmLogoutMessage:null},d={viewAsAnonymous:"bcms-view-page-as-anonymous"};b.links=f;b.selectors=h;b.globalization=e;b.logout=function(){g.confirm({content:b.globalization.confirmLogoutMessage,onAccept:function(){c.redirect(f.logoutUrl);}});};function i(){var k=window.location.href,j=window.location.hash;if(!j&&k.lastIndexOf("#")==k.length-1){j="#";}if(j){k=k.substring(0,k.lastIndexOf(j));}k=k+(k.indexOf("?")>0?"&":"?")+d.viewAsAnonymous+"=1";if(j){k=k+j;}window.open(k);}b.init=function(){a(h.sideManuHeader).find(h.logoutButton).on("click",function(j){j.stopPropagation();b.logout();});a(h.viewAsPublicLink).on("click",function(j){c.stopEventPropagation(j);i();});};c.registerInit(b.init);return b;});bettercms.define("bcms.categories",["bcms.jquery","bcms","bcms.siteSettings","bcms.dynamicContent","bcms.grid","bcms.messages","bcms.modal","bcms.forms","bcms.ko.extenders","bcms.autocomplete","bcms.antiXss"],function(a,h,K,o,t,z,A,r,w,g,f){var B={},x={loadSiteSettingsCategoryTreesListUrl:null,categoryTreeEditDialogUrl:null,saveCategoryTreeUrl:null,deleteCategoryTreeUrl:null,categoriesSuggestionServiceUrl:null},s={categoryTreeCreatorDialogTitle:null,categoryTreeEditorDialogTitle:null,nodeOkButton:null,placeNodeHere:null,categoryTreeIsEmpty:null,deleteCategoryNodeConfirmationMessage:null,someCategoryNodesAreInEditingState:null,categoryTreeDeleteConfirmMessage:null},H={siteSettingsCategoryTreesForm:"#bcms-categorytrees-form",searchField:".bcms-search-query",searchButton:"#bcms-categorytrees-search-btn",siteSettingsGridItemCreateButton:"#bcms-create-categorytree-button",siteSettingsGridItemEditButton:".bcms-grid-item-edit-button",siteSettingsGridItemDeleteButton:".bcms-grid-item-delete-button",siteSettingsGridTableFirstRow:"table.bcms-tables > tbody > tr:first",siteSettingsGridRowTitleCell:".bcms-grid-item-title",siteSettingsGridRowCells:"td",siteSettingsGridRow:"tr",siteSettingsGridRowTemplate:"#bcms-categorytree-list-row-template",siteSettingsGridRowTemplateFirstRow:"tr:first",siteSettingsCategoriesSelect:"#bcms-js-categories-select",categoryTreeForm:".bcms-categorytree-form",categoryTreeAddNodeDataBind:"#bcms-categorytree-addnode",firstTab:"#bcms-tab-1",scrollDiv:"#bcms-scroll-window"},l="00000000-0000-0000-0000-000000000000",n={None:"none",EmptyListZone:"emptyListZone",TopZone:"topZone",MiddleZone:"middleZone",BottomZone:"bottomZone"},q={categoryNodeAdded:"categoryNodeAdded"},C=0;B.links=x;B.globalization=s;B.activeMapModel=null;B.activeMessageContainer=null;B.activeLoadingContainer=null;function J(N){z.refreshBox(B.activeMessageContainer,N);}function M(){var N=a(H.categoryTreeForm);h.updateFormValidator(N);}function L(R){var N=null,P=null;for(var O=0;O<R.length;O++){var Q=R[O];if(!Q.isDeleted()&&!Q.isBeingDragged()){if(N==null){N=Q;}P=Q;}Q.isFirstNode(false);Q.isLastNode(false);}if(N!=null){N.isFirstNode(true);}if(P!=null){P.isLastNode(true);}}function I(N){if(N){a(B.activeLoadingContainer).showLoading();}else{a(B.activeLoadingContainer).hideLoading();}}function c(){w.bindingHandlers.draggableCategoryNode={init:function(P,R,N,S){var O=S,Q={revert:true,revertDuration:0,refreshPositions:true,scroll:true,containment:a(a(H.categoryTreeAddNodeDataBind).get(0)).find(H.scrollDiv).get(0),appendTo:a(a(H.categoryTreeAddNodeDataBind).get(0)).find(H.scrollDiv).get(0),helper:function(){if(O.isExpanded){O.isExpanded(false);}if(O.isBeingDragged){O.isBeingDragged(true);}return a(this).clone().width(a(this).width()).css({zIndex:9999});},start:function(){a(this).hide();},stop:function(T,U){U.helper.remove();a(this).show();if(O.isBeingDragged){O.isBeingDragged(false);}}};if(!O.superDraggable()&&O.getSitemap&&!O.getSitemap().settings.canDragNode){return;}a(P).draggable(Q).data("dragObject",O);}};}function d(){w.bindingHandlers.droppableCategoryNode={init:function(Q,S,N,T){var O=T,P=S(),R={tolerance:"pointer",over:function(){O.activeZone(P);},out:function(){O.activeZone(n.None);},drop:function(V,aa){var W=a(aa.draggable).data("draggable"),U=a(aa.draggable).data("dragObject"),Z=U;aa.helper.remove();if(U.parentNode&&U.parentNode()){U.parentNode().childNodes.remove(U);}else{var Y=new D();Y.title(U.title());if(P==n.EmptyListZone||P==n.MiddleZone){Y.parentNode(O);}else{Y.parentNode(O.parentNode());}if(U.isCustom()){Y.dropOnCancel=true;Y.startEditCategoryTreeNode();Y.callbackAfterSuccessSaving=function(){B.activeMapModel.updateNodesOrderAndParent();};Y.callbackAfterFailSaving=function(ab){ab.parentNode().childNodes.remove(ab);};}Y.superDraggable(U.superDraggable());U=Y;}U.isBeingDragged(false);U.displayOrder(0);var X;if(P==n.EmptyListZone){O.childNodes.splice(0,0,U);}else{if(P==n.TopZone){X=a.inArray(O,O.parentNode().childNodes());O.parentNode().childNodes.splice(X,0,U);}else{if(P==n.MiddleZone){O.childNodes.splice(0,0,U);O.isExpanded(true);}else{if(P==n.BottomZone){X=a.inArray(O,O.parentNode().childNodes());O.parentNode().childNodes.splice(X+1,0,U);}}}}O.activeZone(n.None);B.activeMapModel.updateNodesOrderAndParent();a(aa.draggable).data("draggable",W);if(Z.dropped&&a.isFunction(Z.dropped)){Z.dropped(U);}M();h.trigger(q.categoryNodeAdded,U);}};if(O.getCategoryTree&&!O.getCategoryTree().settings.canDropNode){return;}a(Q).droppable(R);}};}function D(){var N=this;N.id=w.observable(l);N.version=w.observable(0);N.title=w.observable();N.macro=w.observable();N.displayOrder=w.observable(0);N.isDeleted=w.observable(false);N.isDeleted.subscribe(function(){if(N.parentNode()){L(N.parentNode().childNodes());}});N.childNodes=w.observableArray([]);N.childNodes.subscribe(L);N.parentNode=w.observable();N.isActive=w.observable(false);N.isExpanded=w.observable(false);N.toggleExpand=function(){N.isExpanded(!N.isExpanded());};N.isBeingDragged=w.observable(false);N.isBeingDragged.subscribe(function(){if(N.parentNode()){L(N.parentNode().childNodes());}});N.activeZone=w.observable(n.None);N.isFirstNode=w.observable(false);N.isLastNode=w.observable(false);N.hasChildNodes=function(){var P=N.childNodes();for(var O=0;O<P.length;O++){if(!P[O].isDeleted()){return true;}}return false;};N.superDraggable=w.observable(false);N.getNodeHeight=w.computed(function(){if(N.isActive()){if(N.getCategoryTree().showMacros){return"70px";}return"33px";}return"";});N.dropOnCancel=false;N.containerId="node-"+C++;N.isVisible=w.observable(true);N.isSearchResult=w.observable(false);N.startEditCategoryTreeNode=function(){N.titleOldValue=N.title();N.macroOldValue=N.macro();N.isActive(true);};N.cancelEditCategoryTreeNode=function(){N.isActive(false);N.title(N.titleOldValue);N.macro(N.macroOldValue);if(N.dropOnCancel){N.parentNode().childNodes.remove(N);}};N.saveCategoryTreeNodeWithValidation=function(){var O=a("input","#"+N.containerId);if(O.valid()){O.blur();N.dropOnCancel=false;N.isActive(false);}};N.deleteCategoryTreeNode=function(){var P=a.format(s.deleteCategoryNodeConfirmationMessage,N.title()),O=A.confirm({content:P,onAccept:function(){F(N);O.close();return false;}});};N.callbackAfterSuccessSaving=null;N.callbackAfterFailSaving=null;N.getCategoryTree=function(){if(N.parentNode()!=null){return N.parentNode().getCategoryTree();}return null;};N.fromJson=function(P,S){N.id(P.Id);N.version(P.Version);N.title(P.Title);N.macro(P.Macro);N.displayOrder(P.DisplayOrder);var R=[];if(P.ChildNodes!=null){for(var O=0;O<P.ChildNodes.length;O++){var Q=new D();Q.fromJson(P.ChildNodes[O],S);Q.parentNode(N);R.push(Q);}}N.childNodes(R);};N.toJson=function(){var O={Id:N.id(),Version:N.version(),Title:N.title(),Macro:N.macro(),DisplayOrder:N.displayOrder(),IsDeleted:N.isDeleted(),ChildNodes:null};return O;};}function j(N){var O=this;O.id=w.observable(N.Id);O.name=w.observable(N.Name);O.isSelected=w.observable(N.IsSelected);O.isDisabled=w.observable(N.IsDisabled);O.inverseSelection=function(){if(!O.isDisabled()){O.isSelected(!O.isSelected());}};}function k(O){var Q=this;Q.id=function(){return O.Id;};Q.childNodes=w.observableArray([]);Q.childNodes.subscribe(L);Q.someNodeIsOver=w.observable(false);Q.activeZone=w.observable(n.None);Q.showHasNoDataMessage=w.observable(false);Q.savingInProgress=false;Q.allNodesExpanded=w.observable(false);Q.version=O.Version;Q.title=w.observable(O.Title);Q.macro=w.observable(O.Macro);var N=[];if(O.CategorizableItems!=null){for(var P=0;P<O.CategorizableItems.length;P++){N.push(new j(O.CategorizableItems[P]));}}Q.categorizableItems=w.observableArray(N);Q.showMacros=w.observable(O.ShowMacros);Q.settings={canEditNode:false,canDeleteNode:false,canDragNode:false,canDropNode:false,nodeSaveButtonTitle:s.nodeOkButton,nodeSaveAfterUpdate:false};Q.getCategoryTree=function(){return Q;};Q.getNoDataMessage=function(){if(Q.settings.canDeleteNode||Q.settings.canDropNode){return s.placeNodeHere;}return s.categoryTreeIsEmpty;};Q.addNewNode=function(){var R=new D();R.parentNode(Q);R.title("");R.superDraggable(false);R.startEditCategoryTreeNode();R.callbackAfterSuccessSaving=function(){Q.updateNodesOrderAndParent();};R.callbackAfterFailSaving=function(S){S.parentNode().childNodes.remove(S);};R.isBeingDragged(false);R.displayOrder(0);R.dropOnCancel=true;Q.childNodes.splice(0,0,R);Q.updateNodesOrderAndParent();};Q.checkIfAllNodesExpanded=function(T){for(var R=0;R<T.length;R++){var S=T[R];if(S.hasChildNodes()){if(!S.isExpanded()||!Q.checkIfAllNodesExpanded(S.childNodes())){return false;}}}return true;};Q.callExpandOrCollapse=function(){var R=!Q.allNodesExpanded();Q.expandOrCollapse(Q.childNodes(),R);Q.allNodesExpanded(R);};Q.expandOrCollapse=function(U,R){for(var S=0;S<U.length;S++){var T=U[S];T.isExpanded(R);Q.expandOrCollapse(T.childNodes(),R);}};Q.toggleNodeExpand=function(R){R.toggleExpand();Q.allNodesExpanded(Q.checkIfAllNodesExpanded(Q.childNodes()));};Q.hasChildNodes=function(){var S=Q.childNodes();for(var R=0;R<S.length;R++){if(!S[R].isDeleted()){return true;}}return false;};h.on(q.categoryNodeAdded,function(){Q.allNodesExpanded(Q.checkIfAllNodesExpanded(Q.childNodes()));});Q.updateNodesOrderAndParent=function(){Q.updateNodes(Q.childNodes(),Q);};Q.updateNodes=function(aa,ac){if(aa.length===0){return;}for(var R=0;R<aa.length;R++){Q.updateNodes(aa[R].childNodes(),aa[R]);}var S=false,ae=0,af=-1,V=5000+aa.length*50;for(var T=0;T<aa.length;T++){if(T==0&&aa[T].displayOrder()>0&&aa[T].displayOrder()<100){S=true;break;}if(T==1&&aa[T-1].displayOrder()==0&&aa[T].displayOrder()<10){S=true;break;}if(aa[T].displayOrder()>V){S=true;break;}if(aa[T].displayOrder()==0){ae++;af=T;if(ae>1){S=true;break;}}}if(!S){if(ae==0){return;}S=true;var ab=aa[af],ad=aa[af-1],X=aa[af+1];if(ab!=null){if(ad==null&&X!=null){if(X.displayOrder()-50>0){Q.updateNode(ab,X.displayOrder()-50,ac);return;}}if(ad!=null&&X==null){if(ad.displayOrder()+50<2147483647){Q.updateNode(ab,ad.displayOrder()+50,ac);return;}}if(ad!=null&&X!=null){var W=Math.ceil((X.displayOrder()-ad.displayOrder())/2)+ad.displayOrder();if(ad.displayOrder()<W&&W<X.displayOrder()){Q.updateNode(ab,W,ac);return;}}}}if(S){for(var U=0;U<aa.length;U++){var Z=aa[U],Y=U==0?5000:aa[U-1].displayOrder()+50;Q.updateNode(Z,Y,ac);}}};Q.updateNode=function(R,S,T){if(R.displayOrder()!=S){R.displayOrder(S);}if(R.parentNode()!=T){R.parentNode(T);}};Q.focusOnActiveNode=function(S){for(var R=0;R<S.length;R++){if(S[R].isActive()){a(a("input","#"+S[R].containerId).get(0)).focus();return true;}if(Q.focusOnActiveNode(S[R].childNodes())){S[R].isExpanded(true);return true;}}return false;};Q.save=function(T){if(Q.focusOnActiveNode(Q.childNodes())){var S=z.box({container:B.activeMessageContainer});S.clearMessages();S.addWarningMessage(s.someCategoryNodesAreInEditingState);return;}var R=JSON.stringify(Q.getModelToSave()),U=function(V){z.refreshBox(B.activeMessageContainer,V);I(false);if(V.Success){if(T&&a.isFunction(T)){if(V.Data==null){V.Data={Title:Q.title(),Macro:Q.macro()};}T(V);}}Q.savingInProgress=false;};if(!Q.savingInProgress){Q.savingInProgress=true;a.ajax({url:x.saveCategoryTreeUrl,type:"POST",contentType:"application/json; charset=utf-8",dataType:"json",cache:false,data:R,beforeSend:function(){I(true);}}).done(function(V){U(V);}).fail(function(V){U(h.parseFailedResponse(V));});}};Q.parseJsonNodes=function(S){var U=[];S=S||[];for(var R=0;R<S.length;R++){var T=new D();T.fromJson(S[R],false);T.parentNode(Q);U.push(T);}Q.childNodes(U);};Q.composeJsonNodes=function(){return Q.nodesToJson(Q.childNodes());};Q.nodesToJson=function(S){var U=[];for(var R=0;R<S.length;R++){var T=S[R].toJson();if(!T.IsDeleted){T.ChildNodes=Q.nodesToJson(S[R].childNodes());U.push(T);}}return U;};Q.getModelToSave=function(){var S=[],R=Q.categorizableItems(),T;for(T=0;T<R.length;T++){S.push({Id:R[T].id(),Name:R[T].name(),IsSelected:R[T].isSelected(),IsDisabled:R[T].isDisabled()});}return{Id:Q.id(),Version:Q.version,Title:Q.title(),Macro:Q.macro(),RootNodes:Q.composeJsonNodes(),CategorizableItems:S,};};}function F(N){var O=N.childNodes();for(var P=0;P<O.length;P++){F(O[P]);}N.isActive(false);N.isDeleted(true);}function e(){var N=this;N.container=null;N.initialize=function(O,Q){N.container=Q.container;B.activeMessageContainer=N.container;B.activeLoadingContainer=N.container.find(H.categoryTreeAddNodeDataBind);if(O.Success){var S=new k(O.Data),R=O.Data.IsReadOnly;if(!R){J(O);}else{Q.container.find(A.selectors.readonly).removeClass(A.classes.inactive);Q.container.find(H.firstTab).addClass(A.classes.inactive);}S.parseJsonNodes(O.Data.RootNodes);B.activeMapModel=S;S.settings.canEditNode=!R;S.settings.canDeleteNode=!R;S.settings.canDragNode=!R;S.settings.canDropNode=!R;S.settings.nodeSaveButtonTitle=s.nodeOkButton;var P=N.container.find(H.categoryTreeAddNodeDataBind).get(0);if(P){w.applyBindings(S,P);M();}}else{J(O);}};N.save=function(O){if(B.activeMapModel){B.activeMapModel.save(O);}};}function y(P,Q,O){var N=new e();A.open({title:O||s.categoryTreeEditorDialogTitle,onLoad:function(R){o.setContentFromUrl(R,a.format(x.categoryTreeEditDialogUrl,P),{done:function(S){N.initialize(S,R);}});},onAccept:function(S){var R=r.valid(S.container.find(H.categoryTreeForm));if(R){N.save(function(T){if(T.Success){S.close();if(Q&&a.isFunction(Q)){Q(T);}z.refreshBox(H.siteSettingsCategoryTreesForm,T);}else{J(T);}});}return false;}});}function E(N){y(l,N,s.categoryTreeCreatorDialogTitle);}function G(N){t.submitGridForm(N,function(O){K.setContent(O);v(true);});}function b(N){E(function(O){if(O.Data!=null){var Q=a(H.siteSettingsGridRowTemplate),P=a(Q.html()).find(H.siteSettingsGridRowTemplateFirstRow);P.find(H.siteSettingsGridRowTitleCell).html(f.encodeHtml(O.Data.Title));P.find(H.siteSettingsGridItemEditButton).data("id",O.Data.Id);P.find(H.siteSettingsGridItemDeleteButton).data("id",O.Data.Id);P.find(H.siteSettingsGridItemDeleteButton).data("version",O.Data.Version);P.insertBefore(a(H.siteSettingsGridTableFirstRow,N));u(P,N);t.showHideEmptyRow(N);}},true);}function p(P,N){var O=P.data("id");y(O,function(R){if(R.Data!=null){var S=P.parents(H.siteSettingsGridRowTemplateFirstRow),Q=S.find(H.siteSettingsGridRowTitleCell);Q.html(f.encodeHtml(R.Data.Title));S.find(H.siteSettingsGridItemDeleteButton).data("version",R.Data.Version);}},s.categoryTreeEditorDialogTitle);}function m(P,N){var O=P.data("id"),Q=P.data("version");B.deleteCategoryTree(O,Q,function(R){z.refreshBox(H.siteSettingsCategoryTreesForm,R);if(R.Success){P.parents(H.siteSettingsGridRowTemplateFirstRow).remove();t.showHideEmptyRow(N);}});}function u(N,O){N.find(H.siteSettingsGridItemCreateButton).on("click",function(P){h.stopEventPropagation(P);b(O||N);});N.find(H.siteSettingsGridRowCells).on("click",function(Q){h.stopEventPropagation(Q);var P=a(this).parents(H.siteSettingsGridRow).find(H.siteSettingsGridItemEditButton);if(P.length>0){p(P,O||N);}});N.find(H.siteSettingsGridItemDeleteButton).on("click",function(P){h.stopEventPropagation(P);m(a(this),O||N);});}function v(Q){var O=K.getModalDialog(),N=O.container,P=N.find(H.siteSettingsCategoryTreesForm);t.bindGridForm(P,function(R){K.setContent(R);v();});P.on("submit",function(R){h.stopEventPropagation(R);G(P);return false;});h.preventInputFromSubmittingForm(P.find(H.searchField),{preventedEnter:function(){G(P);}});P.find(H.searchButton).on("click",function(R){var S=a(this).parent();if(!S.hasClass("bcms-active-search")){P.find(H.searchField).prop("disabled",false);S.addClass("bcms-active-search");P.find(H.searchField).focus();}else{P.find(H.searchField).prop("disabled",true);S.removeClass("bcms-active-search");P.find(H.searchField).val("");}});if(Q===true){P.find(H.searchButton).parent().addClass("bcms-active-search");}else{P.find(H.searchField).prop("disabled",true);}u(N);t.focusSearchInput(N.find(H.searchField),true);}var i=(function(N){h.extendsClass(O,N);function O(P,Q){var R={serviceUrl:x.categoriesSuggestionServiceUrl,pattern:"Categories[{0}].key",params:{categoryTreeForKey:Q}};N.call(this,P,R);}return O;})(g.AutocompleteListViewModel);B.CategoriesListViewModel=i;B.loadSiteSettingsCategoryTreesList=function(){o.bindSiteSettings(K,x.loadSiteSettingsCategoryTreesListUrl,{contentAvailable:v});};B.deleteCategoryTree=function(O,R,N){var Q=a.format(x.deleteCategoryTreeUrl,O,R),P=function(S){if(a.isFunction(N)){N(S);}};A.confirm({content:s.categoryTreeDeleteConfirmMessage,onAccept:function(){a.ajax({type:"POST",url:Q,contentType:"application/json; charset=utf-8",dataType:"json",cache:false}).done(function(S){P(S);}).fail(function(S){P(h.parseFailedResponse(S));});}});};B.initCategoriesSelect=function(R,N,P){var Q=P?a(P).find(H.siteSettingsCategoriesSelect):a(H.siteSettingsCategoriesSelect);var O=Q.select2({multiple:true,data:N}).on("select2-selecting",function(S){R.items.push({id:S.choice.id,text:S.choice.text});});O.select2("data",R.items());};B.CategoriesSelectListModel=function(P,O){var Q=this,N=P?P.map(function(R){var S={id:R.Key.toLowerCase(),text:R.Value};return S;}):[];Q.items=w.observableArray(N);Q.remove=function(R){Q.items.remove(function(S){return S.id==R.id;});if(O){a(O).find(H.siteSettingsCategoriesSelect).select2("data",Q.items());}else{a(H.siteSettingsCategoriesSelect).select2("data",Q.items());}};Q.applyItemList=function(S){var R=S?S.map(function(T){var U={id:T.Key.toLowerCase(),text:T.Value};return U;}):[];Q.items([]);Q.items(R);};};B.init=function(){c();d();h.logger.debug("Initializing bcms.categories module.");};h.registerInit(B.init);return B;});bettercms.define("bcms.content",["bcms.jquery","bcms","bcms.modal","bcms.redirect","bcms.store","bcms.antiXss"],function(a,c,s,A,E,b){window.cms={};var h={},D={html:"html",contentOverlay:"#bcms-content-overlay",contentDelete:".bcms-content-delete",contentEdit:".bcms-content-edit",contentEditInnerDiv:".bcms-content-edit",contentHistory:".bcms-content-history",contentConfigure:".bcms-content-configure",enterChildContent:".bcms-content-edit-child",regionsAndContents:".bcms-region-start, .bcms-region-end, .bcms-content-start, .bcms-content-end",regionOverlay:"#bcms-region-overlay-template",regionAddContentButtons:".bcms-region-addcontent",regionAddMarkdownButtons:".bcms-region-addmarkdown",regionAddHtmlButtons:".bcms-region-addhtml",regionAddTextButtons:".bcms-region-addtext",regionInsertWidgetButtons:".bcms-region-insertwidget",regionSortButtons:".bcms-region-sortcontent",regionSortDoneButtons:".bcms-region-sortdone",regionSortCancelButtons:".bcms-region-sortcancel",regionButtons:".bcms-region-button",regionSortWrappers:".bcms-sort-wrapper",regionSortBlock:".bcms-sort-block",regionTreeButtons:".bcms-region-contentstree",masterPagesPathContainer:".bcms-layout-path",masterPagesPathHandler:".bcms-js-layout-path-handle",masterPagesPathItem:".bcms-layout-path-item",masterPagesPathInnerContainer:".bcms-layout-path-inner",masterPagesPathSliderLeft:".bcms-path-arrow-left",masterPagesPathSliderRight:".bcms-path-arrow-right",masterPagesPathDragHandle:"#bcms-path-drag-handle",masterPagesPathDraggable:"#bcms-path-draggable"},e={regionStart:"bcms-region-start",regionEnd:"bcms-region-end",contentStart:"bcms-content-start",contentEnd:"bcms-content-end",regionSortOverlay:"bcms-show-overlay",masterPagesPathToggler:"bcms-path-toggler",masterPagesPathInactiveArrow:"bcms-path-arrow-inactive",masterPagesPathItem:"bcms-layout-path-item",masterPagesPathChildContentItem:"bcms-path-child-content",masterPagesPathChildContentActiveItem:"bcms-path-child-content-active",masterPagesPathPageItem:"bcms-path-page",editingOnClass:"bcms-on",buttonActive:"bcms-active",pathMenuBottom:"bcms-path-menu-bottom",},o={showMasterPagesPath:"bcms.showMasterPagesPath",editingOn:"bcms.editingOn",pathMenuAtBottom:"bcms.pathMenuAtBottom",pathMenuOffsetLeft:"bcms.pathMenuOffsetLeft"},C,k,B=a(),i=a(),p={},l={showMasterPagesPath:null,hideMasterPagesPath:null,currentPage:null,saveSortChanges:null,resetSortChanges:null,saveSortChangesConfirmation:null},x,w=50,n=false,m=false,F=false,q=null,j={html:1,markdown:2,simpleText:3};h.selectors=D;h.links=p;h.globalization=l;h.contentTextModes=j;function f(){a(D.regionAddContentButtons).removeClass(e.buttonActive);}h.showOverlay=function(G){var H=G.overlay;H.animate({opacity:1},w);};h.refreshOverlays=function(){h.refreshRegionsPosition();h.refreshContentsPosition();};h.refreshContentsPosition=function(){if(!c.editModeIsOn()||x==null){return;}a.each(x.contents,function(){if(this.isInvisible){return;}if(!x.isContentVisible(this)){this.overlay.hide();return;}else{this.overlay.show();}this.recalculatePositions();});i.each(function(){var I=a(this),G=I.data("target"),H=G.height;if(H<20){H=20;}I.css({height:H+"px",opacity:0});});};h.refreshRegionsPosition=function(G){if(!c.editModeIsOn()||x==null){return;}G=G||x.regions;a.each(G,function(){if(this.isInvisible){return;}if(!x.isRegionVisible(this)){this.overlay.hide();return;}else{this.overlay.show();}this.recalculatePositions();});a.each(G,function(){if(this.isInvisible||!x.isRegionVisible(this)){return;}var J=this,I=J.overlay,K=J.width,H=J.height;I.css({top:J.top+"px",left:J.left+"px",width:K+"px",height:H+"px"});});};h.hideOverlay=function(G){k=null;G.overlay.animate({opacity:0},w);};h.saveContentChanges=function(N,L){var J=[],K=function(O){for(G=0,I=N.length;G<I;G++){a.each(N[G].contents,function(){for(H=0;H<O.length;H++){if(O[H].PageContentId==this.pageContentId){this.pageContentVersion=O[H].Version;}}});}if(a.isFunction(L)){L(O);}else{A.ReloadWithAlert();}},G,H,I,M;for(G=0,I=N.length;G<I;G++){M=N[G];a.each(M.contents,function(){this.parentContent=M.parentContent;this.parentPageContentId=M.parentPageContentId;this.region=M;J.push({RegionId:M.id,PageContentId:this.pageContentId,ParentPageContentId:this.parentPageContentId,Version:this.pageContentVersion});});}c.trigger(c.events.sortPageContent,{models:J,onSuccess:K});};h.hasContentsOrderChanged=function(H,G){if(H.length!=G.length){return true;}for(var I=0;I<H.length;I++){if(!G[I]||G[I].pageContentId!=H[I].pageContentId){return true;}}return false;};h.getChangedRegions=function(){var G=[];a.each(x.regions,function(){if(this.isInvisible||!x.isRegionVisible(this)){return;}var H=[],I=this;a(D.regionSortWrappers,I.overlay).each(function(){var J=a(this).data("target");H.push(J);});if(h.hasContentsOrderChanged(I.contents,H)){G.push(I);I.changedContents=H;}});return G;};h.showConfirmationAboutContentsSave=function(J,I){var H,G;H=new s.button(l.resetSortChanges,null,5,function(){h.turnSortModeOff(true,false);h.turnSortModeOn();G.close();if(a.isFunction(I)){I();}});G=s.confirm({content:l.saveSortChangesConfirmation,acceptTitle:l.saveSortChanges,buttons:[H],onAccept:function(){var K=h.getChangedRegions(),L;for(L=0;L<K.length;L++){K[L].setContents(K[L].changedContents);}h.saveContentChanges(K,J);}});};h.turnSortModeOff=function(G,I,J,K){var H=h.getChangedRegions(),L=function(){a.each(x.regions,function(){if(this.isInvisible||!x.isRegionVisible(this)){return;}var M=[],N=this;a(D.regionButtons,N.overlay).show();a(D.regionSortDoneButtons,N.overlay).hide();a(D.regionSortCancelButtons,N.overlay).hide();a(D.regionTreeButtons,N.overlay).hide();if(n){N.sortBlock.sortable("destroy");}N.overlay.removeClass(e.regionSortOverlay);a(D.regionSortWrappers,N.overlay).each(function(){var O=a(this).data("target");M.push(O);a(this).remove();});if(!G){N.setContents(M);}a.each(M,function(){if(this.isInvisible){return;}this.overlay.show();});});x.currentParentContent=null;q.removeParentContents();h.refreshOverlays();n=false;if(a.isFunction(K)){K();}};if(H.length>0&&I){h.showConfirmationAboutContentsSave(null,function(){L();});}else{L();if(!G&&H.length>0){h.saveContentChanges(H,J);}}};h.turnSortModeOn=function(){n=true;a.each(x.regions,function(){if(this.isInvisible||!x.isRegionVisible(this)){return;}var G=this;a(D.regionButtons,G.overlay).hide();a(D.regionSortDoneButtons,G.overlay).show();a(D.regionSortCancelButtons,G.overlay).show();a(D.regionTreeButtons,G.overlay).show();a(G.contents).each(function(){var H=a('<div class="bcms-sort-wrapper" />');a('<div class="bcms-sort-content" />').html(b.encodeHtml(this.title)).appendTo(H);H.data("target",this);this.overlay.hide();G.sortBlock.append(H);});G.sortBlock.sortable({connectWith:".bcms-sort-block",dropOnEmpty:true,placeholder:"bcms-sort-wrapper-placeholder",tolerance:"intersect"});G.overlay.addClass(e.regionSortOverlay);});h.refreshRegionsPosition();};function d(P,J){var H=a(P),G=a(J),Q=H.offset()||{},L=G.offset()||{},M=G.outerWidth(true),K=G.outerHeight(true),R=Q.top,N=Q.left,O=L.left+M,I=L.top+K;return{left:N,top:R,width:O-N,height:I-R};}function y(){var G=this;G.regions=[];G.contents=[];G.currentParentContent=null;G.isRegionVisible=function(H){return H.parentContent==G.currentParentContent;};G.isContentVisible=function(H){return H.parentContent==G.currentParentContent;};}h.RegionViewModel=function(K,J,I,H,G){var L=this;L.id=null;L.title=null;L.regionStart=K;L.regionEnd=J;L.contents=I;L.changedContents=[];L.overlay=null;L.sortBlock=null;L.parentRegionId=H;L.parentRegion=null;L.parentPageContentId=G;L.parentContent=null;L.isInvisible=false;if(L.regionStart){L.isInvisible=L.regionStart.data("invisible")===true;L.id=L.regionStart.data("id");L.title=L.regionStart.data("identifier");}L.left=0;L.top=0;L.width=0;L.height=0;L.recalculatePositions=function(){var N=d(L.regionStart,L.regionEnd);L.left=N.left;L.top=N.top;L.width=N.width;L.height=N.height;if(n){for(var M=0;M<L.contents.length;M++){var O=d(L.regionStart,L.contents[M].contentEnd);if(O.height>L.height){L.height=O.height;}}}};L.initializeRegion=function(){if(L.parentRegionId&&!L.parentRegion){for(N=0;N<x.regions.length;N++){if(x.regions[N].id==L.parentRegionId){L.parentRegion=x.regions[N];break;}}}if(L.parentPageContentId&&!L.parentContent){for(N=0;N<x.contents.length;N++){if(x.contents[N].pageContentId==L.parentPageContentId){L.parentContent=x.contents[N];break;}}}L.onAddHtml=function(R,Q){c.trigger(c.events.addPageContent,{regionViewModel:L,onSuccess:R,includeChildRegions:Q});};L.onAddMarkdown=function(R,Q){c.trigger(c.events.addPageContent,{regionViewModel:L,onSuccess:R,contentTextMode:j.markdown,includeChildRegions:Q});};L.onAddSimpleText=function(Q){c.trigger(c.events.addPageContent,{regionViewModel:L,onSuccess:Q,contentTextMode:j.simpleText});};L.onInsertWidget=function(Q){c.trigger(c.events.insertWidget,{regionViewModel:L,onSuccess:Q});};if(L.isInvisible){return;}var M=a(D.regionOverlay),P=M.html(),O=a(P),N;O.data("target",L);O.insertBefore(M);B=B.add(O);if(c.editModeIsOn()){O.show();}L.overlay=O;L.sortBlock=this.overlay.find(D.regionSortBlock);a(D.regionAddContentButtons,L.overlay).on("click",function(){var Q=a(this),R=Q.hasClass(e.buttonActive);f();if(!R){a(this).addClass(e.buttonActive);m=true;F=true;setTimeout(function(){F=false;},100);}});a(D.regionAddMarkdownButtons,L.overlay).on("click",function(){L.onAddMarkdown();});a(D.regionAddHtmlButtons,L.overlay).on("click",function(){L.onAddHtml();});a(D.regionAddTextButtons,L.overlay).on("click",function(){L.onAddSimpleText();});a(D.regionInsertWidgetButtons,L.overlay).on("click",function(){L.onInsertWidget();});a(D.regionSortButtons,L.overlay).on("click",function(){h.turnSortModeOn();});a(D.regionTreeButtons,L.overlay).on("click",function(){c.trigger(c.events.editContentsTree,{pageViewModel:x});});a(D.regionSortDoneButtons,L.overlay).on("click",function(){h.turnSortModeOff(false,false);});a(D.regionSortCancelButtons,L.overlay).on("click",function(){h.cancelSortMode();});};L.setContents=function(M){L.contents=M;};};h.ContentViewModel=function(H,G,I){var J=this;J.contentStart=H;J.contentEnd=G;J.overlay=null;J.region=null;J.parentPageContentId=I;J.parentContent=null;J.childRegions=null;J.hideEndingDiv=false;J.isInvisible=false;J.draft=false;J.title=null;J.contentId=null;J.pageContentId=null;J.contentVersion=null;J.pageContentVersion=null;J.contentType=null;if(G){J.hideEndingDiv=G.data("hide")===true;}if(H){J.contentId=H.data("contentId");J.pageContentId=H.data("pageContentId");J.contentVersion=H.data("contentVersion");J.pageContentVersion=H.data("pageContentVersion");J.contentType=H.data("contentType");J.draft=H.data("draft");J.title=H.data("contentTitle");J.isInvisible=H.data("invisible")===true;}J.left=0;J.top=0;J.width=0;J.height=0;J.visibleButtons={configure:true,edit:true,history:true,"delete":true,enterChildContent:true,draft:false};J.initializeContent=function(){if(J.parentPageContentId&&!J.parentContent){for(var M=0;M<x.contents.length;M++){if(x.contents[M].pageContentId==J.parentPageContentId){J.parentContent=x.contents[M];break;}}}c.trigger(c.events.contentModelCreated,J);if(J.isInvisible){return;}var L=a(D.contentOverlay),O=L.html(),N=a(O);N.data("target",J);J.region.overlay.append(N);i=i.add(N);if(c.editModeIsOn()){N.show();}J.overlay=N;if(J.getChildRegions().length==0){J.visibleButtons.enterChildContent=false;}K();a(D.contentDelete,N).on("click",function(){J.onDeleteContent();});a(D.contentEdit,N).on("click",function(){J.onEditContent();});a(D.contentHistory,N).on("click",function(){J.onContentHistory();});a(D.contentConfigure,N).on("click",function(){J.onConfigureContent();});a(D.enterChildContent,N).on("click",function(){J.onEnterChildContent();});N.on("mouseleave",function(){c.logger.trace("Content mouse leave");h.hideOverlay(J);});N.on("mouseover",function(){if(!c.editModeIsOn()||k===N){c.logger.trace("Exit content mouse over");return;}c.logger.trace("Content mouse over");k=N;h.showOverlay(J);});if(!c.editModeIsOn()&&J.hideEndingDiv){J.contentEnd.hide();}};J.recalculatePositions=function(){var L=d(J.contentStart,J.contentEnd);J.left=L.left+1;J.top=L.top+1;J.width=L.width;J.height=L.height;};J.onEditContent=function(){};J.onDeleteContent=function(){};J.onConfigureContent=function(){};J.onContentHistory=function(){};J.onEnterChildContent=function(){x.currentParentContent=J;h.refreshOverlays();if(q!=null){q.addParentContent(J.title,null,function(){x.currentParentContent=J;h.refreshOverlays();});}};J.getChildRegions=function(){if(J.childRegions==null){J.childRegions=[];for(var L=0;L<x.regions.length;L++){if(x.regions[L].parentContent==J){J.childRegions.push(x.regions[L]);}}}return J.childRegions;};function K(){if(!J.visibleButtons.configure){J.overlay.find(D.contentConfigure).remove();}if(!J.visibleButtons.edit){J.overlay.find(D.contentEdit).remove();}if(!J.visibleButtons.history){J.overlay.find(D.contentHistory).remove();}if(!J.visibleButtons["delete"]){J.overlay.find(D.contentDelete).remove();}if(!J.visibleButtons.enterChildContent){J.overlay.find(D.enterChildContent).remove();}if(J.visibleButtons.draft){J.overlay.find(D.contentEditInnerDiv).addClass("bcms-active-draft");}}return J;};function g(S){var T=S.length,L,M,G=[],H=[],Q,N,J,K,P,O;for(M=0;M<T;M++){L=a(S[M]);if(L.hasClass(e.regionStart)){Q=L.data("id");K={regionId:Q,contents:[],startTag:L};H.push(K);}else{if(L.hasClass(e.regionEnd)){K=H.pop();P=null;O=null;if(H.length>0){P=H[H.length-1].regionId;O=G[G.length-1].pageContentId;}var R=new h.RegionViewModel(K.startTag,L,K.contents,P,O);x.regions.push(R);a.each(K.contents,function(){x.contents.push(this);this.region=R;});}else{if(L.hasClass(e.contentStart)){N=L.data("pageContentId");J={pageContentId:N,startTag:L};G.push(J);}else{if(L.hasClass(e.contentEnd)){J=G.pop();K=H[H.length-1];O=null;if(G.length>0){O=G[G.length-1].pageContentId;}var I=new h.ContentViewModel(J.startTag,L,O);K.contents.push(I);}}}}}}h.initRegions=function(){c.logger.trace("Highlight regions");x=new y();window.cms.page=x;window.cms.path=q;var H=a(D.regionsAndContents).toArray();g(H,0);for(var G=x.regions.length-1;G>=0;G--){x.regions[G].initializeRegion();}a.each(x.contents,function(){this.initializeContent();});h.refreshOverlays();a(window).on("resize",function(){clearTimeout(C);C=setTimeout(function(){h.refreshOverlays();},100);});};h.cancelSortMode=function(){if(!n){return;}h.turnSortModeOff(true,false);c.logger.trace("Cancel Sort Mode");};function u(){var G=function(){E.remove(o.editingOn);a(D.html).removeClass(e.editingOnClass);if(x!=null){a.each(x.contents,function(){if(this.isInvisible){return;}this.overlay.hide();if(this.hideEndingDiv){this.contentEnd.hide();}});a.each(x.regions,function(){if(this.isInvisible){return;}this.overlay.hide();});}};if(n){h.turnSortModeOff(true,true,null,G);}else{G();}}function v(){E.set(o.editingOn,"1");a(D.html).addClass(e.editingOnClass);if(x!=null){a.each(x.contents,function(){if(this.isInvisible||!x.isContentVisible(this)){return;}this.overlay.show();if(this.hideEndingDiv){this.contentEnd.show();}});}h.refreshOverlays();}function z(G,H){var I=this;I.element=G;I.index=H;return I;}function r(){var ab=this,W=a(D.masterPagesPathContainer),X=W.outerHeight(),M=W.find(D.masterPagesPathInnerContainer),K=W.find(D.masterPagesPathHandler),P=W.find(D.masterPagesPathSliderLeft),aa=W.find(D.masterPagesPathSliderRight),O=[],G=0,Q=0,H=null,R,N=E.get(o.pathMenuAtBottom),I=W.find(D.masterPagesPathDraggable),Y=E.get(o.pathMenuOffsetLeft);function S(){E.set(o.pathMenuAtBottom,"1");W.addClass(e.pathMenuBottom);}function T(){E.remove(o.pathMenuAtBottom);W.removeClass(e.pathMenuBottom);}function ae(ak){var al=a(window).width();var aj=I.width();if(ak>al-aj){I.css("left",(al-aj-40)+"px");}else{if(ak<0){I.css("left","0px");}else{I.css("left",ak+"px");}}}function V(){ae(Y);}I.draggable({axis:"x",handle:D.masterPagesPathDragHandle,containment:"window",stop:function(aj,al){var ak=al.position.left;ae(ak);Y=ak;E.set(o.pathMenuOffsetLeft,ak);},start:function(){R=a(window).height()/2;},drag:function(aj){var ak=aj.clientY;if(N){if(ak<R){N=false;T();}}else{if(ak>R){N=true;S();}}}});if(N){S(true);}function L(){return O.length>0;}function J(){var aj=E.get(o.showMasterPagesPath);if(aj===undefined){aj=1;af(aj);}return aj;}function af(ak,aj){if(!aj){E.set(o.showMasterPagesPath,ak);}if(ak==1){W.addClass(e.masterPagesPathToggler);K.html(l.hideMasterPagesPath);}else{W.removeClass(e.masterPagesPathToggler);K.html(l.showMasterPagesPath);}}function U(){if(W.hasClass(e.masterPagesPathToggler)){af(0);}else{af(1);}}function ag(ao){var ak=G+ao,al=O.length,am,aj,an=[];if(ak>=0&&ak<=Q){G+=ao;for(aj=0;aj<al;aj++){if(aj<G){am=-O[aj].element.outerWidth();}else{am=0;}an.push({item:aj,margin:am});}}for(aj=0;aj<an.length;aj++){O[an[aj].item].element.css("margin-left",an[aj].margin);}ai();}function ai(){if(G>0){P.removeClass(e.masterPagesPathInactiveArrow);}else{P.addClass(e.masterPagesPathInactiveArrow);}if(G<Q){aa.removeClass(e.masterPagesPathInactiveArrow);}else{aa.addClass(e.masterPagesPathInactiveArrow);}}function ah(){if(!L()){return;}var ao=M.width(),ak=O.length,an=O[ak-1].element.outerWidth(),aj,al=0,am;for(aj=ak-2;aj>=0;aj--){an+=O[aj].element.outerWidth();if(an<=ao){al++;}c.logger.trace("Sliding to first: slidesToLeave: "+al+" sum: "+an+" currentItem: "+O[aj].element.outerWidth()+" width: "+ao);}Q=ak-1-al;c.logger.trace("Slide to: "+Q);am=Q-G;if(am>0){ag(am);}else{ai();}}function Z(aj){if(!L()){W.hide();return;}else{W.show();}if(a.isFunction(aj)){aj();}}ab.initialize=function(){af(0,true);W.find(D.masterPagesPathItem).each(function(ak){var al=a(this),aj=al.html();if(aj.length>50){al.attr("title",aj);aj=aj.substr(0,50)+"...";al.html(aj);}O.push(new z(al,ak));al.on("click",function(){var am=a(this).data("url");window.location.href=am;});});K.on("click",U);P.on("click",function(){ag(-1);});aa.on("click",function(){ag(1);});Z(ah);af(J());if(Y){ae(Y);}window.addEventListener("resize",V);};function ad(){var aj=O[O.length-1].element;if(aj.hasClass(e.masterPagesPathChildContentActiveItem)){aj.removeClass(e.masterPagesPathChildContentActiveItem);aj.addClass(e.masterPagesPathChildContentItem);}}function ac(){var aj=O[O.length-1].element;if(aj.hasClass(e.masterPagesPathChildContentItem)){aj.removeClass(e.masterPagesPathChildContentItem);aj.addClass(e.masterPagesPathChildContentActiveItem);}}ab.addParentContent=function(ap,aj,an){if(!H){H=true;H=ab.addParentContent(l.currentPage,e.masterPagesPathPageItem,function(){O.pop();H.remove();H=null;x.currentParentContent=null;h.refreshOverlays();});}var ak=a("<div></div>"),al=O.length,am=new z(ak,al),ao=function(){var aq=a(this).data("index"),au=O.length,ar,at;if(aq==au-1){return;}for(ar=aq+1;ar<au;ar++){at=O.pop();at.element.remove();}ac();if(a.isFunction(an)){an();}Z();};ak.addClass(e.masterPagesPathItem);if(aj){ak.addClass(aj);}else{ad();ak.addClass(e.masterPagesPathChildContentActiveItem);}ak.html(ap);ak.data("index",al);ak.on("click",ao);M.append(ak);O.push(am);Z(ah);af(1);return ak;};ab.removeParentContents=function(){if(H&&a.isFunction(H.click)){H.click();}};return ab;}function t(){if(m&&!F){f();m=false;}}h.init=function(){c.logger.debug("Initializing content module");q=new r();q.initialize();h.initRegions();};c.on(c.events.editModeOff,u);c.on(c.events.editModeOn,v);c.on(c.events.bodyClick,t);c.registerInit(h.init);return h;});bettercms.define("bcms.content.tree",["bcms.jquery","bcms","bcms.ko.extenders","bcms.modal","bcms.content","bcms.redirect","bcms.antiXss"],function(a,d,o,q,h,u,c){var z={},v={treeTemplate:"#bcms-contents-tree-template",contentTreeContainer:"#bcms-contents-tree",sortableContentConnectors:".bcms-contents-tree-sort-block",firstParentRegion:".bcms-tree-region:first",childContents:".bcms-tree-content"},p={},m={contentsTreeTitle:null,closeTreeButtonTitle:null,saveSortChanges:null,resetSortChanges:null,saveSortChangesConfirmation:null},f={sortableContentPlaceholder:"bcms-contents-tree-drop-area"},A={content:1,region:2},i={draft:2},C=null,n=false,y=false;z.selectors=v;z.links=p;z.globalization=m;function w(E,F){if(F.Data.ContentId||F.Data.Id){E.contentId=F.Data.ContentId||F.Data.Id;}if(F.Data.DesirableStatus||typeof F.Data.HasDraft=="boolean"){E.draft=F.Data.DesirableStatus==i.draft||F.Data.HasDraft;}if(F.Data.Title||F.Data.WidgetName){E.title=F.Data.Title||F.Data.WidgetName;}if(F.Data.ContentVersion||F.Data.Version||F.Data.OriginalVersion){E.contentVersion=F.Data.ContentVersion||F.Data.Version||F.Data.OriginalVersion;}if(F.Data.ContentType){E.contentType=F.Data.ContentType;}if(F.Data.PageContentId&&!d.isEmptyGuid(F.Data.PageContentId)){E.pageContentId=F.Data.PageContentId;}if(F.Data.PageContentVersion){E.pageContentVersion=F.Data.PageContentVersion;}}function x(F,E){var G,H;w(F.model,E);F.title(F.model.title);F.draft(F.model.draft);G=l(E.Data.Regions,F.parentRegion.model.id,F.model.pageContentId);d.asEnumerable(G).where(function(I){return d.asEnumerable(F.items()).where(function(J){return I.id===J.model.id;}).toArray().length==0;}).forEach(function(I){H=k(I,F,F.level()+1);F.items.push(H);});d.asEnumerable(F.items()).where(function(I){return d.asEnumerable(G).where(function(J){return J.id===I.model.id;}).toArray().length==0;}).forEach(function(I){F.items.remove(I);});}function l(F,H,G){var I=[],E,J;if(F&&F.length>0){for(E=0;E<F.length;E++){J=new h.RegionViewModel(null,null,[],H,G);J.isInvisible=true;J.id=F[E].RegionId;J.title=F[E].RegionIdentifier;J.initializeRegion();I.push(J);}}return I;}function g(F){var G=0,E;for(;G<F.length;G++){E=F[G];g(E.items());if(E.isOpened&&a.isFunction(E.isOpened)){E.isOpened(false);}}}function k(K,J,G){var H=new B(),F,E,I=function(N){C.reloadPage=true;var O,M=new h.ContentViewModel(null,null,K.parentPageContentId),L,P;M.isInvisible=true;w(M,N);M.initializeContent();L=j(M,H,H.level()+1);O=l(N.Data.Regions,K.id,M.pageContentId);for(E=0;E<O.length;E++){P=k(O[E],M,H.level()+2);L.items.push(P);}H.items.push(L);};H.itemId=d.createGuid();H.title(K.title);H.model=K;H.type=A.region;H.isInvisible=K.isInvisible;H.parentContent=J;H.level(G);G++;for(E=0;E<K.contents.length;E++){F=j(K.contents[E],H,G);H.items.push(F);}H.isOpened=o.observable(false);H.toggleAddContent=function(){var L=this.isOpened();g(C.items());if(!L){this.isOpened(true);n=true;y=true;setTimeout(function(){y=false;},100);}};H.addContent=function(){K.onAddHtml(I,true);};H.addMarkdown=function(){K.onAddMarkdown(I,true);};H.addSimpleText=function(){K.onAddSimpleText(I);};H.insertWidget=function(){K.onInsertWidget(I);};H.removeContent=function(L){H.items.remove(L);};return H;}function j(F,K,I){var J=new B(),E,H,G;J.itemId=d.createGuid();J.title(F.title);J.model=F;J.type=A.content;J.isInvisible=F.isInvisible;J.parentRegion=K;J.level(I);J.draft(F.draft);E=F.getChildRegions();I++;for(G=0;G<E.length;G++){H=k(E[G],J,I);J.items.push(H);}J.editItem=function(){F.onEditContent(function(L){C.reloadPage=true;x(J,L);},true);};J.deleteItem=function(){F.onDeleteContent(function(){C.reloadPage=true;J.parentRegion.removeContent(J);});};J.history=function(){F.onContentHistory(function(L){C.reloadPage=true;x(J,L);});};J.configure=function(){F.onConfigureContent(function(L){C.reloadPage=true;w(J.model,L);});};return J;}function D(G){var H=this,E,F;H.pageModel=G;H.items=o.observableArray();H.visibleItems=o.observableArray();H.invisibleItems=o.observableArray();H.isBeingDragged=o.observable(false);H.reloadPage=false;H.contentsSorted=false;H.currentLevel=o.observable(0);for(E=0;E<G.regions.length;E++){if(G.regions[E].parentRegion){continue;}F=k(G.regions[E],null,1);if(F.isInvisible){H.invisibleItems.push(F);}else{H.visibleItems.push(F);}H.items.push(F);}H.getItemById=function(J,K){var L,I;if(!K){K=C.items();}for(L=0;L<K.length;L++){if(K[L].itemId==J){return K[L];}I=H.getItemById(J,K[L].items());if(I){return I;}}return null;};return H;}function B(){var E=this;E.items=o.observableArray();E.model=null;E.title=o.observable();E.type=null;E.itemId=null;E.isInvisible=false;E.types=A;E.parentRegion=null;E.parentContent=null;E.editItem=function(){};E.deleteItem=function(){};E.addContent=function(){};E.history=function(){};E.configure=function(){};E.isActive=o.observable(false);E.level=o.observable(0);E.draft=o.observable(false);E.isBeingDragged=o.observable(false);E.isBeingDragged.subscribe(function(F){C.isBeingDragged(F);});E.onMouseLeave=function(){this.isActive(false);C.currentLevel(E.level()-1);};E.onMouseEnter=function(){this.isActive(true);C.currentLevel(this.level());};E.isHover=o.computed(function(){return(!C||!C.isBeingDragged())&&E.isActive()&&E.level()==C.currentLevel();});return E;}function s(F){var I=F.pageViewModel,E=h.getChangedRegions(),H=function(){t(I,function(){C.reloadPage=true;});},G=function(){t(I);};if(E.length>0){h.showConfirmationAboutContentsSave(H,G);}else{t(I);}}function t(G,F){var E=q.open({title:m.contentsTreeTitle,cancelTitle:m.closeTreeButtonTitle,disableAccept:true,onLoad:function(I){var H=a(a(v.treeTemplate).html());I.setContent(H);C=new D(G);if(a.isFunction(F)){F();}o.applyBindings(C,H.get(0));},onClose:function(){if(E.isClosing){return true;}if(C.contentsSorted){var I,H;I=new q.button(m.resetSortChanges,null,5,function(){H.close();E.isClosing=true;E.close();if(C.reloadPage){u.ReloadWithAlert();}});H=q.confirm({content:m.saveSortChangesConfirmation,acceptTitle:m.saveSortChanges,buttons:[I],onAccept:function(){H.close();var J=e([],C.items());if(J.length>0){h.saveContentChanges(J,null);}else{if(C.reloadPage){u.ReloadWithAlert();}else{E.isClosing=true;E.close();}}}});return false;}else{if(C.reloadPage){u.ReloadWithAlert();}return true;}}});}function e(E,N){var K=N.length,I,J,M,L,G,F,H;for(I=0;I<K;I++){M=N[I];if(M.type==A.region){G=M.model.contents;F=[];for(J=0;J<M.items().length;J++){L=M.items()[J];if(L.type==A.content){F.push(L.model);}E=e(E,L.items());}H=h.hasContentsOrderChanged(G,F);if(H){M.model.setContents(F);E.push(M.model);}}}return E;}function b(){o.bindingHandlers.draggableContent={init:function(F,J,E,H){if(!J()){return;}var K;if(a.isArray(H)){K=H[0];}else{K=H;}var G=false,I={connectWith:v.sortableContentConnectors,dropOnEmpty:true,placeholder:f.sortableContentPlaceholder,tolerance:"intersect",start:function(){G=true;if(K.isBeingDragged){K.isBeingDragged(true);}},stop:function(){if(K.isBeingDragged){K.isBeingDragged(false);}},update:function(O,N){if(G){G=false;var Q=N.item.parents(v.firstParentRegion),R=Q.data("itemId"),T=K.parentRegion,S=R==T.itemId?T:C.getItemById(R),M=[],U=false,L=S.items();if(T!=S){K.parentRegion=S;T.removeContent(K);}P=0;Q.find(v.childContents).each(function(){var V=a(this).data("itemId"),W=(V==K.itemId&&T!=S)?K:C.getItemById(V,L);if(W!=null&&W.type==A.content&&W.parentRegion==S){M.push(W);if(!U&&(!L[P]||W.itemId!=L[P].itemId)){U=true;}}P++;});if(R!=T.itemId||U){C.contentsSorted=true;}if(U){S.items.removeAll();for(var P=0;P<M.length;P++){S.items.push(M[P]);}}}}};a(F).sortable(I);}};}function r(){if(n&&!y){g(C.items());n=false;}}z.init=function(){d.logger.debug("Initializing contents tree module");b();};d.on(d.events.editContentsTree,s);d.on(d.events.bodyClick,r);d.registerInit(z.init);return z;});bettercms.define("bcms.customValidation",["bcms.jquery","bcms"],function(a,b){var c={},d={antiXssContainsHtmlError:null};c.globalization=d;c.init=function(){b.logger.debug("Initializing bcms.customValidation module");a.validator.addMethod("jqdisallowhtml",function(h,e,g){if(!h){return true;}var f=new RegExp(g.pattern).exec(h);return !f;},function(e){return e.message;});a.validator.unobtrusive.adapters.add("disallowhtml",["pattern"],function(e){e.rules.jqdisallowhtml={message:e.message,pattern:e.params.pattern};});a.validator.addMethod("jqdisallownonalphanumeric",function(h,e,g){if(!h){return true;}var f=new RegExp(g.pattern).exec(h);return f;},function(e){return e.message;});a.validator.unobtrusive.adapters.add("disallownonalphanumeric",["pattern"],function(e){e.rules.jqdisallownonalphanumeric={message:e.message,pattern:e.params.pattern};});a.validator.addMethod("jqdisallownonactivedirectorynamecompliant",function(h,e,g){if(!h){return true;}var f=new RegExp(g.pattern).exec(h);return f;},function(e){return e.message;});a.validator.unobtrusive.adapters.add("disallownonactivedirectorynamecompliant",["pattern"],function(e){e.rules.jqdisallownonactivedirectorynamecompliant={message:e.message,pattern:e.params.pattern};});};b.registerInit(c.init);return c;});bettercms.define("bcms.languages",["bcms.jquery","bcms","bcms.dynamicContent","bcms.siteSettings","bcms.ko.extenders","bcms.ko.grid","bcms.autocomplete","bcms.antiXss"],function(a,d,e,q,h,i,c,b){var k={},p={},n={saveLanguageUrl:null,deleteLanguageUrl:null,loadLanguagesUrl:null,loadSiteSettingsLanguagesUrl:null,languageSuggestionUrl:null},f={deleteLanguageConfirmMessage:null},o=0;k.links=n;k.globalization=f;var j=(function(r){d.extendsClass(s,r);function s(u,t){var v={serviceUrl:n.languageSuggestionUrl,onItemSelect:u};r.call(this,v);this.onBeforeSearchStartCallback=t;}s.prototype.onBeforeSearchStart=function(){if(a.isFunction(this.onBeforeSearchStartCallback)){this.onBeforeSearchStartCallback();}};return s;})(c.AutocompleteViewModel);var l=(function(r){d.extendsClass(s,r);function s(t,v,u){r.call(this,t,n.loadLanguagesUrl,v,u);}s.prototype.createItem=function(t){var u=new m(this,t);return u;};return s;})(i.ListViewModel);var m=(function(r){d.extendsClass(s,r);function s(w,t){r.call(this,w,t);var x=this,v=function(A){x.isSelected=true;var y=x.name(),z=A.name();if(!y||x.oldAutocompleteValue==x.name()){x.name(z);}x.oldAutocompleteValue=z;x.shortCode(A.id());x.code(z);x.hasNameFocus(true);},u=function(){if(this.autocompleteInstance&&this.autocompleteInstance.options){this.autocompleteInstance.options.tabDisabled=true;}x.shortCode("");};x.hasNameFocus=h.observable(false);x.name=h.observable().extend({required:"",maxLength:{maxLength:h.maxLength.name},preventHtml:""});x.code=h.observable().extend({required:"",maxLength:{maxLength:h.maxLength.name},preventHtml:""});x.shortCode=h.observable();x.oldAutocompleteValue="";x.registerFields(x.name,x.code);x.name(t.Name);x.code(t.Code);x.autocompleteViewModel=new j(v,u);if(!x.isNew()){x.code.editingIsDisabled=h.observable(true);x.hasNameFocus(true);}}s.prototype.getDeleteConfirmationMessage=function(){return a.format(f.deleteLanguageConfirmMessage,b.encodeHtml(this.name()));};s.prototype.onAfterItemSaved=function(t){r.prototype.onAfterItemSaved.call(this,t);if(t.Success===true&&!this.code.editingIsDisabled){this.code.editingIsDisabled=h.observable(true);this.hasNameFocus(true);this.code(t.Data.Code);}};s.prototype.getSaveParams=function(){var t=r.prototype.getSaveParams.call(this);t.Name=this.name();t.Code=this.shortCode()||this.code();return t;};s.prototype.onSave=function(t,u){if(u.type&&u.type=="keydown"&&this.autocompleteViewModel&&this.autocompleteViewModel.autocompleteInstance&&this.autocompleteViewModel.autocompleteInstance.visible){return;}r.prototype.onSave.call(this,t,u);};s.prototype.onCancelEdit=function(t,u){if(u.type&&u.type=="keydown"&&this.autocompleteViewModel&&this.autocompleteViewModel.autocompleteInstance&&this.autocompleteViewModel.autocompleteInstance.visible){return;}r.prototype.onCancelEdit.call(this,t,u);};s.prototype.getRowId=function(){if(!this.rowId){this.rowId="bcms-lang-row-"+o++;}return this.rowId;};return s;})(i.ItemViewModel);function g(t){var r=q.getMainContainer(),s=(t.Success==true)?t.Data:{};var u=new l(r,s.Items,s.GridOptions);u.deleteUrl=n.deleteLanguageUrl;u.saveUrl=n.saveLanguageUrl;h.cleanNode(r.get(0));h.applyBindings(u,r.get(0));}k.loadSiteSettingsLanguagesList=function(){e.bindSiteSettings(q,n.loadSiteSettingsLanguagesUrl,{contentAvailable:g});};k.init=function(){d.logger.debug("Initializing bcms.languages module.");};d.registerInit(k.init);return k;});bettercms.define("bcms.datepicker",["bcms.jquery","bcms","bcms.jquery.validate.unobtrusive"],function(a,b){var c={},e={calendarImageUrl:null},d={dateFormat:"mm/dd/yy",currentCulture:null};c.links=e;c.globalization=d;c.isDateValid=function(h){var g=true;try{a.datepicker.parseDate(d.dateFormat,h);}catch(f){g=false;}return g;};c.parseDate=function(g){try{return a.datepicker.parseDate(d.dateFormat,g);}catch(f){}return null;};c.init=function(){b.logger.debug("Initializing bcms.datepicker module");b.logger.trace('    globalization.dateFormat = "'+d.dateFormat+'".');b.logger.trace('    globalization.currentCulture = "'+d.currentCulture+'".');a.validator.addMethod("jqdatevalidation",function(h,f,g){if(f.value){return c.isDateValid(f.value);}return true;},function(f){return f.message;});a.validator.unobtrusive.adapters.add("datevalidation",[],function(f){f.rules.jqdatevalidation={message:f.message};});a.validator.addMethod("date",function(g,f){if(this.optional(f)){return true;}return c.isDateValid(g);});a.fn.initializeDatepicker=function(h,g){var f=a.extend({showOn:"button",buttonImage:e.calendarImageUrl,buttonImageOnly:true,dateFormat:d.dateFormat},g);a(this).datepicker(f);if(h==null){h="";}a(this).datepicker("option","buttonText",h);};};b.registerInit(c.init);return c;});bettercms.define("bcms.dynamicContent",["bcms.jquery","bcms","bcms.modal","bcms.forms","bcms.messages"],function(a,b,i,e){var d={},c={},j={ajaxForm:"form.bcms-ajax-form"},h={},f={failedLoadDialogMessage:null,dialogLoadingCancelledMessage:null,forbiddenDialogMessage:null,unauthorizedDialogMessage:null},g=null;d.selectors=j;d.links=h;d.globalization=f;d.setContentFromUrl=function(m,p,o){function n(q){b.logger.error("Failed to load dialog content from "+p+" ("+q+").");}var k=m.contentId||0,l=(new Date).getTime();o=a.extend({done:null,fail:function(q,s,t){var r='<div class="bcms-window-options"><div class="bcms-messages-ui bcms-js-messages"><ul class="bcms-error-messages"><li>'+s+"</li></ul></div>";if(b.errorTrace&&t){r=r+t.responseText;}r+="</div>";q.setContent(r);if(q.disableAcceptButton){q.disableAcceptButton();}if(q.disableExtraButtons){q.disableExtraButtons();}}},o);g=l;d.showLoading(m);a.ajax({type:"GET",url:p,cache:false}).done(function(q,t,s){if(g!==l){return;}if(s.getResponseHeader("Content-Type").indexOf("application/json")===0&&q.Html){if(q.Success){try{m.setContent(q.Html,k);}catch(r){n(r.message);}finally{d.hideLoading(m);}}else{if(m.close){m.close();}if(q.Messages&&q.Messages.length>0){i.showMessages(q);}else{i.alert({content:f.failedLoadDialogMessage});}d.hideLoading(m);return;}}else{try{m.setContent(q,k);}catch(r){n(r.message);}finally{d.hideLoading(m);}}if(a.isFunction(o.done)){o.done(q);}}).fail(function(u,v,r){n(r);d.hideLoading(m);if(a.isFunction(o.fail)){var s=f.failedLoadDialogMessage;if(r===""&&u.status===0){s=f.dialogLoadingCancelledMessage;}else{if(u.status===401){s=f.unauthorizedDialogMessage;try{var t=u.getResponseHeader(b.constants.loginRedirectHeader);if(t){window.location.href=t;}}catch(q){b.logger.error(q);}}else{if(r=="Forbidden"){s=f.forbiddenDialogMessage;}}}o.fail(m,s,u);}});};d.bindDialogAjaxPost=function(k,n){var l=k.container.find(j.ajaxForm);l.each(function(){var o=a(this);e.ajaxForm(o,{contentType:n.contentType||"application/x-www-form-urlencoded",dataType:n.dataType||"json",serialize:n.serialize||function(p){return p.serialize();},beforeSubmit:function(){if(a.isFunction(n.beforeSubmit)){var p=n.beforeSubmit(o);if(p!==false){d.showLoading(k);}return p;}d.showLoading(k);return true;},success:function(p){if(a.isFunction(n.success)){if(n.success(p,k)!==false){k.accept();}}else{k.accept();}},error:function(p){if(a.isFunction(n.error)){n.error(p,k);}},complete:function(p){d.hideLoading(k);if(a.isFunction(n.complete)){n.complete(p,k);}}});});k.submitForm=function(){l.submit();};var m=k.options.onAcceptClick;k.options.onAcceptClick=function(){if(a.isFunction(m)){m(k);}k.submitForm();return false;};};d.bindDialog=function(k,m,l){l=a.extend({contentAvailable:null,beforePost:null,postSuccess:null,postError:null,postComplete:null,formContentType:"application/x-www-form-urlencoded",formDataType:"json",formSerialize:function(n){return n.serialize();}},l);d.setContentFromUrl(k,m,{done:function(n){if(a.isFunction(l.contentAvailable)){l.contentAvailable(k,n);}d.bindDialogAjaxPost(k,{beforeSubmit:l.beforePost,success:l.postSuccess,error:l.postError,complete:l.postComplete,dataType:l.formDataType,contentType:l.formContentType,serialize:l.formSerialize});}});};d.bindSiteSettings=function(l,m,k){k=a.extend({contentAvailable:null},k);l.contentId++;d.setContentFromUrl(l,m,{done:function(n){if(a.isFunction(k.contentAvailable)){k.contentAvailable(n);}}});};d.getLoaderContainer=function(k){if(k&&k.getLoaderContainer){return k.getLoaderContainer();}return null;};d.showLoading=function(l){var k=d.getLoaderContainer(l);if(k){k.showLoading("dynamicContent");}};d.hideLoading=function(l){var k=d.getLoaderContainer(l);if(k){k.hideLoading("dynamicContent");}};return d;});bettercms.define("bcms.forms",["bcms.jquery","bcms","bcms.messages","bcms.tabs"],function(a,b,f,i){var c={},g={ajaxHide:".bcms-ajax-hide",ajaxShow:".bcms-ajax-show",firstInvalidField:".bcms-input-validation-error:first",checkboxLabels:'.bcms-checkbox-holder:has(input[type="checkbox"]) .bcms-js-edit-label, .bcms-edit-check-field:has(input[type="checkbox"]) .bcms-edit-label',checkboxParents:".bcms-checkbox-holder, .bcms-edit-check-field",checkbox:'input[type="checkbox"]'},h="submitting",e={},d={};c.selectors=g;c.links=e;c.globalization=d;c.getObject=function(l){if(!l){return null;}var j=window,k=l.split(".");a.each(k,function(m,n){j=j[n];return !!j;});return j;};c.valid=function(l){if(l&&l.valid){if(l.valid()){return true;}else{try{var k=a(l).find(g.firstInvalidField);var m=i.getTabPanelOfElement(k);if(m){m.selectTabOfElement(k);}}catch(j){b.logger.error("Failed to select not valid"+j.message);}return false;}}return true;};c.ajaxForm=function(j,k){k=a.extend({beforeSubmit:null,success:null,error:null,complete:null,contentType:"application/x-www-form-urlencoded",dataType:"json",serialize:function(l){return l.serialize();}},k);a(j).on("submit",function(){var n=a(this);if(!c.valid(n)){return false;}if(n.data(h)){return false;}var l=n.find(g.ajaxHide),m=n.find(g.ajaxShow);var o=function(p){n.data(h,false);l.show();m.hide();f.refreshBox(n,p);if(p.Success){if(a.isFunction(k.success)){k.success(p);}}else{if(a.isFunction(k.error)){k.error(p);}}if(a.isFunction(k.complete)){k.complete(p);}};n.data(h,true);if(a.isFunction(k.beforeSubmit)){if(k.beforeSubmit()===false){n.data(h,false);return false;}}l.hide();m.show();a.ajax({type:"POST",contentType:k.contentType,dataType:k.dataType,cache:false,url:n.attr("action"),data:k.serialize(n)}).done(function(p){o(p);}).fail(function(p){o(b.parseFailedResponse(p));});return false;});};c.bindCheckboxes=function(j,k){k=a.extend({checkboxSelector:g.checkbox,checkboxParentsSelector:g.checkboxParents,checkboxLabelsSelector:g.checkboxLabels},k);j.find(k.checkboxLabelsSelector).on("click",function(){var l=a(this).parents(k.checkboxParentsSelector).first().find(k.checkboxSelector);l.trigger("click").trigger("change");return false;});};c.setFieldsReadOnly=function(j){j.find("input:visible").attr("readonly","readonly");j.find("textarea:visible").attr("readonly","readonly");j.find("input[type=text]:visible:not([data-bind])").parent("div").css("z-index",100);j.find("textarea:visible:not([data-bind])").attr("readonly","readonly").parent("div").css("z-index",100);};c.serializeToObject=function(k,m){var l={},j=k.serializeArray();a.each(j,function(){var q=this.name.indexOf("["),n=this.name.indexOf("]"),v=this.name.indexOf("."),u,t,p,o,s;if(q>0&&n-q>1){p=this.name.substr(0,q);if(!l[p]){l[p]=[];}o=parseInt(this.name.substr(q+1,n-q-1));s=l[p].length;for(var r=s;r<o+1;r++){l[p].push({});}v=this.name.indexOf(".");if(v==n+1){u=this.name.substr(v+1,this.name.length-n);l[p][o][u]=this.value;}else{l[p][o]=this.value;}return;}else{if(v>0&&v<this.name.length-1){t=this.name.substr(0,v);u=this.name.substr(v+1,this.name.length);if(!l[t]){l[t]={};}l[t][u]=this.value||"";return;}else{if(m&&(this.value===undefined||this.value===null||this.value==="")){return;}}}if(l[this.name]!==undefined){if(!l[this.name].push){l[this.name]=[l[this.name]];}l[this.name].push(this.value||"");}else{l[this.name]=this.value||"";}});return l;};return c;});bettercms.define("bcms.grid",["bcms.jquery","bcms"],function(a,b){var d={},f={firstTable:"table.bcms-tables:first",emptyRow:"tr.bcms-grid-empty-row",anyRow:"tbody > tr:not(.bcms-grid-empty-row):first",sortColumnHeaders:".bcms-sort-arrow",hiddenSortColumnField:"#bcms-grid-sort-column",hiddenSortDirectionField:"#bcms-grid-sort-direction",hiddenPageNumberField:"#bcms-grid-page-number",formLoaderContainer:".bcms-js-settings-window:first",pageNumbers:".bcms-pager-no, .bcms-pager-prev, .bcms-pager-next",scrollWindow:".bcms-scroll-window:first"},e={},c={};d.links=e;d.globalization=c;d.selectors=f;d.showHideEmptyRow=function(h){var i=h.find(f.firstTable);if(d.gridIsEmpty(i)){i.find(f.emptyRow).show();}else{i.find(f.emptyRow).hide();}};d.gridIsEmpty=function(h){return h.find(f.anyRow).length==0;};d.bindGridForm=function(h,i){h.find(f.sortColumnHeaders).on("click",function(){var j=a(this);h.find(f.hiddenSortColumnField).val(j.data("column"));h.find(f.hiddenSortDirectionField).val(j.data("direction"));g(h,i);});h.find(f.pageNumbers).on("click",function(){var k=a(this),j=k.data("pageNumber");if(j){h.find(f.hiddenPageNumberField).val(j);g(h,i);}});};d.submitGridFormPaged=function(h,i){return g(h,i);};d.submitGridForm=function(h,i){h.find(f.hiddenPageNumberField).val(1);return g(h,i);};function g(i,j){var h=i.parents(f.formLoaderContainer);if(h.length==0){h=i.parents(f.scrollWindow);}if(h.length==0){h=i;}a(h).showLoading();a.ajax({type:"POST",contentType:"application/x-www-form-urlencoded",cache:false,url:i.attr("action"),data:i.serialize(),error:function(){a(h).hideLoading();},success:function(k,m,l){if(a.isFunction(j)){if(l.getResponseHeader("Content-Type").indexOf("application/json")===0&&k.Html){j(k.Html,k.Data);}else{j(k,null);}}setTimeout(function(){a(h).hideLoading();},100);}});}d.focusSearchInput=function(i,j){var h=function(){var k=i.val();i.focus().val("");i.val(k);};if(!j){h();}else{setTimeout(h,200);}};d.init=function(){b.logger.debug("Initializing bcms.grid module.");};b.registerInit(d.init);return d;});bettercms.define("bcms.codeEditor",["bcms.jquery","bcms","bcms.htmlEditor","bcms.modal","ace"],function(a,b,g,j){var d={},k={inputFieldForJS:".bcms-code-field-javascript",inputFieldForCSS:".bcms-code-field-css",alCodeEditors:".bcms-code-field-javascript, .bcms-code-field-css"},i={},f={},e={},c={extraPlugins:"cms-imagemanager,cms-filemanager,cms-modelvalues,aceeditor,cms-option",toolbar:[["CmsImageManager","CmsFileManager","Image"],["CmsOption","CmsModelValues"],["Maximize"]],codeEditorMode:true,toolbarCanCollapse:false};d.selectors=k;d.links=i;d.globalization=f;d.events=e;function h(r,p,q,m){var l=a.extend({aceEditorOptions:{mode:p},height:r.outerHeight()},c,q),n=r.attr("id"),o=r.data("isInitialized");if(!o){g.initializeHtmlEditor(n,null,l,true,m);r.data("isInitialized",true);}}d.initialize=function(l,n,q,o){if(a.browser.msie&&parseInt(a.browser.version,10)<=8){b.logger.info("ACE editor is enabled only on IE versions > 8.");return;}if(!ace){b.logger.error("Failed to load ACE editor.");return;}var p=[],m=[];l.find(k.inputFieldForJS).each(function(){p.push(a(this));});l.find(k.inputFieldForCSS).each(function(){m.push(a(this));});j.maximizeChildHeight(a.merge(p,m),n);a.each(p,function(){h(a(this),"ace/mode/javascript",q,o);});a.each(m,function(){h(a(this),"ace/mode/css",q,o);});};d.init=function(){b.logger.debug("Initializing bcms.codeEditor module.");};b.registerInit(d.init);return d;});bettercms.define("bcms.htmlEditor",["bcms.jquery","bcms","ckeditor","bcms.markdown","bcms.content"],function(a,b,e,m,c){var k={},n={imageButtonContainer:".cke_button:has(.cke_button__image_icon)"},l={},j={smartTagPageTitle:null,smartTagPageUrl:null,smartTagPageId:null,smartTagPageCreatedOn:null,smartTagPageModifiedOn:null,smartTagPageOption:null,smartTagWidgetOption:null,smartTagPageMetaTitle:null,smartTagPageMetaKeywords:null,smartTagPageMetaDescription:null,smartTagPageMainImageUrl:null,smartTagPageSecondaryImageUrl:null,smartTagPageFeaturedImageUrl:null,smartTagPageCategory:null,smartTagBlogAuthor:null,smartTagBlogActivationDate:null,smartTagBlogExpirationDate:null},h={insertImage:"insertImage",insertFile:"insertFile",insertDynamicRegion:"insertDynamicRegion",editChildWidgetOptions:"editChildWidgetOptions",editWidget:"editWidget"},g={widget:"widget",page:"page"};k.selectors=n;k.links=l;k.globalization=j;k.events=h;k.cmsEditorTypes=g;k.id=null;function i(){var p=[];p.push({id:"pageTitle",text:"{{CmsPageTitle}}",title:k.globalization.smartTagPageTitle});p.push({id:"pageUrl",text:"{{CmsPageUrl}}",title:k.globalization.smartTagPageUrl});p.push({id:"pageId",text:"{{CmsPageId}}",title:k.globalization.smartTagPageId});p.push({id:"pageCreatedOn",text:"{{CmsPageCreatedOn:yyyy-MM-dd}}",title:k.globalization.smartTagPageCreatedOn,openWith:"{{CmsPageCreatedOn:",closeWith:"}}",placeholder:"yyyy-MM-dd"});p.push({id:"pageModifiedOn",text:"{{CmsPageModifiedOn:yyyy-MM-dd}}",title:k.globalization.smartTagPageModifiedOn,openWith:"{{CmsPageModifiedOn:",closeWith:"}}",placeholder:"yyyy-MM-dd"});p.push({id:"pageOption",text:"{{CmsPageOption:OptionKey}}",title:k.globalization.smartTagPageOption,openWith:"{{CmsPageOption:",closeWith:"}}",placeholder:"OptionKey"});p.push({id:"widgetOption",text:"{{CmsWidgetOption:OptionKey}}",title:k.globalization.smartTagWidgetOption,openWith:"{{CmsWidgetOption:",closeWith:"}}",placeholder:"OptionKey"});p.push({id:"pageMetaTitle",text:"{{CmsPageMetaTitle}}",title:k.globalization.smartTagPageMetaTitle});p.push({id:"pageMetaKeywords",text:"{{CmsPageMetaKeywords}}",title:k.globalization.smartTagPageMetaKeywords});p.push({id:"pageMetaDescription",text:"{{CmsPageMetaDescription}}",title:k.globalization.smartTagPageMetaDescription});p.push({id:"pageMainImageUrl",text:"{{CmsPageMainImageUrl}}",title:k.globalization.smartTagPageMainImageUrl});p.push({id:"pageSecondaryImageUrl",text:"{{CmsPageSecondaryImageUrl}}",title:k.globalization.smartTagPageSecondaryImageUrl});p.push({id:"pageFeaturedImageUrl",text:"{{CmsPageFeaturedImageUrl}}",title:k.globalization.smartTagPageFeaturedImageUrl});p.push({id:"pageCategory",text:"{{CmsPageCategory}}",title:k.globalization.smartTagPageCategory});p.push({id:"pageAuthor",text:"{{CmsBlogAuthor}}",title:k.globalization.smartTagBlogAuthor});p.push({id:"blogActivationDate",text:"{{CmsBlogActivationDate:yyyy-MM-dd}}",title:k.globalization.smartTagBlogActivationDate,openWith:"{{CmsBlogActivationDate:",closeWith:"}}",placeholder:"yyyy-MM-dd"});p.push({id:"blogExpirationDate",text:"{{CmsBlogExpirationDate:yyyy-MM-dd}}",title:k.globalization.smartTagBlogExpirationDate,openWith:"{{CmsBlogExpirationDate:",closeWith:"}}",placeholder:"yyyy-MM-dd"});return p;}function o(x,w){var t=true,r=x.getChildren(),s=r.count(),q=0,p=r.getItem(q),v=0,u;if(p&&p.$){v=a(p.$).position().top;}for(;q<s;p=r.getItem(++q)){p.show();u=p&&p.$?a(p.$).position().top:0;t=(t&&u===v);if(!t){if(w){p.show();}else{p.hide();}}}}function d(r,t){t=a.extend({marginTop:0,marginBottom:0,topElements:[]},t);var s,u,q=r.closest(t.container).height(),v=0,p=t.parent?r.closest(t.parent).find(t.bottomElement).outerHeight(true):a(t.bottomElement).outerHeight(true);for(s=0;s<t.topElements.length;s++){u=t.topElements[s];v+=t.parent?r.closest(t.parent).find(u.element).outerHeight(u.takeMargins):a(u.element).outerHeight(u.takeMargins);}return q-v-p-t.marginTop-t.marginBottom;}k.initializeMarkdownEditor=function(r,p,s,q){s=a.extend({smartTags:i()},s);m.initializeInstance(k,r,p,s,q);};k.editChildWidgetOptions=function(r,v,p,q,u,t,s){b.trigger(k.events.editChildWidgetOptions,{editor:r,widgetId:v,assignmentId:p,contentId:q,onCloseClick:t,optionListViewModel:u,editorType:s});};k.getChildWidgetOptions=function(p){var q=k.getInstance(p);if(q){return q.childWidgetOptions;}return m.getChildWidgetOptions(p);};k.initializeHtmlEditor=function(s,p,u,v,r){var q=v;if(!CKEDITOR){alert("Failed to load HTML editor.");}k.id=s;var t=CKEDITOR.instances[s];if(t){t.destroy(true);}if(window.location.href.slice(-1)==="#"){window.location.hash="#-";}if(q===true){var w=a("#"+s).val();a("#"+s).val("");}CKEDITOR.replace(s,u);CKEDITOR.instances[s].contentId=p;CKEDITOR.instances[s].codeEditorMode=u.codeEditorMode;CKEDITOR.instances[s].aceEditorOptions=u.aceEditorOptions;CKEDITOR.instances[s].cmsEditorTypes=g;CKEDITOR.instances[s].cmsEditorType=u.cmsEditorType||g.page;CKEDITOR.instances[s].InsertImageClicked=function(x){b.trigger(k.events.insertImage,x);};CKEDITOR.instances[s].InsertFileClicked=function(x){b.trigger(k.events.insertFile,x);};CKEDITOR.instances[s].InsertDynamicRegion=function(x){b.trigger(k.events.insertDynamicRegion,x);};CKEDITOR.instances[s].InsertWidget=function(x){b.trigger(b.events.insertWidget,{onInsert:function(z){if(x.mode==="source"){x.addHtml(z.html);}else{var y=CKEDITOR.dom.element.createFromHtml(z.html,x.document);x.insertElement(y);}}});};CKEDITOR.instances[s].EditChildWidgetOptions=k.editChildWidgetOptions;CKEDITOR.instances[s].EditWidget=function(y,x){b.trigger(k.events.editWidget,{editor:y,contentId:x});};CKEDITOR.instances[s].addHtml=function(y){var x=this;if(x.mode=="source"){if(x.aceEditor&&a.isFunction(x.aceEditor.insert)){x.aceEditor.insert(y);x.aceEditor.focus();}else{x.setData(x.getData()+y);}}else{x.insertHtml(y);}};CKEDITOR.instances[s].on("change",function(){a("#"+this.name).val(CKEDITOR.instances[s].getData());});CKEDITOR.instances[s].on("instanceReady",function(y){a(n.imageButtonContainer).hide();var A=a("#"+s),C=A.attr("readonly")==="readonly"||A.attr("disabled")==="disabled",B=CKEDITOR.instances[s];B.setReadOnly(C);if(q===true){B.setMode("source");B.addHtml(w);a("#"+this.name).val(w);}var z=y.editor;var x=(function(){try{var H=z.toolbox.toolbars[0].id;var G=CKEDITOR.document.getById(H);var I=G.getParent();var E=I.getNext();return E;}catch(F){}return null;})();z.addCommand("toolbarCollapse",{exec:function(I){if(x==null){return;}var K=x.getPrevious(),G=I.ui.space("contents"),L=K.getParent().getParent(),F=parseInt(G.$.style.height,10),J=L.$.offsetHeight,E=K.hasClass("iterate_tbx_hidden");if(!E){o(K,false);K.addClass("iterate_tbx_hidden");if(!K.isVisible()){K.show();}x.addClass("cke_toolbox_collapser_min");x.setAttribute("title",I.lang.toolbar.toolbarExpand);}else{o(K,true);K.removeClass("iterate_tbx_hidden");x.removeClass("cke_toolbox_collapser_min");x.setAttribute("title",I.lang.toolbar.toolbarCollapse);}x.getFirst().setText(E?"\u25B2":"\u25C0");var H=L.$.offsetHeight-J;G.setStyle("height",(F-H)+"px");I.fire("resize");},modes:{wysiwyg:1,source:1}});z.execCommand("toolbarCollapse");if(r){var D=function(){z.resize("100%",d(A,r));};D();a(window).bind("resize",D);a(window).on("disableResize",function(){a(window).unbind("resize",D);});}});CKEDITOR.instances[s].smartTags=i();};function f(p){if(p&&p.commands&&p.commands.maximize&&p.commands.maximize.state==1){p.execCommand("maximize");}}k.destroyAllHtmlEditorInstances=function(){var p;for(name in CKEDITOR.instances){p=CKEDITOR.instances[name];f(p);p.destroy();}if(window.location.href.slice(-2)==="#-"){window.location.hash="";}a(window).trigger("disableResize");};k.destroyHtmlEditorInstance=function(q){var p=k.getInstance(q);if(p){f(p);p.destroy();a(window).trigger("disableResize");}if(window.location.href.slice(-2)==="#-"){window.location.hash="";}};k.setSourceMode=function(q){var p=k.getInstance(q);p.on("instanceReady",function(){p.setMode("source");});};k.enableInsertDynamicRegion=function(s,q,r){var p=k.getInstance(s);p.DynamicRegionsEnabled=true;p.LastDynamicRegionNumber=r;p.IsMasterPage=q;};k.isSourceMode=function(r,p){if(p===c.contentTextModes.markdown||p===c.contentTextModes.simpleText){return true;}var q=k.getInstance(r);return q!=null&&q.mode==="source";};k.getInstance=function(q){var p=q||k.id;return CKEDITOR.instances[p];};k.init=function(){b.logger.debug("Initializing bcms.htmlEditor module.");CKEDITOR.disableAutoInline=true;};b.registerInit(k.init);return k;});bettercms.define("bcms.inlineEdit",["bcms.jquery","bcms","bcms.messages","bcms.modal","bcms.grid"],function(a,b,h,i,f){var d={rowAdded:false,options:{},autoGenerateNameId:0},j={},c={row:"tr",editableRows:'tr:visible:has("td")',rowCells:"td",firstRow:"tr:first",firstCell:"td:first",firstForm:"form:first",firstEditableInput:'input[type="text"]:first',editableInput:'input[type="text"]',fieldInputs:".bcms-js-grid-input",allInputs:"td input",fieldValues:".bcms-grid-item-info",deleteRowLink:"div.bcms-action-delete",rowMessage:".bcms-grid-item-message",saveRowLink:".bcms-btn-primary",cancelLink:"div.bcms-btn-cancel",editRowLink:".bcms-grid-item-edit-button",firstTable:"table.bcms-tables:first",templateFirstRow:"tr:first",template:"#bcms-editable-row-template",fieldEditableValue:'input[type="text"]:first',fieldHiddenValue:'input[type="hidden"]:first',fieldVisibleValue:".bcms-grid-item-info:first",prependNewRowTo:"tbody",firstInvalidField:".bcms-input-validation-error:first"},g={},e={messageSaving:null,messageDeleting:null,confirmDeleteMessage:null};d.links=g;d.globalization=e;d.selectors=j;d.defaultSelectors=c;d.isRowInEditMode=function(m){var l=a(document.activeElement);return m.css("display")!="none"&&!m.data("saving")&&l.parents(j.firstRow).get(0)!=m.get(0);};d.initialize=function(l,m,n){this.options=a.extend({saveUrl:null,deleteUrl:null,newRowAdder:null,onSaveSuccess:function(){},rowDataExtractor:function(){return{};},deleteRowMessageExtractor:function(){return"";},switchRowToEdit:this.switchRowToEdit,switchRowToView:this.switchRowToView,showHideEmptyRow:f.showHideEmptyRow,formContainer:l,form:l.find(j.firstForm)},m);this.initializeSelectors(n);this.rowAdded=false;this.initRowEvents(l);this.resetAutoGenerateNameId();this.setInputNames(l);};d.initializeSelectors=function(l){j=a.extend({},c);if(l){j=a.extend({},j,l);}};function k(n,m){if(m){var o=n.parents(j.firstTable).find(j.editableRows),l=n.find(j.editRowLink).data("id");o.each(function(){var p=a(this);if(l!=p.find(j.editRowLink).data("id")){p.data("isSelected",false);}});}n.data("isSelected",m);}d.initRowEvents=function(l){var m=this;l.find(j.rowCells).on("click",function(n){b.stopEventPropagation(n);var o=a(this).parents(j.firstRow);k(o,true);m.editRow(o);});l.find(j.saveRowLink).on("click",function(n){b.stopEventPropagation(n);var o=a(this).parents(j.firstRow);k(o,true);o.data("savePressed",true);m.saveRow(o);});l.find(j.cancelLink).on("click",function(n){b.stopEventPropagation(n);var o=a(this).parents(j.firstRow);k(o,true);m.cancelRowEdit(o);});l.find(j.deleteRowLink).on("click",function(n){b.stopEventPropagation(n);var o=a(this).parents(j.firstRow);k(o,true);m.deleteRow(o);});b.preventInputFromSubmittingForm(l.find(j.fieldInputs),{preventedEnter:function(o){var n=o.parents(j.firstRow);m.saveRow(n);},preventedEsc:function(o){var n=o.parents(j.firstRow);m.cancelRowEdit(n);}});};d.isRowValid=function(m){var n=true,l=null;m.find(j.fieldInputs).each(function(){var o=a(this);if(!o.valid()){if(!l){l=o;}n=false;}});if(!n&&l&&m.data("savePressed")){l.focus();k(m,false);m.data("savePressed",false);}return n;};d.hasAnyValueChanged=function(m){var l=false;m.find(j.fieldInputs).each(function(){var p=a(this),n=p.parents(j.firstCell),o=n.find(j.fieldHiddenValue);if(p.val()!=o.val()){l=true;return false;}return true;});return l;};d.cancelRowEdit=function(l){if(l.data("new")){l.find(j.editableInput).blur();l.remove();this.options.showHideEmptyRow(this.options.formContainer);this.rowAdded=false;}else{l.find(j.fieldInputs).each(function(){var o=a(this),m=o.parents(j.firstCell),n=m.find(j.fieldHiddenValue);o.val(n.val());});this.options.switchRowToView(l);}};d.bindBlurEvents=function(l){var m=this;l.find(j.fieldInputs).bind("blur",function(n){m.onRowInputBlur(n,l);});};d.unbindBlurEvents=function(l){l.find(j.fieldInputs).unbind("blur");};d.onRowInputBlur=function(l,m){var n=this;m.data("blurred",true);setTimeout(function(){var o=false;if(n.isRowInEditMode(m)){var p=n.hasAnyValueChanged(m);if(p){if(n.isRowValid(m)&&m.data("blurred")){n.saveRow(m);o=true;}}else{if(!m.data("new")||!m.data("isSelected")){n.cancelRowEdit(m);o=true;}}k(m,false);}if(o){n.unbindBlurEvents(m);}m.data("blurred",false);},100);};d.addNewRow=function(l,n){if(!this.rowAdded){var o=l.find(j.template),m=a(o.html()).find(j.templateFirstRow);if(!n){n=l.find(j.firstTable);}m.data("new",true);this.setRowInputNames(m);if(a.isFunction(this.options.newRowAdder)){this.options.newRowAdder(m,n);}else{m.prependTo(n.find(j.prependNewRowTo));}this.options.switchRowToEdit(m);b.updateFormValidator(this.options.form);this.initRowEvents(m,l);this.bindBlurEvents(m);this.rowAdded=true;this.options.showHideEmptyRow(l);}};d.showRowLoading=function(o,m){a(o).children().hide();var l=a(o).children().length;var n=a("<td>",{colspan:l});n.html(m);a(o).append(n);};d.hideRowLoading=function(l){a(a(l).children().get(a(l).children().length-1)).remove();a(l).children().show();};d.saveRow=function(n){var q=this;if(q.isRowValid(n)){if(q.options.saveUrl){var o=q.options.rowDataExtractor(n),p=n.find(j.saveRowLink),l=n.find(j.cancelLink),r=q.options.saveUrl,m=function(s){h.refreshBox(n,s);q.hideRowLoading(n);n.data("saving",false);n.data("blurred",false);if(s.Success){p.hide();l.hide();if(s.Data){if(s.Data.Version){n.find(j.deleteRowLink).data("version",s.Data.Version);}if(s.Data.Id){n.find(j.deleteRowLink).data("id",s.Data.Id);n.find(j.editRowLink).data("id",s.Data.Id);}q.rowAdded=false;n.data("new",false);}if(a.isFunction(q.options.onSaveSuccess)){q.options.onSaveSuccess(n,s);}q.options.switchRowToView(n);}else{q.bindBlurEvents(n);}};n.data("saving",true);q.showRowLoading(n,e.messageSaving);a.ajax({type:"POST",cache:false,url:r,data:o}).done(function(s){m(s);}).fail(function(s){m(b.parseFailedResponse(s));});}else{q.rowAdded=false;n.data("new",false);n.find(j.fieldInputs).each(function(){var u=a(this),s=u.parents(j.firstCell),t=s.find(j.fieldHiddenValue),v=s.find(j.fieldVisibleValue);t.val(u.val());v.html(u.val());return true;});q.options.switchRowToView(n);}}return true;};d.editRow=function(l){this.bindBlurEvents(l);this.options.switchRowToEdit(l);};d.deleteRow=function(m){var n=this.options.rowDataExtractor(m),l,o=this;if(a.isFunction(this.options.deleteRowMessageExtractor)){l=this.options.deleteRowMessageExtractor(n);}else{l=e.confirmDeleteMessage;}i.confirm({content:l,onAccept:function(){if(o.options.deleteUrl){var r=o.options.deleteUrl,p=m.find(j.deleteRowLink),q=function(s){h.refreshBox(m,s);o.hideRowLoading(m);if(s.Success){m.remove();o.options.showHideEmptyRow(o.options.formContainer);}else{p.show();}};p.hide();o.showRowLoading(m,e.messageDeleting);a.ajax({type:"POST",cache:false,url:r,data:n}).done(function(s){q(s);}).fail(function(s){q(b.parseFailedResponse(s));});}else{m.remove();o.options.showHideEmptyRow(o.options.formContainer);}}});};d.switchRowToEdit=function(l){l.addClass("bcms-table-row-active");l.find(j.fieldValues).hide();l.find(j.fieldInputs).show();if(!l.find(j.editableInput).eq(1).is(":focus")){l.find(j.firstEditableInput).focus();}l.find(j.deleteRowLink).hide();l.find(j.saveRowLink).show();l.find(j.cancelLink).show();l.find(j.rowMessage).hide();l.find("td:last").css("width","120px");l.find("td:last").css("padding","");};d.switchRowToView=function(l){l.removeClass("bcms-table-row-active");l.find(j.fieldValues).show();l.find(j.fieldInputs).blur().hide();l.find(j.deleteRowLink).show();l.find(j.saveRowLink).hide();l.find(j.cancelLink).hide();l.find(j.rowMessage).hide();l.find("td:last").css("width","40px");l.find("td:last").css("padding","10px 0");};d.resetAutoGenerateNameId=function(){this.autoGenerateNameId=0;};d.setInputNames=function(l){var m=this;l.find(j.row).each(function(){var n=a(this);m.setRowInputNames(n);});b.updateFormValidator(m.options.form);};d.setRowInputNames=function(n){var l=false,m=null,o=this;n.find(j.allInputs).each(function(){var p=a(this),r=p.data("namePattern");if(r){if(!l){l=true;m=o.autoGenerateNameId++;}var q=a.format(r,m);p.attr("name",q);var s=p.parents(j.firstCell).find("span.bcms-field-validation-valid, span.bcms-field-validation-error");s.data("valmsg-for",q);s.attr("data-valmsg-for",q);}});};d.init=function(){b.logger.debug("Initializing bcms.inlineEdit module.");};b.registerInit(d.init);return d;});bettercms.define("bcms",["bcms.jquery","bcms.store"],function(a,p){var b={logger:null},c=[],l=false,o={zIndexLayers:".bcms-layer, .cke_maximized",browserInfo:"#bcms-browser-info",browserInfoClose:".bcms-msg-message-close"},h={editModeOff:"editModeOff",editModeOn:"editModeOn",addPageContent:"addPageContent",sortPageContent:"sortPageContent",contentModelCreated:"contentModelCreated",pageCreated:"pageCreated",editContentsTree:"editContentsTree",insertWidget:"insertWidget",bodyClick:"bodyClick"},g={},e={published:3,draft:2,preview:1},j={sessionHasExpired:null,failedToProcessRequest:null},m={loggerLevel:"bcms.loggerLevel",},d={emptyGuid:"00000000-0000-0000-0000-000000000000",loginRedirectHeader:"Bcms-Redirect-To"},f=!!true;b.events=h;b.globalization=j;b.constants=d;b.pageId=null;b.language=null;b.languageId=null;b.errorTrace=f;b.contentStatus=e;b.previewWindow="__bcmsPreview";function n(){var q=this;q.levels={off:-1,fatal:10,error:20,warn:30,info:40,debug:50,trace:60};q.info=function(r){q.log(r,q.levels.info);};q.warn=function(r){q.log(r,q.levels.warn);};q.debug=function(r){q.log(r,q.levels.debug);};q.trace=function(r){q.log(r,q.levels.trace);};q.fatal=function(r){q.log(r,q.levels.fatal);};q.error=function(r){q.log(r,q.levels.error);};q.log=function(t,r){var s=q.getMaxLevel();if(r<=s){if(r<=q.levels.error&&a.isFunction(console.error)){console.error(t);}else{if(r>q.levels.error&&r<=q.levels.warn&&a.isFunction(console.warn)){console.warn(t);}else{if(r>q.levels.warn&&r<=q.levels.info&&a.isFunction(console.info)){console.info(t);}else{console.log(t);}}}}};q.getMaxLevel=function(){var r=p.get(m.loggerLevel);if(!r){r=q.levels.info;p.set(m.loggerLevel,r);}return r;};return q;}b.editModeIsOn=function(){return a("html").hasClass("bcms-on");};b.registerInit=function(q){c.push(q);};b.init=function(){if(l){return;}l=true;b.logger.debug("Initializing bcms.js");a.each(c,function(r,q){q();});c=[];};b.on=function(q,r){if(typeof q!=="string"){b.logger.error("Event must be type of string");return;}if(!a.isFunction(r)){b.logger.error("Event callback must be type of function");return;}(g[q]=g[q]||[]).push(r);};b.off=function(q,r){var t=(g[q]=g[q]||[]),s=a.inArray(r,t);if(s!==-1){t.splice(s,1);}if(!r){g[q]=[];}};b.trigger=function(s,r){var q=0;a.each(g[s]||[],function(v,u){try{if(r){u(r);}else{u();}q++;}catch(t){a.error(t.message);}});return q;};b.redirect=function(q){document.location.href=q;};b.reload=function(){location.reload(true);};b.getHighestZindex=function(){var q=0;a(o.zIndexLayers).each(function(){var r=parseInt(a(this).css("z-index"),10);if(r>q){q=r;}});return q;};b.preventInputFromSubmittingForm=function(q,r){r=a.extend({preventedEnter:null,preventedEsc:null},r);a(q).on("keydown",function(t){t=t||event;var s=t.keyCode||event.which||event.charCode||0;if((s===13&&a.isFunction(r.preventedEnter))||(s===27&&a.isFunction(r.preventedEsc))){t.returnValue=false;if(t.stopPropagation){t.stopPropagation();t.preventDefault();}if(s===13&&a.isFunction(r.preventedEnter)){r.preventedEnter(a(this),t);}else{if(s===27&&a.isFunction(r.preventedEsc)){r.preventedEsc(a(this),t);}}return false;}return true;});};b.parseFailedResponse=function(t){var u=200,q=t.getResponseHeader("Content-Type"),r=q&&q.indexOf("application/json")!==-1,s;s=t.status===u&&!r?j.sessionHasExpired:a.format(j.failedToProcessRequest,t.status,t.statusText);return{Success:false,Messages:[s]};};b.extendsClass=function(s,r){function q(){this.constructor=s;}q.prototype=r.prototype;s.prototype=new q();};b.stopEventPropagation=function(q){if(q!=null){q.cancelBubble=true;q.returnValue=false;if(q.stopPropagation){q.stopPropagation();q.preventDefault();}}};b.updateFormValidator=function(q){if(q&&a.validator&&a.validator.unobtrusive){q.removeData("validator");q.removeData("unobtrusiveValidation");a.validator.unobtrusive.parse(q);}};b.isEmptyGuid=function(q){return q===d.emptyGuid||q==="00000000000000000000000000000000";};function k(r,t){if(t&&t.status===401){try{var s=t.getResponseHeader(b.constants.loginRedirectHeader);if(s){window.location.href=s;}}catch(q){b.logger.error(q);}}}b.createGuid=function(){return"xxxxxxxx-xxxx-4xxx-yxxx-xxxxxxxxxxxx".replace(/[xy]/g,function(q){var s=Math.random()*16|0,t=q=="x"?s:(s&3|8);return t.toString(16).toUpperCase();});};b.boolAsString=function(q){if(q){return"1";}else{return"0";}};b.asEnumerable=function(q){var s,t=q.length,r=function(u){for(s=0;s<t;s++){u(q[s]);}return b.asEnumerable(q);};return{where:function(v){var u=[];r(function(w){if(v(w)){u.push(w);}});return b.asEnumerable(u);},toArray:function(){return q;},forEach:r};};function i(){if(a.browser.msie&&parseInt(a.browser.version,10)<=7){var q=a(o.browserInfo);q.find(o.browserInfoClose).on("click",function(){q.hide();});q.css("display","block");}a(document).on("click",function(r){b.trigger(b.events.bodyClick,r);});a(document).ajaxError(k);}b.logger=new n();b.registerInit(i);return b;});bettercms.define("bcms.ko.extenders",["bcms.jquery","bcms","knockout","bcms.antiXss"],function(a,d,f,b){f.globalization={maximumLengthMessage:null,requiredFieldMessage:null,invalidEmailMessage:null,invalidKeyMessage:null,nonAlphanumericMessage:null,activeDirectoryCompliantMessage:null},f.maxLength={email:400,name:200,text:2000,url:850,uri:2000};f.bindingHandlers.select2={init:function(j,l,i){var h,g,k;k=l();k.ko_FIX=true;a(j).select2(k);h=i();if(typeof(g=h.value).subscribe==="function"){g.subscribe(function(m){return a(j).select2("val",m);});}return f.utils.domNodeDisposal.addDisposeCallback(j,function(){return a(j).select2("destroy");});},update:function(h,i,g){a(h).trigger("change");}};f.bindingHandlers.enterPress={init:function(i,j,h,k){var g=h();d.preventInputFromSubmittingForm(a(i),{preventedEnter:function(m,l){g.enterPress.call(k,k,l);}});}};f.bindingHandlers.escPress={init:function(i,j,h,k){var g=h();d.preventInputFromSubmittingForm(a(i),{preventedEsc:function(m,l){g.escPress.call(k,k,l);}});}};f.bindingHandlers.stopBindings={init:function(){return{controlsDescendantBindings:true};}};f.bindingHandlers.valueBinder={update:function(g,j){if(a.isFunction(j)){var h=j();if(a.isFunction(h)){var i=h();if(typeof i==="boolean"){a(g).val(i===true?"true":"false");return;}}}f.bindingHandlers.value.update(g,j);}};f.observable.fn.asString=function(){var g=this;if(!g._asString){g._asString=f.computed({read:function(){return String(g());},write:function(h){g(Number(h));}});}return g._asString;};function e(k){var j=this;j.rules=[];j.target=k;j.registerRule=function(m){var l=g(m);if(!l){j.rules[j.rules.length]={name:m,hasError:false,message:""};}};j.setError=function(o,l,m){var n=g(o);if(n){n.hasError=l;n.message=l?m:"";j.target.hasError(i());j.target.validationMessage(h());}};function i(){for(var l=0;l<j.rules.length;l++){if(j.rules[l].hasError===true){return true;}}return false;}function h(){var m="";for(var l=0;l<j.rules.length;l++){if(j.rules[l].hasError===true&&j.rules[l].message){if(m){m+="<br />";}m+=j.rules[l].message;}}return m;}function g(n){var m=j.rules.length;if(!m){return null;}for(var l=0;l<m;l++){if(j.rules[l].name==n){return j.rules[l];}}return null;}}f.extenders.required=function(i,g){var h="required";return f.extenders.koValidationExtender(h,i,function(l){l=a.trim(l);var j=(!l),k=j?g||f.globalization.requiredFieldMessage:"";i.validator.setError(h,j,k);});};f.extenders.maxLength=function(k,i){var j="maxLength",g=i.maxLength,h=i.message||f.globalization.maximumLengthMessage;return f.extenders.koValidationExtender(j,k,function(m){var l=(m!=null&&m.length>g),n=l?a.format(h,g):"";k.validator.setError(j,l,n);});};f.extenders.preventHtml=function(h,g){g=a.extend({pattern:"</?\\w+((\\s+\\w+(\\s*=\\s*(?:\".*?\"|'.*?'|[^'\">\\s]+))?)+\\s*|\\s*)/?>",message:f.globalization.invalidKeyMessage},g);return f.extenders.doNotMatchRegularExpression(h,g);};f.extenders.preventNonAlphanumeric=function(h,g){g=a.extend({pattern:"^[a-zA-Z0-9]*$",message:f.globalization.nonAlphanumericMessage},g);return f.extenders.regularExpression(h,g);};f.extenders.activeDirectoryCompliant=function(h,g){g=a.extend({pattern:/[\\\/\"\[\]\:\;\|\=\,\+\*\?\<\>\%]/,message:f.globalization.activeDirectoryCompliantMessage,isconstructedregex:true},g);return f.extenders.doNotMatchRegularExpression(h,g);};f.extenders.email=function(h,g){g=a.extend({pattern:"^[a-zA-Z0-9.!#$%&'*+/=?^_`{|}~-]+@[a-zA-Z0-9-]+(?:\\.[a-zA-Z0-9-]+)+$",message:f.globalization.invalidEmailMessage},g);return f.extenders.regularExpression(h,g);};var c=function(m,i,k,g,l){var j=i.pattern||"",h=i.message||g;return f.extenders.koValidationExtender(k,m,function(o){var n;var p;if(i.isconstructedregex===true&&j){p=j;}else{p=new RegExp(j,"i");}if(l){n=(o!=null&&j&&!o.match(p));}else{n=(o!=null&&j&&o.match(p)!=null);}var q=n?a.format(h,j):"";m.validator.setError(k,n,q);});};f.extenders.regularExpression=function(h,g){return c(h,g,"regularExpression",f.globalization.regularExpressionMessage,true);};f.extenders.doNotMatchRegularExpression=function(h,g){return c(h,g,"doNotMatchRegularExpression",f.globalization.regularExpressionMessage,false);};f.extenders.koValidationExtender=function(g,h,i){if(!h.hasError){h.hasError=f.observable(false);h.validationMessage=f.observable();h.validator=new e(h);}h.validator.registerRule(g);i(h());h.subscribe(i);return h;};f.PagingViewModel=(function(){function g(j,i,l,h){var k=this;k.totalPagingLinks=5;k.activePagePosition=2;k.pageSize=0;k.pageNumber=f.observable(1);k.totalPages=f.observable(1);k.pagingUpperBound=f.observable(1);k.pagingLowerBound=f.observable(1);k.totalCount=0;k.pages=f.computed(function(){var n=[];for(var m=k.pagingLowerBound();m<=k.pagingUpperBound();m++){n.push(m);}return n;});k.openPage=function(m){k.pageNumber(m);if(a.isFunction(h)){h(m);}};k.setPaging=function(n,m,o){k.totalCount=o>0?o:1;if(n>0){if(m<=0){m=1;}if(o<0){o=0;}var r=parseInt(Math.ceil(o/n));r=r>0?r:1;k.pageSize=n;k.pageNumber(m);k.totalPages(r);k.totalCount=o;var p=m-k.activePagePosition;if(p<1){p=1;}var q=p+k.totalPagingLinks;if(q>r){q=r;}if(q-p<k.totalPagingLinks){p=q-k.totalPagingLinks;if(p<1){p=1;}}k.pagingLowerBound(p);k.pagingUpperBound(q);}};k.setPaging(j,i,l);}return g;})();return f;});bettercms.define("bcms.ko.grid",["bcms.jquery","bcms","bcms.ko.extenders","bcms.messages","bcms.modal","bcms.tabs"],function(a,b,e,g,h,n){var d={},k={},f={},c={},l={ascending:0,descending:1},m=1,j=[],i=0;d.links=f;d.globalization=c;d.selectors=k;d.OptionsViewModel=(function(){function o(q,p){var r=this;r.searchQuery=e.observable("");r.column=e.observable();r.isDescending=e.observable(false);r.setOptions=function(s){r.searchQuery(s.SearchQuery||"");r.column(q.Column);r.isDescending(q.Direction==l.descending);r.paging=new e.PagingViewModel(q.PageSize,q.PageNumber,q.TotalCount,p);};r.hasFocus=e.observable(true);if(q){r.setOptions(q);r.hasPaging=true;r.paging=new e.PagingViewModel(q.PageSize,q.PageNumber,q.TotalCount,p);}else{r.hasPaging=false;}}return o;})();d.ListViewModel=(function(){d.ListViewModel=function(o,r,q,p,s){var t=this;t.opts=a.extend({createItem:null},s);t.loadUrl=r;t.saveUrl=null;t.deleteUrl=null;t.items=e.observableArray();t.options=e.observable();t.container=o;t.rowAdded=false;t.searchEnabled=e.observable(false);t.messagesDomId=function(){var u=m++;return"bcms-editable-grid-messages-"+u;};t.setOptions=function(u){var v=new d.OptionsViewModel(u,t.openPage);t.options(v);};t.messagesDomId=function(){var u=m++;return"bcms-editable-grid-messages-"+u;};t.setOptions=function(u){var v=new d.OptionsViewModel(u,t.openPage);t.options(v);};t.openPage=function(){var u=t.toJson();t.load(u);};t.toggleSearch=function(){if(!t.searchEnabled()){t.options().hasFocus(true);t.searchEnabled(true);}else{t.searchEnabled(false);t.options().searchQuery("");}};t.setItems=function(v){if(!v){return;}for(var u=0;u<v.length;u++){t.setItem(v[u]);}};t.setItem=function(u){var v=t.createItem(u);t.items.push(v);};t.searchItems=function(){t.options().paging.pageNumber(1);var u=t.toJson();t.load(u);};t.sortItems=function(u){var v=t.options().column(),x=t.options().isDescending();if(v==u){t.options().isDescending(!x);}else{t.options().isDescending(false);}t.options().column(u);var w=t.toJson();t.load(w);};t.isSortedAscending=function(u){if(u==t.options().column()&&!t.options().isDescending()){return true;}return false;};t.isSortedDescending=function(u){if(u==t.options().column()&&t.options().isDescending()){return true;}return false;};t.toJson=function(){var u={SearchQuery:t.options().searchQuery(),Column:t.options().column(),Direction:t.options().isDescending()?l.descending:l.ascending,PageSize:t.options().paging.pageSize,PageNumber:t.options().paging.pageNumber()};return u;};t.load=function(w){var u="koGridList",x=t.container.closest(".bcms-window-settings").length>0?t.container.closest(".bcms-window-settings"):t.container,v=function(y){if(x){x.hideLoading(u);}t.parseResults(y);};if(x){x.showLoading(u);}a.ajax({type:"POST",cache:false,url:t.loadUrl,data:w}).done(function(y){v(y);}).fail(function(y){v(b.parseFailedResponse(y));});};t.parseResults=function(u){if(t.container){g.refreshBox(t.container,u);}if(u.Success){t.items.removeAll();if(u.Data){if(u.Data.Items&&u.Data.Items&&a.isArray(u.Data.Items)){t.setItems(u.Data.Items);}if(u.Data.GridOptions){t.setOptions(u.Data.GridOptions);}}}};t.isValid=function(v){for(var u=0;u<t.items().length;u++){if(!t.items()[u].isValid(v)){return false;}}return true;};t.getSelectedItem=function(){var u,v,w;for(u=0,v=t.items().length;u<v;u++){w=t.items()[u];if(w.isSelectedForInsert()){return w;}}return null;};if(q&&a.isArray(q)){t.setItems(q);}t.setOptions(p);};d.ListViewModel.prototype.addNewItem=function(){if(!this.rowAdded){this.rowAdded=true;var o=this.createItem({IsActive:true,IsNew:true});this.items.unshift(o);this.isSelected=true;b.logger.trace("ko.grid.addNewItem: isSelected = true");this.onAfterNewItemAdded(o);}};d.ListViewModel.prototype.createItem=function(o){if(this.opts&&this.opts.createItem&&a.isFunction(this.opts.createItem)){return this.opts.createItem(this,o);}var p=new d.ItemViewModel(this,o);return p;};d.ListViewModel.prototype.onAfterNewItemAdded=function(o){};return d.ListViewModel;})();d.FieldViewModel=function(p,o,q){var r=this;r.id=p;r.oldValue="";r.field=o;r.parent=q;r.field.subscribe(function(){var s=r.field(),t=s||typeof s=="boolean"?s:"";if(!r.parent.isActive()&&t!==r.oldValue){r.oldValue=t;}});r.hasChanges=function(){var u=r.oldValue||typeof r.oldValue=="boolean"?r.oldValue:"",s=r.field(),t=s||typeof s=="boolean"?s:"";return u!=t;};r.restoreOldValue=function(){var s=r.oldValue||typeof r.oldValue=="boolean"?r.oldValue:"";r.field(s);};r.isValid=function(t){if(r.field.hasError&&r.field.hasError()){if(t){if(r.field.domElement){var s=a(r.field.domElement);if(s){var u=n.getTabPanelOfElement(s);if(u){u.selectTabOfElement(s);}s.focus();}}}return false;}return true;};};d.ItemViewModel=(function(){d.ItemViewModel=function(q,p){var r=this;r.parent=q;r.id=e.observable(p.Id);r.version=e.observable(p.Version);r.isActive=e.observable(p.IsActive||false);r.saving=e.observable(false);r.deleting=e.observable(false);r.hasFocus=e.observable(false);r.hasError=e.observable(false);r.isSelected=false;b.logger.trace("ko.grid.ItemViewModel.constructor: isSelected = false");r.registeredFields=[];r.savePressed=false;r.deletingIsDisabled=e.observable(false);r.editingIsDisabled=e.observable(false);r.isSelectedForInsert=e.observable(false);r.isNew=e.observable(p.IsNew||false);r.wasSaved=!r.isNew();r.onOpen=function(s,t){r.isSelected=true;b.logger.trace("ko.grid.onOpen: isSelected = true");if(!this.isActive()){r.openItem();}return true;};r.onEdit=function(s,t){r.isSelected=true;b.logger.trace("ko.grid.onEdit: isSelected = true");r.editItem();};r.onDelete=function(s,t){r.isSelected=true;b.logger.trace("ko.grid.onDelete: isSelected = true");r.deleteItem();};r.onStopEvent=function(s,t){r.isSelected=true;b.logger.trace("ko.grid.onStopEvent: isSelected = true");b.stopEventPropagation(t);};r.onItemSelect=function(u,s,t){setTimeout(function(){u(true);},50);b.logger.trace("ko.grid.onItemSelect: isSelected = true");return true;};r.registerFields=function(){r.registeredFields=[];if(arguments.length>0){for(var t=0;t<arguments.length;t++){var s=new d.FieldViewModel(t,arguments[t],r);r.registeredFields.push(s);}}};r.restoreOldValues=function(){for(var t=0;t<r.registeredFields.length;t++){var s=r.registeredFields[t];s.restoreOldValue();}};r.isValid=function(u){for(var t=0;t<r.registeredFields.length;t++){var s=r.registeredFields[t];if(!s.isValid(u)){return false;}}return true;};r.loseFocus=function(){r.parent.options().hasFocus(false);r.parent.options().hasFocus(true);};r.hiddenFieldName=function(t,s){return a.format(t,s);};r.initInput=function(s,t){if(s&&t&&a.isFunction(t)){t.domElement=s;}};r.selectForInsert=function(){var s,t,u;for(s=0,t=r.parent.items().length;s<t;s++){u=r.parent.items()[s];if(u==r){r.isSelectedForInsert(true);}else{if(u.isSelectedForInsert()){u.isSelectedForInsert(false);}}}};r.getCroppedText=function(t){var s=this.getCroppedTextLength();if(t&&t.length>s){t=t.substring(0,250)+this.getCroppedTextSuffix();}return t;};r.onBodyClickBound=function(s){r.onBodyClick.call(r,s);};b.on(b.events.bodyClick,r.onBodyClickBound);};d.ItemViewModel.prototype.getCroppedTextSuffix=function(){return" ...";};d.ItemViewModel.prototype.getCroppedTextLength=function(){return 250;};d.ItemViewModel.prototype.onCancelEdit=function(p,q){this.isSelected=true;b.logger.trace("ko.grid.onCancelEdit: isSelected = true");this.cancelEditItem();};d.ItemViewModel.prototype.onSave=function(p,q){this.hasFocus(!this.hasFocus(!this.hasFocus()));this.savePressed=true;this.saveItem();};d.ItemViewModel.prototype.hasChanges=function(){for(var q=0;q<this.registeredFields.length;q++){var p=this.registeredFields[q];if(p.hasChanges()){return true;}}return false;};d.ItemViewModel.prototype.openItem=function(){this.editItem();};d.ItemViewModel.prototype.editItem=function(){if(!this.editingIsDisabled()){this.isActive(true);this.hasFocus(true);}};d.ItemViewModel.prototype.cancelOrSaveItem=function(){var p=this;if(p.isSelected&&p.isActive()){if(p.isNew()&&!p.hasChanges()){p.cancelEditItem();}else{p.saveItem();}}};function o(r,p){for(var q=0;q<j.length;q++){if(r.id==j[q].id){if(p){clearTimeout(j[q].timer);}j.splice(q,1);}}}d.ItemViewModel.prototype.addSaveTimer=function(q,p){j.push({id:q.id,timer:p});};d.ItemViewModel.prototype.getDeleteParams=function(){return{Id:this.id(),Version:this.version()};};d.ItemViewModel.prototype.deleteItem=function(){var v=this,w=v.parent.deleteUrl;var q=v.parent.container,r=v.parent.items,s=v.getDeleteConfirmationMessage(),u=v.getDeleteParams(),t=function(x){if(q!=null){g.refreshBox(q,x);}if(x.Success){r.remove(v);}v.deleting(false);},p=h.confirm({content:s||"",onAccept:function(){p.close();v.deleting(true);if(w){a.ajax({type:"POST",url:w,cache:false,data:u}).done(function(y){t(y);v.onAfterItemDeleted(y);}).fail(function(y){var z=b.parseFailedResponse(y);t(z);v.onAfterItemDeleted(z);});}else{var x={Success:true};t(x);v.onAfterItemDeleted(x);}return true;},onClose:function(){v.deleting(false);}});};d.ItemViewModel.prototype.getSaveParams=function(){return{Id:this.id(),Version:this.version()};};d.ItemViewModel.prototype.saveItem=function(){var v=this;if(v.saving()===true){return;}v.hasFocus(false);v.saving(true);o(v,true);var w=v.parent.saveUrl,p=this.isActive()&&this.hasChanges()&&this.isValid(),t=this.isActive()&&!this.hasChanges()&&this.isValid()&&this.isNew(),q=!this.isValid(),r=!p&&!t&&q&&v.savePressed;v.savePressed=false;v.isNew(false);v.parent.rowAdded=false;if(p){var s=v.getSaveParams();if(w){b.logger.trace("ko.grid.saveItem: starting to save item");a.ajax({url:w,type:"POST",contentType:"application/json; charset=utf-8",dataType:"json",cache:false,data:JSON.stringify(s)}).done(function(x){b.logger.trace("ko.grid.saveItem: save is done");v.onAfterItemSaved(x);v.saving(false);if(x.Success){v.wasSaved=true;}else{v.parent.rowAdded=true;}}).fail(function(x){b.logger.trace("ko.grid.saveItem: save has failed");v.onAfterItemSaved(b.parseFailedResponse(x));v.saving(false);});}else{var u={Success:true};v.onAfterItemSaved(u);v.saving(false);v.wasSaved=true;}}else{if(!q){this.isActive(false);this.loseFocus();}if(t){this.parent.items.remove(this);}v.saving(false);}if(r){this.hasFocus(true);}};d.ItemViewModel.prototype.onAfterItemSaved=function(s){var t=this;if(t.parent.container){g.refreshBox(t.parent.container,s);}if(s.Success){t.isSelected=false;b.logger.trace("ko.grid.onAfterItemSaved.onSuccess: isSelected = false");if(s.Data){t.version(s.Data.Version);t.id(s.Data.Id);}t.isActive(false);t.loseFocus();for(var r=0;r<this.registeredFields.length;r++){var p=this.registeredFields[r],q=p.field();p.oldValue=q||typeof q=="boolean"?q:"";}}else{t.hasFocus(true);t.isSelected=true;b.logger.trace("ko.grid.onAfterItemSaved.onFailed: isSelected = true");}};d.ItemViewModel.prototype.onAfterItemDeleted=function(p){};d.ItemViewModel.prototype.cancelEditItem=function(){if(this.isNew()||!this.wasSaved){this.parent.items.remove(this);this.parent.rowAdded=false;}else{this.restoreOldValues();}this.isActive(false);this.loseFocus();};d.ItemViewModel.prototype.getDeleteConfirmationMessage=function(){if(!this.rowId){this.rowId="bcms-ko-grid-row-"+i++;}return this.rowId;};d.ItemViewModel.prototype.getRowId=function(){return"";};d.ItemViewModel.prototype.onBodyClick=function(p){if(!this.isSelected){return;}if(a(p.target).closest("#"+this.getRowId()).length===0){this.cancelOrSaveItem();}};return d.ItemViewModel;})();d.init=function(){b.logger.debug("Initializing bcms.ko.grid module.");};b.registerInit(d.init);return d;});bettercms.define("bcms.markdown",["bcms.jquery","bcms","bcms.jquery.markitup"],function(a,c){var q={childWidgetOptions:{}},t={widgetOptionsButton:".markItUpButtonWidgetOption",iconsHeader:".markItUpHeader"},l,g,f,h,e,v=[],i=-1;function b(w,y){if(document.selection){var x=document.selection.createRange();x.text=w;}else{y.textarea.value=y.textarea.value.substring(0,y.caretPosition)+w+y.textarea.value.substring(y.caretPosition+y.selection.length,y.textarea.value.length);}y.textarea.setSelectionRange(y.selectionStart,y.selectionStart+y.selectionLength);y.textarea.scrollTop=y.scrollPosition;y.textarea.focus();}function s(w){var y=/<widget [^>]*>[^>.]*?<\/widget>/g,x;v=[];while((x=y.exec(w))!=null){v.push({start:x.index,end:x[0].length+x.index,value:x[0]});}}function k(z){var w;if(document.selection){if(browser.msie){var x=document.selection.createRange(),y=x.duplicate();y.moveToElementText(z);w=-1;while(y.inRange(x)){y.moveStart("character");w++;}}else{w=z.selectionStart;}}else{w=z.selectionStart;}return w;}function u(y,w){var x;if(y!==f||w){i=-1;for(x=0;x<v.length;x++){if(y>=v[x].start&&y<=v[x].end){i=x;break;}}}}function r(){var x=a("#"+g),y=x.val(),w=k(x.get(0));if(y!==h){s(y);}u(w,y!==h);if(i>-1){a(t.widgetOptionsButton).show();}else{a(t.widgetOptionsButton).hide();}h=y;f=w;}function n(w){var x={selection:w.selection,caretPosition:w.caretPosition,scrollPosition:w.scrollPosition,textarea:w.textarea};c.trigger(l.events.insertImage,{addHtml:function(y,z){var A=a.format("![{0}]({1})",z.alt,z.src);x.selectionStart=x.caretPosition+2;x.selectionLength=z.alt.length;b(A,x);}});}function m(w){var x={selection:w.selection,caretPosition:w.caretPosition,scrollPosition:w.scrollPosition,textarea:w.textarea};c.trigger(l.events.insertFile,{addHtml:function(z,y){var A=a.format("[{0}]({1})",y.html,y.href);x.selectionStart=x.caretPosition+1;x.selectionLength=y.html.length;b(A,x);}});}function p(w){var x={selection:w.selection,caretPosition:w.caretPosition,scrollPosition:w.scrollPosition,textarea:w.textarea};c.trigger(c.events.insertWidget,{onInsert:function(y){x.selectionStart=x.caretPosition+y.html.length;x.selectionLength=0;b(y.html,x);}});}function o(y,A){var z={selection:y.selection,caretPosition:y.caretPosition,scrollPosition:y.scrollPosition,textarea:y.textarea},x,w;for(x=0;x<A.length;x++){if(A[x].id==="pageOption"){w=A[x].openWith+A[x].placeholder+A[x].closeWith;z.selectionStart=A[x].openWith.length;z.selectionLength=A[x].placeholder.length;b(w,z);break;}}}function j(y){u(y.caretPosition);if(i<=-1){return;}var x=a(v[i].value),A=x.data("id"),w=x.data("assign-id"),z=null;if(!A||!w){return;}if(q.childWidgetOptions&&q.childWidgetOptions[g]&&q.childWidgetOptions[g][w]){z=q.childWidgetOptions[g][w];}c.trigger(l.events.editChildWidgetOptions,{widgetId:A,assignmentId:w,contentId:e,onCloseClick:function(B){if(!B.isValid(true)){return false;}q.childWidgetOptions[g][w]=B;return true;},optionListViewModel:z,editorType:l.cmsEditorType});}q.getChildWidgetOptions=function(w){return q.childWidgetOptions[w];};function d(y,A){A=a.extend({marginTop:0,marginBottom:0,topElements:[]},A);var z,B,x=y.closest(A.container).height(),C=0,w=A.parent?y.closest(A.parent).find(A.bottomElement).outerHeight(true):a(A.bottomElement).outerHeight(true);for(z=0;z<A.topElements.length;z++){B=A.topElements[z];C+=A.parent?y.closest(A.parent).find(B.element).outerHeight(B.takeMargins):a(B.element).outerHeight(B.takeMargins);}return x-C-w-A.marginTop-A.marginBottom;}q.initializeInstance=function(x,y,w,C,z){l=x;g=y;e=w;q.childWidgetOptions[g]={};var E=[],A,B,F;if(C.smartTags.length>0){for(A=0;A<C.smartTags.length;A++){B=C.smartTags[A];E.push({name:B.title,replaceWith:B.openWith!=null||B.closeWith!=null?"":B.text,placeHolder:B.placeholder,openWith:B.openWith,closeWith:B.closeWith});}}C=a.extend({previewParserPath:"",onShiftEnter:{keepDefault:false,openWith:"\n\n"},hideIcons:false,markupSet:[]},C);if(!C.hideIcons){C.markupSet=[{name:"Heading 1",key:"1",openWith:"# ",placeHolder:"Your title here...",className:"markItUpButtonH1"},{name:"Heading 2",key:"2",openWith:"## ",placeHolder:"Your title here...",className:"markItUpButtonH2"},{name:"Heading 3",key:"3",openWith:"### ",placeHolder:"Your title here...",className:"markItUpButtonH3"},{name:"Heading 4",key:"4",openWith:"#### ",placeHolder:"Your title here...",className:"markItUpButtonH4"},{name:"Heading 5",key:"5",openWith:"##### ",placeHolder:"Your title here...",className:"markItUpButtonH5"},{name:"Heading 6",key:"6",openWith:"###### ",placeHolder:"Your title here...",className:"markItUpButtonH6"},{name:"Bold",key:"B",openWith:"**",closeWith:"**",className:"markItUpButtonBold"},{name:"Italic",key:"I",openWith:"_",closeWith:"_",className:"markItUpButtonItalic"},{name:"Bulleted List",openWith:"* ",className:"markItUpButtonListBullet"},{name:"Numeric List",openWith:"1. ",className:"markItUpButtonListNumeric"},{name:"Picture",key:"P",className:"markItUpButtonPicture",afterInsert:n},{name:"Link",key:"L",className:"markItUpButtonLink",afterInsert:m},{name:"Widget",className:"markItUpButtonWidget",afterInsert:p},{name:"Insert Option",className:"markItUpButtonOption",afterInsert:function(G){o(G,C.smartTags);}},{name:"Quotes",openWith:"> ",className:"markItUpButtonQuotes"},{name:"Code Block / Code",openWith:"`",closeWith:"`",className:"markItUpButtonCode"},{name:"Smart tags",dropMenu:E},{name:"Widget Options",className:"markItUpButtonWidget markItUpButtonWidgetOption",beforeInsert:j}];}F=a("#"+y);F.markItUp(C);if(z){var D=function(){F.height(d(F,z));};D();a(window).bind("resize",D);a(window).on("disableResize",function(){a(window).unbind("resize",D);});}setTimeout(function(){a(t.widgetOptionsButton).hide();F.on("keyup click focus",r);r();if(C.hideIcons){a(t.iconsHeader).hide();}},50);};q.unbindResizeEvents=function(){};q.init=function(){c.logger.debug("Initializing bcms.markdown module.");};c.registerInit(q.init);return q;});bettercms.define("bcms.messages",["bcms.jquery"],function(a){var e={},b={},g={messagesBox:"#bcms-messages-box",messages:".bcms-js-messages:not(.bcms-custom-messages):first",success:".bcms-success-messages:first",info:".bcms-info-messages:first",warn:".bcms-warning-messages:first",error:".bcms-error-messages:first",scrollable:".bcms-scroll-window"},d={},c={};e.classes=b;e.selectors=g;e.links=d;e.globalization=c;function f(i){var h=null;this.options=a.extend({container:null,containerId:null,messageBoxId:null,enableAutoHide:true,autoHideTimeout:10000},i);if(i.container){var j=i.container;do{if(i.container instanceof a){h=j.find(g.messages).first();}else{h=a(j).find(g.messages).first();}if(h.length===0){j=j.parent();}}while(h.length===0&&j.length!==0);}else{if(i.containerId){h=a("#"+i.containerId).find(g.messages).first();}else{if(i.messageBoxId){h=a("#"+i.messageBoxId);}else{h=a(g.messages).first();}}}this.container=h;}f.prototype={addSuccessMessage:function(h){this.addMessage(g.success,h);return this;},addInfoMessage:function(h){this.addMessage(g.info,h);return this;},addWarningMessage:function(h){this.addMessage(g.warn,h);return this;},addErrorMessage:function(h){this.addMessage(g.error,h);return this;},clearMessages:function(){this.addMessage(g.success,null);this.addMessage(g.info,null);this.addMessage(g.warn,null);this.addMessage(g.error,null);return this;},addMessage:function(l,j){var m=this.options;var k=this.container.find(l);if(j){k.fadeIn();var h='<a class="bcms-messages-close bcms-js-btn-close">Close</a>';var i=a("<li>"+h+j+"</li>");i.find(".bcms-js-btn-close").on("click",function(){k.hide();});k.append(i);if(m.enableAutoHide){setTimeout(function(){i.animate({"line-height":"1px"},200,function(){var n=a(this).parent("ul:first");a(this).remove();if(n.find("li").length===0){n.fadeOut(100,function(){a(this).hide();});}});},m.autoHideTimeout);}}else{k.hide();k.empty();}}};e.box=function(i){var h=new f(i);return h;};e.refreshBox=function(h,k){var l=new f({container:h});l.clearMessages();if(k.Messages){var j=0;for(j=0;j<k.Messages.length;j++){if(k.Success){l.addSuccessMessage(k.Messages[j]);}else{l.addErrorMessage(k.Messages[j]);}}if(j>0){a(l.container).closest(g.scrollable).scrollTop(0);}}return l;};return e;});bettercms.define("bcms.modal",["bcms.jquery","bcms","bcms.tabs","bcms.ko.extenders","bcms.forms"],function(a,c,u,k,g){var m={},n=[],q="bcms-noscroll",s,t={title:".bcms-modal-title, .bcms-message-titles",accept:".bcms-modal-accept, .bcms-success-buttons-holder .bcms-btn-tertiary",cancel:".bcms-js-btn-cancel",close:".bcms-js-btn-close",focusElements:"[tabindex=-1], .bcms-modal-close, .bcms-success-buttons-holder .bcms-btn-secondary, .bcms-js-preview-box .bcms-btn-close",body:".bcms-modal-body, .bcms-error-frame, .bcms-popinfo-frame",content:".bcms-modal-content, .bcms-message-description",loader:".bcms-loader",scrollWindow:".bcms-window-tabbed-options",previewImage:".bcms-preview-image-frame img",previewImageContainer:".bcms-js-preview-box",previewFailure:".bcms-grid-image-holder",footer:".bcms-success-buttons-holder, .bcms-modal-footer",desirableStatus:".bcms-content-desirable-status",popinfoFrame:".bcms-popinfo-frame",errorFrame:".bcms-error-frame",loaderContainer:".bcms-window-options,.bcms-window-tabbed-options",readonly:"[data-readonly=true]",inUse:"[data-inuse=true]"},f={saveButton:"bcms-btn-tertiary bcms-modal-accept",deleteButton:"bcms-btn-secondary bcms-modal-accept",cancelButton:"bcms-btn-secondary bcms-js-btn-cancel",previewButton:"bcms-btn-quaternary",publishButton:"bcms-btn-tertiary",inactive:"bcms-inactive"},l={},h={save:null,cancel:null,ok:null,saveDraft:null,saveAndPublish:null,preview:null},i=false;m.selectors=t;m.links=l;m.globalization=h;m.classes=f;var j=false;m.getCount=function(){return n.length;};m.last=function(){if(n.length>0){return n[n.length-1];}return null;};function d(z,v,x,w){var y=this;y.dialog=null;y.order=x||0;y.title=k.observable(z||"");y.css=k.observable(v||"");y.disabled=k.observable(false);y.click=function(){if(w&&a.isFunction(w)){w(y.dialog,y);}};}function p(){var v=this;v.buttons=k.observableArray();}m.button=d;function o(A){this.options=a.extend({templateId:"bcms-modal-template",title:null,acceptTitle:null,acceptCss:null,disableAccept:false,onAcceptClick:null,cancelTitle:null,cancelCss:null,disableCancel:false,onCloseClick:null,content:null,onLoad:null,onShow:null,onAccept:null,onClose:null,cssClass:null,disableAnimation:true,disableMaxHeight:false,autoFocus:true,buttons:[]},A);var B=a("#"+this.options.templateId).html(),z=new p(this);this.container=a(B);this.model=z;if(c.language){this.container.attr("lang",c.language);}var v=new d();v.order=1;if(this.options.acceptTitle){v.title(this.options.acceptTitle);}else{v.title(h.save);}if(this.options.acceptCss){v.css(this.options.acceptCss);}else{v.css(f.saveButton);}if(this.options.disableAccept){v.disabled(!!this.options.disableAccept);}this.disableAcceptButton=function(){v.disabled(true);};this.disableExtraButtons=function(){for(var C in A.buttons){A.buttons[C].disabled(true);}};var x=new d();x.order=10;if(this.options.cancelTitle){x.title(this.options.cancelTitle);}else{x.title(h.cancel);}if(this.options.cancelCss){x.css(this.options.cancelCss);}else{x.css(f.cancelButton);}if(this.options.disableCancel){x.disabled(!!this.options.disableCancel);}if(this.options.title){this.setTitle(this.options.title);}if(this.options.content){this.setContent(this.options.content);}if(this.options.cssClass){this.setCssClass(this.options.cssClass);}z.buttons.push(v);z.buttons.push(x);if(A.buttons&&A.buttons.length>0){for(var y=0;y<A.buttons.length;y++){var w=A.buttons[y];w.dialog=this;if(!w.css()){w.css(f.previewButton);}z.buttons.push(w);}}z.buttons.sort(function(C,D){return C.order>D.order?1:-1;});if(a.isFunction(this.options.onLoad)){this.options.onLoad(this);}this.getLoaderContainer=function(){return this.container.find(t.loaderContainer);};}o.prototype={open:function(w){var y=this,v=y.container,z=y.model,A=c.getHighestZindex()+1,x=v.find(t.footer).get(0);this.options.id=A;if(x){k.applyBindings(z,x);}n.push(this);v.find(t.close).on("click",function(){y.closeClick();});v.find(t.cancel).on("click",function(){y.closeClick();});v.find(t.accept).on("click",function(){y.acceptClick();});a("html").addClass(q);v.hide().css("z-index",A).appendTo("body");if(w||this.options.disableAnimation){v.show();}else{v.fadeIn("fast");}if(a.isFunction(this.options.onShow)){this.options.onShow();}},acceptClick:function(){if(this.container.find("form").data("readonly")!==true){if(this.onAction(this.options.onAcceptClick)===true){return this.accept();}return false;}return false;},accept:function(){if(this.onAction(this.options.onAccept)===true){this.destroy();return true;}return false;},closeClick:function(){if(this.onAction(this.options.onCloseClick)===true){this.close();}},close:function(){if(this.onAction(this.options.onClose)===true){this.destroy();}},setTitle:function(v){this.title=v;this.container.find(t.title).empty().append(v);},setContent:function(v){try{this.container.find(t.content).empty().append(v);}catch(w){throw w;}finally{this.container.find(t.loader).remove();this.container.find(t.readonly).addClass(f.inactive);var x=this.container.find("form");if(x.data("readonly")===true){g.setFieldsReadOnly(x);this.disableAcceptButton();this.disableExtraButtons();}if(this.container.find(t.inUse).length){this.disableAcceptButton();this.disableExtraButtons();}if(a.validator&&a.validator.unobtrusive){a.validator.unobtrusive.parse(this.container);}u.initTabPanel(this.container);g.bindCheckboxes(this.container);if(this.options.autoFocus){this.setFocus();}}},setFocus:function(){if(this.container.find("form").data("readonly")===true){return;}var v=this.container.find("input:visible:first");if(v.length===0){v=this.container.find(t.focusElements).first();}if(v.length>0){if(v.is("input")){setTimeout(function(){v.focus();},100);}else{v.focus();}}},setCssClass:function(w){var v=this.container.find(t.body);if(this.cssClass){v.removeClass(this.cssClass);}this.cssClass=w;v.addClass(this.cssClass);},onAction:function(v){try{if(a.isFunction(v)){return v(this)!==false;}}catch(w){c.logger.error("Failed to execute action delegate. "+w.message);return false;}return true;},destroy:function(){this.container.find(t.accept).off("click");this.container.find(t.close).off("click");var v=a.inArray(this,n);if(v!==-1){n.splice(v,1);}if(n.length===0){a("html").removeClass(q);}if(this.options.disableAnimation){this.container.hide().remove();}else{this.container.hide(200,function(){a(this).remove();});}if(m.getCount()<1){r();}}};function e(){var v=a(document.activeElement);return v.is("body")||v.is("div")||v.is("input")||v.is(t.close);}function b(){var v,w;a(document).on("keydown.bcms.modal",function(x){var y=m.last();if(y){if(x.keyCode===27&&!y.options.disableCancel){if(e()){x.preventDefault();if(y!=w){w=y;y.closeClick();}}}else{if(x.keyCode===13&&!y.options.disableAccept){if(e()){x.preventDefault();if(y!=v){if(y.acceptClick()){v=y;}}}}}}});}function r(){i=false;a(document).off(".bcms.modal");}m.open=function(w){var v=new o(w);v.open();if(!i){b();i=true;}return v;};m.edit=function(x){x=a.extend({isPreviewAvailable:true,onSaveAndPublishClick:null,onPreviewClick:null,disableSaveDraft:false,disableSaveAndPublish:false,onSaveDraftClick:null},x);var w=[],v=function(D,E){var C=D.container.find(t.desirableStatus);if(C.length>0){C.val(E);}else{throw new Error(a.format("Dialog {0} should contain hidden input for a desirable status.",D.title));}},z=function(C){if(a.isFunction(x.onSaveAndPublishClick)){if(x.onSaveAndPublishClick(C)!==false){v(C,c.contentStatus.published);C.submitForm();}}else{v(C,c.contentStatus.published);C.submitForm();}},B=function(C){if(a.isFunction(x.onSaveDraftClick)){if(x.onSaveDraftClick(C)!==false){v(C,c.contentStatus.draft);C.submitForm();}}else{v(C,c.contentStatus.draft);C.submitForm();}};if(!x.disableSaveDraft&&!x.disableSaveAndPublish){var A=new d(h.saveAndPublish,f.publishButton,2,z);w.push(A);}if(!!x.isPreviewAvailable){var y=new d(h.preview,f.previewButton,3,function(C){if(a.isFunction(x.onPreviewClick)){if(x.onPreviewClick(C)!==false){v(C,c.contentStatus.preview);C.submitForm();}}else{v(C,c.contentStatus.preview);C.submitForm();}});w.push(y);}x.buttons=w;if(x.disableSaveDraft&&!x.disableSaveAndPublish){x.acceptTitle=h.saveAndPublish;x.onAcceptClick=z;}else{if(!x.disableSaveDraft){x.acceptTitle=h.saveDraft;x.onAcceptClick=B;}else{x.disableAccept=true;}}m.open(x);};m.alert=function(w){w=a.extend({disableAccept:true},w);w.templateId="bcms-modal-alert-template";w.disableAnimation=true;var v=m.open(w);v.container.find(t.errorFrame).get(0).focus();return v;};m.confirm=function(w){w=a.extend({acceptTitle:h.ok,cancelTitle:h.cancel},w);w.templateId="bcms-modal-confirm-template";w.disableAnimation=true;var v=m.open(w);v.container.find(t.popinfoFrame).get(0).focus();return v;};m.confirmDelete=function(w){w=a.extend({acceptTitle:h.ok,cancelTitle:h.cancel,acceptCss:f.deleteButton},w);w.templateId="bcms-modal-delete-template";w.disableAnimation=true;var v=m.open(w);v.container.find(t.errorFrame).get(0).focus();return v;};m.confirmWithDecline=function(w){w=a.extend({acceptTitle:h.yes,cancelTitle:h.cancel,declineTitle:h.no,onDecline:function(){return true;}},w);if(!a.isArray(w.buttons)){w.buttons=[];}w.buttons.push(new d(w.declineTitle,f.previewButton,2,function(y){var x=true;if(a.isFunction(w.onDecline)){x=w.onDecline();}if(x){y.destroy();}}));w.templateId="bcms-modal-confirm-template";w.disableAnimation=true;var v=m.open(w);v.container.find(t.popinfoFrame).get(0).focus();return v;};m.info=function(w){w=a.extend({acceptTitle:h.ok},w);w.templateId="bcms-modal-info-template";w.disableAnimation=true;w.disableCancel=true;var v=m.open(w);v.container.find(t.popinfoFrame).get(0).focus();return v;};m.imagePreview=function(A,v,z){z=a.extend({},z);z.templateId="bcms-image-preview-template";z.disableAnimation=true;var w=m.open(z),x=w.container.find(t.previewImage),y=false;x.attr("alt",v||"");x.on("load",function(){y=true;var B=w.container.find(t.previewImageContainer),C=B.find(t.previewFailure);C.hide();B.find(t.loader).hide();x.show();});x.on("error",function(){if(!y){var B=w.container.find(t.previewImageContainer),C=B.find(t.previewFailure);B.find(t.loader).hide();C.show();}});x.attr("src",A+(A.indexOf("?")!=-1?"&":"?")+(new Date()).getTime());return w;};m.showMessages=function(x){if(x.Messages){var v="";for(var w=0;w<x.Messages.length;w++){if(v){v+="<br />";}v+=x.Messages[w];}if(x.Success===true){m.info({content:v,disableAccept:true});}else{m.alert({content:v});}}};m.maximizeChildHeight=function(B,z,E){E=a.extend({substractHeight:60},E);if(B.length===0){return 0;}var C=a.isArray(B)?B:new Array(B),y=z.container.find(t.scrollWindow).first(),x=y.outerHeight(),D=0,w=0,A=0,v;a.each(C,function(){D+=a(this).outerHeight();A+=a(this).height();});if(y.length===0||D>=x){return A;}a.each(y.children(),function(){var F=a(this);w+=F.outerHeight();});w+=C.length*E.substractHeight;v=x-w;if(C.length>1){v=Math.floor(v/C.length);}A=0;if(v>0){a.each(C,function(){var F=a(this).height()+v;A+=F;a(this).height(F+"px");});}return A;};return m;});bettercms.define("bcms.options",["bcms.jquery","bcms","bcms.ko.extenders","bcms.ko.grid","bcms.datepicker","bcms.antiXss"],function(a,e,j,k,h,c){var o={},w={datePickers:".bcms-datepicker",datePickerTrigger:".ui-datepicker-trigger",datePickerBox:"#ui-datepicker-div:first",focusedElements:":focus",multioptionContainer:"#bcms-multi-opts"},m={},i={deleteOptionConfirmMessage:null,optionTypeText:null,optionTypeMultilineText:null,optionTypeInteger:null,optionTypeBoolean:null,optionTypeDateTime:null,optionTypeFloat:null,optionTypeCustom:null,optionTypeJavaScriptUrl:null,optionTypeCssUrl:null,datePickerTooltipTitle:null,optionValidationMessage:null,invariantLanguage:null},q={textType:1,integerType:2,floatType:3,dateTimeType:4,boolType:5,textMultilineType:21,javaScriptUrlType:51,cssUrlType:52,customType:99},u=[],f={hasDatePicker:"hasDatepicker"},v=0;o.links=m;o.globalization=i;o.selectors=w;o.registerCustomOptions=u;function g(z,x){var y=this;y.title=z;y.identifier=x;return y;}function b(x){var A=[],y,z,B;if(!x||!a.isArray(x)){return A;}for(y=0,z=x.length;y<z;y++){B=x[y];A.push(new g(B.Title,B.Identifier));}return A;}var p=(function(x){e.extendsClass(y,x);function y(B,E,D,F){var G=this,z,A,C;F=a.extend({showLanguages:false,languages:[],translationsEnabled:false,editorType:""},F);G.customOptions=b(D);G.optionTypes=j.observableArray();G.optionTypes.push({id:q.textType,name:i.optionTypeText});G.optionTypes.push({id:q.textMultilineType,name:i.optionTypeMultilineText});G.optionTypes.push({id:q.integerType,name:i.optionTypeInteger});G.optionTypes.push({id:q.floatType,name:i.optionTypeFloat});G.optionTypes.push({id:q.dateTimeType,name:i.optionTypeDateTime});G.optionTypes.push({id:q.boolType,name:i.optionTypeBoolean});G.optionTypes.push({id:q.javaScriptUrlType,name:i.optionTypeJavaScriptUrl});G.optionTypes.push({id:q.cssUrlType,name:i.optionTypeCssUrl});for(z=0,A=G.customOptions.length;z<A;z++){C={id:q.customType+":"+G.customOptions[z].identifier,name:G.customOptions[z].title};G.optionTypes.push(C);}G.attachDatePickers=function(){d(G);};G.serializeToObject=function(){var H=G.items(),K=[],I;for(I=0;I<H.length;I++){var J=H[I];if(J.isSelected==true&&J.isActive()){J.onSave();}K.push(J.toJson());}return K;};G.showLanguages=j.observable(F.showLanguages);G.languages=j.observableArray();G.languageId=j.observable("");G.language=F.showLanguages?new l(F.languages,null,G):null;G.translationsEnabled=F.translationsEnabled;G.editorType=F.editorType;G.suspendAddItemSubscribe=true;G.selectedTypeId=j.observable();G.isAddNewSelected=j.observable(false);G.selectedTypeId.subscribe(function(){if(!G.suspendAddItemSubscribe){G.isAddNewSelected(false);x.prototype.addNewItem.call(G);}});x.call(G,B,null,E,null);G.addOption=function(H){G.selectedTypeId(H.id);};G.addNewItem=function(H,I){G.suspendAddItemSubscribe=true;G.selectedTypeId(null);G.suspendAddItemSubscribe=false;G.isAddNewSelected(!G.isAddNewSelected());I.stopPropagation();};e.on(e.events.bodyClick,function(){G.isAddNewSelected(false);});}y.prototype.createItem=function(z){var A=new t(this,z);return A;};y.prototype.onLanguageChanged=function(z){if(z!=this.languageId()){this.languageId(z);this.changeLanguageForItems(this.items());}};y.prototype.changeLanguageForItems=function(A){for(var z=0;z<A.length;z++){A[z].activateTranslation(this.languageId());}};y.prototype.onAfterNewItemAdded=function(z){if(z.canEditOption()!==false&&z.key.domElement){a(z.key.domElement).focus();}z.calcType(this.selectedTypeId());};return y;})(k.ListViewModel);var r=(function(x){e.extendsClass(y,x);function y(A,D,B,E){x.call(this,A,D,B,E);var F=this;if(F.editorType=="page"&&e.languageId&&F.translationsEnabled){var z=F.items();for(var C=0;C<z.length;C++){z[C].activateDefaultOptionForLanguage(e.languageId);}}F.attachDatePickers=function(){d(F);};F.toJson=function(){var G=F.items(),I=[],H;for(H=0;H<G.length;H++){I.push(G[H].toJson());}return I;};}y.prototype.createItem=function(z){var A=new s(this,z);return A;};p.prototype.onLanguageChanged=function(z){if(z!=this.languageId()){this.languageId(z);this.changeLanguageForItems(this.items());}};p.prototype.changeLanguageForItems=function(A){for(var z=0;z<A.length;z++){A[z].activateTranslation(this.languageId());}};return y;})(p);function n(A){var x,y,z;for(x=0,z=A.items().length;x<z;x++){y=A.items()[x];if(y.isActive()){y.isSelected=true;}}}function d(z){var y=a(w.datePickerBox),x="bcmsEventsAttached";if(!y.data(x)){y.data(x,true);a(w.datePickerBox).on("click",function(){n(z);return false;});}}var t=(function(x){e.extendsClass(y,x);function y(D,C){x.call(this,D,C);var E=this,z,A,B;E.key=j.observable().extend({required:"",maxLength:{maxLength:j.maxLength.name},preventHtml:""});E.defaultValueBinding=j.observable().extend({optionValue:{self:E}}).extend({notify:"always"});E.valueBinding=j.observable().extend({optionValue:{self:E}}).extend({notify:"always"});E.type=j.observable();E.useDefaultValueBinding=j.observable(-1);E.canEditOption=j.observable(-1);E.canDeleteOption=true;E.translations=[];E.value=j.observable();E.valueHasFocus=j.observable(false);E.valueTranslations=[];E.defaultValue=j.observable();E.useDefaultValue=j.observable(false);E.typeName=j.observable();E.lastType=null;E.editableValue=E.getValueField();E.rowId=null;E.customType=j.observable();E.customOptionTitle=j.observable();E.customOptionTitleBinding=j.observable();E.customOptionDefaultTitle=j.observable();E.customOptionDefaultTitleBinding=j.observable();E.calcType=j.observable();E.translationsEnabled=D.translationsEnabled;E.oldValues={};E.editorType=D.editorType;E.registerFields(E.useDefaultValueBinding,E.key,E.defaultValueBinding,E.valueBinding,E.type,E.customType,E.calcType,E.customOptionTitleBinding,E.customOptionDefaultTitleBinding,E.customOptionTitle,E.customOptionDefaultTitle);E.getOptionTypeName=function(){var F,H=E.calcType();var G=D.optionTypes();for(F=0;F<G.length;F++){if(G[F].id==H){return G[F].name;}}return"";};E.getCalcType=function(){var H=E.type(),G=E.customType(),F="";if(H!=q.customType){return H;}else{for(z=0,A=E.parent.customOptions.length;z<A;z++){if(E.parent.customOptions[z].identifier==G){F=E.parent.customOptions[z].identifier;}}return H+":"+F;}};E.calcType.subscribe(function(G){var H=E.lastType,J=G,F="",I;if(G&&G.indexOf&&G.indexOf(q.customType)===0){I=G.indexOf(":");J=G.substr(0,I);F=G.substr(I+1,G.length-I);if(H){E.editableValue("");}}else{E.customOptionTitleBinding("");E.customOptionDefaultTitleBinding("");if(H==q.boolType){E.editableValue("");}if(H==q.customType){E.editableValue("");}if(G==q.boolType){var K=E.editableValue();if(K&&typeof K==="string"){K=K.toLowerCase();}if(K!=="true"&&K!==true){E.editableValue(false);}else{E.editableValue(true);}}}E.lastType=G;E.type(J);E.customType(F);E.typeName(E.getOptionTypeName());E.editableValue(E.editableValue());});E.initDatePickers=function(){E.parent.attachDatePickers();var F={onSelect:function(K,J){E.isSelected=true;E.editableValue(K);J.input.focus();},onChangeMonthYear:function(){E.isSelected=true;},onClose:function(K,J){}},I=a("#"+E.rowId),H,G=I.find(w.datePickers);if(!G.hasClass(f.hasDatePicker)){G.initializeDatepicker(i.datePickerTooltipTitle,F);H=I.find(w.datePickerTrigger);H.on("click",function(J){E.valueHasFocus(true);});H.on("focus",function(J){E.valueHasFocus(true);});}};E.preventFromSave=false;E.key(C.OptionKey);E.defaultValue(C.OptionDefaultValue);E.defaultValueBinding(C.OptionDefaultValue);E.valueBinding(C.OptionValue);E.value=j.observable(C.OptionValue);E.type(C.Type);if(C.Type==q.customType){E.customType(C.CustomType);E.customOptionDefaultTitleBinding(C.CustomOptionDefaultValueTitle);E.customOptionDefaultTitle(C.CustomOptionDefaultValueTitle);E.customOptionTitleBinding(C.CustomOptionValueTitle);E.customOptionTitle(C.CustomOptionValueTitle);}E.calcType(E.getCalcType(E));E.canEditOption(C.CanEditOption!==false);E.useDefaultValueBinding(!E.canEditOption()&&C.UseDefaultValue===true);E.useDefaultValue(!E.canEditOption()&&C.UseDefaultValue===true);E.canDeleteOption=C.CanDeleteOption!==false;if(C.Translations!=null){E.translations=C.Translations;}if(C.ValueTranslations!=null){E.valueTranslations=C.ValueTranslations;E.valueTranslations.forEach(function(F){F.UseDefaultValue=false;});}E.changeFieldsEditing();E.saveItem=function(){x.prototype.saveItem.call(E);var H=E.defaultValueBinding();if(H!=null){H=H.toString();}var F=E.customOptionDefaultTitleBinding();if(F!=null){F=F.toString();}var G=D.languageId();if(G==""){E.defaultValue(H);E.customOptionDefaultTitle(F);}else{var I=this.getTranslation(G);if(I==null){I={OptionValue:H,LanguageId:G,CustomOptionTitle:F};this.translations.push(I);}else{I.OptionValue=H;I.CustomOptionTitle=F;}}};E.getValueField().subscribe(function(){var F=a(w.focusedElements);if(F.length>0&&a.isFunction(F.datepicker)){F.datepicker("hide");}});E.onCustomOptionExecute=function(G,H,I){E.onItemSelect(E.valueHasFocus,G,null);var F=E.customType();if(!F){return;}for(z=0,A=u.length;z<A;z++){if(u[z].identifier==F){E.preventFromSave=true;u[z].onExecute(I,H,function(){setTimeout(function(){E.preventFromSave=false;},100);});return;}}};E.toJson=function(){var F={CustomType:E.customType(),OptionDefaultValue:E.defaultValue(),OptionKey:E.key(),Type:E.type(),Translations:E.translations};if(F.Type==q.customType){F.CustomOption={Identifier:E.customType()};}return F;};}y.prototype.getValueField=function(){return this.defaultValueBinding;};y.prototype.getDeleteConfirmationMessage=function(){return a.format(i.deleteOptionConfirmMessage,c.encodeHtml(this.key()));};y.prototype.changeFieldsEditing=function(){this.deletingIsDisabled(!this.canDeleteOption);};y.prototype.getRowId=function(){if(!this.rowId){this.rowId="bcms-option-row-"+v++;}return this.rowId;};y.prototype.getTranslation=function(A){var C=this.translations;if(C!=null){for(var z=0,B=C.length;z<B;z++){if(C[z].LanguageId==A){return C[z];}}}return null;};y.prototype.activateTranslation=function(B){var A=this.ClearFixValue(this.defaultValue());var z=null;if(this.type()==q.customType){z=this.ClearFixValue(this.customOptionDefaultTitle());}if(B==""){this.defaultValueBinding(A);this.customOptionDefaultTitleBinding(z);}else{var C=this.getTranslation(B);if(C==null){this.defaultValueBinding(A);this.customOptionDefaultTitleBinding(z);}else{var E=this.ClearFixValue(C.OptionValue);var D=this.ClearFixValue(C.CustomOptionTitle);this.defaultValueBinding(E);this.customOptionDefaultTitleBinding(D);}}};y.prototype.ClearFixValue=function(A){if(!A){return A;}if(this.type()==q.boolType){var z=A.toLowerCase();if(z=="true"){return true;}else{return false;}}return A;};y.prototype.editItem=function(){x.prototype.editItem.call(this);this.oldValues.key=this.key();this.oldValues.calcType=this.calcType();this.oldValues.customType=this.customType();this.oldValues.defaultValueBinding=this.defaultValueBinding();this.oldValues.customOptionDefaultTitleBinding=this.customOptionDefaultTitleBinding();};y.prototype.restoreOldValues=function(){this.useDefaultValueBinding(this.oldValues.useDefaultValueBinding);this.key(this.oldValues.key);this.defaultValueBinding(this.oldValues.defaultValueBinding);this.valueBinding(this.oldValues.valueBinding);this.customType(this.oldValues.customType);this.customOptionTitle(this.oldValues.customOptionTitle);this.customOptionDefaultTitleBinding(this.oldValues.customOptionDefaultTitleBinding);};y.prototype.onBodyClick=function(z){if(!this.preventFromSave){x.prototype.onBodyClick.call(this,z);}};return y;})(k.ItemViewModel);var s=(function(x){e.extendsClass(z,x);function z(B,A){x.call(this,B,A);var C=this;C.changeUseDefaultValue=function(D,E){if(C.isActive()){C.useDefaultValueBinding(!C.useDefaultValueBinding());e.stopEventPropagation(E);if(C.useDefaultValueBinding.domElement){a(C.useDefaultValueBinding.domElement).focus();}return false;}return true;};C.useDefaultValueBinding.subscribe(function(F){var E=C.parent.languageId();if(!C.isActive()){return;}if((C.translationsEnabled&&E==""&&C.parent.editorType=="widget")||!C.translationsEnabled){if(F){C.valueBinding(C.defaultValue());C.customOptionTitleBinding(C.customOptionDefaultTitle());}else{var I=C.type()==q.boolType?false:"";C.valueBinding(I);C.customOptionTitleBinding(I);}}else{if(C.parent.editorType=="page"&&e.languageId){E=e.languageId;}var H=C.getTranslation(E);if(F){var G;var D;if(H!=null){G=C.ClearFixValue(H.OptionValue);D=C.ClearFixValue(H.CustomOptionTitle);C.valueBinding(G);C.customOptionTitleBinding(D);}else{C.valueBinding(C.defaultValue());C.customOptionTitleBinding(C.customOptionDefaultTitle());}}else{var I=C.type()==q.boolType?false:"";C.valueBinding(I);C.customOptionTitleBinding(I);}}});C.toJson=function(){var E=[];C.valueTranslations.forEach(function(F){if(F.UseDefaultValue==false){E.push(F);}});var D={OptionValue:C.value(),UseDefaultValue:C.useDefaultValue(),OptionDefaultValue:C.defaultValue(),OptionKey:C.key(),Type:C.type(),ValueTranslations:E};if(D.Type==q.customType){D.CustomOption={Identifier:C.customType()};}return D;};C.saveItem=function(){x.prototype.saveItem.call(C);var H=C.useDefaultValueBinding();var G=C.valueBinding();if(G!=null){G=G.toString();}var D=C.customOptionTitleBinding();if(D!=null){D=D.toString();}var F=B.languageId();if(F==""){C.value(G);C.useDefaultValue(H);C.customOptionTitle(D);}else{var I=this.getValueTranslation(F);if(!H){if(I==null){I={OptionValue:G,LanguageId:F,UseDefaultValue:H,CustomOptionTitle:D};this.valueTranslations.push(I);}else{I.OptionValue=G;I.UseDefaultValue=H;I.CustomOptionTitle=D;}}else{if(I!=null){var E=C.valueTranslations.indexOf(I);if(E>-1){C.valueTranslations.splice(E,1);}}}}};}function y(B,A){if(!B.editingIsDisabled){B.editingIsDisabled=j.observable();}B.editingIsDisabled(A);}z.prototype.getValueField=function(){return this.valueBinding;};z.prototype.changeFieldsEditing=function(){var A=this.canEditOption()===false;y(this.key,A);y(this.calcType,A);this.deletingIsDisabled(A);};z.prototype.editItem=function(){x.prototype.editItem.call(this);this.oldValues.useDefaultValueBinding=this.useDefaultValueBinding();this.oldValues.valueBinding=this.valueBinding();this.oldValues.customOptionTitle=this.customOptionTitle();if(!this.editingIsDisabled()&&this.useDefaultValueBinding()&&this.useDefaultValueBinding.domElement){a(this.useDefaultValueBinding.domElement).focus();}};z.prototype.getValueTranslation=function(B){var D=this.valueTranslations;if(D!=null){for(var A=0,C=D.length;A<C;A++){if(D[A].LanguageId==B){return D[A];}}}return null;};z.prototype.activateDefaultOptionForLanguage=function(B){if(B){var D=this.getTranslation(B);if(D!=null){var C=this.ClearFixValue(D.OptionValue);this.defaultValueBinding(C);if(this.useDefaultValue()){this.valueBinding(C);}if(this.type()==q.customType){var A=this.ClearFixValue(D.CustomOptionTitle);this.customOptionDefaultTitleBinding(A);if(this.useDefaultValue()){this.customOptionTitleBinding(A);}}}}};z.prototype.activateTranslation=function(E){var D=this.ClearFixValue(this.defaultValue());var H=this.ClearFixValue(this.value());var B=null;var A=null;if(this.type()==q.customType){B=this.ClearFixValue(this.customOptionTitle());A=this.ClearFixValue(this.customOptionDefaultTitle());}if(E==""){if(this.useDefaultValue()&&H==null){this.valueBinding(D);this.customOptionTitleBinding(A);}else{this.valueBinding(H);this.customOptionTitleBinding(B);}this.useDefaultValueBinding(this.useDefaultValue());this.customOptionDefaultTitleBinding(A);this.defaultValueBinding(D);}else{var G=this.getTranslation(E);var F;var C;if(G==null){this.defaultValueBinding(D);this.customOptionDefaultTitleBinding(A);this.valueBinding(D);this.customOptionTitleBinding(A);}else{F=this.ClearFixValue(G.OptionValue);C=this.ClearFixValue(G.CustomOptionTitle);this.defaultValueBinding(F);this.customOptionDefaultTitleBinding(C);this.valueBinding(F);this.customOptionTitleBinding(C);}if(this.useDefaultValue()==false){this.defaultValueBinding(H);this.customOptionDefaultTitleBinding(B);this.valueBinding(H);this.customOptionTitleBinding(B);}var I=this.getValueTranslation(E);if(I!=null){F=this.ClearFixValue(I.OptionValue);C=this.ClearFixValue(I.CustomOptionTitle);this.valueBinding(F);this.customOptionTitleBinding(C);this.useDefaultValueBinding(false);}else{this.useDefaultValueBinding(true);}}};return z;})(t);function l(A,z,B){var C=this,x,y;C.languageId=j.observable(z);C.languages=[];C.languages.push({key:"",value:i.invariantLanguage});for(x=0,y=A.length;x<y;x++){C.languages.push({key:A[x].Key,value:A[x].Value});}C.languageId.subscribe(function(D){if(a.isFunction(B.onLanguageChanged)){B.onLanguageChanged(D);}});return C;}o.createOptionsViewModel=function(x,z,y,A){return new p(x,z,y,A);};o.createOptionValuesViewModel=function(x,z,y,A){return new r(x,z,y,A);};j.extenders.optionValue=function(A,x){var y="optionValue",z=x.self;return j.extenders.koValidationExtender(y,A,function(E){if(!z.type){return;}var H=z.type(),D=H==q.floatType||H==q.integerType,C=H==q.dateTimeType,B=!z.useDefaultValueBinding()&&E&&((D&&isNaN(Number(E.replace(",","."))))||(C&&!h.isDateValid(E))),G,F;if(!B&&E&&H==q.integerType){F=new RegExp(/^-?\d*$/);B=!F.test(E);}G=B?a.format(i.optionValidationMessage,z.key()||"",z.getOptionTypeName()||""):"";A.validator.setError(y,B,G);});};o.registerCustomOption=function(x,y){u.push({identifier:x,onExecute:y});};o.init=function(){e.logger.debug("Initializing bcms.options module.");};e.registerInit(o.init);return o;});bettercms.define("bcms.preview",["bcms.jquery","bcms","bcms.modal","bcms.dynamicContent"],function(a,b,g,d){var h={},c={},i={previewZoom:".bcms-js-zoom-overlay",elementsToDisable:".bcms-modal-content a, .bcms-modal-content input, .bcms-modal-content select"},f={previewPageUrl:null},e={closeButtonTitle:null};h.classes=c;h.selectors=i;h.links=f;h.globalization=e;h.initialize=function(j,k){k=k||i.previewZoom;j.find(k).on("click",function(){var l=a(this),m=l.data("previewTitle"),n=l.data("previewUrl");g.open({title:m,cancelTitle:e.closeButtonTitle,disableAccept:true,onLoad:function(o){d.bindDialog(o,n,{contentAvailable:function(){o.container.find(i.elementsToDisable).attr("disabled","disabled").on("click",function(){return false;});}});}});});};h.previewPageContent=function(l,k){var j=a.format(f.previewPageUrl,l,k);window.open(j,b.previewWindow);};return h;});bettercms.define("bcms.redirect",["bcms.jquery","bcms","bcms.modal"],function(a,b,e){var f={},g={},d={},c={reloadingPageTitle:null,reloadingPageMessage:null,redirectingPageTitle:null,redirectingPageMessage:null};f.selectors=g;f.links=d;f.globalization=c;f.RedirectWithAlert=function(j,i){i=a.extend({title:c.redirectingPageTitle,message:c.redirectingPageMessage,timeout:0},i);h(i);setTimeout(function(){window.location.href=j;},i.timeout);};f.ReloadWithAlert=function(i){i=a.extend({title:c.reloadingPageTitle,message:c.reloadingPageMessage,timeout:0},i);h(i);setTimeout(b.reload,i.timeout);};function h(i){e.info({title:i.title,content:i.message,disableCancel:true,disableAccept:true});}return f;});bettercms.define("bcms.sidemenu",["bcms.jquery","bcms","bcms.security","bcms.store"],function(a,b,g,k){var i={},c={stateOpen:"bcms-state-open",sideMenuRight:"bcms-sidemenu-right",editingOnClass:"bcms-on"},h={container:"#bcms-sidemenu",leftRightHandle:"#bcms-sidemenu-position-handle",openCloseHandle:"#bcms-sidemenu-hide",editOnOffHandle:"#bcms-sidemenu-switch",draggHandle:"#bcms-sidemenu-draghandle",html:"html",button:".bcms-sidemenu-button",footerTextHolder:".bcms-sidemenu-stick-text"},e={sideMenuOnTheRight:"bcms.sideMenuOnTheRight",sideMenuOffsetTop:"bcms.sideMenuOffsetTop",sideMenuOpen:"bcms.sideMenuOpen",editingOn:"bcms.editingOn"},j,f={},d={stickRightMenuTitle:null,stickLeftMenuTitle:null};i.classes=c;i.selectors=h;i.links=f;i.globalization=d;i.open=function(m){var n=j.hasClass(c.sideMenuRight),o="0px",l=n?{right:o}:{left:o};k.set(e.sideMenuOpen,"1");if(m){j.css(l).addClass(c.stateOpen);return;}j.animate(l,100,function(){j.addClass(c.stateOpen);});};i.close=function(m){var n=j.hasClass(c.sideMenuRight),o="-260px",l=n?{right:o}:{left:o};k.remove(e.sideMenuOpen);if(m){j.removeClass(c.stateOpen);return;}j.animate(l,100,function(){j.removeClass(c.stateOpen);});};i.isOpen=function(){return j.hasClass(c.stateOpen);};i.moveToRight=function(){k.set(e.sideMenuOnTheRight,"1");j.css({left:"auto",right:i.isOpen()?"0px":"-260px"}).addClass(c.sideMenuRight);};i.moveToLeft=function(){k.remove(e.sideMenuOnTheRight);j.css({left:i.isOpen()?"0px":"-260px",right:"auto"}).removeClass(c.sideMenuRight);};i.turnEditModeOn=function(){b.trigger(b.events.editModeOn);};i.turnEditModeOff=function(){b.trigger(b.events.editModeOff);};i.init=function(){b.logger.debug("Initialize sidebar");a(h.container).hide();j=a(h.container);var q=k.get(e.sideMenuOffsetTop),n=k.get(e.sideMenuOnTheRight),o=k.get(e.sideMenuOpen),m=k.get(e.editingOn),p;function s(t){var v=a(window).height();var u=j.height();if(t>v-u){j.css("top",(v-u-20)+"px");}else{if(t>=0){j.css("top",t+"px");}}}function r(){if(q){s(q);}}if(q){s(q);}if(n){i.moveToRight(true);}if(o){i.open(true);}var l=g.IsAuthorized(["BcmsEditContent","BcmsPublishContent"]);if(m&&l){i.turnEditModeOn();}a(h.leftRightHandle).on("click",function(){if(j.hasClass(c.sideMenuRight)){i.moveToLeft();}else{i.moveToRight();}});a(h.openCloseHandle).on("click",function(){if(i.isOpen()){i.close();}else{i.open();}});if(l){a(h.editOnOffHandle).on("click",function(){if(a(h.html).hasClass(c.editingOnClass)){i.turnEditModeOff();}else{i.turnEditModeOn();}});}j.draggable({axis:"y",handle:h.draggHandle,containment:"window",stop:function(t,w){var v=w.position.top;var x=a(window).height();var u=j.height();if(v>x-u){v=(windowHeight-sidemenuHeight-20);j.css("top",v+"px");}else{if(v<0){v=0;j.css("top","0px");}}q=v;k.set(e.sideMenuOffsetTop,v);},start:function(){p=a(window).width()/2;},drag:function(t){var u=t.clientX;if(n){if(u<p){n=false;i.moveToLeft();}}else{if(u>p){n=true;i.moveToRight();}}}});j.show();window.addEventListener("resize",r);};b.registerInit(i.init);return i;});bettercms.define("bcms.siteSettings",["bcms.jquery","bcms","bcms.modal","bcms.dynamicContent","bcms.tabs","bcms.ko.extenders","bcms.messages","bcms.forms"],function(a,b,i,c,m,f,h,d){var k={},j={container:"#bcms-site-settings",menu:"#bcms-site-settings-menu",placeHolder:"#bcms-site-settings-placeholder",firstMenuButton:"#bcms-site-settings-menu .bcms-onclick-action:first",loaderContainer:".bcms-js-settings-window",mainContainer:".bcms-js-settings-window",tabsTemplate:"#bcms-site-setting-tab-template",tabsTemplateChildDiv:"div",modalMessages:"#bcms-modal-messages"},g={loadSiteSettingsUrl:null},e={siteSettingsTitle:null,closeButtonTitle:null},l=null;k.selectors=j;k.links=g;k.globalization=e;k.siteSettingsModalWindow=l;k.contentId=0;k.openSiteSettings=function(){l=i.open({title:k.globalization.siteSettingsTitle,cancelTitle:e.closeButtonTitle,disableAccept:true,onLoad:function(n){c.setContentFromUrl(n,k.links.loadSiteSettingsUrl,{done:function(){k.selectFirstMenuItem();a("bcms-btn-search").on("click",function(){a(this).parent().addClass("bcms-active-search");});}});},onClose:function(){l=null;}});};k.setContent=function(n,o,p){if(l&&(!o||o==k.contentId)){h.refreshBox(l.container.find(j.modalMessages),{});l.container.find(j.placeHolder).empty().append(n);if(a.validator&&a.validator.unobtrusive){a.validator.unobtrusive.parse(l.container);}if(!p){m.initTabPanel(l.container);}d.bindCheckboxes(l.container);}};k.disableAccept=function(){if(l){l.disableAccept();}};k.selectFirstMenuItem=function(){a(j.firstMenuButton).trigger("click");};k.getModalDialog=function(){return l;};k.getMainContainer=function(){return l.container.find(j.mainContainer);};k.getLoaderContainer=function(){if(l){return l.container.find(j.loaderContainer);}return null;};k.TabListViewModel=function(r,q){var o=this;o.tabs=[];for(var n=0;n<r.length;n++){var p=r[n];p.tabId="bcms-tab-"+(n+1);p.href="#"+p.tabId;p.parent=q;o.tabs.push(p);}};k.TabViewModel=function(q,r,n,o){var p=this;p.title=q;p.url=r;p.isInitialized=false;p.container=false;p.spinContainer=false;p.parent=null;p.tabId=null;p.href=null;p.contentId=null;p.onContentAvailable=function(s){if(p.contentId==k.contentId){p.isInitialized=true;if(n&&a.isFunction(n)){n(p.container,s);}p.onContentShow();}};p.tabClick=function(){p.parent.selectTab(p.tabId);h.refreshBox(l.container.find(j.modalMessages),{});if(!p.isInitialized){p.spinContainer=l.container.find(j.loaderContainer);p.container=l.container.find(p.href).find(j.tabsTemplateChildDiv);p.contentId=k.contentId;c.setContentFromUrl(p,p.url,{done:p.onContentAvailable});}else{p.onContentShow();}return true;};p.getLoaderContainer=function(){return p.spinContainer;};p.setContent=function(s){if(p.contentId==k.contentId){p.container.html(s);}};p.onContentShow=function(){if(a.isFunction(o)){o(p.container);}};};k.initContentTabs=function(q){k.contentId++;var o=m.initTabPanel(l.container,{skipInit:true}),p=new k.TabListViewModel(q,o),n=a(a(j.tabsTemplate).html());k.setContent(n,null,true);f.cleanNode(l.container.find(j.placeHolder).get(0));f.applyBindings(p,l.container.find(j.placeHolder).get(0));if(q.length>0){q[0].tabClick();}};return k;});(function(n){var l={},a=n.document,g="localStorage",h="script",i;l.disabled=false;l.enabled=!l.disabled;l.version="1.3.17";l.set=function(e,p){};l.get=function(p,e){};l.has=function(e){return l.get(e)!==undefined;};l.remove=function(e){};l.clear=function(){};l.transact=function(p,e,q){if(q==null){q=e;e=null;}if(e==null){e={};}var r=l.get(p,e);q(r);l.set(p,r);};l.getAll=function(){};l.forEach=function(){};l.serialize=function(e){return JSON.stringify(e);};l.deserialize=function(q){if(typeof q!="string"){return undefined;}try{return JSON.parse(q);}catch(p){return q||undefined;}};function f(){try{return(g in n&&n[g]);}catch(e){return false;}}if(f()){i=n[g];l.set=function(e,p){if(l.enabled){if(p===undefined){return l.remove(e);}i.setItem(e,l.serialize(p));return p;}else{return null;}};l.get=function(p,e){var q=l.deserialize(i.getItem(p));return(q===undefined?e:q);};l.remove=function(e){i.removeItem(e);};l.clear=function(){i.clear();};l.getAll=function(){var e={};l.forEach(function(p,q){e[p]=q;});return e;};l.forEach=function(e){for(var p=0;p<i.length;p++){var q=i.key(p);e(q,l.get(q));}};}else{if(a.documentElement.addBehavior){var k,j;try{j=new ActiveXObject("htmlfile");j.open();j.write("<"+h+">document.w=window</"+h+'><iframe src="/favicon.ico"></iframe>');j.close();k=j.w.frames[0].document;i=k.createElement("div");}catch(b){i=a.createElement("div");k=a.body;}var o=function(e){return function(){var p=Array.prototype.slice.call(arguments,0);p.unshift(i);k.appendChild(i);i.addBehavior("#default#userData");i.load(g);var q=e.apply(l,p);k.removeChild(i);return q;};};var c=new RegExp("[!\"#$%&'()*+,/\\\\:;<=>?@[\\]^`{|}~]","g");function d(e){return e.replace(/^d/,"___$&").replace(c,"___");}l.set=o(function(p,e,q){e=d(e);if(q===undefined){return l.remove(e);}p.setAttribute(e,l.serialize(q));p.save(g);return q;});l.get=o(function(q,p,e){p=d(p);var r=l.deserialize(q.getAttribute(p));return(r===undefined?e:r);});l.remove=o(function(p,e){e=d(e);p.removeAttribute(e);p.save(g);});l.clear=o(function(r){var p=r.XMLDocument.documentElement.attributes;r.load(g);for(var q=0,e;e=p[q];q++){r.removeAttribute(e.name);}r.save(g);});l.getAll=function(p){var e={};l.forEach(function(q,r){e[q]=r;});return e;};l.forEach=o(function(s,q){var p=s.XMLDocument.documentElement.attributes;for(var r=0,e;e=p[r];++r){q(e.name,l.deserialize(s.getAttribute(e.name)));}});}}try{var m="__storejs__";l.set(m,m);if(l.get(m)!=m){l.disabled=true;}l.remove(m);}catch(b){l.disabled=true;}l.enabled=!l.disabled;bettercms.define("bcms.store",[],function(){return l;});})(window);bettercms.define("bcms.security",["bcms.jquery","bcms","bcms.ko.extenders","bcms.messages","bcms.autocomplete"],function(a,e,j,l,d){var m={},f={},n={},k={isAuthorized:null,rolesSuggestionServiceUrl:null,usersSuggestionServiceUrl:null},h={},c=[];m.classes=f;m.selectors=n;m.links=k;m.globalization=h;function i(r){try{var s=a.format(k.isAuthorized,r),q=a.parseJSON(a.ajax({type:"POST",url:s,cache:false,async:false}).responseText);if(q.Success===false||q.Success===true){c[r]=q.Success;if(q.Success===true){return true;}}}catch(p){e.logger.error("Error occurred while checking if role(s) is authorized.");}return false;}m.IsAuthorized=function(p){for(var q=0;q<p.length;q++){var r=p[q];var s=c[r];if(s===true||s===false){if(s===true){return true;}}else{if(i(r)){return true;}}}return false;};j.extenders.uniqueAccessRuleIdentity=function(s,q){var r="uniqueAccessRuleIdentity",p=q.message||"Identity {0} exits!";return j.extenders.koValidationExtender(r,s,function(u){var t=g(q.identities(),u,q.isRole),v=t?a.format(p,u):"";s.validator.setError(r,t,v);});};function g(q,r,t){var p,v=q.length,s=a.trim(r).toUpperCase();for(p=0;p<v;p++){var u=q[p];if(u.IsForRole()===t&&a.trim(u.Identity()).toUpperCase()==s){return true;}}return false;}function o(p){this.Identity=j.observable(p.Identity);this.AccessLevel=j.observable(p.AccessLevel||3);this.IsForRole=j.observable(p.IsForRole);}var b=(function(p){e.extendsClass(q,p);function q(t,v,r,s,u){var w={serviceUrl:s,width:"100%"};var x=this;x.identities=t;x.isInAddMode=r;x.clickPlus=function(){if(x.isInAddMode()===(v?"role":"user")&&!!x.newItem()){var y=x.newItem();if(!y||x.newItem.hasError()){return;}x.isExpanded(false);x.clearItem();x.identities.push(new o({Identity:y,IsForRole:v}));x.isInAddMode("none");}else{x.clearItem();x.isExpanded(false);if(x.isInAddMode()===(v?"role":"user")){x.isInAddMode("none");}else{x.isInAddMode(v?"role":"user");setTimeout(function(){x.isExpanded(true);},50);}}};p.call(x,u,w);x.items.subscribe(function(y){x.clickPlus();});}return q;})(d.AutocompleteListViewModel);m.createUserAccessViewModel=function(p){var t=[],u=[];if(p){a.each(p,function(v,w){if(w.IsForRole){t.push(w.Identity);}else{u.push(w.Identity);}});}var r=j.observableArray(),q=j.observable("none"),s={UserAccessList:r,userAccessControl:new b(r,false,q,k.usersSuggestionServiceUrl,u),roleAccessControl:new b(r,true,q,k.rolesSuggestionServiceUrl,t),removeUser:function(v){s.UserAccessList.remove(v);},getPropertyIndexer:function(v,w){return"UserAccessList["+v+"]."+w;}};if(p){a.each(p,function(v,w){s.UserAccessList.push(new o(w));});}return s;};m.updateUserAccessViewModel=function(q,p){var r=[],s=[];q.userAccessControl.removeAll();q.roleAccessControl.removeAll();q.UserAccessList.removeAll();if(p){a.each(p,function(t,u){if(u.IsForRole){r.push(u.Identity);}else{s.push(u.Identity);}});}q.userAccessControl.applyItemList(s);q.roleAccessControl.applyItemList(r);if(p){a.each(p,function(t,u){q.UserAccessList.push(new o(u));});}q.userAccessControl.clearItem();q.userAccessControl.isExpanded(false);q.userAccessControl.isInAddMode("none");q.roleAccessControl.clearItem();q.roleAccessControl.isExpanded(false);q.roleAccessControl.isInAddMode("none");};return m;});bettercms.define("bcms.tabs",["bcms.jquery","bcms"],function(a,b){var h={},c={activeTabLink:"bcms-active"},f={tabContent:".bcms-tab-single",firstTabContent:".bcms-tab-single:first",tabLink:".bcms-tab-item",firstTabLink:"div.bcms-tab-item:first",activeTabLink:".bcms-active",tabsHeader:".bcms-js-tab-header"},e={},d={};h.selectors=f;h.links=e;h.globalization=d;function g(i,j){j=a.extend({skipInit:false},j);this.container=i;this.options=j;}g.prototype={init:function(){if(this.options.skipInit){return;}var j=this,i=this.container;i.find(f.tabLink).click(function(){var k=a(this).data("name");j.selectTab(k);return false;});this.selectFirstTab();},selectTab:function(m){if(!m){return;}if(m.indexOf("#")!==0){m="#"+m;}var l=this.container.find('[data-name="'+m+'"]'),j=l.parent();j.find(f.activeTabLink).removeClass(c.activeTabLink);l.addClass(c.activeTabLink);var k=this.container.find(m),i=k.parent();i.children(f.tabContent).hide();k.show();},selectFirstTab:function(){var i=this.container.find(f.firstTabLink).data("name");this.selectTab(i);},selectTabOfElement:function(i){var j=a(i).parents(f.tabContent).attr("id");this.selectTab(j);}};h.initTabPanel=function(i,j){var k=new g(i,j);k.init();return k;};h.getTabPanelOfElement=function(i){var k=a(i).parents(f.firstTabContent);if(k.length>0){var j=k.parent();var m;do{m=j.find(f.tabsHeader);j=j.parent();}while(j.length!==0&&m.length===0);if(m.length!==0){var l=new g(m.parent());return l;}}return null;};return h;});bettercms.define("bcms.tooltip",["bcms.jquery","bcms"],function(a,c){var f={},d=0,e={message:"p",close:".bcms-tip-close",arrowContainer:".bcms-tooltip-box"},b={topLeft:"bcms-tooltip-box bcms-tooltip-tl",topRight:"bcms-tooltip-box bcms-tooltip-tr",bottomLeft:"bcms-tooltip-box bcms-tooltip-bl",bottomRight:"bcms-tooltip-box bcms-tooltip-br"};f.selectors=e;function g(i){var j=a("#bcms-tooltip-template").html(),h=a(j);this.options=a.extend({message:null,elementPositioning:null},i);this.container=h;if(i.message){this.setMessage(i.message);}}g.prototype={create:function(i){var j=this,h=j.container,k=c.getHighestZindex()+1;this.options.id="bcms-tooltip-"+d++;h.find(e.close).on("click",function(){j.hide();});a(document.body).bind("click",function(l){if(a(l.target).closest(e.arrowContainer).length==0){j.hide();}});h.hide().css("z-index",k).attr("id",this.options.id).insertAfter(i);j.handlePosition(i);h.fadeIn("fast");},handlePosition:function(l){var k=this.options.elementPositioning,j=this.container,i=this.container.find(e.arrowContainer),h=j.height(),o=a(l).scrollParent().offset()||{top:0,left:0},p=k.position.top,m=k.position.left-k.width-8,n=l.offset();i.removeClass();if(n.top-15-o.top<h){p=k.position.top+k.height+15;i.addClass(b.topLeft);}else{p=k.position.top-h-k.height/2-10;i.addClass(b.bottomLeft);}j.css({top:p,left:m});},setMessage:function(h){this.message=h;this.container.find(e.message).empty().append(h);},hide:function(){this.container.hide();},destroy:function(){this.container.find(e.close).off("click");this.container.remove();}};f.hideVisible=function(){a(".bcms-tooltip-holder").hide();};f.create=function(h,j){var i=new g(j);i.create(h);return i;};f.initialize=function(){a(document).on("click.bcms.tooltip",".bcms-tooltip-mark",function(){var h=a(this),k=h.data("ref"),j;if(k){j=a("#"+k);if(j.length>0&&j.is(":hidden")){f.hideVisible();j.fadeIn("fast");}else{j.hide();}}else{var i=h.data("message");if(i){f.hideVisible();j=f.create(h,{message:i,elementPositioning:{position:h.position(),width:h.width(),height:h.height()}});h.data("ref",j.options.id);}}});};c.registerInit(f.initialize);return f;});bettercms.define("bcms.tags",["bcms.jquery","bcms","bcms.dynamicContent","bcms.siteSettings","bcms.inlineEdit","bcms.grid","bcms.ko.extenders","bcms.autocomplete","bcms.antiXss"],function(a,d,e,l,f,h,i,c,b){var m={},k={deleteTagLink:"div.bcms-action-delete",addTagButton:"#bcms-site-settings-add-tag",tagName:".bcms-tag-name",tagOldName:"input.bcms-tag-old-name",tagNameEditor:"input.bcms-tag-name",tagsListForm:"#bcms-tags-form",tagsSearchButton:"#bcms-tags-search-btn",tagsSearchField:".bcms-search-query",deleteCategoryLink:"div.bcms-action-delete",addCategoryButton:"#bcms-site-settings-add-category",categoryName:".bcms-category-name",categoryOldName:"input.bcms-category-old-name",categoryNameEditor:"input.bcms-category-name",categoriesListForm:"#bcms-categories-form",categoriesSearchButton:"#bcms-categories-search-btn",categoriesSearchField:".bcms-search-query",},j={loadSiteSettingsCategoryListUrl:null,loadSiteSettingsTagListUrl:null,saveTagUrl:null,deleteTagUrl:null,saveCategoryUrl:null,deleteCategoryUrl:null,tagSuggestionServiceUrl:null},g={confirmDeleteTagMessage:"Delete tag?",confirmDeleteCategoryMessage:"Delete category?"};m.links=j;m.globalization=g;m.getTagData=function(p){var q=p.find(k.deleteTagLink).data("id"),r=p.find(k.deleteTagLink).data("version"),o=p.find(k.tagNameEditor).val();return{Id:q,Version:r,Name:o};};m.searchSiteSettingsTags=function(p,o){h.submitGridForm(p,function(q){l.setContent(q);m.initSiteSettingsTagsEvents(q,true);var r=o.find(k.tagsSearchField);h.focusSearchInput(r);});};m.initSiteSettingsTagsEvents=function(p,s){var q=l.getModalDialog(),o=q.container;var r=q.container.find(k.tagsListForm);h.bindGridForm(r,function(t){l.setContent(t);m.initSiteSettingsTagsEvents(t);});r.on("submit",function(t){t.preventDefault();m.searchSiteSettingsTags(r,o);return false;});o.find(k.tagsSearchButton).on("click",function(){var t=a(this).parent();if(!t.hasClass("bcms-active-search")){r.find(k.tagsSearchField).prop("disabled",false);t.addClass("bcms-active-search");r.find(k.tagsSearchField).focus();}else{r.find(k.tagsSearchField).prop("disabled",true);t.removeClass("bcms-active-search");r.find(k.tagsSearchField).val("");}});o.find(k.addTagButton).on("click",function(){f.addNewRow(o);});if(s===true){r.find(k.tagsSearchButton).parent().addClass("bcms-active-search");}else{r.find(k.tagsSearchField).prop("disabled",true);}f.initialize(o,{saveUrl:j.saveTagUrl,deleteUrl:j.deleteTagUrl,onSaveSuccess:m.setTagFields,rowDataExtractor:m.getTagData,deleteRowMessageExtractor:function(t){return a.format(g.confirmDeleteTagMessage,t.Name);}});q.setFocus();};m.setTagFields=function(p,o){if(o.Data){p.find(k.tagName).html(b.encodeHtml(o.Data.Name));p.find(k.tagNameEditor).val(o.Data.Name);p.find(k.tagOldName).val(o.Data.Name);}};m.getCategoryData=function(r){var o=r.find(k.deleteCategoryLink).data("id"),p=r.find(k.deleteCategoryLink).data("version"),q=r.find(k.categoryNameEditor).val();return{Id:o,Version:p,Name:q};};m.searchSiteSettingsCategories=function(p,o){h.submitGridForm(p,function(q){l.setContent(q);m.initSiteSettingsCategoriesEvents(q);var r=o.find(k.categoriesSearchField);h.focusSearchInput(r);});};m.initSiteSettingsCategoriesEvents=function(){var p=l.getModalDialog(),o=p.container;var q=p.container.find(k.categoriesListForm);h.bindGridForm(q,function(r){l.setContent(r);m.initSiteSettingsCategoriesEvents(r);});q.on("submit",function(r){r.preventDefault();m.searchSiteSettingsCategories(q,o);return false;});o.find(k.categoriesSearchButton).on("click",function(){m.searchSiteSettingsCategories(q,o);});o.find(k.addCategoryButton).on("click",function(){f.addNewRow(o);});f.initialize(o,{saveUrl:j.saveCategoryUrl,deleteUrl:j.deleteCategoryUrl,onSaveSuccess:m.setCategoryFields,rowDataExtractor:m.getCategoryData,deleteRowMessageExtractor:function(r){return a.format(g.confirmDeleteCategoryMessage,r.Name);}});p.setFocus();};m.setCategoryFields=function(p,o){if(o.Data){p.find(k.categoryName).html(b.encodeHtml(o.Data.Name));p.find(k.categoryNameEditor).val(o.Data.Name);p.find(k.categoryOldName).val(o.Data.Name);}};m.loadSiteSettingsCategoryList=function(){e.bindSiteSettings(l,j.loadSiteSettingsCategoryListUrl,{contentAvailable:function(){m.initSiteSettingsCategoriesEvents();}});};m.loadSiteSettingsTagList=function(){e.bindSiteSettings(l,j.loadSiteSettingsTagListUrl,{contentAvailable:function(){m.initSiteSettingsTagsEvents();}});};var n=(function(o){d.extendsClass(p,o);function p(r){var q={serviceUrl:j.tagSuggestionServiceUrl,pattern:"Tags[{0}]"};o.call(this,r,q);}return p;})(c.AutocompleteListViewModel);m.TagsListViewModel=n;m.init=function(){d.logger.debug("Initializing bcms.tags module.");};d.registerInit(m.init);return m;});